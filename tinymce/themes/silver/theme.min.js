!function(){"use strict";function t(t){return function(e){return o=typeof(n=e),(null===n?"null":"object"==o&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==o&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":o)===t;var n,o}}function e(t){return function(e){return typeof e===t}}function n(t){return function(e){return t===e}}function o(t){return null==t}function r(t,e){if(d(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return;return 1}}function i(){}function u(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}}function a(t){return function(){return t}}function c(t){return t}function s(t,e){return t===e}var l=t("string"),f=t("object"),d=t("array"),m=n(null),g=e("boolean"),p=n(void 0),h=function(t){return!o(t)},v=e("function"),b=e("number");function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}function x(t){return function(e){return!t(e)}}function w(t){return function(){throw new Error(t)}}var S=a(!1),k=a(!0),C=tinymce.util.Tools.resolve("tinymce.ThemeManager"),O=function(){return(O=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function _(t,e){var n={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function T(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||((o=o||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function E(){return D}var D={fold:function(t,e){return t()},isSome:S,isNone:k,getOr:c,getOrThunk:A,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:c,orThunk:A,map:E,each:i,bind:E,exists:S,forall:k,filter:function(){return D},toArray:function(){return[]},toString:a("none()")};function A(t){return t()}function B(t,e){return yt.call(t,e)}function M(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1}function F(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n}function I(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=bt.call(t,o,o+e);n.push(r)}return n}function R(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o}function N(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var u=t[r];(e(u,r)?n:o).push(u)}return{pass:n,fail:o}}function P(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n}function V(t,e,n){return function(t){for(var o,r=t.length-1;0<=r;r--)o=t[r],n=e(n,o,r)}(t),n}function H(t,e,n){return St(t,(function(t,o){n=e(n,t,o)})),n}function L(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return vt.some(i);if(n(i,o))break}return vt.none()}(t,e,S)}function z(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n))return vt.some(n);return vt.none()}function U(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!d(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);xt.apply(e,t[n])}return e}function j(t,e){return U(R(t,e))}function W(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0}function G(t){var e=bt.call(t,0);return e.reverse(),e}function X(t,e){return P(t,(function(t){return!wt(e,t)}))}function q(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}function Y(t){return[t]}function K(t,e){var n=bt.call(t,0);return n.sort(e),n}function J(t,e){return 0<=e&&e<t.length?vt.some(t[e]):vt.none()}function $(t){return J(t,0)}function Q(t){return J(t,t.length-1)}function Z(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return vt.none()}function tt(t,e){for(var n=Ct(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}}function et(t,e){return _t(t,(function(t,n){return{k:n,v:e(t,n)}}))}function nt(t,e){var n=[];return tt(t,(function(t,o){n.push(e(t,o))})),n}function ot(t,e){for(var n=Ct(t),o=0,r=n.length;o<r;o++){var i=n[o],u=t[i];if(e(u,i,t))return vt.some(u)}return vt.none()}function rt(t){return nt(t,c)}function it(t,e){return Tt(t,e)?vt.from(t[e]):vt.none()}function ut(t,e){return Tt(t,e)&&void 0!==t[e]&&null!==t[e]}function at(t,e,n){return void 0===n&&(n=s),t.exists((function(t){return n(t,e)}))}function ct(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e}function st(t,e){return t?vt.some(e):vt.none()}function lt(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e}function ft(t,e){return-1!==t.indexOf(e)}function dt(t){return 0<t.length}function mt(t){return void 0!==t.style&&v(t.style.getPropertyValue)}function gt(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}}var pt,ht=function(t){function e(){return r}function n(e){return e(t)}var o=a(t),r={fold:function(e,n){return n(t)},isSome:k,isNone:S,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return ht(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?r:D},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return r},vt={some:ht,none:E,from:function(t){return null==t?D:ht(t)}},bt=Array.prototype.slice,yt=Array.prototype.indexOf,xt=Array.prototype.push,wt=function(t,e){return-1<B(t,e)},St=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)},kt=v(Array.from)?Array.from:function(t){return bt.call(t)},Ct=Object.keys,Ot=Object.hasOwnProperty,_t=function(t,e){var n={};return tt(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},Tt=function(t,e){return Ot.call(t,e)},Et=function(t,e,n){return t.isSome()&&e.isSome()?vt.some(n(t.getOrDie(),e.getOrDie())):vt.none()},Dt=function(t,e){return lt(t,e,0)},At=function(t,e){return lt(t,e,t.length-e.length)},Bt=(pt=/^\s+|\s+$/g,function(t){return t.replace(pt,"")}),Mt={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return gt(n.childNodes[0])},fromTag:function(t,e){return gt((e||document).createElement(t))},fromText:function(t,e){return gt((e||document).createTextNode(t))},fromDom:gt,fromPoint:function(t,e,n){return vt.from(t.dom.elementFromPoint(e,n)).map(gt)}};function Ft(t){return t.dom.nodeName.toLowerCase()}function It(t){return function(e){return e.dom.nodeType===t}}function Rt(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}}function Nt(t,e){var n=String(e).toLowerCase();return L(t,(function(t){return t.search(n)}))}function Pt(t){return function(e){return ft(e,t)}}function Vt(t){return window.matchMedia(t).matches}function Ht(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function Lt(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount}function zt(t,e){return t.dom===e.dom}function Ut(t,e){return ln().browser.isIE()?(n=t.dom,o=e.dom,r=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(o)&r)):(i=t.dom)!==(u=e.dom)&&i.contains(u);var n,o,r,i,u}function jt(t){return Mt.fromDom(t.dom.ownerDocument)}function Wt(t){return qe(t)?t:jt(t)}function Gt(t){return Mt.fromDom(Wt(t).dom.documentElement)}function Xt(t){return Mt.fromDom(Wt(t).dom.defaultView)}function qt(t){return vt.from(t.dom.parentNode).map(Mt.fromDom)}function Yt(t){return vt.from(t.dom.offsetParent).map(Mt.fromDom)}function Kt(t){return R(t.dom.childNodes,Mt.fromDom)}function Jt(t,e){var n=t.dom.childNodes;return vt.from(n[e]).map(Mt.fromDom)}function $t(t,e){return{element:t,offset:e}}function Qt(t,e){var n=Kt(t);return 0<n.length&&e<n.length?$t(n[e],0):$t(t,e)}function Zt(t){return Ye(t)&&h(t.dom.host)}function te(t){return Zt(t)?t:Mt.fromDom(Wt(t).dom.body)}function ee(t){return Mt.fromDom(t.dom.host)}function ne(t,e,n){if(!(l(n)||g(n)||b(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}function oe(t,e,n){ne(t.dom,e,n)}function re(t,e){var n=t.dom;tt(e,(function(t,e){ne(n,e,t)}))}function ie(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n}function ue(t,e){return vt.from(ie(t,e))}function ae(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)}function ce(t,e){t.dom.removeAttribute(e)}function se(t,e,n){if(!l(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);mt(t)&&t.style.setProperty(e,n)}function le(t,e){mt(t)&&t.style.removeProperty(e)}function fe(t,e,n){se(t.dom,e,n)}function de(t,e){var n=t.dom;tt(e,(function(t,e){se(n,e,t)}))}function me(t,e){var n=t.dom;tt(e,(function(t,e){t.fold((function(){le(n,e)}),(function(t){se(n,e,t)}))}))}function ge(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||vn(t)?o:xn(n,e)}function pe(t,e){var n=t.dom,o=xn(n,e);return vt.from(o).filter((function(t){return 0<t.length}))}function he(t,e,n){var o=Mt.fromTag(t);return fe(o,e,n),pe(o,e).isSome()}function ve(t,e){le(t.dom,e),at(ue(t,"style").map(Bt),"")&&ce(t,"style")}function be(t){return t.dom.offsetWidth}function ye(t,e){function n(n){var o=e(n);if(o<=0||null===o){var r=ge(n,t);return parseFloat(r)||0}return o}function o(t,e){return H(e,(function(e,n){var o=ge(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)}return{set:function(e,n){if(!b(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;mt(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return r<e?e-r:0}}}function xe(t){return wn.get(t)}function we(t){return wn.getOuter(t)}function Se(t,e){return void 0!==t?t:void 0!==e?e:0}function ke(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return kn(n.offsetLeft,n.offsetTop);var i=Se(null==o?void 0:o.pageYOffset,r.scrollTop),u=Se(null==o?void 0:o.pageXOffset,r.scrollLeft),a=Se(r.clientTop,n.clientTop),c=Se(r.clientLeft,n.clientLeft);return Cn(t).translate(u-c,i-a)}function Ce(t){return On.get(t)}function Oe(t){return On.getOuter(t)}function _e(t){function e(){return t.stopPropagation()}function n(){return t.preventDefault()}var o=u(n,e);return{target:Mt.fromDom(function(t){if(mn()&&h(t.target)){var e=Mt.fromDom(t.target);if(Ge(e)&&hn(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return $(n)}}return vt.from(t.target)}(t).getOr(t.target)),x:t.clientX,y:t.clientY,stop:e,prevent:n,kill:o,raw:t}}function Te(t,e,n,o,r){var i,u,a=(i=n,u=o,function(t){i(t)&&u(_e(t))});return t.dom.addEventListener(e,a,r),{unbind:y(_n,t,e,a,r)}}function Ee(t,e){qt(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))}function De(t,e){vt.from(t.dom.nextSibling).map(Mt.fromDom).fold((function(){qt(t).each((function(t){Tn(t,e)}))}),(function(t){Ee(t,e)}))}function Ae(t,e){Jt(t,0).fold((function(){Tn(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))}function Be(t,e){St(e,(function(e){Tn(t,e)}))}function Me(t){t.dom.textContent="",St(Kt(t),(function(t){En(t)}))}function Fe(t){var e,n=Kt(t);0<n.length&&(e=t,St(n,(function(t){Ee(e,t)}))),En(t)}function Ie(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return kn(n,o)}function Re(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)}function Ne(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}}function Pe(t){var e=void 0===t?window:t,n=e.document,o=Ie(Mt.fromDom(n)),r=void 0===e?window:e;return(ln().browser.isFirefox()?vt.none():vt.from(r.visualViewport)).fold((function(){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;return Ne(o.left,o.top,n,r)}),(function(t){return Ne(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height)}))}function Ve(t){var e,n=Ie(Mt.fromDom(document)),o=(e=An).owner(t),r=Dn(e,o);return vt.some(r).fold(y(ke,t),(function(e){var o=Cn(t),r=V(e,(function(t,e){var n=Cn(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return kn(r.left+o.left+n.left,r.top+o.top+n.top)}))}function He(t){var e=Ve(t),n=Oe(t),o=we(t);return Bn(e.left,e.top,n,o)}function Le(){return Ke(0,0)}function ze(t){function e(t){return function(){return n===t}}var n=t.current,o=t.version;return{current:n,version:o,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(Ze),isSafari:e("Safari")}}function Ue(t){function e(t){return function(){return n===t}}var n=t.current,o=t.version;return{current:n,version:o,isWindows:e(nn),isiOS:e("iOS"),isAndroid:e(on),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(rn),isFreeBSD:e(un),isChromeOS:e(an)}}"undefined"!=typeof window||Function("return this;")();var je,We,Ge=It(1),Xe=It(3),qe=It(9),Ye=It(11),Ke=function(t,e){return{major:t,minor:e}},Je={nu:Ke,detect:function(t,e){var n,o,r=String(e).toLowerCase();return 0===t.length?Le():(o=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,n=r))?Ke(i(1),i(2)):{major:0,minor:0};function i(t){return Number(n.replace(o,"$"+t))}},unknown:Le},$e=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qe={browsers:a([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return ft(t,"edge/")&&ft(t,"chrome")&&ft(t,"safari")&&ft(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,$e],search:function(t){return ft(t,"chrome")&&!ft(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return ft(t,"msie")||ft(t,"trident")}},{name:"Opera",versionRegexes:[$e,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pt("firefox")},{name:"Safari",versionRegexes:[$e,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(ft(t,"safari")||ft(t,"mobile/"))&&ft(t,"applewebkit")}}]),oses:a([{name:"Windows",search:Pt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return ft(t,"iphone")||ft(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Pt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pt("linux"),versionRegexes:[]},{name:"Solaris",search:Pt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Ze="Firefox",tn=function(){return ze({current:void 0,version:Je.unknown()})},en=ze,nn=(a("Edge"),a("Chrome"),a("IE"),a("Opera"),a(Ze),a("Safari"),"Windows"),on="Android",rn="Solaris",un="FreeBSD",an="ChromeOS",cn=function(){return Ue({current:void 0,version:Je.unknown()})},sn=Ue,ln=(a(nn),a("iOS"),a(on),a("Linux"),a("OSX"),a(rn),a(un),a(an),Rt((function(){return t=navigator.userAgent,e=vt.from(navigator.userAgentData),n=Vt,h=Qe.browsers(),v=Qe.oses(),b=e.bind((function(t){return e=h,Z(t.brands,(function(t){var n=t.brand.toLowerCase();return L(e,(function(t){var e;return n===(null===(e=t.brand)||void 0===e?void 0:e.toLowerCase())})).map((function(e){return{current:e.name,version:Je.nu(parseInt(t.version,10),0)}}))}));var e})).orThunk((function(){return Nt(h,e=t).map((function(t){var n=Je.detect(t.versionRegexes,e);return{current:t.name,version:n}}));var e})).fold(tn,en),y=Nt(v,o=t).map((function(t){var e=Je.detect(t.versionRegexes,o);return{current:t.name,version:e}})).fold(cn,sn),{browser:b,os:y,deviceType:(i=b,u=t,c=n,s=(r=y).isiOS()&&!0===/ipad/i.test(u),l=r.isiOS()&&!s,d=(f=r.isiOS()||r.isAndroid())||c("(pointer:coarse)"),m=s||!l&&f&&c("(min-device-width:768px)"),g=l||f&&!m,p=i.isSafari()&&r.isiOS()&&!1===/safari/i.test(u),{isiPad:a(s),isiPhone:a(l),isTablet:a(m),isPhone:a(g),isTouch:a(d),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:a(p),isDesktop:a(!g&&!m&&!p)})};var t,e,n,o,r,i,u,c,s,l,f,d,m,g,p,h,v,b,y}))),fn=qt,dn=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),mn=a(dn),gn=dn?function(t){return Mt.fromDom(t.dom.getRootNode())}:Wt,pn=function(t){var e=gn(t);return Zt(e)?vt.some(e):vt.none()},hn=function(t){return h(t.dom.shadowRoot)},vn=function(t){var e=Xe(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;var n,o,r=e.ownerDocument;return pn(Mt.fromDom(e)).fold((function(){return r.body.contains(e)}),(n=vn,o=ee,function(t){return n(o(t))}))},bn=function(){return yn(Mt.fromDom(document))},yn=function(t){var e=t.dom.body;if(null==e)throw new Error("Body is not available yet");return Mt.fromDom(e)},xn=function(t,e){return mt(t)?t.style.getPropertyValue(e):""},wn=ye("height",(function(t){var e=t.dom;return vn(t)?e.getBoundingClientRect().height:e.offsetHeight})),Sn=function(t,e){return{left:t,top:e,translate:function(n,o){return Sn(t+n,e+o)}}},kn=Sn,Cn=function(t){var e,n=t.dom,o=n.ownerDocument.body;return o===n?kn(o.offsetLeft,o.offsetTop):vn(t)?(e=n.getBoundingClientRect(),kn(e.left,e.top)):kn(0,0)},On=ye("width",(function(t){return t.dom.offsetWidth})),_n=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Tn=function(t,e){t.dom.appendChild(e.dom)},En=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Dn=function(t,e){return t.view(e).fold(a([]),(function(e){var n=t.owner(e),o=Dn(t,n);return[e].concat(o)}))},An=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?vt.none():vt.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(Mt.fromDom)},owner:jt}),Bn=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Mn=function(t){var e=ke(t),n=Oe(t),o=we(t);return Bn(e.left,e.top,n,o)},Fn=function(){return Pe(window)},In=function(t){return{isValue:k,isError:S,getOr:a(t),getOrThunk:a(t),getOrDie:a(t),or:function(e){return In(t)},orThunk:function(e){return In(t)},fold:function(e,n){return n(t)},map:function(e){return In(e(t))},mapError:function(e){return In(t)},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOptional:function(){return vt.some(t)}}},Rn=function(t){return{isValue:S,isError:k,getOr:c,getOrThunk:function(t){return t()},getOrDie:function(){return w(String(t))()},or:c,orThunk:function(t){return t()},fold:function(e,n){return e(t)},map:function(e){return Rn(t)},mapError:function(e){return Rn(e(t))},each:i,bind:function(e){return Rn(t)},exists:S,forall:k,toOptional:vt.none}},Nn={value:In,error:Rn,fromOption:function(t,e){return t.fold((function(){return Rn(e)}),In)}};function Pn(t,e,n){return t.stype===je.Error?e(t.serror):n(t.svalue)}function Vn(t){return{stype:je.Value,svalue:t}}function Hn(t){return{stype:je.Error,serror:t}}function Ln(t,e,n,o){return{tag:"field",key:t,newKey:e,presence:n,prop:o}}function zn(t,e,n){switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}}function Un(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i,u=e[r];for(i in u)Tt(u,i)&&(o[i]=t(o[i],u[i]))}return o}}function jn(t){return{tag:"defaultedThunk",process:t}}function Wn(t){return jn(a(t))}function Gn(t){return{tag:"mergeWithThunk",process:t}}function Xn(t){return f(t)&&100<Ct(t).length?" removed due to size":JSON.stringify(t,null,2)}function qn(t,e){return Ho([{path:t,getErrorInfo:e}])}function Yn(t){return{extract:function(e,n){return zo(t(n),(function(t){return qn(e,a(t))}))},toString:a("val")}}function Kn(t,e,n,o){return o(it(t,e).getOrThunk((function(){return n(t)})))}function Jn(t,e,n,o,r){function i(t){return r.extract(e.concat([o]),t)}function u(t){return t.fold((function(){return Vo(vt.none())}),(function(t){var n=r.extract(e.concat([o]),t);return Uo(n,vt.some)}))}var c,s,l,f,d,m;switch(t.tag){case"required":return l=e,m=i,it(f=n,d=o).fold((function(){return t=d,e=f,qn(l,(function(){return'Could not find valid *required* value for "'+t+'" in '+Xn(e)}));var t,e}),m);case"defaultedThunk":return Kn(n,o,t.process,i);case"option":return u(it(n,o));case"defaultedOptionThunk":return s=t.process,u(it(c=n,o).map((function(t){return!0===t?s(c):t})));case"mergeWithThunk":return Kn(n,o,a({}),(function(e){return i(Go(t.process(n),e))}))}}function $n(t){return{extract:function(e,n){return t().extract(e,n)},toString:function(){return t().toString()}}}function Qn(t){var e=Ko(t),n=V(t,(function(t,e){return zn(e,(function(e){var n;return Go(t,((n={})[e]=!0,n))}),a(t))}),{});return{extract:function(t,o){var r,u,a,c,s,l,f=P(g(o)?[]:Ct((a=h,c=u={},s=function(t,e){c[e]=t},l=i,tt(o,(function(t,e){(a(t,e)?s:l)(t,e)})),u)),(function(t){return!ut(n,t)}));return 0===f.length?e.extract(t,o):(r=f,qn(t,(function(){return"There are unsupported fields: ["+r.join(", ")+"] specified"})))},toString:e.toString}}function Zn(t){return{extract:function(e,n){var o=R(n,(function(n,o){return t.extract(e.concat(["["+o+"]"]),n)}));return qo(o)},toString:function(){return"array("+t.toString()+")"}}}function to(t){return{extract:function(e,n){for(var o=[],r=0,i=t;r<i.length;r++){var u=i[r].extract(e,n);if(u.stype===je.Value)return u;o.push(u)}return qo(o)},toString:function(){return"oneOf("+R(t,(function(t){return t.toString()})).join(", ")+")"}}}function eo(t,e){return Yn((function(n){var o=typeof n;return t(n)?Vo(n):Ho("Expected type: "+e+" but got: "+o)}))}function no(t,e){return{extract:function(n,o){return it(o,t).fold((function(){return e=t,qn(n,(function(){return'Choice schema did not contain choice key: "'+e+'"'}));var e}),(function(t){return r=n,i=o,it(u=e,a=t).fold((function(){return t=u,e=a,qn(r,(function(){return'The chosen schema: "'+e+'" did not exist in branches: '+Xn(t)}));var t,e}),(function(t){return t.extract(r.concat(["branch: "+a]),i)}));var r,i,u,a}))},toString:function(){return"chooseOn("+t+"). Possible values: "+Ct(e)}}}function oo(t){return Yn((function(e){return t(e).fold(Ho,Vo)}))}function ro(t,e){return n=function(e){return t(e).fold(Hn,Vn)},o=e,{extract:function(t,e){var r=Ct(e),i=Zn(Yn(n)).extract(t,r);return Lo(i,(function(n){var r=R(n,(function(t){return Ln(t,t,{tag:"required",process:{}},o)}));return Ko(r).extract(t,e)}))},toString:function(){return"setOf("+o.toString()+")"}};var n,o}function io(t,e,n){return Po((r=e.extract([t],o=n),jo(r,(function(t){return{input:o,errors:t}}))));var o,r}function uo(t){return t.fold((function(t){throw new Error(rr(t))}),c)}function ao(t,e,n){return uo(io(t,e,n))}function co(t,e){return no(t,et(e,Ko))}function so(t){return oo((function(e){return wt(t,e)?Nn.value(e):Nn.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))}function lo(t){return ir(t,t,{tag:"required",process:{}},$o())}function fo(t,e){return ir(t,t,{tag:"required",process:{}},e)}function mo(t){return fo(t,Zo)}function go(t,e){return ir(t,t,{tag:"required",process:{}},so(e))}function po(t){return fo(t,er)}function ho(t,e){return ir(t,t,{tag:"required",process:{}},Ko(e))}function vo(t,e){return ir(t,t,{tag:"required",process:{}},Jo(e))}function bo(t,e){return ir(t,t,{tag:"required",process:{}},Zn(e))}function yo(t){return ir(t,t,{tag:"option",process:{}},$o())}function xo(t,e){return ir(t,t,{tag:"option",process:{}},e)}function wo(t){return xo(t,Qo)}function So(t){return xo(t,Zo)}function ko(t){return xo(t,er)}function Co(t,e){return xo(t,Zn(e))}function Oo(t,e){return xo(t,Ko(e))}function _o(t,e){return ir(t,t,Wn(e),$o())}function To(t,e,n){return ir(t,t,Wn(e),n)}function Eo(t,e){return To(t,e,Qo)}function Do(t,e){return To(t,e,Zo)}function Ao(t,e,n){return To(t,e,so(n))}function Bo(t,e){return To(t,e,tr)}function Mo(t,e){return To(t,e,er)}function Fo(t,e,n){return To(t,e,Zn(n))}function Io(t,e,n){return To(t,e,Ko(n))}function Ro(t){var e=t;return{get:function(){return e},set:function(t){e=t}}}function No(t){if(!d(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return St(t,(function(o,r){var i=Ct(o);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],a=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!d(a))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+i);return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:function(t){var o=Ct(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!W(e,(function(t){return wt(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,n)},log:function(t){console.log(t,{constructors:e,constructor:u,params:n})}}}})),n}(We=je={})[We.Error=0]="Error",We[We.Value=1]="Value";var Po=function(t){return Pn(t,Nn.error,Nn.value)},Vo=Vn,Ho=Hn,Lo=function(t,e){return t.stype===je.Value?e(t.svalue):t},zo=function(t,e){return t.stype===je.Error?e(t.serror):t},Uo=function(t,e){return t.stype===je.Value?{stype:je.Value,svalue:e(t.svalue)}:t},jo=function(t,e){return t.stype===je.Error?{stype:je.Error,serror:e(t.serror)}:t},Wo=Pn,Go=Un((function(t,e){return f(t)&&f(e)?Go(t,e):e})),Xo=Un((function(t,e){return e})),qo=function(t){var e,n,o=(e=[],n=[],St(t,(function(t){Pn(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n});return 0<o.errors.length?u(Ho,U)(o.errors):Vo(o.values)},Yo=Yn(Vo),Ko=function(t){return{extract:function(e,n){for(var o={},r=[],i=0,u=t;i<u.length;i++)zn(u[i],(function(t,i,u,a){var c=Jn(u,e,n,t,a);Wo(c,(function(t){r.push.apply(r,t)}),(function(t){o[i]=t}))}),(function(t,e){o[t]=e(n)}));return 0<r.length?Ho(r):Vo(o)},toString:function(){return"obj{\n"+R(t,(function(t){return zn(t,(function(t,e,n,o){return t+" -> "+o.toString()}),(function(t,e){return"state("+t+")"}))})).join("\n")+"}"}}},Jo=u(Zn,Ko),$o=a(Yo),Qo=eo(b,"number"),Zo=eo(l,"string"),tr=eo(g,"boolean"),er=eo(v,"function"),nr=function(t){if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every((function(e){return nr(t[e])}));default:return!1}},or=Yn((function(t){return nr(t)?Vo(t):Ho("Expected value to be acceptable for sending via postMessage")})),rr=function(t){return"Errors: \n"+R(10<(e=t.errors).length?e.slice(0,10).concat([{path:[],getErrorInfo:a("... (only showing first ten failures)")}]):e,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()})).join("\n")+"\n\nInput object: "+Xn(t.input);var e},ir=Ln,ur=function(t,e){return{tag:"custom",newKey:t,instantiator:e}};function ar(t,e){return(n={})[t]=e,n;var n}function cr(t){return e={},St(t,(function(t){e[t.key]=t.value})),e;var e}function sr(t){return v(t)?t:S}function lr(t,e,n){for(var o=t.dom,r=sr(n);o.parentNode;){o=o.parentNode;var i=Mt.fromDom(o),u=e(i);if(u.isSome())return u;if(r(i))break}return vt.none()}function fr(t,e,n){var o=e(t),r=sr(n);return o.orThunk((function(){return r(t)?vt.none():lr(t,e,r)}))}function dr(t,e){return zt(t.element,e.event.target)}function mr(t){if(!ut(t,"can")&&!ut(t,"abort")&&!ut(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return O(O({},ni),t)}function gr(t){return a("alloy."+t)}function pr(t,e){Ji(t,t.element,e,{})}function hr(t,e,n){Ji(t,t.element,e,n)}function vr(t){pr(t,Di())}function br(t,e,n){Ji(t,e,n,{})}function yr(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)}function xr(t,e){return{key:t,value:mr({abort:e})}}function wr(t){return{key:t,value:mr({run:function(t,e){e.event.prevent()}})}}function Sr(t,e){return{key:t,value:mr({run:e})}}function kr(t,e,n){return{key:t,value:mr({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}}function Cr(t){return function(e){return{key:t,value:mr({run:function(t,n){dr(t,n)&&e(t,n)}})}}}function Or(t,e,n){var o,r=e.partUids[n];return Sr(o=t,(function(t,e){t.getSystem().getByUid(r).each((function(t){yr(t,t.element,o,e)}))}))}function _r(t,e){return Sr(t,(function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).getOrThunk((function(){return fr(o.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),S).getOr(t)}));e(t,r,n)}))}function Tr(t){return Sr(t,(function(t,e){e.cut()}))}function Er(t,e){return Cr(t)(e)}function Dr(t){return t.dom.innerHTML}function Ar(t,e){var n,o,r=jt(t).dom,i=Mt.fromDom(r.createDocumentFragment());Be(i,(n=e,(o=(r||document).createElement("div")).innerHTML=n,Kt(Mt.fromDom(o)))),Me(t),Tn(t,i)}function Br(t){if(Zt(t))return"#shadow-root";var e=Mt.fromDom(t.dom.cloneNode(!1)),n=Mt.fromTag("div"),o=Mt.fromDom(e.dom.cloneNode(!0));return Tn(n,o),Dr(n)}function Mr(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ru+String(e)}function Fr(t){var e=Ge(t)?t.dom[cu]:null;return vt.from(e)}function Ir(t){function e(e){return"The component must be in a context to execute: "+e+(t?"\n"+Br(t().element)+" is not in context.":"")}function n(t){return function(){throw new Error(e(t))}}function o(t){return function(){console.warn(e(t))}}return{debugInfo:a("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:S}}function Rr(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:mu(i)}},t}function Nr(t){return ar(gu,t)}function Pr(t){return e=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,T([e.getApis(),e],n,!1))},o=(n=t.toString()).indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:mu(i.slice(1))}},e;var e,n,o,r,i}function Vr(t,e){var n={};return tt(t,(function(t,o){tt(t,(function(t,r){var i=it(n,r).getOr([]);n[r]=i.concat([e(o,t)])}))})),n}function Hr(t){return{classes:p(t.classes)?[]:t.classes,attributes:p(t.attributes)?{}:t.attributes,styles:p(t.styles)?{}:t.styles}}function Lr(t){return t.cHandler}function zr(t,e){return{name:t,handler:e}}function Ur(t,e){var n=ie(t,e);return void 0===n||""===n?[]:n.split(" ")}function jr(t){return void 0!==t.dom.classList}function Wr(t,e){var n,o,r;jr(t)?t.dom.classList.add(e):(o=e,r=Ur(n=t,"class").concat([o]),oe(n,"class",r.join(" ")))}function Gr(t,e){var n,o,r,i;jr(t)?t.dom.classList.remove(e):(r=e,0<(i=P(Ur(o=t,"class"),(function(t){return t!==r}))).length?oe(o,"class",i.join(" ")):ce(o,"class")),0===(jr(n=t)?n.dom.classList:Ur(n,"class")).length&&ce(n,"class")}function Xr(t,e){return jr(t)&&t.dom.classList.contains(e)}function qr(t,e){St(e,(function(e){Wr(t,e)}))}function Yr(t,e){St(e,(function(e){Gr(t,e)}))}function Kr(t){return t.dom.value}function Jr(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e}function $r(t){var e,n,o,r,i=(e=it(t,"behaviours").getOr({}),j(Ct(e),(function(t){var n=e[t];return h(n)?[n.me]:[]})));return n=t,r=R(o=i,(function(t){return Oo(t.name(),[lo("config"),_o("state",pu)])})),{list:o,data:et(io("component.behaviours",Ko(r),n.behaviours).fold((function(t){throw new Error(rr(t)+"\nComplete spec:\n"+JSON.stringify(n,null,2))}),c),(function(t){return a(t.map((function(t){return{config:t.config,state:t.state.init(t.config)}})))}))}}function Qr(t){var e,n,o,r,i,u,a,c,s,l,f=fu(t),d=f.events,m=_(f,["events"]),g=R(it(m,"components").getOr([]),Su),p=O(O({},m),{events:O(O({},ou),d),components:g});return Nn.value((n=Ro(du),o=uo(io("custom.definition",yu,e=p)),i=(r=$r(e)).list,u=r.data,a=function(t){var e=Mt.fromTag(t.tag);re(e,t.attributes),qr(e,t.classes),de(e,t.styles),t.innerHtml.each((function(t){return Ar(e,t)}));var n=t.domChildren;return Be(e,n),t.value.each((function(t){Jr(e,t)})),t.uid,su(e,t.uid),e}(function(t,e,n){var o,r,i=O(O({},(o=t).dom),{uid:o.uid,domChildren:R(o.components,(function(t){return t.element}))}),u=t.domModification.fold((function(){return Hr({})}),Hr),a=0<e.length?function(t,e,n,o){var r=O({},e);function i(t){return V(t,(function(t,e){return O(O({},e.modification),t)}),{})}St(n,(function(e){r[e.name()]=e.exhibit(t,o)}));var u=Vr(r,(function(t,e){return{name:t,modification:e}}));return Hr({classes:V(u.classes,(function(t,e){return e.modification.concat(t)}),[]),attributes:i(u.attributes),styles:i(u.styles)})}(n,{"alloy.base.modification":u},e,i):u;return O(O({},r=i),{attributes:O(O({},r.attributes),a.attributes),styles:O(O({},r.styles),a.styles),classes:r.classes.concat(a.classes)})}(o,i,u)),c=function(t,e,n){var o,r,i,u,a,c={"alloy.base.behaviour":t.events},s=t.eventOrder;return r=n,i=e,o=Vr(O(O({},c),(u=r,a={},St(i,(function(t){a[t.name()]=t.handlers(u)})),a)),zr),vu(o,s).getOrDie()}(o,i,u),s=Ro(o.components),l={uid:e.uid,getSystem:n.get,config:function(t){var n=u;return(v(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function(t){return v(u[t.name()])},spec:e,readState:function(t){return u[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return o.apis},connect:function(t){n.set(t)},disconnect:function(){n.set(Ir(h))},element:a,syncComponents:function(){var t=j(Kt(a),(function(t){return n.get().getByDom(t).fold((function(){return[]}),Y)}));s.set(t)},components:s.get,events:c}));function h(){return l}}function Zr(t){var e=Mt.fromText(t);return xu({element:e})}No([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var ti,ei,ni={can:k,abort:S,run:i},oi=a,ri=oi("touchstart"),ii=oi("touchmove"),ui=oi("touchend"),ai=oi("touchcancel"),ci=oi("mousedown"),si=oi("mousemove"),li=oi("mouseout"),fi=oi("mouseup"),di=oi("mouseover"),mi=oi("focusin"),gi=oi("focusout"),pi=oi("keydown"),hi=oi("keyup"),vi=oi("input"),bi=oi("change"),yi=oi("click"),xi=oi("transitioncancel"),wi=oi("transitionend"),Si=oi("transitionstart"),ki=oi("selectstart"),Ci={tap:gr("tap")},Oi=gr("focus"),_i=gr("blur.post"),Ti=gr("paste.post"),Ei=gr("receive"),Di=gr("execute"),Ai=gr("focus.item"),Bi=Ci.tap,Mi=gr("longpress"),Fi=gr("sandbox.close"),Ii=gr("typeahead.cancel"),Ri=gr("system.init"),Ni=gr("system.touchmove"),Pi=gr("system.touchend"),Vi=gr("system.scroll"),Hi=gr("system.resize"),Li=gr("system.attached"),zi=gr("system.detached"),Ui=gr("system.dismissRequested"),ji=gr("system.repositionRequested"),Wi=gr("focusmanager.shifted"),Gi=gr("slotcontainer.visibility"),Xi=gr("change.tab"),qi=gr("dismiss.tab"),Yi=gr("highlight"),Ki=gr("dehighlight"),Ji=function(t,e,n,o){var r=O({target:e},o);t.getSystem().triggerEvent(n,e,r)},$i=cr,Qi=Cr(Li()),Zi=Cr(zi()),tu=Cr(Ri()),eu=(ti=Di(),function(t){return Sr(ti,t)}),nu=$i([{key:Oi(),value:mr({can:function(t,e){var n,o=e.event,r=o.originator,i=o.target;return!(zt(n=r,t.element)&&!zt(n,i)&&(console.warn(Oi()+" did not get interpreted by the desired target. \nOriginator: "+Br(r)+"\nTarget: "+Br(i)+"\nCheck the "+Oi()+" event handlers"),1))}})}]),ou=Object.freeze({__proto__:null,events:nu}),ru=0,iu=a("alloy-id-"),uu=a("data-alloy-id"),au=iu(),cu=uu(),su=function(t,e){Object.defineProperty(t.dom,cu,{value:e,writable:!0})},lu=Mr,fu=c,du=Ir(),mu=function(t){return R(t,(function(t){return At(t,"/*")?t.substring(0,t.length-2):t}))},gu=Mr("alloy-premade"),pu={init:function(){return hu({readState:a("No State required")})}},hu=function(t){return t},vu=function(t,e){var n,o,r,i,u,a,c=nt(t,(function(t,n){return(1===t.length?Nn.value(t[0].handler):function(t,e,n){var o=e[n];return o?function(t,e,n){try{var o=K(e,(function(e,o){var r=e.name,i=o.name,u=n.indexOf(r),a=n.indexOf(i);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+r+".\nOrder specified: "+JSON.stringify(n,null,2));if(-1===a)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(n,null,2));return u<a?-1:a<u?1:0}));return Nn.value(o)}catch(e){return Nn.error([e])}}("Event: "+n,t,o).map((function(t){var e,n,o,r,i=R(t,(function(t){return t.handler}));return{can:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return H(n,(function(e,n){return e&&n.can.apply(void 0,t)}),!0)},abort:(o=n=e=i,r=function(t){return t.abort},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return H(o,(function(e,n){return e||r(n).apply(void 0,t)}),!1)}),run:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];St(e,(function(e){e.run.apply(void 0,t)}))}}})):Nn.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(R(t,(function(t){return t.name})),null,2)])}(t,e,n)).map((function(o){var r,i,u=(i=v(r=o)?{can:k,abort:S,run:r}:r,function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=[t,e].concat(n);i.abort.apply(void 0,r)?e.stop():i.can.apply(void 0,r)&&i.run.apply(void 0,r)}),a=1<t.length?P(e[n],(function(e){return M(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return ar(n,{handler:u,purpose:a})}))}));return n={},o=[],r=[],St(c,(function(t){t.fold((function(t){o.push(t)}),(function(t){r.push(t)}))})),0<(a={errors:o,values:r}).errors.length?Nn.error(U(a.errors)):(u=n,0===(i=a.values).length?Nn.value(u):Nn.value(Go(u,Xo.apply(void 0,i))))},bu="alloy.base.behaviour",yu=Ko([ir("dom","dom",{tag:"required",process:{}},Ko([lo("tag"),_o("styles",{}),_o("classes",[]),_o("attributes",{}),yo("value"),yo("innerHtml")])),lo("components"),lo("uid"),_o("events",{}),_o("apis",{}),ir("eventOrder","eventOrder",((ei={})[Di()]=["disabling",bu,"toggling","typeaheadevents"],ei[Oi()]=[bu,"focusing","keying"],ei[Ri()]=[bu,"disabling","toggling","representing"],ei[vi()]=[bu,"representing","streaming","invalidating"],ei[zi()]=[bu,"representing","item-events","tooltipping"],ei[ci()]=["focusing",bu,"item-type-events"],ei[ri()]=["focusing",bu,"item-type-events"],ei[di()]=["item-type-events","tooltipping"],ei[Ei()]=["receiving","reflecting","tooltipping"],Gn(a(ei))),$o()),yo("domModification")]),xu=function(t){var e=ao("external.component",Qn([lo("element"),yo("uid")]),t),n=Ro(Ir()),o=e.uid.getOrThunk((function(){return lu("external")}));su(e.element,o);var r={uid:o,getSystem:n.get,config:vt.none,hasConfigured:S,connect:function(t){n.set(t)},disconnect:function(){n.set(Ir((function(){return r})))},getApis:function(){return{}},element:e.element,spec:t,readState:a("No state"),syncComponents:i,components:a([]),events:{}};return Nr(r)},wu=lu,Su=function(t){return it(t,gu).getOrThunk((function(){return Qr(Tt(t,"uid")?t:O({uid:wu("")},t)).getOrDie()}))},ku=Nr;function Cu(t,e,n,o,r){return t(n,o)?vt.some(n):v(r)&&r(n)?vt.none():e(n,o,r)}function Ou(t,e,n){for(var o=t.dom,r=v(n)?n:S;o.parentNode;){o=o.parentNode;var i=Mt.fromDom(o);if(e(i))return vt.some(i);if(r(i))break}return vt.none()}function _u(t,e,n){return Cu((function(t,e){return e(t)}),Ou,t,e,n)}function Tu(t,e,n){return _u(t,e,n).isSome()}function Eu(t,e,n){return Ou(t,(function(t){return Ht(t,e)}),n)}function Du(t,e){return n=e,Lt(o=void 0===t?document:t.dom)?vt.none():vt.from(o.querySelector(n)).map(Mt.fromDom);var n,o}function Au(t,e,n){return Cu(Ht,Eu,t,e,n)}function Bu(){var t=Mr("aria-owns");return{id:t,link:function(e){oe(e,"aria-owns",t)},unlink:function(t){ce(t,"aria-owns")}}}var Mu,Fu,Iu=function(t,e){return Tu(e,(function(e){return zt(e,t.element)}),S)||(n=t,_u(e,(function(t){if(!Ge(t))return!1;var e=ie(t,"id");return void 0!==e&&-1<e.indexOf("aria-owns")})).bind((function(t){var e=ie(t,"id");return Du(gn(t),'[aria-owns="'+e+'"]')})).exists((function(t){return Iu(n,t)})));var n},Ru="unknown";function Nu(t,e,n){var o,r,i,u;switch(it(Pu.get(),t).orThunk((function(){return Z(Ct(Pu.get()),(function(e){return-1<t.indexOf(e)?vt.some(Pu.get()[e]):vt.none()}))})).getOr(Mu.NORMAL)){case Mu.NORMAL:return n(Hu());case Mu.LOGGING:var a=(o=t,r=e,i=[],u=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();wt(["mousemove","mouseover","mouseout",Ri()],o)||console.log(o,{event:o,time:t-u,target:r.dom,sequence:R(i,(function(t){return wt(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Br(t.target)+")":t.outcome}))})}}),c=n(a);return a.write(),c;case Mu.STOP:return!0}}(Fu=Mu=Mu||{})[Fu.STOP=0]="STOP",Fu[Fu.NORMAL=1]="NORMAL",Fu[Fu.LOGGING=2]="LOGGING";var Pu=Ro({}),Vu=["alloy/data/Fields","alloy/debugging/Debugging"],Hu=a({logEventCut:i,logEventStopped:i,logNoParent:i,logEventNoHandlers:i,logEventResponse:i,write:i}),Lu=a([lo("menu"),lo("selectedMenu")]),zu=a([lo("item"),lo("selectedItem")]);function Uu(){return ho("markers",[lo("backgroundMenu")].concat(Lu()).concat(zu()))}function ju(t){return ho("markers",R(t,lo))}function Wu(t,e,n){return void 0!==(o=new Error).stack&&L(o.stack.split("\n"),(function(t){return 0<t.indexOf("alloy")&&!M(Vu,(function(e){return-1<t.indexOf(e)}))})).getOr(Ru),ir(e,e,n,oo((function(t){return Nn.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})));var o}function Gu(t){return Wu(0,t,Wn(i))}function Xu(t){return Wu(0,t,Wn(vt.none))}function qu(t){return Wu(0,t,{tag:"required",process:{}})}function Yu(t){return Wu(0,t,{tag:"required",process:{}})}function Ku(t,e){return ur(t,a(e))}function Ju(t){return ur(t,c)}function $u(t,e,n,o,r,i,u,a){return{x:t,y:e,bubble:n,direction:o,placement:r,restriction:i,label:u+"-"+r,alwaysFit:a=void 0!==a&&a}}function Qu(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r}function Zu(t,e){return q(["left","right","top","bottom"],(function(n){return it(e,n).map((function(e){return function(t){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t)}))}))}function ta(t,e){return t.x+t.width/2-e.width/2}function ea(t,e){return t.x+t.width-e.width}function na(t,e){return t.y-e.height}function oa(t){return t.y+t.height}function ra(t,e){return t.y+t.height/2-e.height/2}function ia(t,e,n){return $u(t.x+t.width,ra(t,e),n.east(),Pa(),"east",Zu(t,{left:0}),La)}function ua(t,e,n){return $u(t.x-e.width,ra(t,e),n.west(),Va(),"west",Zu(t,{right:1}),La)}function aa(){return[za,Ua,ja,Wa,Xa,Ga,ia,ua]}function ca(){return[Ua,za,Wa,ja,Xa,Ga,ia,ua]}function sa(){return[ja,Wa,za,Ua,Ga,Xa]}function la(){return[Wa,ja,Ua,za,Ga,Xa]}function fa(){return[za,Ua,ja,Wa,Xa,Ga]}function da(){return[Ua,za,Wa,ja,Xa,Ga]}function ma(t,e,n){return tu((function(o,r){n(o,t,e)}))}function ga(t){return{key:t,value:void 0}}function pa(t){var e,n,o,r,i,u,a,c,s=ao("Creating behaviour: "+t.name,$a,t);return e=s.fields,n=s.name,o=s.active,r=s.apis,i=s.extra,u=s.state,a=Qn(e),c=Oo(n,[xo("config",Qn(e))]),Ka(a,c,n,o,r,i,u)}function ha(t){var e,n=ao("Creating behaviour: "+t.name,Qa,t),o=co(n.branchKey,n.branches),r=n.name,i=n.active,u=n.apis,a=n.extra,c=n.state,s=Oo(r,[xo("config",e=o)]);return Ka(e,s,r,i,u,a,c)}function va(){return Mt.fromDom(document)}function ba(t){return t.dom.focus()}function ya(t){var e=gn(t).dom;return t.dom===e.activeElement}function xa(t){return void 0===t&&(t=va()),vt.from(t.dom.activeElement).map(Mt.fromDom)}function wa(t){return xa(gn(t)).filter((function(e){return t.dom.contains(e.dom)}))}function Sa(t,e){var n=gn(e),o=xa(n).bind((function(t){function n(e){return zt(t,e)}var o,r;return n(e)?vt.some(e):(o=n,(r=function(t){for(var e=0;e<t.childNodes.length;e++){var n=Mt.fromDom(t.childNodes[e]);if(o(n))return vt.some(n);var i=r(t.childNodes[e]);if(i.isSome())return i}return vt.none()})(e.dom))})),r=t(e);return o.each((function(t){xa(n).filter((function(e){return zt(e,t)})).fold((function(){ba(t)}),i)})),r}function ka(t,e,n,o,r){function i(t){return t+"px"}return{position:t,left:e.map(i),top:n.map(i),right:o.map(i),bottom:r.map(i)}}function Ca(t,e){var n;me(t,O(O({},n=e),{position:vt.some(n.position)}))}function Oa(t,e,n,o,r,i){var u=e.rect,a=u.x-n,c=u.y-o,s=r-(a+u.width),l=i-(c+u.height),f=vt.some(a),d=vt.some(c),m=vt.some(s),g=vt.some(l),p=vt.none();return e.direction.fold((function(){return ka(t,f,d,p,p)}),(function(){return ka(t,p,d,m,p)}),(function(){return ka(t,f,p,p,g)}),(function(){return ka(t,p,p,m,g)}),(function(){return ka(t,f,d,p,p)}),(function(){return ka(t,f,p,p,g)}),(function(){return ka(t,f,d,p,p)}),(function(){return ka(t,p,d,m,p)}))}function _a(t,e){return t.fold((function(){var t=e.rect;return ka("absolute",vt.some(t.x),vt.some(t.y),vt.none(),vt.none())}),(function(t,n,o,r){return Oa("absolute",e,t,n,o,r)}),(function(t,n,o,r){return Oa("fixed",e,t,n,o,r)}))}function Ta(t,e){var n=y(Ve,e),o=t.fold(n,n,(function(){var t=Ie();return Ve(e).translate(-t.left,-t.top)})),r=Oe(e),i=we(e);return Bn(o.left,o.top,r,i)}a(Ko(zu().concat(Lu())));var Ea=a(Ko(zu())),Da=a(ho("initSize",[lo("numColumns"),lo("numRows")])),Aa=No([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ba=Aa.southeast,Ma=Aa.southwest,Fa=Aa.northeast,Ia=Aa.northwest,Ra=Aa.south,Na=Aa.north,Pa=Aa.east,Va=Aa.west,Ha=function(t,e,n){return Math.min(Math.max(t,e),n)},La="layout",za=function(t,e,n){return $u(t.x,oa(t),n.southeast(),Ba(),"southeast",Zu(t,{left:1,top:3}),La)},Ua=function(t,e,n){return $u(ea(t,e),oa(t),n.southwest(),Ma(),"southwest",Zu(t,{right:0,top:3}),La)},ja=function(t,e,n){return $u(t.x,na(t,e),n.northeast(),Fa(),"northeast",Zu(t,{left:1,bottom:2}),La)},Wa=function(t,e,n){return $u(ea(t,e),na(t,e),n.northwest(),Ia(),"northwest",Zu(t,{right:0,bottom:2}),La)},Ga=function(t,e,n){return $u(ta(t,e),na(t,e),n.north(),Na(),"north",Zu(t,{bottom:2}),La)},Xa=function(t,e,n){return $u(ta(t,e),oa(t),n.south(),Ra(),"south",Zu(t,{top:3}),La)},qa=Object.freeze({__proto__:null,events:function(t){return $i([Sr(Ei(),(function(e,n){var o,r=t.channels,i=Ct(r),u=n,a=(o=u).universal?i:P(i,(function(t){return wt(o.channels,t)}));St(a,(function(t){var n=r[t],o=n.schema,i=ao("channel["+t+"] data\nReceiver: "+Br(e.element),o,u.data);n.onReceive(e,i)}))}))])}}),Ya=[fo("channels",ro(Nn.value,Qn([qu("onReceive"),_o("schema",$o())])))],Ka=function(t,e,n,o,r,i,u){function c(t){return ut(t,n)?t[n]():vt.none()}var s=et(r,(function(t,e){return o=n,u=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var u=[t].concat(e);return t.config({name:a(o)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+o+". Using API: "+i)}),(function(e){var n=Array.prototype.slice.call(u,1);return r.apply(void 0,[t,e.config,e.state].concat(n))}))},c=i=e,l=(s=(r=t).toString()).indexOf(")")+1,f=s.indexOf("("),d=s.substring(f+1,l-1).split(/,\s*/),u.toFunctionAnnotation=function(){return{name:c,parameters:mu(d.slice(0,1).concat(d.slice(3)))}},u;var o,r,i,u,c,s,l,f,d})),l=et(i,Rr),f=O(O(O({},l),s),{revoke:y(ga,n),config:function(e){var o=ao(n+"-config",t,e);return{key:n,value:{config:o,me:f,configAsRaw:Rt((function(){return ao(n+"-config",t,e)})),initialConfig:e,state:u}}},schema:a(e),exhibit:function(t,e){return Et(c(t),it(o,"exhibit"),(function(t,n){return n(e,t.config,t.state)})).getOrThunk((function(){return Hr({})}))},name:a(n),handlers:function(t){return c(t).map((function(t){return it(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return f},Ja=cr,$a=Qn([lo("fields"),lo("name"),_o("active",{}),_o("apis",{}),_o("state",pu),_o("extra",{})]),Qa=Qn([lo("branchKey"),lo("branches"),lo("name"),_o("active",{}),_o("apis",{}),_o("state",pu),_o("extra",{})]),Za=a(void 0),tc=pa({fields:Ya,name:"receiving",active:qa}),ec=Object.freeze({__proto__:null,exhibit:function(t,e){return Hr({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),nc=No([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),oc=function(t,e,n){var o=kn(e,n);return t.fold(a(o),a(o),(function(){var t=Ie();return o.translate(-t.left,-t.top)}))};function rc(t){return ue(t,wc)}function ic(t){function e(){return n.get().each(t)}var n=Ro(vt.none());return{clear:function(){e(),n.set(vt.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(t){e(),n.set(vt.some(t))}}}function uc(){return ic((function(t){return t.destroy()}))}function ac(){return ic((function(t){return t.unbind()}))}function cc(){var t=ic(i);return O(O({},t),{on:function(e){return t.get().each(e)}})}function sc(t,e,n){return Te(t,e,kc,n,!1)}function lc(t,e,n){return Te(t,e,kc,n,!0)}function fc(t,e){function n(e){var n,o=null!==(n=e.raw.pseudoElement)&&void 0!==n?n:"";return zt(e.target,t)&&!dt(o)&&wt(Oc,e.raw.propertyName)}function r(r){var i;(o(r)||n(r))&&(c.clear(),s.clear(),!o(i=null==r?void 0:r.raw.type)&&i!==wi()||(clearTimeout(u),ce(t,_c),Yr(t,e.classes)))}function i(){c.set(sc(t,wi(),r)),s.set(sc(t,xi(),r))}var u,a,c=ac(),s=ac();"ontransitionstart"in t.dom?a=sc(t,Si(),(function(t){n(t)&&(a.unbind(),i())})):i();var f,d,m=(f=t,d=g("transition-delay"),H(g("transition-duration"),(function(t,e,n){var o=p(d[n])+p(e);return Math.max(t,o)}),0));function g(t){var e=ge(f,t);return P(l(e)?e.split(/\s*,\s*/):[],dt)}function p(t){if(l(t)&&/^[\d.]+/.test(t)){var e=parseFloat(t);return At(t,"ms")?e:1e3*e}return 0}requestAnimationFrame((function(){u=setTimeout(r,m+17),oe(t,_c,u)}))}function dc(t,e,n,o){ve(e,"max-height"),ve(e,"max-width");var r,i,u,s,l,f,d,m,g,p={width:Oe(r=e),height:we(r)};return i=e,u=o.preference,s=t,l=p,f=n,d=o.bounds,m=l.width,g=l.height,H(u,(function(t,e){var n=y(h,e);return t.fold(a(t),n)}),Sc.nofit({rect:s,maxHeight:l.height,maxWidth:l.width,direction:Ba(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:s.y},-1,-1,!1)).fold(c,c);function h(t,e,n,o,r){var u=function(t,e,n,o){var r,i,u,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,k,C,O,_,T,E,D,A,B,M,F,I,R,N,P,V,H,L,z,U,j,W=t.bubble,G=W.offset,X=(P=o,V=t.restriction,H=G,L=rt("left",P.x),z=rt("top",P.y),U=rt("right",P.right),j=rt("bottom",P.bottom),Bn(L,z,U-L,j-z)),q=t.x+G.left,Y=t.y+G.top,K=Bn(q,Y,e,n),J=(r=X.x,i=X.y,u=X.right,c=X.bottom,s=K.x,l=K.y,f=K.right,d=K.bottom,m=K.width,g=K.height,{originInBounds:r<=s&&s<=u&&i<=l&&l<=c,sizeInBounds:f<=u&&r<=f&&d<=c&&i<=d,visibleW:Math.min(m,r<=s?u-s:f-r),visibleH:Math.min(g,i<=l?c-l:d-i)}),$=J.visibleW,Q=J.visibleH,Z=J.originInBounds&&J.sizeInBounds,tt=Z?K:(p=X.x,h=X.y,v=X.right,b=X.bottom,y=K.x,x=K.y,w=K.width,S=K.height,k=Math.max(p,v-w),C=Math.max(h,b-S),O=Ha(y,p,k),_=Ha(x,h,C),T=Math.min(O+w,v)-O,E=Math.min(_+S,b)-_,Bn(O,_,T,E)),et=0<tt.width&&0<tt.height,nt=(D=t.direction,M=a((A=tt).bottom-(B=o).y),F=a(B.bottom-A.y),I=D.fold(F,F,M,M,F,M,F,F),R=a(A.right-B.x),N=a(B.right-A.x),{maxWidth:D.fold(N,R,N,R,N,N,N,R),maxHeight:I}),ot={rect:tt,maxHeight:nt.maxHeight,maxWidth:nt.maxWidth,direction:t.direction,placement:t.placement,classes:{on:W.classesOn,off:W.classesOff},layout:t.label,testY:Y};function rt(t,e){return V[t].map((function(n){var o="top"===t||"bottom"===t,r=o?H.top:H.left,i=("left"===t||"top"===t?Math.max:Math.min)(n,e)+r;return o?Ha(i,P.y,P.bottom):Ha(i,P.x,P.right)})).getOr(e)}return Z||t.alwaysFit?Sc.fit(ot):Sc.nofit(ot,$,Q,et)}(t(s,l,f,i,d),m,g,d);return u.fold(a(u),(function(t,i,a,c){return(r===c?o<a||n<i:!r&&c)?u:Sc.nofit(e,n,o,r)}))}}function mc(t,e){var n=t,o=Math.floor(e);fe(n,"max-height",wn.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function gc(t,e,n){return void 0===t[e]?n:t[e]}function pc(t,e,n,o){function r(t){return it(n,t).getOr([])}function i(t,e,n){var o=X(Ac,n);return{offset:kn(t,e),classesOn:j(n,r),classesOff:j(o,r)}}var u=t*(o=void 0===o?1:o),a=e*o;return{southeast:function(){return i(-t,e,["top","alignLeft"])},southwest:function(){return i(t,e,["top","alignRight"])},south:function(){return i(-t/2,e,["top","alignCentre"])},northeast:function(){return i(-t,-e,["bottom","alignLeft"])},northwest:function(){return i(t,-e,["bottom","alignRight"])},north:function(){return i(-t/2,-e,["bottom","alignCentre"])},east:function(){return i(t,-e/2,["valignCentre","left"])},west:function(){return i(-t,-e/2,["valignCentre","right"])},insetNortheast:function(){return i(u,a,["top","alignLeft","inset"])},insetNorthwest:function(){return i(-u,a,["top","alignRight","inset"])},insetNorth:function(){return i(-u/2,a,["top","alignCentre","inset"])},insetSoutheast:function(){return i(u,-a,["bottom","alignLeft","inset"])},insetSouthwest:function(){return i(-u,-a,["bottom","alignRight","inset"])},insetSouth:function(){return i(-u/2,-a,["bottom","alignCentre","inset"])},insetEast:function(){return i(-u,-a/2,["valignCentre","right","inset"])},insetWest:function(){return i(u,-a/2,["valignCentre","left","inset"])}}}function hc(){return pc(0,0,{})}function vc(t,e){return function(n){return"rtl"===Mc(n)?e:t}}nc.none;var bc,yc=nc.relative,xc=nc.fixed,wc="data-alloy-placement",Sc=No([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),kc=k,Cc=_e,Oc=["top","bottom","right","left"],_c="data-alloy-transition-timer",Tc=a((function(t,e){mc(t,e),de(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Ec=a((function(t,e){mc(t,e)})),Dc=function(t,e,n,o){var r,i,u,a,c=dc(t,e,n,o),l=e,f=c,d=_a((r=o).origin,f);return r.transition.each((function(t){!function(t,e,n,o,r,i){var u,a,c,l,f,d,m,g,p,h=(u=o,a=r,i.exists((function(t){var e=u.mode;return"all"===e||t[e]!==a[e]})));function v(t){return parseFloat(t).toFixed(3)}h||(p=t,W(o.classes,(function(t){return Xr(p,t)})))?(fe(t,"position",n.position),c=Ta(e,t),l=_a(e,O(O({},r),{rect:c})),f=q(Oc,(function(t){return l[t]})),g=n,ot(f,(function(t,e){var n,o,r,i=g[e].map(v),u=t.map(v);return!Et(n=i,o=u,r=void 0===r?s:r).getOr(n.isNone()&&o.isNone())})).isSome()&&(me(t,f),h&&(qr(d=t,(m=o).classes),ue(d,_c).each((function(t){clearTimeout(parseInt(t,10)),ce(d,_c)})),fc(d,m)),be(t))):Yr(t,o.classes)}(l,r.origin,d,t,f,r.lastPlacement)})),Ca(l,d),a=c.placement,oe(e,wc,a),Yr(i=e,(u=c.classes).off),qr(i,u.on),(0,o.maxHeightFunction)(e,c.maxHeight),(0,o.maxWidthFunction)(e,c.maxWidth),{layout:c.layout,placement:c.placement}},Ac=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Bc=c,Mc=function(t){return"rtl"===ge(t,"direction")?"rtl":"ltr"};function Fc(t){return Tu(t,(function(t){return Ge(t)&&ie(t,"data-alloy-vertical-dir")===bc.BottomToTop}))}function Ic(){return Oo("layouts",[lo("onLtr"),lo("onRtl"),yo("onBottomLtr"),yo("onBottomRtl")])}function Rc(t,e,n,o,r,i,u){var a=u.map(Fc).getOr(!1),c=e.layouts.map((function(e){return e.onLtr(t)})),s=e.layouts.map((function(e){return e.onRtl(t)}));return vc(a?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(c).getOr(r):c.getOr(n),a?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(s).getOr(i):s.getOr(o))(t)}function Nc(t){return t.fold(c,(function(t,e,n){return t.translate(-e,-n)}))}function Pc(t){return t.fold(c,c)}function Vc(t){return H(t,(function(t,e){return t.translate(e.left,e.top)}),kn(0,0))}function Hc(t){return Vc(R(t,Pc))}function Lc(t,e,n){var o,r,i=Ie(jt(t.element)),u=(o=t,r=Xt(n.root).dom,vt.from(r.frameElement).map(Mt.fromDom).filter((function(t){return zt(jt(t),jt(o.element))})).map(ke).getOr(i));return Zc(u,i.left,i.top)}function zc(t,e,n,o){var r=Qc(kn(t,e));return vt.some({point:r,width:n,height:o})}function Uc(t,e,n,o,r){return t.map((function(t){var i=[e,t.point],u=o.fold((function(){return Hc(i)}),(function(){return Hc(i)}),(function(){return Vc(R(i,Nc))})),a={x:u.left,y:u.top,width:t.width,height:t.height},c=(n.showAbove?sa:fa)(),s=(n.showAbove?la:da)(),l=Rc(r,n,c,s,c,s,vt.none());return Bc({anchorBox:a,bubble:n.bubble.getOr(hc()),overrides:n.overrides,layouts:l,placer:vt.none()})}))}function jc(t,e,n){var o,r=t.document.createRange(),i=r;return e.fold((function(t){i.setStartBefore(t.dom)}),(function(t,e){i.setStart(t.dom,e)}),(function(t){i.setStartAfter(t.dom)})),o=r,n.fold((function(t){o.setEndBefore(t.dom)}),(function(t,e){o.setEnd(t.dom,e)}),(function(t){o.setEndAfter(t.dom)})),r}function Wc(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i}function Gc(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}}function Xc(t,e,n){return e(Mt.fromDom(n.startContainer),n.startOffset,Mt.fromDom(n.endContainer),n.endOffset)}function qc(t,e){return n=t,i=e.match({domRange:function(t){return{ltr:a(t),rtl:vt.none}},relative:function(t,e){return{ltr:Rt((function(){return jc(n,t,e)})),rtl:Rt((function(){return vt.some(jc(n,e,t))}))}},exact:function(t,e,o,r){return{ltr:Rt((function(){return Wc(n,t,e,o,r)})),rtl:Rt((function(){return vt.some(Wc(n,o,r,t,e))}))}}}),((r=(o=i).ltr()).collapsed?o.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return us.rtl(Mt.fromDom(t.endContainer),t.endOffset,Mt.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Xc(0,us.ltr,r)})):Xc(0,us.ltr,r)).match({ltr:function(e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},rtl:function(e,n,o,r){var i=t.document.createRange();return i.setStart(o.dom,r),i.setEnd(e.dom,n),i}});var n,o,r,i}(bc=bc||{}).TopToBottom="toptobottom",bc.BottomToTop="bottomtotop";var Yc="data-alloy-vertical-dir",Kc=[lo("hotspot"),yo("bubble"),_o("overrides",{}),Ic(),Ku("placement",(function(t,e,n){var o=Ta(n,e.hotspot.element),r=Rc(t.element,e,fa(),da(),sa(),la(),vt.some(e.hotspot.element));return vt.some(Bc({anchorBox:o,bubble:e.bubble.getOr(hc()),overrides:e.overrides,layouts:r,placer:vt.none()}))}))],Jc=[lo("x"),lo("y"),_o("height",0),_o("width",0),_o("bubble",hc()),_o("overrides",{}),Ic(),Ku("placement",(function(t,e,n){var o=oc(n,e.x,e.y),r=Bn(o.left,o.top,e.width,e.height),i=Rc(t.element,e,aa(),ca(),aa(),ca(),vt.none());return vt.some(Bc({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:vt.none()}))}))],$c=No([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Qc=$c.screen,Zc=$c.absolute,ts=[lo("node"),lo("root"),yo("bubble"),Ic(),_o("overrides",{}),_o("showAbove",!1),Ku("placement",(function(t,e,n){var o=Lc(t,0,e);return e.node.filter(vn).bind((function(r){var i=r.dom.getBoundingClientRect(),u=zc(i.left,i.top,i.width,i.height),a=e.node.getOr(t.element);return Uc(u,o,e,n,a)}))}))],es=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},ns=No([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),os=(ns.before,ns.on,ns.after,function(t){return t.fold(c,c,c)}),rs=No([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),is={domRange:rs.domRange,relative:rs.relative,exact:rs.exact,exactFromRange:function(t){return rs.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){return Xt(t.match({domRange:function(t){return Mt.fromDom(t.startContainer)},relative:function(t,e){return os(t)},exact:function(t,e,n,o){return t}}))},range:es},us=No([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function as(t){return ql.getOption(t)}function cs(t){return as(t).filter((function(t){return 0!==t.trim().length||-1<t.indexOf("\xa0")})).isSome()||wt(Yl,Ft(t))}function ss(t,e){return Lt(n=void 0===t?document:t.dom)?[]:R(n.querySelectorAll(e),Mt.fromDom);var n}function ls(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return vt.some(es(Mt.fromDom(e.startContainer),e.startOffset,Mt.fromDom(n.endContainer),n.endOffset))}return vt.none()}function fs(t){if(null===t.anchorNode||null===t.focusNode)return ls(t);var e,n,o,r,i,u,a,c,s,l,f,d=Mt.fromDom(t.anchorNode),m=Mt.fromDom(t.focusNode);return e=d,u=n=t.anchorOffset,a=o=m,c=r=t.focusOffset,(s=jt(i=e).dom.createRange()).setStart(i.dom,u),s.setEnd(a.dom,c),l=s,f=zt(e,o)&&n===r,l.collapsed&&!f?vt.some(es(d,t.anchorOffset,m,t.focusOffset)):ls(t)}function ds(t,e){var n,o,r=(n=qc(t,e)).getClientRects();return 0<(o=0<r.length?r[0]:n.getBoundingClientRect()).width||0<o.height?vt.some(o).map(Gc):vt.none()}function ms(t,e){return{element:t,offset:e}}function gs(t,e){return(Xe(t)?ms:function(t,e){var n=Kt(t);if(0===n.length)return ms(t,e);if(e<n.length)return ms(n[e],0);var o=n[n.length-1];return ms(o,(Xe(o)?ql.get(o):Kt(o)).length)})(t,e)}function ps(t,e){return e.getSelection.getOrThunk((function(){return function(){return vt.from(t.getSelection()).filter((function(t){return 0<t.rangeCount})).bind(fs)}}))().map((function(t){var e=gs(t.start,t.soffset),n=gs(t.finish,t.foffset);return is.range(e.element,e.offset,n.element,n.offset)}))}function hs(t){return t.x+t.width}function vs(t,e){return t.x-e.width}function bs(t,e){return t.y-e.height+t.height}function ys(t,e,n){return $u(hs(t),t.y,n.southeast(),Ba(),"southeast",Zu(t,{left:0,top:2}),Jl)}function xs(t,e,n){return $u(vs(t,e),t.y,n.southwest(),Ma(),"southwest",Zu(t,{right:1,top:2}),Jl)}function ws(t,e,n){return $u(hs(t),bs(t,e),n.northeast(),Fa(),"northeast",Zu(t,{left:0,bottom:3}),Jl)}function Ss(t,e,n){return $u(vs(t,e),bs(t,e),n.northwest(),Ia(),"northwest",Zu(t,{right:1,bottom:3}),Jl)}function ks(){return[ys,xs,ws,Ss]}function Cs(){return[xs,ys,Ss,ws]}function Os(t,e,n,o,r,u,a){var c,s,l,f,d,m,g,p,h,v,b,y,x,w;return c={anchorBox:n.anchorBox,origin:e},s=r.element,l=n.bubble,f=n.layouts,d=u,m=o,p=a,v=gc(g=n.overrides,"maxHeightFunction",Tc()),b=gc(g,"maxWidthFunction",i),y=c.anchorBox,w={bounds:(h=x=c.origin,m.fold((function(){return h.fold(Fn,Fn,Bn)}),(function(t){return h.fold(t,t,(function(){var e=t(),n=oc(h,e.x,e.y);return Bn(n.left,n.top,e.width,e.height)}))}))),origin:x,preference:f,maxHeightFunction:v,maxWidthFunction:b,lastPlacement:d,transition:p},Dc(y,s,l,w)}function _s(t,e){Tn(t.element,e.element)}function Ts(t,e){var n,o=t.components();St((n=t).components(),(function(t){return En(t.element)})),Me(n.element),n.syncComponents();var r=X(o,e);St(r,(function(e){of(e),t.getSystem().removeFromWorld(e)})),St(e,(function(e){e.getSystem().isConnected()?_s(t,e):(t.getSystem().addToWorld(e),_s(t,e),vn(t.element)&&rf(e)),t.syncComponents()}))}function Es(t,e){uf(t,e,Tn)}function Ds(t){of(t),En(t.element),t.getSystem().removeFromWorld(t)}function As(t){var e=qt(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));Ds(t),e.each((function(t){t.syncComponents()}))}function Bs(t){var e=t.components();St(e,Ds),Me(t.element),t.syncComponents()}function Ms(t,e){af(t,e,Tn)}function Fs(t){var e=Kt(t.element);St(e,(function(e){t.getByDom(e).each(of)})),En(t.element)}function Is(t,e,n,o){n.get().each((function(e){Bs(t)})),Es(e.getAttachPoint(t),t);var r=t.getSystem().build(o);return Es(t,r),n.set(r),r}function Rs(t,e,n,o){var r=Is(t,e,n,o);return e.onOpen(t,r),r}function Ns(t,e,n){n.get().each((function(o){Bs(t),As(t),e.onClose(t,o),n.clear()}))}function Ps(t,e,n){return n.isOpen()}function Vs(t){var e=ao("Dismissal",gf,t),n={};return n[ff()]={schema:Qn([lo("target")]),onReceive:function(t,n){lf.isOpen(t)&&(lf.isPartOf(t,n.target)||e.isExtraPart(t,n.target)||e.fireEventInstead.fold((function(){return lf.close(t)}),(function(e){return pr(t,e.event)})))}},n}function Hs(t){var e=ao("Reposition",pf,t),n={};return n[df()]={onReceive:function(t){lf.isOpen(t)&&e.fireEventInstead.fold((function(){return e.doReposition(t)}),(function(e){return pr(t,e.event)}))}},n}function Ls(t,e,n){e.store.manager.onLoad(t,e,n)}function zs(t,e,n){e.store.manager.onUnload(t,e,n)}function Us(){var t=Ro(null);return hu({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})}function js(){var t=Ro({}),e=Ro({});return hu({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return it(t.get(),n).orThunk((function(){return it(e.get(),n)}))},update:function(n){var o=t.get(),r=e.get(),i={},u={};St(n,(function(t){it(i[t.value]=t,"meta").each((function(e){it(e,"text").each((function(e){u[e]=t}))}))})),t.set(O(O({},o),i)),e.set(O(O({},r),u))},clear:function(){t.set({}),e.set({})}})}function Ws(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)}function Gs(t,e){return Io(t,{},R(e,(function(e){return n=e.name(),o="Cannot configure "+e.name()+" for "+t,ir(n,n,{tag:"option",process:{}},Yn((function(t){return Ho("The field: "+n+" is forbidden. "+o)})));var n,o})).concat([ur("dump",c)]))}function Xs(t){return t.dump}function qs(t,e){return O(O({},Ja(e)),t.dump)}function Ys(t){return Tt(t,"uiType")}function Ks(t){return t.fold(vt.some,vt.none,vt.some,vt.some)}function Js(t){function e(t){return t.name}return t.fold(e,e,e,e)}function $s(t,e){return function(n){var o=ao("Converting part type",e,n);return t(o)}}function Qs(t,e,n,o){return Go(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))}function Zs(t,e){var n={};return St(e,(function(e){Ks(e).each((function(e){var o=Yf(t,e.pname);n[e.name]=function(n){var r=ao("Part: "+e.name+" in "+t,Ko(e.schema),n);return O(O({},o),{config:n,validated:r})}}))})),n}function tl(t,e,n){return{uiType:Df(),owner:t,name:e,config:n,validated:{}}}function el(t){return j(t,(function(t){return t.fold(vt.none,vt.some,vt.none,vt.none).map((function(t){return ho(t.name,t.schema.concat([Ju(Xf())]))})).toArray()}))}function nl(t){return R(t,Js)}function ol(t,e,n){return o=e,r={},i={},St(n,(function(t){t.fold((function(t){r[t.pname]=Tf(!0,(function(e,n,o){return t.factory.sketch(Qs(e,t,n,o))}))}),(function(t){var e=o.parts[t.name];i[t.name]=a(t.factory.sketch(Qs(o,t,e[Xf()]),e))}),(function(t){r[t.pname]=Tf(!1,(function(e,n,o){return t.factory.sketch(Qs(e,t,n,o))}))}),(function(t){r[t.pname]=Ef(!0,(function(e,n,o){return R(e[t.name],(function(n){return t.factory.sketch(Go(t.defaults(e,n,o),n,t.overrides(e,n)))}))}))}))})),{internals:a(r),externals:a(i)};var o,r,i}function rl(t,e,n){return o=vt.some(t),i=(r=e).components,l=et(n,(function(t,e){return o=t,r=!1,{name:a(n=e),required:function(){return o.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r})),u=o,c=r,s=l,f=j(i,(function(t){return _f(u,c,t,s)})),tt(l,(function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+o.getOr("none")+"\nComponents: "+JSON.stringify(r.components,null,2))})),f;var o,r,i,u,c,s,l,f}function il(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()}function ul(t,e,n){return il(t,e,n).getOrDie("Could not find part: "+n)}function al(t,e,n){var o={},r=e.partUids,i=t.getSystem();return St(n,(function(t){o[t]=a(i.getByUid(r[t]))})),o}function cl(t,e){var n=t.getSystem();return et(e.partUids,(function(t,e){return a(n.getByUid(t))}))}function sl(t){return Ct(t.partUids)}function ll(t,e,n){var o={},r=e.partUids,i=t.getSystem();return St(n,(function(t){o[t]=a(i.getByUid(r[t]).getOrDie())})),o}function fl(t,e){return cr(R(nl(e),(function(e){return{key:e,value:t+"-"+e}})))}function dl(t){return ir("partUids","partUids",Gn((function(e){return fl(e.uid,t)})),$o())}function ml(t,e,n,o,r){var i;return ao(t+" [SpecSchema]",Qn((i=r,(0<o.length?[ho("parts",o)]:[]).concat([lo("uid"),_o("dom",{}),_o("components",[]),Ju("originalSpec"),_o("debug.sketcher",{})]).concat(i)).concat(e)),n)}function gl(t,e,n,o,r){var i=Jf(r),u=ml(t,e,i,el(n),[dl(n)]),a=ol(0,u,n);return o(u,rl(t,u,a.internals()),i,a.externals())}function pl(t){var e=ao("Sketcher for "+t.name,$f,t),n=et(e.apis,Pr),o=et(e.extraApis,Rr);return O(O({name:e.name,configFields:e.configFields,sketch:function(t){return n=e.name,o=e.configFields,(0,e.factory)(ml(n,o,r=Jf(t),[],[]),r);var n,o,r}},n),o)}function hl(t){var e=ao("Sketcher for "+t.name,Qf,t),n=Zs(e.name,e.partFields),o=et(e.apis,Pr),r=et(e.extraApis,Rr);return O(O({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return gl(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)}function vl(t){return"input"===Ft(t)&&"radio"!==ie(t,"type")||"textarea"===Ft(t)}function bl(t,e,n){(e.disabled()?nd:od)(t,e)}function yl(t,e){return!0===e.useNative&&wt(ed,Ft(t.element))}function xl(t,e){return yl(t,e)?ae(t.element,"disabled"):"true"===ie(t.element,"aria-disabled")}function wl(t,e,n,o){var r=ss(t.element,"."+e.highlightClass);St(r,(function(n){M(o,(function(t){return t.element===n}))||(Gr(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),pr(n,Ki())})))}))}function Sl(t,e,n,o){wl(t,e,0,[o]),Hl(0,e,0,o)||(Wr(o.element,e.highlightClass),e.onHighlight(t,o),pr(o,Yi()))}function kl(t,e,n,o){var r=ss(t.element,"."+e.itemClass);return z(r,(function(t){return Xr(t,e.highlightClass)})).bind((function(e){var n=Qu(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()}))}function Cl(t,e,n){var o=G(t.slice(0,e)),r=G(t.slice(e+1));return L(o.concat(r),n)}function Ol(t,e,n){return L(G(t.slice(0,e)),n)}function _l(t,e,n){var o=t.slice(0,e);return L(t.slice(e+1).concat(o),n)}function Tl(t,e,n){return L(t.slice(e+1),n)}function El(t){return function(e){var n=e.raw;return wt(t,n.which)}}function Dl(t){return function(e){return W(t,(function(t){return t(e)}))}}function Al(t){return!0===t.raw.shiftKey}function Bl(t){return!0===t.raw.ctrlKey}function Ml(t,e){return{matches:t,classification:e}}function Fl(t,e,n){e.exists((function(t){return n.exists((function(e){return zt(e,t)}))}))||hr(t,Wi(),{prevFocus:e,newFocus:n})}function Il(){function t(t){return wa(t.element)}return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element),Fl(e,o,t(e))}}}function Rl(){function t(t){return cd.getHighlighted(t).map((function(t){return t.element}))}return{get:t,set:function(e,n){var o=t(e);e.getSystem().getByDom(n).fold(i,(function(t){cd.highlight(e,t)}));var r=t(e);Fl(e,o,r)}}}function Nl(t,e,n,o,r,i){var u=i.map(Mn);return ef(t,e,n,o,r,u)}function Pl(t,e,n){var o,r,i=e.getAttachPoint(t);fe(t.element,"position",nf.getMode(i)),r=e.cloakVisibilityAttr,pe((o=t).element,"visibility").fold((function(){ce(o.element,r)}),(function(t){oe(o.element,r,t)})),fe(o.element,"visibility","hidden")}function Vl(t,e,n){var o,r,i,u=t.element;M(["top","left","right","bottom"],(function(t){return pe(u,t).isSome()}))||ve(t.element,"position"),r="visibility",i=e.cloakVisibilityAttr,ue((o=t).element,i).fold((function(){return ve(o.element,r)}),(function(t){return fe(o.element,r,t)}))}function Hl(t,e,n,o){return Xr(o.element,e.highlightClass)}function Ll(t,e,n){return Du(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}function zl(t,e,n){var o=ss(t.element,"."+e.itemClass);return(0<o.length?vt.some(o[o.length-1]):vt.none()).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}function Ul(t,e,n){return ct(R(ss(t.element,"."+e.itemClass),(function(e){return t.getSystem().getByDom(e).toOptional()})))}us.ltr,us.rtl;var jl,Wl,Gl,Xl,ql=(jl=Xe,{get:function(t){if(!jl(t))throw new Error("Can only get text value of a text node");return Wl(t).getOr("")},getOption:Wl=function(t){return jl(t)?vt.from(t.dom.nodeValue):vt.none()},set:function(t,e){if(!jl(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=e}}),Yl=["img","br"],Kl=[yo("getSelection"),lo("root"),yo("bubble"),Ic(),_o("overrides",{}),_o("showAbove",!1),Ku("placement",(function(t,e,n){var o=Xt(e.root).dom,r=Lc(t,0,e);return Uc(ps(o,e).bind((function(t){return(0<(e=qc(o,is.exactFromRange(t)).getBoundingClientRect()).width||0<e.height?vt.some(e).map(Gc):vt.none()).orThunk((function(){var e=Mt.fromText("\ufeff");Ee(t.start,e);var n=ds(o,is.exact(e,0,e,1));return En(e),n})).bind((function(t){return zc(t.left,t.top,t.width,t.height)}));var e})),r,e,n,ps(o,e).bind((function(t){return Ge(t.start)?vt.some(t.start):fn(t.start)})).getOr(t.element))}))],Jl="link-layout",$l=co("type",{selection:Kl,node:ts,hotspot:Kc,submenu:[lo("item"),Ic(),_o("overrides",{}),Ku("placement",(function(t,e,n){var o=Ta(n,e.item.element),r=Rc(t.element,e,ks(),Cs(),ks(),Cs(),vt.none());return vt.some(Bc({anchorBox:o,bubble:hc(),overrides:e.overrides,layouts:r,placer:vt.none()}))}))],makeshift:Jc}),Ql=[bo("classes",Zo),Ao("mode","all",["all","layout","placement"])],Zl=[_o("useFixed",S),yo("getBounds")],tf=[fo("anchor",$l),Oo("transition",Ql)],ef=function(t,e,n,o,r,i){var u=ao("placement.info",Ko(tf),r),c=u.anchor,s=o.element,l=n.get(o.uid);Sa((function(){fe(s,"position","fixed");var r=pe(s,"visibility");fe(s,"visibility","hidden");var f,d,m,g,p=e.useFixed()?(g=document.documentElement,xc(0,0,g.clientWidth,g.clientHeight)):(d=ke((f=t).element),m=f.element.dom.getBoundingClientRect(),yc(d.left,d.top,m.width,m.height)),h=c.placement,v=i.map(a).or(e.getBounds);h(t,c,p).each((function(e){var r=e.placer.getOr(Os)(t,p,e,v,o,l,u.transition);n.set(o.uid,r)})),r.fold((function(){ve(s,"visibility")}),(function(t){fe(s,"visibility",t)})),pe(s,"left").isNone()&&pe(s,"top").isNone()&&pe(s,"right").isNone()&&pe(s,"bottom").isNone()&&at(pe(s,"position"),"fixed")&&ve(s,"position")}),s)},nf=pa({fields:Zl,name:"positioning",active:ec,apis:Object.freeze({__proto__:null,position:function(t,e,n,o,r){Nl(t,e,n,o,r,vt.none())},positionWithin:Nl,positionWithinBounds:ef,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"},reset:function(t,e,n,o){var r=o.element;St(["position","left","right","top","bottom"],(function(t){return ve(r,t)})),ce(r,wc),n.clear(o.uid)}}),state:Object.freeze({__proto__:null,init:function(){var t={};return hu({readState:function(){return t},clear:function(e){h(e)?delete t[e]:t={}},set:function(e,n){t[e]=n},get:function(e){return it(t,e)}})}})}),of=function(t){pr(t,zi());var e=t.components();St(e,of)},rf=function(t){var e=t.components();St(e,rf),pr(t,Li())},uf=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),vn(t.element)&&rf(e),t.syncComponents()},af=function(t,e,n){n(t,e.element);var o=Kt(e.element);St(o,(function(t){e.getByDom(t).each(rf)}))},cf=Object.freeze({__proto__:null,cloak:Pl,decloak:Vl,open:Rs,openWhileCloaked:function(t,e,n,o,r){Pl(t,e),Rs(t,e,n,o),r(),Vl(t,e)},close:Ns,isOpen:Ps,isPartOf:function(t,e,n,o){return Ps(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,o)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map((function(){return Is(t,e,n,o)}))}}),sf=Object.freeze({__proto__:null,events:function(t,e){return $i([Sr(Fi(),(function(n,o){Ns(n,t,e)}))])}}),lf=pa({fields:[Gu("onOpen"),Gu("onClose"),lo("isPartOf"),lo("getAttachPoint"),_o("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:sf,apis:cf,state:Object.freeze({__proto__:null,init:function(){var t=cc(),e=a("not-implemented");return hu({readState:e,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}})}),ff=a("dismiss.popups"),df=a("reposition.popups"),mf=a("mouse.released"),gf=Qn([_o("isExtraPart",S),Oo("fireEventInstead",[_o("event",Ui())])]),pf=Qn([Oo("fireEventInstead",[_o("event",ji())]),po("doReposition")]),hf=Object.freeze({__proto__:null,onLoad:Ls,onUnload:zs,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),vf=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[Qi((function(n,o){Ls(n,t,e)})),Zi((function(n,o){zs(n,t,e)}))]:[ma(t,e,Ls)];return $i(n)}}),bf=Object.freeze({__proto__:null,memory:Us,dataset:js,manual:function(){return hu({readState:i})},init:function(t){return t.store.manager.state(t)}}),yf=[yo("initialValue"),lo("getFallbackEntry"),lo("getDataKey"),lo("setValue"),Ku("manager",{setValue:Ws,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).getOrThunk((function(){return o.getFallbackEntry(r)}))},onLoad:function(t,e,n){e.store.initialValue.each((function(o){Ws(t,e,n,o)}))},onUnload:function(t,e,n){n.clear()},state:js})],xf=[lo("getValue"),_o("setValue",i),yo("initialValue"),Ku("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:i,state:pu.init})],wf=pa({fields:[To("store",{mode:"memory"},co("mode",{memory:[yo("initialValue"),Ku("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:Us})],manual:xf,dataset:yf})),Gu("onSetValue"),_o("resetOnDom",!1)],name:"representing",active:vf,apis:hf,extra:{setValueFrom:function(t,e){var n=wf.getValue(e);wf.setValue(t,n)}},state:bf}),Sf=Gs,kf=qs,Cf="placeholder",Of=No([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),_f=function(t,e,n,o){return r=t,u=o,(Ys(i=n)&&i.uiType===Cf?(l=i,f=u,(s=r).exists((function(t){return t!==l.owner}))?Of.single(!0,a(l)):it(f,l.name).fold((function(){throw new Error("Unknown placeholder component: "+l.name+"\nKnown: ["+Ct(f)+"]\nNamespace: "+s.getOr("none")+"\nSpec: "+JSON.stringify(l,null,2))}),(function(t){return t.replace()}))):Of.single(!1,a(i))).fold((function(r,i){var u=Ys(n)?i(e,n.config,n.validated):i(e),a=j(it(u,"components").getOr([]),(function(n){return _f(t,e,n,o)}));return[O(O({},u),{components:a})]}),(function(t,o){if(Ys(n)){var r=o(e,n.config,n.validated);return n.validated.preprocess.getOr(c)(r)}return o(e)}));var r,i,u,s,l,f},Tf=Of.single,Ef=Of.multiple,Df=a(Cf),Af=No([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Bf=_o("factory",{sketch:c}),Mf=_o("schema",[]),Ff=lo("name"),If=ir("pname","pname",jn((function(t){return"<alloy."+Mr(t.name)+">"})),$o()),Rf=ur("schema",(function(){return[yo("preprocess")]})),Nf=_o("defaults",a({})),Pf=_o("overrides",a({})),Vf=Ko([Bf,Mf,Ff,If,Nf,Pf]),Hf=Ko([Bf,Mf,Ff,Nf,Pf]),Lf=Ko([Bf,Mf,Ff,If,Nf,Pf]),zf=Ko([Bf,Rf,Ff,lo("unit"),If,Nf,Pf]),Uf=$s(Af.required,Vf),jf=$s(Af.external,Hf),Wf=$s(Af.optional,Lf),Gf=$s(Af.group,zf),Xf=a("entirety"),qf=Object.freeze({__proto__:null,required:Uf,external:jf,optional:Wf,group:Gf,asNamedPart:Ks,name:Js,asCommon:function(t){return t.fold(c,c,c,c)},original:Xf}),Yf=function(t,e){return{uiType:Df(),owner:t,name:e}},Kf=Object.freeze({__proto__:null,generate:Zs,generateOne:tl,schemas:el,names:nl,substitutes:ol,components:rl,defaultUids:fl,defaultUidsSchema:dl,getAllParts:cl,getAllPartNames:sl,getPart:il,getPartOrDie:ul,getParts:al,getPartsOrDie:ll}),Jf=function(t){return Tt(t,"uid")?t:O(O({},t),{uid:lu("uid")})},$f=Qn([lo("name"),lo("factory"),lo("configFields"),_o("apis",{}),_o("extraApis",{})]),Qf=Qn([lo("name"),lo("factory"),lo("configFields"),lo("partFields"),_o("apis",{}),_o("extraApis",{})]),Zf=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),td=pa({fields:[lo("find")],name:"composing",apis:Zf}),ed=["input","button","textarea","select"],nd=function(t,e,n){e.disableClass.each((function(e){Wr(t.element,e)})),(yl(t,e)?function(t){oe(t.element,"disabled","disabled")}:function(t){oe(t.element,"aria-disabled","true")})(t),e.onDisabled(t)},od=function(t,e,n){e.disableClass.each((function(e){Gr(t.element,e)})),(yl(t,e)?function(t){ce(t.element,"disabled")}:function(t){oe(t.element,"aria-disabled","false")})(t),e.onEnabled(t)},rd=Object.freeze({__proto__:null,enable:od,disable:nd,isDisabled:xl,onLoad:bl,set:function(t,e,n,o){(o?nd:od)(t,e)}}),id=Object.freeze({__proto__:null,exhibit:function(t,e){return Hr({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return $i([xr(Di(),(function(e,n){return xl(e,t)})),ma(t,e,bl)])}}),ud=pa({fields:[Mo("disabled",S),_o("useNative",!0),yo("disableClass"),Gu("onDisabled"),Gu("onEnabled")],name:"disabling",active:id,apis:rd}),ad=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return wl(t,e,0,[])},dehighlight:function(t,e,n,o){Hl(0,e,0,o)&&(Gr(o.element,e.highlightClass),e.onDehighlight(t,o),pr(o,Ki()))},highlight:Sl,highlightFirst:function(t,e,n){Ll(t,e).each((function(n){Sl(t,e,0,n)}))},highlightLast:function(t,e,n){zl(t,e).each((function(n){Sl(t,e,0,n)}))},highlightAt:function(t,e,n,o){var r,i,u;i=o,u=ss((r=t).element,"."+e.itemClass),vt.from(u[i]).fold((function(){return Nn.error(new Error("No element found with index "+i))}),r.getSystem().getByDom).fold((function(t){throw t}),(function(n){Sl(t,e,0,n)}))},highlightBy:function(t,e,n,o){L(Ul(t,e),o).each((function(n){Sl(t,e,0,n)}))},isHighlighted:Hl,getHighlighted:function(t,e,n){return Du(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},getFirst:Ll,getLast:zl,getPrevious:function(t,e,n){return kl(t,e,0,-1)},getNext:function(t,e,n){return kl(t,e,0,1)},getCandidates:Ul}),cd=pa({fields:[lo("highlightClass"),lo("itemClass"),Gu("onHighlight"),Gu("onDehighlight")],name:"highlighting",apis:ad}),sd=[8],ld=[9],fd=[13],dd=[27],md=[32],gd=[37],pd=[38],hd=[39],vd=[40],bd=x(Al);function yd(t,e,n,o,r){function i(t,e,n,o,r){var i=n(t,e,o,r),u=e.event;return L(i,(function(t){return t.matches(u)})).map((function(t){return t.classification})).bind((function(n){return n(t,e,o,r)}))}var u={schema:function(){return t.concat([_o("focusManager",Il()),To("focusInside","onFocus",oo((function(t){return wt(["onFocus","onEnterOrSpace","onApi"],t)?Nn.value(t):Nn.error("Invalid value for focusInside")}))),Ku("handler",u),Ku("state",e),Ku("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var u=t.focusInside!==Gl.OnFocusMode?vt.none():r(t).map((function(n){return Sr(Oi(),(function(o,r){n(o,t,e),r.stop()}))})),a=[Sr(pi(),(function(o,u){i(o,u,n,t,e).fold((function(){var n=o,i=u,a=El(md.concat(fd))(i.event);t.focusInside===Gl.OnEnterOrSpaceMode&&a&&dr(n,i)&&r(t).each((function(o){o(n,t,e),i.stop()}))}),(function(t){u.stop()}))})),Sr(hi(),(function(n,r){i(n,r,o,t,e).each((function(t){r.stop()}))}))];return $i(u.toArray().concat(a))}};return u}function xd(t){function e(t,e){return 0<xe(t.visibilitySelector.bind((function(t){return Au(e,t)})).getOr(e))}function n(t,n,o){var r=n,i=P(ss(t.element,r.selector),(function(t){return e(r,t)}));vt.from(i[r.firstTabstop]).each((function(e){n.focusManager.set(t,e)}))}function o(t,n,o,r){var i,u=ss(t.element,o.selector);return(i=o).focusManager.get(t).bind((function(t){return Au(t,i.selector)})).bind((function(n){return z(u,y(zt,n)).bind((function(n){return i=t,a=o,r(u,n,(function(t){return e(n=a,o=t)&&n.useTabstopAt(o);var n,o})).fold((function(){return a.cyclic?vt.some(!0):vt.none()}),(function(t){return a.focusManager.set(i,t),vt.some(!0)}));var i,a}))}))}var r=[yo("onEscape"),yo("onEnter"),_o("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),_o("firstTabstop",0),_o("useTabstopAt",k),yo("visibilitySelector")].concat([t]),i=a([Ml(Dl([Al,El(ld)]),(function(t,e,n){return o(t,0,n,n.cyclic?Cl:Ol)})),Ml(El(ld),(function(t,e,n){return o(t,0,n,n.cyclic?_l:Tl)})),Ml(El(dd),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),Ml(Dl([bd,El(fd)]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),u=a([]);return yd(r,pu.init,i,u,(function(){return vt.some(n)}))}function wd(t,e,n){return vl(n)&&El(md)(e.event)?vt.none():(br(t,n,Di()),vt.some(!0))}function Sd(t,e){return vt.some(!0)}function kd(t,e,n){return n.execute(t,e,t.element)}function Cd(){var t=cc();return hu({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set({numRows:e,numColumns:n})},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})}function Od(t){return function(e,n,o,r){var i=t(e.element);return Xm(i,e,n,o,r)}}function _d(t,e){return Od(vc(t,e))}function Td(t,e){return Od(vc(e,t))}function Ed(t){return function(e,n,o,r){return Xm(t,e,n,o,r)}}function Dd(t){return!((e=t.dom).offsetWidth<=0&&e.offsetHeight<=0);var e}function Ad(t,e,n){var o,r=P(ss(t,n),Dd);return z(o=r,(function(t){return zt(t,e)})).map((function(t){return{index:t,candidates:o}}))}function Bd(t,e){return z(t,(function(t){return zt(e,t)}))}function Md(t,e,n,o){return o(Math.floor(e/n),e%n).bind((function(e){var o=e.row*n+e.column;return 0<=o&&o<t.length?vt.some(t[o]):vt.none()}))}function Fd(t,e,n,o,r){return Md(t,e,o,(function(e,i){var u=e===n-1?t.length-e*o:o,a=Qu(i,r,0,u-1);return vt.some({row:e,column:a})}))}function Id(t,e,n,o,r){return Md(t,e,o,(function(e,i){var u=Qu(e,r,0,n-1),a=u===n-1?t.length-u*o:o,c=Ha(i,0,a-1);return vt.some({row:u,column:c})}))}function Rd(t,e,n){Du(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))}function Nd(t){return function(e,n,o,r){return Ad(e,n,o.selector).bind((function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}}function Pd(t,e,n){return n.captureTab?vt.some(!0):vt.none()}function Vd(t,e,n,o){var r=function(t,e,n){var i,u=Qu(e,o,0,n.length-1);return u===t?vt.none():"button"===Ft(i=n[u])&&"disabled"===ie(i,"disabled")?r(t,u,n):vt.from(n[u])};return Ad(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return r(e,e,n)}))}function Hd(t,e,n){return(o=n).focusManager.get(t).bind((function(t){return Au(t,o.selector)})).bind((function(o){return n.execute(t,e,o)}));var o}function Ld(t,e,n){e.getInitial(t).orThunk((function(){return Du(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))}function zd(t,e,n){return Vd(t,n.selector,e,-1)}function Ud(t,e,n){return Vd(t,n.selector,e,1)}function jd(t){return function(e,n,o,r){return t(e,n,o,r).bind((function(){return o.executeOnMove?Hd(e,n,o):vt.some(!0)}))}}function Wd(t,e,n){return n.onEscape(t,e)}function Gd(t,e,n){return vt.from(t[e]).bind((function(t){return vt.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))}function Xd(t,e,n,o){return Gd(t,e,Qu(n,o,0,t[e].length-1))}function qd(t,e,n,o){var r=Qu(n,o,0,t.length-1),i=t[r].length;return Gd(t,r,Ha(e,0,i-1))}function Yd(t,e,n,o){var r=t[e].length;return Gd(t,e,Ha(n+o,0,r-1))}function Kd(t,e,n,o){var r=Ha(n+o,0,t.length-1),i=t[r].length;return Gd(t,r,Ha(e,0,i-1))}function Jd(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return Du(t.element,n.cell)})).each((function(n){e.focusManager.set(t,n)}))}function $d(t,e){return function(n,o,r){var i=r.cycles?t:e;return Au(o,r.selectors.row).bind((function(t){return Bd(ss(t,r.selectors.cell),o).bind((function(e){var o=ss(n,r.selectors.row);return Bd(o,t).bind((function(t){var n,u=(n=r,R(o,(function(t){return ss(t,n.selectors.cell)})));return i(u,t,e).map((function(t){return t.cell}))}))}))}))}}function Qd(t,e,n){return n.focusManager.get(t).bind((function(o){return n.execute(t,e,o)}))}function Zd(t,e,n){Du(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))}function tm(t,e,n){return Vd(t,n.selector,e,-1)}function em(t,e,n){return Vd(t,n.selector,e,1)}function nm(t,e,n,o){var r=t.getSystem().build(o);uf(t,r,n)}function om(t,e,n,o){L(_g(t),(function(t){return zt(o.element,t.element)})).each(As)}function rm(t,e,n,o,r){var i=_g(t);return vt.from(i[o]).map((function(e){return om(t,0,0,e),r.each((function(e){nm(t,0,(function(t,e){var n,r=e;Jt(n=t,o).fold((function(){Tn(n,r)}),(function(t){Ee(t,r)}))}),e)})),e}))}function im(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=$i(e),pa({fields:[lo("enabled")],name:n,active:{events:a(o)}})),configAsRaw:a({}),initialConfig:{},state:pu}}}function um(t,e){e.ignore||(ba(t.element),e.onFocus(t))}function am(t,e,n){var o=e.aria;o.update(t,o,n.get())}function cm(t,e,n){e.toggleClass.each((function(e){(n.get()?Wr:Gr)(t.element,e)}))}function sm(t,e,n){Hm(t,e,n,!n.get())}function lm(t,e,n){n.set(!0),cm(t,e,n),am(t,e,n)}function fm(t,e,n){n.set(!1),cm(t,e,n),am(t,e,n)}function dm(t,e,n){Hm(t,e,n,e.selected)}function mm(){function t(t,e){e.stop(),vr(t)}return[Sr(yi(),t),Sr(Bi(),t),Tr(ri()),Tr(ci())]}function gm(t){return $i(U([t.map((function(t){return eu((function(e,n){t(e),n.stop()}))})).toArray(),mm()]))}function pm(t){(wa(t.element).isNone()||Ag.isFocused(t))&&(Ag.isFocused(t)||Ag.focus(t),hr(t,Ig,{item:t}))}function hm(t){hr(t,Rg,{item:t})}function vm(t,e){return t.x+t.width/2-e.width/2}function bm(t,e){return t.x+t.width-e.width}function ym(t,e){return t.y+t.height-e.height}function xm(t,e){return t.y+t.height/2-e.height/2}function wm(t,e,n){return $u(bm(t,e),ym(t,e),n.insetSouthwest(),Ia(),"southwest",Zu(t,{right:0,bottom:3}),Qg)}function Sm(t,e,n){return $u(t.x,ym(t,e),n.insetSoutheast(),Fa(),"southeast",Zu(t,{left:1,bottom:3}),Qg)}function km(t,e,n){return $u(bm(t,e),t.y,n.insetNorthwest(),Ma(),"northwest",Zu(t,{right:0,top:2}),Qg)}function Cm(t,e,n){return $u(t.x,t.y,n.insetNortheast(),Ba(),"northeast",Zu(t,{left:1,top:2}),Qg)}function Om(t,e,n){return $u(bm(t,e),xm(t,e),n.insetEast(),Va(),"east",Zu(t,{right:0}),Qg)}function _m(t,e,n){return $u(t.x,xm(t,e),n.insetWest(),Pa(),"west",Zu(t,{left:1}),Qg)}function Tm(t){switch(t){case"north":return Zg;case"northeast":return Cm;case"northwest":return km;case"south":return tp;case"southeast":return Sm;case"southwest":return wm;case"east":return Om;case"west":return _m}}function Em(t,e,n,o,r){return rc(o).map(Tm).getOr(Zg)(t,e,n,o,r)}function Dm(t){switch(t){case"north":return tp;case"northeast":return Sm;case"northwest":return wm;case"south":return Zg;case"southeast":return Cm;case"southwest":return km;case"east":return _m;case"west":return Om}}function Am(t,e,n,o,r){return rc(o).map(Dm).getOr(Zg)(t,e,n,o,r)}function Bm(t){var e=void 0!==t.uid&&ut(t,"uid")?t.uid:lu("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return O(O({},t),{uid:e})}}}function Mm(t){return function(){return it(t,ip).getOr("!not found!")}}function Fm(t,e){var n,o=t.toLowerCase();if(op.isRtl()){var r=At(n=o,"-rtl")?n:n+"-rtl";return Tt(e,r)?r:o}return o}function Im(t,e){return it(e,Fm(t,e))}function Rm(t,e){var n=e();return Im(t,n).getOrThunk(Mm(n))}function Nm(){return im("add-focusable",[Qi((function(t){var e,n;e=t.element,n=function(t){return Ht(t,"svg")},L(e.dom.childNodes,(function(t){return n(Mt.fromDom(t))})).map(Mt.fromDom).each((function(t){return oe(t,"focusable","false")}))}))])}function Pm(t,e,n,o){var r,i,u,a=(u=e,op.isRtl()&&Tt(rp,u)?["tox-icon--flip"]:[]),c=it(n,Fm(e,n)).or(o).getOrThunk(Mm(n));return{dom:{tag:t.tag,attributes:null!==(r=t.attributes)&&void 0!==r?r:{},classes:t.classes.concat(a),innerHtml:c},behaviours:Ja(T(T([],null!==(i=t.behaviours)&&void 0!==i?i:[],!0),[Nm()],!1))}}function Vm(t,e,n,o){return void 0===o&&(o=vt.none()),Pm(e,t,n(),o)}function Hm(t,e,n,o){(o?lm:fm)(t,e,n)}function Lm(t,e,n){oe(t.element,"aria-expanded",n)}function zm(t){return"prepared"===t.type?vt.some(t.menu):vt.none()}(Xl=Gl=Gl||{}).OnFocusMode="onFocus",Xl.OnEnterOrSpaceMode="onEnterOrSpace",Xl.OnApiMode="onApi";var Um=xd(ur("cyclic",S)),jm=xd(ur("cyclic",k)),Wm=yd([_o("execute",wd),_o("useSpace",!1),_o("useEnter",!0),_o("useControlEnter",!1),_o("useDown",!1)],pu.init,(function(t,e,n,o){var r=n.useSpace&&!vl(t.element)?md:[],i=n.useEnter?fd:[],u=n.useDown?vd:[];return[Ml(El(r.concat(i).concat(u)),kd)].concat(n.useControlEnter?[Ml(Dl([Bl,El(fd)]),kd)]:[])}),(function(t,e,n,o){return n.useSpace&&!vl(t.element)?[Ml(El(md),Sd)]:[]}),(function(){return vt.none()})),Gm=Object.freeze({__proto__:null,flatgrid:Cd,init:function(t){return t.state(t)}}),Xm=function(t,e,n,o,r){return o.focusManager.get(e).bind((function(n){return t(e.element,n,o,r)})).map((function(t){return o.focusManager.set(e,t),!0}))},qm=Ed,Ym=Ed,Km=Ed,Jm=Nd((function(t,e,n,o){return Fd(t,e,n,o,-1)})),$m=Nd((function(t,e,n,o){return Fd(t,e,n,o,1)})),Qm=Nd((function(t,e,n,o){return Id(t,e,n,o,-1)})),Zm=Nd((function(t,e,n,o){return Id(t,e,n,o,1)})),tg=yd([lo("selector"),_o("execute",wd),Xu("onEscape"),_o("captureTab",!1),Da()],Cd,a([Ml(El(gd),_d(Jm,$m)),Ml(El(hd),Td(Jm,$m)),Ml(El(pd),qm(Qm)),Ml(El(vd),Ym(Zm)),Ml(Dl([Al,El(ld)]),Pd),Ml(Dl([bd,El(ld)]),Pd),Ml(El(dd),(function(t,e,n){return n.onEscape(t,e)})),Ml(El(md.concat(fd)),(function(t,e,n,o){return(r=n).focusManager.get(t).bind((function(t){return Au(t,r.selector)})).bind((function(o){return n.execute(t,e,o)}));var r}))]),a([Ml(El(md),Sd)]),(function(){return vt.some(Rd)})),eg=[lo("selector"),_o("getInitial",vt.none),_o("execute",wd),Xu("onEscape"),_o("executeOnMove",!1),_o("allowVertical",!0)],ng=a([Ml(El(md),Sd)]),og=yd(eg,pu.init,(function(t,e,n,o){var r=gd.concat(n.allowVertical?pd:[]),i=hd.concat(n.allowVertical?vd:[]);return[Ml(El(r),jd(_d(zd,Ud))),Ml(El(i),jd(Td(zd,Ud))),Ml(El(fd),Hd),Ml(El(md),Hd),Ml(El(dd),Wd)]}),ng,(function(){return vt.some(Ld)})),rg=[ho("selectors",[lo("row"),lo("cell")]),_o("cycles",!0),_o("previousSelector",vt.none),_o("execute",wd)],ig=$d((function(t,e,n){return Xd(t,e,n,-1)}),(function(t,e,n){return Yd(t,e,n,-1)})),ug=$d((function(t,e,n){return Xd(t,e,n,1)}),(function(t,e,n){return Yd(t,e,n,1)})),ag=$d((function(t,e,n){return qd(t,n,e,-1)}),(function(t,e,n){return Kd(t,n,e,-1)})),cg=$d((function(t,e,n){return qd(t,n,e,1)}),(function(t,e,n){return Kd(t,n,e,1)})),sg=a([Ml(El(gd),_d(ig,ug)),Ml(El(hd),Td(ig,ug)),Ml(El(pd),qm(ag)),Ml(El(vd),Ym(cg)),Ml(El(md.concat(fd)),(function(t,e,n){return wa(t.element).bind((function(o){return n.execute(t,e,o)}))}))]),lg=a([Ml(El(md),Sd)]),fg=yd(rg,pu.init,sg,lg,(function(){return vt.some(Jd)})),dg=[lo("selector"),_o("execute",wd),_o("moveOnTab",!1)],mg=a([Ml(El(pd),Km(tm)),Ml(El(vd),Km(em)),Ml(Dl([Al,El(ld)]),(function(t,e,n,o){return n.moveOnTab?Km(tm)(t,e,n,o):vt.none()})),Ml(Dl([bd,El(ld)]),(function(t,e,n,o){return n.moveOnTab?Km(em)(t,e,n,o):vt.none()})),Ml(El(fd),Qd),Ml(El(md),Qd)]),gg=a([Ml(El(md),Sd)]),pg=yd(dg,pu.init,mg,gg,(function(){return vt.some(Zd)})),hg=yd([Xu("onSpace"),Xu("onEnter"),Xu("onShiftEnter"),Xu("onLeft"),Xu("onRight"),Xu("onTab"),Xu("onShiftTab"),Xu("onUp"),Xu("onDown"),Xu("onEscape"),_o("stopSpaceKeyup",!1),yo("focusIn")],pu.init,(function(t,e,n){return[Ml(El(md),n.onSpace),Ml(Dl([bd,El(fd)]),n.onEnter),Ml(Dl([Al,El(fd)]),n.onShiftEnter),Ml(Dl([Al,El(ld)]),n.onShiftTab),Ml(Dl([bd,El(ld)]),n.onTab),Ml(El(pd),n.onUp),Ml(El(vd),n.onDown),Ml(El(gd),n.onLeft),Ml(El(hd),n.onRight),Ml(El(md),n.onSpace),Ml(El(dd),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[Ml(El(md),Sd)]:[]}),(function(t){return t.focusIn})),vg=Um.schema(),bg=jm.schema(),yg=og.schema(),xg=tg.schema(),wg=fg.schema(),Sg=Wm.schema(),kg=pg.schema(),Cg=hg.schema(),Og=ha({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:vg,cyclic:bg,flow:yg,flatgrid:xg,matrix:wg,execution:Sg,menu:kg,special:Cg}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,e,n)}))},setGridSize:function(t,e,n,o,r){ut(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Gm}),_g=function(t,e){return t.components()},Tg=pa({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(t,e,n,o){nm(t,0,Tn,o)},prepend:function(t,e,n,o){nm(t,0,Ae,o)},remove:om,replaceAt:rm,replaceBy:function(t,e,n,o,r){return z(_g(t),o).bind((function(e){return rm(t,0,0,e,r)}))},set:function(t,e,n,o){Sa((function(){var e=R(o,t.getSystem().build);Ts(t,e)}),t.element)},contents:_g})}),Eg=Object.freeze({__proto__:null,focus:um,blur:function(t,e){e.ignore||t.element.dom.blur()},isFocused:function(t){return ya(t.element)}}),Dg=Object.freeze({__proto__:null,exhibit:function(t,e){return Hr(e.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(t){return $i([Sr(Oi(),(function(e,n){um(e,t),n.stop()}))].concat(t.stopMousedown?[Sr(ci(),(function(t,e){e.event.prevent()}))]:[]))}}),Ag=pa({fields:[Gu("onFocus"),_o("stopMousedown",!1),_o("ignore",!1)],name:"focusing",active:Dg,apis:Eg}),Bg=Object.freeze({__proto__:null,onLoad:dm,toggle:sm,isOn:function(t,e,n){return n.get()},on:lm,off:fm,set:Hm}),Mg=Object.freeze({__proto__:null,exhibit:function(){return Hr({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=sm,eu((function(t){r(t,n,o)}))),u=ma(t,e,dm);return $i(U([t.toggleOnExecute?[i]:[],[u]]))}}),Fg=pa({fields:[_o("selected",!1),yo("toggleClass"),_o("toggleOnExecute",!0),To("aria",{mode:"none"},co("mode",{pressed:[_o("syncWithExpanded",!1),Ku("update",(function(t,e,n){oe(t.element,"aria-pressed",n),e.syncWithExpanded&&Lm(t,0,n)}))],checked:[Ku("update",(function(t,e,n){oe(t.element,"aria-checked",n)}))],expanded:[Ku("update",Lm)],selected:[Ku("update",(function(t,e,n){oe(t.element,"aria-selected",n)}))],none:[Ku("update",i)]}))],name:"toggling",active:Mg,apis:Bg,state:{init:function(){var t=Ro(!1);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(!1)},readState:function(){return t.get()}}}}}),Ig="alloy.item-hover",Rg="alloy.item-focus",Ng=a(Ig),Pg=a(Rg),Vg=[lo("data"),lo("components"),lo("dom"),_o("hasSubmenu",!1),yo("toggling"),Sf("itemBehaviours",[Fg,Ag,Og,wf]),_o("ignoreFocus",!1),_o("domModification",{}),Ku("builder",(function(t){return{dom:t.dom,domModification:O(O({},t.domModification),{attributes:O(O(O({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:kf(t.itemBehaviours,[t.toggling.fold(Fg.revoke,(function(t){return Fg.config(O({aria:{mode:"checked"}},t))})),Ag.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){hm(t)}}),Og.config({mode:"execution"}),wf.config({store:{mode:"memory",initialValue:t.data}}),im("item-type-events",T(T([],mm(),!0),[Sr(di(),pm),Sr(Ai(),Ag.focus)],!1))]),components:t.components,eventOrder:t.eventOrder}})),_o("eventOrder",{})],Hg=[lo("dom"),lo("components"),Ku("builder",(function(t){return{dom:t.dom,components:t.components,events:$i([Sr(Ai(),(function(t,e){e.stop()}))])}}))],Lg=a("item-widget"),zg=a([Uf({name:"widget",overrides:function(t){return{behaviours:Ja([wf.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:i}})])}}})]),Ug=co("type",{widget:[lo("uid"),lo("data"),lo("components"),lo("dom"),_o("autofocus",!1),_o("ignoreFocus",!1),Sf("widgetBehaviours",[wf,Ag,Og]),_o("domModification",{}),dl(zg()),Ku("builder",(function(t){function e(e){return il(e,t,"widget").map((function(t){return Og.focusIn(t),t}))}function n(e,n){return vl(n.event.target)||t.autofocus&&n.setSource(e.element),vt.none()}var o=ol(Lg(),t,zg()),r=rl(Lg(),t,o.internals());return{dom:t.dom,components:r,domModification:t.domModification,events:$i([eu((function(t,n){e(t).each((function(t){n.stop()}))})),Sr(di(),pm),Sr(Ai(),(function(n,o){t.autofocus?e(n):Ag.focus(n)}))]),behaviours:kf(t.widgetBehaviours,[wf.config({store:{mode:"memory",initialValue:t.data}}),Ag.config({ignore:t.ignoreFocus,onFocus:function(t){hm(t)}}),Og.config({mode:"special",focusIn:t.autofocus?function(t){e(t)}:Za(),onLeft:n,onRight:n,onEscape:function(e,n){return Ag.isFocused(e)||t.autofocus?(t.autofocus&&n.setSource(e.element),vt.none()):(Ag.focus(e),vt.some(!0))}})])}}))],item:Vg,separator:Hg}),jg=a([Gf({factory:{sketch:function(t){var e=ao("menu.spec item",Ug,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return Tt(e,"uid")?e:O(O({},e),{uid:lu("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Wg=a([lo("value"),lo("items"),lo("dom"),lo("components"),_o("eventOrder",{}),Gs("menuBehaviours",[cd,wf,td,Og]),To("movement",{mode:"menu",moveOnTab:!0},co("mode",{grid:[Da(),Ku("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[Ku("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),lo("rowSelector")],menu:[_o("moveOnTab",!0),Ku("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),fo("markers",Ea()),_o("fakeFocus",!1),_o("focusManager",Il()),Gu("onHighlight")]),Gg=a("alloy.menu-focus"),Xg=hl({name:"Menu",configFields:Wg(),partFields:jg(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:qs(t.menuBehaviours,[cd.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),wf.config({store:{mode:"memory",initialValue:t.value}}),td.config({find:vt.some}),Og.config(t.movement.config(t,t.movement))]),events:$i([Sr(Pg(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){cd.highlight(t,n),e.stop(),hr(t,Gg(),{menu:t,item:n})}))})),Sr(Ng(),(function(t,e){var n=e.event.item;cd.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),qg=function(t,e,n,o){return it(n,o).bind((function(o){return it(t,o).bind((function(o){var r=qg(t,e,n,o);return vt.some([o].concat(r))}))})).getOr([])},Yg=zm,Kg=a("collapse-item"),Jg=pl({name:"TieredMenu",configFields:[Yu("onExecute"),Yu("onEscape"),qu("onOpenMenu"),qu("onOpenSubmenu"),Gu("onRepositionMenu"),Gu("onCollapseMenu"),_o("highlightImmediately",!0),ho("data",[lo("primary"),lo("menus"),lo("expansions")]),_o("fakeFocus",!1),Gu("onHighlight"),Gu("onHover"),Uu(),lo("dom"),_o("navigateOnHover",!0),_o("stayInDom",!1),Gs("tmenuBehaviours",[Og,cd,td,Tg]),_o("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){function n(t){return wf.getValue(t).value}function o(t,e){cd.highlight(t,e),cd.getHighlighted(e).orThunk((function(){return cd.getFirst(e)})).each((function(e){br(t,e.element,Ai())}))}function r(t,e){return ct(R(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?vt.some(t.menu):vt.none()}))})))}function u(e,n,o){var i=r(n,n.otherMenus(o));St(i,(function(n){Yr(n.element,[t.markers.backgroundMenu]),t.stayInDom||Tg.remove(e,n)}))}function a(e,o){var r;tt((r=e,f.get().getOrThunk((function(){var e={},o=P(ss(r.element,"."+t.markers.item),(function(t){return"true"===ie(t,"aria-haspopup")}));return St(o,(function(t){r.getSystem().getByDom(t).each((function(t){var o=n(t);e[o]=t}))})),f.set(e),e}))),(function(t,e){var n=wt(o,e);oe(t.element,"aria-expanded",n)}))}function c(e,n,i){return vt.from(i[0]).bind((function(a){return n.lookupMenu(a).bind((function(a){if("notbuilt"===a.type)return vt.none();var c=a.menu,s=r(n,i.slice(1));return St(s,(function(e){Wr(e.element,t.markers.backgroundMenu)})),vn(c.element)||Tg.append(e,ku(c)),Yr(c.element,[t.markers.backgroundMenu]),o(e,c),u(e,n,i),vt.some(c)}))}))}var s,l,f=cc(),d=function(){function t(t){return a(t).bind(zm)}function e(t){return it(n.get(),t)}var n=Ro({}),o=Ro({}),r=Ro({}),i=cc(),u=Ro({}),a=function(t){return it(o.get(),t)};return{setMenuBuilt:function(t,e){var n;o.set(O(O({},o.get()),((n={})[t]={type:"prepared",menu:e},n)))},setContents:function(t,e,a,c){i.set(t),n.set(a),o.set(e),u.set(c);var s=function(t,e){var n={};tt(t,(function(t,e){St(t,(function(t){n[t]=e}))}));var o=e,r=_t(e,(function(t,e){return{k:t,v:e}})),i=et(r,(function(t,e){return[e].concat(qg(n,o,r,e))}));return et(n,(function(t){return it(i,t).getOr([t])}))}(c,a);r.set(s)},expand:function(t){return it(n.get(),t).map((function(e){var n=it(r.get(),t).getOr([]);return[e].concat(n)}))},refresh:function(t){return it(r.get(),t)},collapse:function(t){return it(r.get(),t).bind((function(t){return 1<t.length?vt.some(t.slice(1)):vt.none()}))},lookupMenu:a,lookupItem:e,otherMenus:function(t){var e=u.get();return X(Ct(e),t)},getPrimary:function(){return i.get().bind(t)},getMenus:function(){return o.get()},clear:function(){n.set({}),o.set({}),r.set({}),i.clear()},isClear:function(){return i.get().isNone()},getTriggeringPath:function(o,u){var a=P(e(o).toArray(),(function(e){return t(e).isSome()}));return it(r.get(),o).bind((function(e){var o=G(a.concat(e));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return vt.none();e.push(o.getOrDie())}return vt.some(e)}(j(o,(function(e,r){return a=e,c=u,s=o.slice(0,r+1),t(a).bind((function(t){return e=a,ot(n.get(),(function(t,n){return t===e})).bind((function(e){return c(e).map((function(e){return{triggeredMenu:t,triggeringItem:e,triggeringPath:s}}))}));var e})).fold((function(){return at(i.get(),e)?[]:[vt.none()]}),(function(t){return[vt.some(t)]}));var a,c,s})))}))}}}();function m(e,o,r){if(void 0===r&&(r=s.HighlightSubmenu),o.hasConfigured(ud)&&ud.isDisabled(o))return vt.some(o);var i=n(o);return d.expand(i).bind((function(n){return a(e,n),vt.from(n[0]).bind((function(i){return d.lookupMenu(i).bind((function(u){var a=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return d.setMenuBuilt(e,o),o}(e,i,u);return vn(a.element)||Tg.append(e,ku(a)),t.onOpenSubmenu(e,o,a,G(n)),r===s.HighlightSubmenu?(cd.highlightFirst(a),c(e,d,n)):(cd.dehighlightAll(a),vt.some(o))}))}))}))}function g(e,o){var r=n(o);return d.collapse(r).bind((function(n){return a(e,n),c(e,d,n).map((function(n){return t.onCollapseMenu(e,o,n),n}))}))}function p(e){return function(n,o){return Au(o.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(k)}))}))}}function h(t){return cd.getHighlighted(t).bind(cd.getHighlighted)}(l=s={})[l.HighlightSubmenu=0]="HighlightSubmenu",l[l.HighlightParent=1]="HighlightParent";var v=$i([Sr(Gg(),(function(t,e){var o=e.event.item;d.lookupItem(n(o)).each((function(){var o=e.event.menu;cd.highlight(t,o);var r=n(e.event.item);d.refresh(r).each((function(e){return u(t,d,e)}))}))})),eu((function(e,o){var r=o.event.target;e.getSystem().getByDom(r).each((function(o){0===n(o).indexOf("collapse-item")&&g(e,o),m(e,o,s.HighlightSubmenu).fold((function(){t.onExecute(e,o)}),i)}))})),Qi((function(e,n){(function(e){var n,o,r=(n=e,o=t.data.primary,et(t.data.menus,(function(e,r){function i(){return Xg.sketch(O(O({},e),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?Rl:Il)()}))}return r===o?{type:"prepared",menu:n.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))),i=et(t.data.menus,(function(t,e){return j(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}));return d.setContents(t.data.primary,r,t.data.expansions,i),d.getPrimary()})(e).each((function(n){Tg.append(e,ku(n)),t.onOpenMenu(e,n),t.highlightImmediately&&o(e,n)}))}))].concat(t.navigateOnHover?[Sr(Ng(),(function(e,o){var r=o.event.item,i=e,u=n(r);d.refresh(u).bind((function(t){return a(i,t),c(i,d,t)})),m(e,r,s.HighlightParent),t.onHover(e,r)}))]:[])),b={collapseMenu:function(t){h(t).each((function(e){g(t,e)}))},highlightPrimary:function(t){d.getPrimary().each((function(e){o(t,e)}))},repositionMenus:function(e){d.getPrimary().bind((function(t){return h(e).bind((function(t){var e=n(t),o=ct(R(rt(d.getMenus()),Yg));return d.getTriggeringPath(e,(function(t){return e=t,Z(o,(function(t){return t.getSystem().isConnected()?L(cd.getCandidates(t),(function(t){return n(t)===e})):vt.none()}));var e}))})).map((function(e){return{primary:t,triggeringPath:e}}))})).fold((function(){vt.from(e.components()[0]).filter((function(t){return"menu"===ie(t.element,"role")})).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:qs(t.tmenuBehaviours,[Og.config({mode:"special",onRight:p((function(t,e){return vl(e.element)?vt.none():m(t,e,s.HighlightSubmenu)})),onLeft:p((function(t,e){return vl(e.element)?vt.none():g(t,e)})),onEscape:p((function(e,n){return g(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){d.getPrimary().each((function(e){br(t,e.element,Ai())}))}}),cd.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),td.config({find:function(t){return cd.getHighlighted(t)}}),Tg.config({})]),eventOrder:t.eventOrder,apis:b,events:v}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:ar(t,e),expansions:{}}},collapseItem:function(t){return{value:Mr(Kg()),meta:{text:t}}}}}),$g=pl({name:"InlineView",configFields:[lo("lazySink"),Gu("onShow"),Gu("onHide"),ko("onEscape"),Gs("inlineBehaviours",[lf,wf,tc]),Oo("fireDismissalEventInstead",[_o("event",Ui())]),Oo("fireRepositionEventInstead",[_o("event",ji())]),_o("getRelated",vt.none),_o("isExtraPart",S),_o("eventOrder",vt.none)],factory:function(t,e){function n(e){lf.isOpen(e)&&wf.getValue(e).each((function(n){switch(n.mode){case"menu":lf.getState(e).each(Jg.repositionMenus);break;case"position":var o=t.lazySink(e).getOrDie();nf.positionWithinBounds(o,e,n.config,n.getBounds())}}))}function o(t,e,n,o){i(t,e,n,(function(){return o.map((function(t){return Mn(t)}))}))}function r(e,n,o,r){var i,u,a,c,s,l=(i=t,u=e,a=n,c=r,s="horizontal"===o.type?{layouts:{onLtr:fa,onRtl:da}}:{},Jg.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightImmediately:o.menu.highlightImmediately,onEscape:function(){return lf.close(u),i.onEscape.map((function(t){return t(u)})),vt.some(!0)},onExecute:function(){return vt.some(!0)},onOpenMenu:function(t,e){nf.positionWithinBounds(f().getOrDie(),e,a,c())},onOpenSubmenu:function(t,e,n,o){var r=f().getOrDie();nf.position(r,n,{anchor:O({type:"submenu",item:e},d(o))})},onRepositionMenu:function(t,e,n){var o=f().getOrDie();nf.positionWithinBounds(o,e,a,c()),St(n,(function(t){var e=d(t.triggeringPath);nf.position(o,t.triggeredMenu,{anchor:O({type:"submenu",item:t.triggeringItem},e)})}))}}));function f(){return i.lazySink(u)}function d(t){return 2===t.length?s:{}}lf.open(e,l),wf.setValue(e,vt.some({mode:"menu",menu:l}))}var i=function(e,n,o,r){var i=t.lazySink(e).getOrDie();lf.openWhileCloaked(e,n,(function(){return nf.positionWithinBounds(i,e,o,r())})),wf.setValue(e,vt.some({mode:"position",config:o,getBounds:r}))},u={setContent:function(t,e){lf.setContent(t,e)},showAt:function(t,e,n){o(t,e,n,vt.none())},showWithin:o,showWithinBounds:i,showMenuAt:function(t,e,n){r(t,e,n,vt.none)},showMenuWithinBounds:r,hide:function(t){lf.isOpen(t)&&(wf.setValue(t,vt.none()),lf.close(t))},getContent:function(t){return lf.getState(t)},reposition:n,isOpen:lf.isOpen};return{uid:t.uid,dom:t.dom,behaviours:qs(t.inlineBehaviours,[lf.config({isPartOf:function(e,n,o){return Iu(n,o)||(r=o,t.getRelated(e).exists((function(t){return Iu(t,r)})));var r},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),wf.config({store:{mode:"memory",initialValue:vt.none()}}),tc.config({channels:O(O({},Vs(O({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Hs(O(O({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:n})))})]),eventOrder:t.eventOrder,apis:u}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),Qg="layout-inset",Zg=function(t,e,n){return $u(vm(t,e),t.y,n.insetNorth(),Ra(),"north",Zu(t,{top:2}),Qg)},tp=function(t,e,n){return $u(vm(t,e),ym(t,e),n.insetSouth(),Na(),"south",Zu(t,{bottom:3}),Qg)},ep=tinymce.util.Tools.resolve("tinymce.util.Delay"),np=pl({name:"Button",factory:function(t){function e(e){return it(t.dom,"attributes").bind((function(t){return it(t,e)}))}var n=gm(t.action),o=t.dom.tag;return{uid:t.uid,dom:t.dom,components:t.components,events:n,behaviours:kf(t.buttonBehaviours,[Ag.config({}),Og.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==o)return{role:e("role").getOr("button")};var t=e("type").getOr("button"),n=e("role").map((function(t){return{role:t}})).getOr({});return O({type:t},n)}()},eventOrder:t.eventOrder}},configFields:[_o("uid",void 0),lo("dom"),_o("components",[]),Sf("buttonBehaviours",[Ag,Og]),yo("action"),yo("role"),_o("eventOrder",{})]}),op=tinymce.util.Tools.resolve("tinymce.util.I18n"),rp={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},ip="temporary-placeholder",up={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},ap=pl({name:"Notification",factory:function(t){function e(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}}function n(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}}var o,r,i,u,a=Bm({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Ja([Tg.config({})])}),c=Bm({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},n(0)],behaviours:Ja([Tg.config({})])}),s={updateProgress:function(t,o){t.getSystem().isConnected()&&c.getOpt(t).each((function(t){Tg.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(o)]},n(o)])}))},updateText:function(t,e){var n;t.getSystem().isConnected()&&(n=a.get(t),Tg.set(n,[Zr(e)]))}},l=U([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return vt.from(up[t])})).toArray()]),f=Bm(np.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Vm("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(e){t.onAction(e)}})),d=[(o=l,r={tag:"div",classes:["tox-notification__icon"]},i=t.iconProvider,u=i(),Pm(r,L(o,(function(t){return Tt(u,Fm(t,u))})).getOr(ip),u,vt.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:Ja([Tg.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:Ja([Ag.config({}),im("notification-events",[Sr(mi(),(function(t){f.getOpt(t).each(Ag.focus)}))])]),components:d.concat(t.progress?[c.asSpec()]:[]).concat(t.closeButton?[f.asSpec()]:[]),apis:s}},configFields:[yo("level"),lo("progress"),lo("icon"),lo("onAction"),lo("text"),lo("iconProvider"),lo("translationProvider"),Bo("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function cp(t,e){function n(){m(o)||(clearTimeout(o),o=null)}var o=null;return{cancel:n,throttle:function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n(),o=setTimeout((function(){o=null,t.apply(null,r)}),e)}}}function sp(t,e,n,o,r){var i=xp(t,(function(e){return(n=t).isBlock(o=e)||wt(["BR","IMG","HR","INPUT"],o.nodeName)||"false"===n.getContentEditable(o);var n,o}));return vt.from(i.backwards(e,n,o,r))}function lp(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function fp(t){return""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t)}function dp(t,e){return t.substring(e.length)}function mp(t,e,n,o){return void 0===o&&(o=0),wp(Mt.fromDom(e.startContainer)).fold((function(){return function(t,e,n,o){if(void 0===o&&(o=0),!e.collapsed||3!==e.startContainer.nodeType)return vt.none();var r=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return sp(t,e.startContainer,e.startOffset,(function(t,e,o){return function(t,n){for(var o=e-1;0<=o;o--){var r=t.charAt(o);if(fp(r))return vt.none();if(r===n)break}return vt.some(o)}(o,n).getOr(e)}),r).bind((function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return vt.none();var i=lp(r);return 0!==i.lastIndexOf(n)||dp(i,n).length<o?vt.none():vt.some({text:dp(i,n),range:r,triggerChar:n})}))}(t,e,n,o)}),(function(e){var o=t.createRng();o.selectNode(e.dom);var r=lp(o);return vt.some({range:o,text:dp(r,n),triggerChar:n})}))}function gp(t,e){return{container:t,offset:e}}function pp(t){return io("toolbarbutton",Dp,t)}function hp(t){return io("ToggleButton",Bp,t)}function vp(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,u=P(r.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return e=t.dom,function(t){var n=Cp(t.startContainer,t.startOffset);return!sp(e,n.container,n.offset,(function(t,e){return 0===e?-1:e}),e.getRoot()).filter((function(t){return!fp(t.container.data.charAt(t.offset-1))})).isSome()};var e}))(n.range,i,n.text)}));if(0===u.length)return vt.none();var a=Sp.all(R(u,(function(t){return t.fetch(n.text,t.maxResults,o).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return vt.some({lookupData:a,context:n})}var bp,yp,xp=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),wp=function(t){return Au(t,"[data-mce-autocompleter]")},Sp=tinymce.util.Tools.resolve("tinymce.util.Promise"),kp=function(t){if(3===t.nodeType)return gp(t,t.data.length);var e=t.childNodes;return 0<e.length?kp(e[e.length-1]):gp(t,e.length)},Cp=function(t,e){var n=t.childNodes;return 0<n.length&&e<n.length?Cp(n[e],0):0<n.length&&1===t.nodeType&&n.length===e?kp(n[n.length-1]):gp(t,e)},Op=Ko([mo("type"),So("text")]),_p=Ko([_o("type","autocompleteitem"),_o("active",!1),_o("disabled",!1),_o("meta",{}),mo("value"),So("text"),So("icon")]),Tp=Ko([mo("type"),mo("ch"),Eo("minChars",1),_o("columns",1),Eo("maxResults",10),ko("matches"),po("fetch"),po("onAction"),Fo("highlightOn",[],Zo)]),Ep=[Bo("disabled",!1),So("tooltip"),So("icon"),So("text"),Mo("onSetup",(function(){return i}))],Dp=Ko([mo("type"),po("onAction")].concat(Ep)),Ap=[Bo("active",!1)].concat(Ep),Bp=Ko(Ap.concat([mo("type"),po("onAction")])),Mp=[Mo("predicate",S),Ao("scope","node",["node","editor"]),Ao("position","selection",["node","selection","line"])],Fp=Ep.concat([_o("type","contextformbutton"),_o("primary",!1),po("onAction"),ur("original",c)]),Ip=Ap.concat([_o("type","contextformbutton"),_o("primary",!1),po("onAction"),ur("original",c)]),Rp=Ep.concat([_o("type","contextformbutton")]),Np=Ap.concat([_o("type","contextformtogglebutton")]),Pp=co("type",{contextformbutton:Fp,contextformtogglebutton:Ip}),Vp=Ko([_o("type","contextform"),Mo("initValue",a("")),So("label"),bo("commands",Pp),xo("launch",co("type",{contextformbutton:Rp,contextformtogglebutton:Np}))].concat(Mp)),Hp=Ko([_o("type","contexttoolbar"),mo("items")].concat(Mp));function Lp(t){return it(ph,t).getOr(mh)}function zp(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===t?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function Up(t){var e=zp(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:Lp(t)}}function jp(t,e,n){return{dom:{tag:"div",classes:U([[zp(n).tieredMenu]])},markers:Up(n)}}function Wp(t,e){return function(n){return R(I(n,e),(function(e){return{dom:t,components:e}}))}}function Gp(t,e){var n=[],o=[];return St(t,(function(t,r){e(t,r)?(0<o.length&&n.push(o),o=[],Tt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),0<o.length&&n.push(o),R(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))}function Xp(t,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Xg.parts.items({preprocess:function(n){return"auto"!==t&&1<t?Wp({tag:"div",classes:["tox-collection__group"]},t)(n):Gp(n,(function(t,n){return"separator"===e[n].type}))}})]}}function qp(t){return M(t,(function(t){return"icon"in t&&void 0!==t.icon}))}function Yp(t){return console.error(rr(t)),console.log(t),vt.none()}function Kp(t,e,n,o,r){var i,u=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xg.parts.items({preprocess:function(t){return Gp(t,(function(t,e){return"separator"===i[e].type}))}})]});return{value:t,dom:u.dom,components:u.components,items:n}}function Jp(t,e,n,o,r){var i,u;return"color"===r?{value:t,dom:(i={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xg.parts.items({preprocess:"auto"!==o?Wp({tag:"div",classes:["tox-swatches__row"]},o):c})]}]}).dom,components:i.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(i=Xp(o,n)).dom,components:i.components,items:n}:"normal"===r&&1===o?{value:t,dom:(i=Xp(1,n)).dom,components:i.components,items:n}:"normal"===r?{value:t,dom:(i=Xp(o,n)).dom,components:i.components,items:n}:"listpreview"!==r||"auto"===o?{value:t,dom:{tag:"div",classes:U([[(u=zp(r)).menu,"tox-menu-"+o+"-column"],e?[u.hasIcons]:[]])},components:kh,items:n}:{value:t,dom:(i={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xg.parts.items({preprocess:Wp({tag:"div",classes:["tox-collection__group"]},o)})]}).dom,components:i.components,items:n}}function $p(t,e,n){var o=ss(t.element,"."+n);if(0<o.length){var r=z(o,(function(t){var n=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>e})).getOr(o.length);return vt.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return vt.none()}function Qp(t,e,n){t.getSystem().broadcastOn([Hh],{})}function Zp(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))}function th(t){return t.getParam("width",Gh.DOM.getStyle(t.getElement(),"width"))}function eh(t){return vt.from(t.getParam("min_width")).filter(b)}function nh(t){return vt.from(t.getParam("min_height")).filter(b)}function oh(t){return vt.from(t.getParam("max_width")).filter(b)}function rh(t){return vt.from(t.getParam("max_height")).filter(b)}function ih(t){return!1!==t.getParam("menubar",!0,"boolean")}function uh(t){var e=t.getParam("toolbar",!0),n=!0===e,o=l(e),r=d(e)&&0<e.length;return!qh(t)&&(r||o||n)}function ah(t){var e=P(F(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),(function(t){return"string"==typeof t}));return 0<e.length?vt.some(e):vt.none()}(yp=bp={})[yp.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",yp[yp.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ch,sh,lh,fh,dh=bp,mh="tox-menu-nav__js",gh="tox-collection__item",ph={normal:mh,color:"tox-swatch"},hh="tox-collection__item--enabled",vh="tox-collection__item-icon",bh="tox-collection__item-label",yh="tox-collection__item-caret",xh="tox-collection__item--active",wh="tox-collection__item-container",Sh="tox-collection__item-container--row",kh=[Xg.parts.items({})],Ch=[mo("type"),mo("src"),So("alt"),Fo("classes",[],Zo)],Oh=Ko(Ch),_h=[mo("type"),mo("text"),So("name"),Fo("classes",["tox-collection__item-label"],Zo)],Th=Ko(_h),Eh=$n((function(){return no("type",{cardimage:Oh,cardtext:Th,cardcontainer:Dh})})),Dh=Ko([mo("type"),Do("direction","horizontal"),Do("align","left"),Do("valign","middle"),bo("items",Eh)]),Ah=[Bo("disabled",!1),So("text"),So("shortcut"),ir("value","value",jn((function(){return Mr("menuitem-value")})),$o()),_o("meta",{})],Bh=Ko([mo("type"),So("label"),bo("items",Eh),Mo("onSetup",(function(){return i})),Mo("onAction",i)].concat(Ah)),Mh=Ko([mo("type"),Bo("active",!1),So("icon")].concat(Ah)),Fh=[mo("type"),mo("fancytype"),Mo("onAction",i)],Ih=co("fancytype",{inserttable:[_o("initData",{})].concat(Fh),colorswatch:[Io("initData",{},[Bo("allowCustomColors",!0),Co("colors",$o())])].concat(Fh)}),Rh=Ko([mo("type"),Mo("onSetup",(function(){return i})),Mo("onAction",i),So("icon")].concat(Ah)),Nh=Ko([mo("type"),po("getSubmenuItems"),Mo("onSetup",(function(){return i})),So("icon")].concat(Ah)),Ph=Ko([mo("type"),So("icon"),Bo("active",!1),Mo("onSetup",(function(){return i})),po("onAction")].concat(Ah)),Vh=function(t){return e=Mr("unnamed-events"),Ja([im(e,t)]);var e},Hh=Mr("tooltip.exclusive"),Lh=Mr("tooltip.show"),zh=Mr("tooltip.hide"),Uh=Object.freeze({__proto__:null,hideAllExclusive:Qp,setComponents:function(t,e,n,o){n.getTooltip().each((function(t){t.getSystem().isConnected()&&Tg.set(t,o)}))}}),jh=Object.freeze({__proto__:null,events:function(t,e){function n(n){e.getTooltip().each((function(o){As(o),t.onHide(n,o),e.clearTooltip()})),e.clearTimer()}return $i(U([[Sr(Lh,(function(n){e.resetTimer((function(){var o,r,i=n;e.isShowing()||(Qp(i),o=t.lazySink(i).getOrDie(),r=i.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:$i("normal"===t.mode?[Sr(di(),(function(t){pr(i,Lh)})),Sr(li(),(function(t){pr(i,zh)}))]:[]),behaviours:Ja([Tg.config({})])}),e.setTooltip(r),Es(o,r),t.onShow(i,r),nf.position(o,r,{anchor:t.anchor(i)}))}),t.delay)})),Sr(zh,(function(o){e.resetTimer((function(){n(o)}),t.delay)})),Sr(Ei(),(function(t,e){e.universal||wt(e.channels,Hh)&&n(t)})),Zi((function(t){n(t)}))],"normal"===t.mode?[Sr(mi(),(function(t){pr(t,Lh)})),Sr(_i(),(function(t){pr(t,zh)})),Sr(di(),(function(t){pr(t,Lh)})),Sr(li(),(function(t){pr(t,zh)}))]:[Sr(Yi(),(function(t,e){pr(t,Lh)})),Sr(Ki(),(function(t){pr(t,zh)}))]]))}}),Wh=pa({fields:[lo("lazySink"),lo("tooltipDom"),_o("exclusive",!0),_o("tooltipComponents",[]),_o("delay",300),Ao("mode","normal",["normal","follow-highlight"]),_o("anchor",(function(t){return{type:"hotspot",hotspot:t,layouts:{onLtr:a([Xa,Ga,za,ja,Ua,Wa]),onRtl:a([Xa,Ga,za,ja,Ua,Wa])}}})),Gu("onHide"),Gu("onShow")],name:"tooltipping",active:jh,state:Object.freeze({__proto__:null,init:function(){function t(){e.on(clearTimeout)}var e=cc(),n=cc(),o=a("not-implemented");return hu({getTooltip:n.get,isShowing:n.isSet,setTooltip:n.set,clearTooltip:n.clear,clearTimer:t,resetTimer:function(n,o){t(),e.set(setTimeout(n,o))},readState:o})}}),apis:Uh}),Gh=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xh=tinymce.util.Tools.resolve("tinymce.EditorManager"),qh=function(t){return ah(t).fold((function(){return 0<t.getParam("toolbar",[],"string[]").length}),k)};function Yh(t){return t.getParam("toolbar_mode","","string")}function Kh(t){return t.getParam("toolbar_location",lh.auto,"string")}function Jh(t){return Kh(t)===lh.bottom}function $h(t){if(!t.inline)return vt.none();var e=t.getParam("fixed_toolbar_container","","string");if(0<e.length)return Du(bn(),e);var n=t.getParam("fixed_toolbar_container_target");return h(n)?vt.some(Mt.fromDom(n)):vt.none()}function Qh(t){return t.inline&&$h(t).isSome()}function Zh(t){return $h(t).getOrThunk((function(){return te(gn(Mt.fromDom(t.getElement())))}))}function tv(t){return t.inline&&!ih(t)&&!uh(t)&&!qh(t)}function ev(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Qh(t)&&!tv(t)}function nv(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([ff()],{target:n}),t.uiMothership.broadcastOn([ff()],{target:n})),t.mothership.broadcastOn([Vv],{readonly:e}),t.uiMothership.broadcastOn([Vv],{readonly:e})}function ov(t,e){t.on("init",(function(){t.mode.isReadOnly()&&nv(e,!0)})),t.on("SwitchMode",(function(){return nv(e,t.mode.isReadOnly())})),t.getParam("readonly",!1,"boolean")&&t.setMode("readonly")}function rv(){var t;return tc.config({channels:((t={})[Vv]={schema:Hv,onReceive:function(t,e){ud.set(t,e.readonly)}},t)})}function iv(t,e){var n=t.getApi(e);return function(t){t(n)}}function uv(t,e){return Qi((function(n){iv(t,n)((function(n){var o=t.onSetup(n);v(o)&&e.set(o)}))}))}function av(t,e){return Zi((function(n){return iv(t,n)(e.get())}))}function cv(t,e,n,o){var r,u,a=Ro(i);return{type:"item",dom:e.dom,components:jv(e.optComponents),data:t.data,eventOrder:Uv,hasSubmenu:t.triggersSubmenu,itemBehaviours:Ja([im("item-events",[(r=t,u=n,eu((function(t,e){iv(r,t)(r.onAction),r.triggersSubmenu||u!==dh.CLOSE_ON_EXECUTE||(pr(t,Fi()),e.stop())}))),uv(t,a),av(t,a)]),ud.config({disabled:function(){return t.disabled||o.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),rv(),Tg.config({})].concat(t.itemBehaviours))}}function sv(t){return{value:t.value,meta:O({text:t.text.getOr("")},t.meta)}}function lv(t,e,n){return Vm(t,{tag:"div",classes:n=void 0===n?[vh]:n},e)}function fv(t){return{dom:{tag:"div",classes:[bh]},components:[Zr(op.translate(t))]}}function dv(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}}function mv(t,e){return{dom:{tag:"div",classes:[bh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Zr(op.translate(e))]}]}}function gv(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(e=Wv.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=R(t.split("+"),(function(t){var n=t.toLowerCase().trim();return Tt(e,n)?e[n]:t})),Wv.mac?n.join(""):n.join("+"))}};var e,n}function pv(t){return lv("checkmark",t,["tox-collection__item-checkmark"])}function hv(t){var e=t.map((function(t){return{attributes:{title:op.translate(t)}}})).getOr({});return O({tag:"div",classes:[mh,gh]},e)}function vv(t,e,n,o){return void 0===o&&(o=vt.none()),"color"===t.presets?(r=e,i=o,c=t.ariaLabel,s=t.value,{dom:(u=t.iconContent.map((function(t){return e=r.icons,n=i,Im(t,o=e()).or(n).getOrThunk(Mm(o));var e,n,o})).getOr(""),a={tag:"div",attributes:c.map((function(t){return{title:r.translate(t)}})).getOr({}),classes:["tox-swatch"]},O(O({},a),"custom"===s?{tag:"button",classes:T(T([],a.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:u}:"remove"===s?{classes:T(T([],a.classes,!0),["tox-swatch--remove"],!1),innerHtml:u}:{attributes:O(O({},a.attributes),{"data-mce-color":s}),styles:{"background-color":s}})),optComponents:[]}):(l=t,f=e,d=o,m={tag:"div",classes:[vh]},g=n?l.iconContent.map((function(t){return Vm(t,m,f.icons,d)})).orThunk((function(){return vt.some({dom:m})})):vt.none(),p=l.checkMark,h=vt.from(l.meta).fold((function(){return fv}),(function(t){return Tt(t,"style")?y(mv,t.style):fv})),v=l.htmlContent.fold((function(){return l.textContent.map(h)}),(function(t){return vt.some(dv(t,[bh]))})),{dom:hv(l.ariaLabel),optComponents:[g,v,l.shortcutContent.map(gv),p,l.caret]});var r,i,u,a,c,s,l,f,d,m,g,p,h,v}function bv(t,e){return it(t,"tooltipWorker").map((function(t){return[Wh.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{type:"submenu",item:t,overrides:{maxHeightFunction:Ec}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){Wh.setComponents(e,[xu({element:Mt.fromDom(t)})])}))}})]})).getOr([])}function yv(t,e){var n=op.translate(t),o=Gh.DOM.encode(n);if(0<e.length){var r=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return o.replace(r,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return o}function xv(t){return{value:t}}function wv(t){return qv.test(t)||Yv.test(t)}function Sv(t){var e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()}function kv(t){return xv(Sv(t.red)+Sv(t.green)+Sv(t.blue))}function Cv(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}}function Ov(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255}function _v(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,u=t.value/100;i=Jv(0,Kv(i,1)),u=Jv(0,Kv(u,1));if(0===i)return Cv(e=n=o=$v(255*u),n,o,1);var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),l=u-c;switch(Math.floor(a)){case 0:e=c,n=s,o=0;break;case 1:e=s,n=c,o=0;break;case 2:e=0,n=c,o=s;break;case 3:e=0,n=s,o=c;break;case 4:e=s,n=0,o=c;break;case 5:e=c,n=0,o=s;break;default:e=n=o=0}return Cv(e=$v(255*(e+l)),n=$v(255*(n+l)),o=$v(255*(o+l)),1)}function Tv(t){var e,n,o=(e={value:t.value.replace(qv,(function(t,e,n,o){return e+e+n+n+o+o}))},null===(n=Yv.exec(e.value))?["FFFFFF","FF","FF","FF"]:n);return Cv(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),1)}function Ev(t,e,n,o){return Cv(parseInt(t,10),parseInt(e,10),parseInt(n,10),parseFloat(o))}function Dv(t){if("transparent"===t)return vt.some(Cv(0,0,0,0));var e=Qv.exec(t);if(null!==e)return vt.some(Ev(e[1],e[2],e[3],"1"));var n=Zv.exec(t);return null!==n?vt.some(Ev(n[1],n[2],n[3],n[4])):vt.none()}function Av(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"}function Bv(t,e){return t.fire("ResizeContent",e)}function Mv(t,e,n){return{hue:t,saturation:e,value:n}}function Fv(t){var e,n,o=0,r=t.red/255,i=t.green/255,u=t.blue/255,a=Math.min(r,Math.min(i,u)),c=Math.max(r,Math.max(i,u));return a===c?Mv(0,0,100*(o=a)):(n=60*((r===a?3:u===a?1:5)-(r===a?i-u:u===a?r-i:u-r)/(c-a)),e=(c-a)/c,o=c,Mv(Math.round(n),Math.round(100*e),Math.round(100*o)))}function Iv(t){return kv(_v(t))}function Rv(t){return(wv(n=t)?vt.some({value:(Dt(e=n,"#")?e.substring(1):e).toUpperCase()}):vt.none()).orThunk((function(){return Dv(t).map(kv)})).getOrThunk((function(){var e=document.createElement("canvas");e.height=1,e.width=1;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),n.fillStyle="#FFFFFF",n.fillStyle=t,n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data;return kv(Cv(o[0],o[1],o[2],o[3]))}));var e,n}function Nv(t){return ud.config({disabled:t,disableClass:"tox-tbtn--disabled"})}(sh=ch=ch||{}).default="wrap",sh.floating="floating",sh.sliding="sliding",sh.scrolling="scrolling",(fh=lh=lh||{}).auto="auto",fh.top="top",fh.bottom="bottom";var Pv,Vv="silver.readonly",Hv=Ko([fo("readonly",tr)]),Lv=function(t){return ud.config({disabled:t})},zv=function(t){return ud.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Uv=((Pv={})[Di()]=["disabling","alloy.base.behaviour","toggling","item-events"],Pv),jv=ct,Wv=tinymce.util.Tools.resolve("tinymce.Env"),Gv=function(t,e){return R(t,(function(t){switch(t.type){case"cardcontainer":return i=Gv((r=t).items,e),u="vertical"===r.direction?"tox-collection__item-container--column":Sh,a="left"===r.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[wh,u,a,function(){switch(r.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:i};case"cardimage":return o=t.src,{dom:{tag:"img",classes:t.classes,attributes:{src:o,alt:t.alt.getOr("")}}};case"cardtext":var n=t.name.exists((function(t){return wt(e.cardText.highlightOn,t)}))?vt.from(e.cardText.matchText).getOr(""):"";return dv(yv(t.text,n),t.classes)}var o,r,i,u,a}))},Xv=Zs(Lg(),zg()),qv=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Yv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Kv=Math.min,Jv=Math.max,$v=Math.round,Qv=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Zv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,tb=Cv(255,0,0,1),eb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),nb="tinymce-custom-colors";function ob(t){return!1!==t.getParam("custom_colors")}function rb(t){var e=t.getParam("color_map");return void 0!==e?function(t){for(var e=[],n=0;n<t.length;n+=2)e.push({text:t[n+1],value:"#"+Rv(t[n]).value,type:"choiceitem"});return e}(e):xb}function ib(t){wb.add(t)}function ub(t){var e,n=(e=rb(t).length,Math.max(5,Math.ceil(Math.sqrt(e))));return t.getParam("color_cols",n,"number")}function ab(t){var e="choiceitem",n={type:e,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[n,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]}function cb(t,e,n,o){"custom"===n?kb(t)((function(n){n.each((function(n){ib(n),t.execCommand("mceApplyTextcolor",e,n),o(n)}))}),Sb):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))}function sb(t,e){return t.concat(R(wb.state(),(function(t){return{type:yb,text:t,value:t}})).concat(ab(e)))}function lb(t,e){return function(n){n(sb(t,e))}}function fb(t,e,n){t.setIconFill("forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",n)}function db(t,e,n,o,r){t.ui.registry.addSplitButton(e,{tooltip:o,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var o,r=n;return t.dom.getParents(t.selection.getStart(),(function(t){var e;(e=t.style["forecolor"===r?"color":"background-color"])&&(o=o||e)})),vt.from(o).bind((function(t){return Dv(t).map((function(t){var n=kv(t).value;return ft(e.toLowerCase(),n)}))})).getOr(!1)},columns:ub(t),fetch:lb(rb(t),ob(t)),onAction:function(e){cb(t,n,r.get(),i)},onItemAction:function(o,i){cb(t,n,i,(function(n){r.set(n),t.fire("TextColorChange",{name:e,color:n})}))},onSetup:function(n){function o(t){t.name===e&&fb(n,t.name,t.color)}return fb(n,e,r.get()),t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})}function mb(t,e,n,o){t.ui.registry.addNestedMenuItem(e,{text:o,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){cb(t,n,e.value,i)}}]}})}function gb(t,e,n,o,r,i,u,a){return Jp(t,qp(e),Cb(e,n,o,"color"!==r?"normal":"color",i,u,a),o,r)}function pb(t,e){var n=Up(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}}function hb(t,e){return Zr(e+"x"+t)}var vb,bb,yb="choiceitem",xb=[{type:yb,text:"Light Green",value:"#BFEDD2"},{type:yb,text:"Light Yellow",value:"#FBEEB8"},{type:yb,text:"Light Red",value:"#F8CAC6"},{type:yb,text:"Light Purple",value:"#ECCAFA"},{type:yb,text:"Light Blue",value:"#C2E0F4"},{type:yb,text:"Green",value:"#2DC26B"},{type:yb,text:"Yellow",value:"#F1C40F"},{type:yb,text:"Red",value:"#E03E2D"},{type:yb,text:"Purple",value:"#B96AD9"},{type:yb,text:"Blue",value:"#3598DB"},{type:yb,text:"Dark Turquoise",value:"#169179"},{type:yb,text:"Orange",value:"#E67E23"},{type:yb,text:"Dark Red",value:"#BA372A"},{type:yb,text:"Dark Purple",value:"#843FA1"},{type:yb,text:"Dark Blue",value:"#236FA1"},{type:yb,text:"Light Gray",value:"#ECF0F1"},{type:yb,text:"Medium Gray",value:"#CED4D9"},{type:yb,text:"Gray",value:"#95A5A6"},{type:yb,text:"Dark Gray",value:"#7E8C8D"},{type:yb,text:"Navy Blue",value:"#34495E"},{type:yb,text:"Black",value:"#000000"},{type:yb,text:"White",value:"#ffffff"}],wb=function(t){function e(t){i.splice(t,1)}void 0===t&&(t=10);var n,o=eb.getItem(nb),r=l(o)?JSON.parse(o):[],i=t-(n=r).length<0?n.slice(0,t):n;return{add:function(n){var o;(-1===(o=B(i,n))?vt.none():vt.some(o)).each(e),i.unshift(n),i.length>t&&i.pop(),eb.setItem(nb,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),Sb="#000000",kb=function(t){return function(e,n){var o=!1;t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:n},onAction:function(t,e){"hex-valid"===e.name&&(o=e.value)},onSubmit:function(n){var r=n.getData().colorpicker;o?(e(vt.from(r)),n.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",r]))},onClose:i,onCancel:function(){e(vt.none())}})}},Cb=function(t,e,n,o,r,u,a){return ct(R(t,(function(c){return"choiceitem"===c.type?io("choicemenuitem",Mh,c).fold(Yp,(function(s){return vt.some(function(t,e,n,o,r,u,a,c){void 0===c&&(c=!0);var s=vv({presets:n,textContent:e?t.text:vt.none(),htmlContent:vt.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:vt.none(),checkMark:e?vt.some(pv(a.icons)):vt.none(),caret:vt.none(),value:t.value},a,c);return Go(cv({data:sv(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Fg.set(t,e)},isActive:function(){return Fg.isOn(t)},isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)}}},onAction:function(e){return o(t.value)},onSetup:function(t){return t.setActive(r),i},triggersSubmenu:!1,itemBehaviours:[]},s,u,a),{toggling:{toggleClass:hh,toggleOnExecute:!1,selected:t.active}})}(s,1===n,o,e,u(c.value),r,a,qp(t)))})):vt.none()})))},Ob=Mr("cell-over"),_b=Mr("cell-execute"),Tb={inserttable:function(t){var e=Mr("size-label"),n=function(t){for(var e=[],n=0;n<10;n++){for(var o=[],r=0;r<10;r++)o.push(function(t,e,n){function o(n){return hr(n,_b,{row:t,col:e})}function r(t,e){e.stop(),o(t)}var i;return Su({dom:{tag:"div",attributes:((i={role:"button"})["aria-labelledby"]=n,i)},behaviours:Ja([im("insert-table-picker-cell",[Sr(di(),Ag.focus),Sr(Di(),o),Sr(yi(),r),Sr(Bi(),r)]),Fg.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ag.config({onFocus:function(n){return hr(n,Ob,{row:t,col:e})}})])})}(n,r,t));e.push(o)}return e}(e),o=hb(0,0),r=Bm({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[o],behaviours:Ja([Tg.config({})])});return{type:"widget",data:{value:Mr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Xv.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:j(n,(function(t){return R(t,ku)})).concat(r.asSpec()),behaviours:Ja([im("insert-table-picker",[Qi((function(t){Tg.set(r.get(t),[o])})),_r(Ob,(function(t,e,o){var i=o.event,u=i.row,a=i.col;!function(t,e,n){for(var o=0;o<10;o++)for(var r=0;r<10;r++)Fg.set(t[o][r],o<=e&&r<=n)}(n,u,a),Tg.set(r.get(t),[hb(u+1,a+1)])})),_r(_b,(function(e,n,o){var r=o.event,i=r.row,u=r.col;t.onAction({numRows:i+1,numColumns:u+1}),pr(e,Fi())}))]),Og.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n,o,r,i=(o=e,r=(n=t).initData.allowCustomColors&&o.colorinput.hasCustomColors(),n.initData.colors.fold((function(){return sb(o.colorinput.getColors(),r)}),(function(t){return t.concat(ab(r))}))),u=e.colorinput.getColorCols(),a=gb(Mr("menu-value"),i,(function(e){t.onAction({value:e})}),u,"color",dh.CLOSE_ON_EXECUTE,S,e.shared.providers),c=O(O({},a),{markers:Up("color"),movement:pb(u,"color")});return{type:"widget",data:{value:Mr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Xv.widget(Xg.sketch(c))]}}},Eb=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:O({tag:"div",classes:[gh,"tox-collection__group-heading"]},e),components:[]}},Db=function(t,e,n,o){void 0===o&&(o=!0);var r=vv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:vt.none(),ariaLabel:t.text,caret:vt.none(),checkMark:vt.none(),shortcutContent:t.shortcut},n,o);return cv({data:sv(t),getApi:function(t){return{isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},Ab=function(t,e,n,o,r){void 0===o&&(o=!0);var u=(r=void 0!==r&&r)?lv("chevron-down",n.icons,[yh]):lv("chevron-right",n.icons,[yh]),a=vv({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:vt.none(),ariaLabel:t.text,caret:vt.some(u),checkMark:vt.none(),shortcutContent:t.shortcut},n,o);return cv({data:sv(t),getApi:function(t){return{isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)}}},disabled:t.disabled,onAction:i,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,e,n)},Bb=function(t,e,n,o){void 0===o&&(o=!0);var r=vv({iconContent:t.icon,textContent:t.text,htmlContent:vt.none(),ariaLabel:t.text,checkMark:vt.some(pv(n.icons)),caret:vt.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Go(cv({data:sv(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Fg.set(t,e)},isActive:function(){return Fg.isOn(t)},isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:hh,toggleOnExecute:!1,selected:t.active}})},Mb=function(t,e){return it(Tb,t.fancytype).map((function(n){return n(t,e)}))};function Fb(t,e,n,o,r){var i=qp(e),u=ct(R(e,(function(t){function e(t){return function(t,e,n,o,r){function i(t){return r?O(O({},t),{shortcut:vt.none(),icon:t.text.isSome()?vt.none():t.icon}):t}var u=n.shared.providers;switch(t.type){case"menuitem":return io("menuitem",Rh,t).fold(Yp,(function(t){return vt.some(Db(i(t),e,u,o))}));case"nestedmenuitem":return io("nestedmenuitem",Nh,t).fold(Yp,(function(t){return vt.some(Ab(i(t),e,u,o,r))}));case"togglemenuitem":return io("togglemenuitem",Ph,t).fold(Yp,(function(t){return vt.some(Bb(i(t),e,u,o))}));case"separator":return io("separatormenuitem",Op,t).fold(Yp,(function(t){return vt.some(Eb(t))}));case"fancymenuitem":return io("fancymenuitem",Ih,t).fold(Yp,(function(t){return Mb(i(t),n)}));default:return console.error("Unknown item in general menu",t),vt.none()}}(t,n,o,r?!Tt(t,"text"):i,r)}return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(O(O({},t),{disabled:!0})):e(t)})));return(r?Kp:Jp)(t,i,u,1,"normal")}function Ib(t){return Jg.singleData(t.value,t)}function Rb(t,e,n){return Au(t,e,n).isSome()}function Nb(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout((function(){t.apply(null,o),n=null}),e)}}}function Pb(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?vt.none():vt.some(e.touches[0])}function Vb(){return ln().browser.isFirefox()}function Hb(t,e){return Ro(it(t,"target").getOr(e))}function Lb(t,e,n,o,r,i){var u,a,c=t(e,o),s=(u=Ro(!1),a=Ro(!1),{stop:function(){u.set(!0)},cut:function(){a.set(!0)},isStopped:u.get,isCut:a.get,event:n,setSource:r.set,getSource:r.get});return c.fold((function(){return i.logEventNoHandlers(e,o),qb.complete()}),(function(t){var n=t.descHandler;return Lr(n)(s),s.isStopped()?(i.logEventStopped(e,t.element,n.purpose),qb.stopped()):s.isCut()?(i.logEventCut(e,t.element,n.purpose),qb.complete()):qt(t.element).fold((function(){return i.logNoParent(e,t.element,n.purpose),qb.complete()}),(function(o){return i.logEventResponse(e,t.element,n.purpose),qb.resume(o)}))}))}function zb(t){function e(e){return qt(t.element).fold(k,(function(t){return zt(e,t)}))}function n(t,n){return r.find(e,t,n)}function o(t){var e=r.filter(Ei());St(e,(function(e){Lr(e.descHandler)(t)}))}var r=function(){function t(t){Fr(t.element).each((function(t){delete o[t],n.unregisterId(t)}))}var e,n=(e={},{registerId:function(t,n,o){tt(o,(function(o,r){var i,u=void 0!==e[r]?e[r]:{};u[n]={cHandler:y.apply(void 0,[(i=o).handler].concat(t)),purpose:i.purpose},e[r]=u}))},unregisterId:function(t){tt(e,(function(e,n){Tt(e,t)&&delete e[t]}))},filterByType:function(t){return it(e,t).map((function(t){return nt(t,(function(t,e){return{id:e,descHandler:t}}))})).getOr([])},find:function(t,n,o){return it(e,n).bind((function(e){return fr(o,(function(t){return n=e,Fr(o=t).bind((function(t){return it(n,t)})).map((function(t){return{element:o,descHandler:t}}));var n,o}),t)}))}}),o={};return{find:function(t,e,o){return n.find(t,e,o)},filter:function(t){return n.filterByType(t)},register:function(e){var r,i=Fr((r=e).element).getOrThunk((function(){return t=r.element,e=Mr(au+"uid-"),su(t,e),e;var t,e}));ut(o,i)&&function(e){var n=o[i];if(n!==e)throw new Error('The tagId "'+i+'" is already used by: '+Br(n.element)+"\nCannot use it for: "+Br(e.element)+"\nThe conflicting element is"+(vn(n.element)?" ":" not ")+"already in the DOM");t(e)}(e),n.registerId([e],i,e.events),o[i]=e},unregister:t,getById:function(t){return it(o,t)}}}(),u=function(t,e){var n,o,r,i,u,a,c,s,l,f=O({stopBackspace:!0},e),d=(u=f,a=cc(),c=Ro(!1),s=Nb((function(t){u.triggerEvent(Mi(),t),c.set(!0)}),400),l=cr([{key:ri(),value:function(t){return Pb(t).each((function(e){s.cancel();var n={x:e.clientX,y:e.clientY,target:t.target};s.schedule(t),c.set(!1),a.set(n)})),vt.none()}},{key:ii(),value:function(t){return s.cancel(),Pb(t).each((function(t){a.on((function(e){var n=t,o=e,r=Math.abs(n.clientX-o.x),i=Math.abs(n.clientY-o.y);(5<r||5<i)&&a.clear()}))})),vt.none()}},{key:ui(),value:function(t){return s.cancel(),a.get().filter((function(e){return zt(e.target,t.target)})).map((function(e){return c.get()?(t.prevent(),!1):u.triggerEvent(Bi(),t)}))}}]),{fireIfReady:function(t,e){return it(l,e).bind((function(e){return e(t)}))}}),m=R(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return sc(t,e,(function(t){d.fireIfReady(t,e).each((function(e){e&&t.kill()})),f.triggerEvent(e,t)&&t.kill()}))})),g=cc(),p=sc(t,"paste",(function(t){d.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),f.triggerEvent("paste",t)&&t.kill(),g.set(setTimeout((function(){f.triggerEvent(Ti(),t)}),0))})),h=sc(t,"keydown",(function(t){var e;f.triggerEvent("keydown",t)?t.kill():!f.stopBackspace||(e=t).raw.which!==sd[0]||wt(["input","textarea"],Ft(e.target))||Rb(e.target,'[contenteditable="true"]')||t.prevent()})),v=(n=t,o=function(t){f.triggerEvent("focusin",t)&&t.kill()},Vb()?lc(n,"focus",o):sc(n,"focusin",o)),b=cc(),y=(r=t,i=function(t){f.triggerEvent("focusout",t)&&t.kill(),b.set(setTimeout((function(){f.triggerEvent(_i(),t)}),0))},Vb()?lc(r,"blur",i):sc(r,"focusout",i));return{unbind:function(){St(m,(function(t){t.unbind()})),h.unbind(),v.unbind(),y.unbind(),p.unbind(),g.on(clearTimeout),b.on(clearTimeout)}}}(t.element,{triggerEvent:function(t,e){return Nu(t,e.target,(function(o){return Kb(n,t,e,e.target,o)}))}}),c={debugInfo:a("real"),triggerEvent:function(t,e,o){Nu(t,e,(function(r){return Kb(n,t,o,e,r)}))},triggerFocus:function(t,e){Fr(t).fold((function(){ba(t)}),(function(o){Nu(Oi(),t,(function(o){var r,u,a=n,c=Oi(),s=o,l=Hb(r={originator:e,kill:i,prevent:i,target:t},u=t);return Lb(a,c,r,u,l,s),!1}))}))},triggerEscape:function(t,e){c.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return h(t)},getByDom:function(t){return v(t)},build:Su,addToGui:function(t){f(t)},removeFromGui:function(t){d(t)},addToWorld:function(t){s(t)},removeFromWorld:function(t){l(t)},broadcast:function(t){m(t)},broadcastOn:function(t,e){g(t,e)},broadcastEvent:function(t,e){p(t,e)},isConnected:k},s=function(t){t.connect(c),Xe(t.element)||(r.register(t),St(t.components(),s),c.triggerEvent(Ri(),t.element,{target:t.element}))},l=function(t){Xe(t.element)||(St(t.components(),l),r.unregister(t)),t.disconnect()},f=function(e){Es(t,e)},d=function(t){As(t)},m=function(t){o({universal:!0,data:t})},g=function(t,e){o({universal:!1,channels:t,data:e})},p=function(t,e){var n,o,u=r.filter(t);return o={stop:function(){n.set(!0)},cut:i,isStopped:(n=Ro(!1)).get,isCut:S,event:e,setSource:w("Cannot set source of a broadcasted event"),getSource:w("Cannot get source of a broadcasted event")},St(u,(function(t){Lr(t.descHandler)(o)})),o.isStopped()},h=function(t){return r.getById(t).fold((function(){return Nn.error(new Error('Could not find component with uid: "'+t+'" in system.'))}),Nn.value)},v=function(t){var e=Fr(t).getOr("not found");return h(e)};return s(t),{root:t,element:t.element,destroy:function(){u.unbind(),En(t.element)},add:f,remove:d,getByUid:h,getByDom:v,addToWorld:s,removeFromWorld:l,broadcast:m,broadcastOn:g,broadcastEvent:p}}function Ub(t,e,n,o){var r=oy(t,e,n,o);return Zb.sketch(r)}function jb(t,e){return Zb.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})}function Wb(t){return Ja([Ag.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=Kr(e);e.dom.setSelectionRange(0,n.length)}:i})])}function Gb(t){return{tag:t.tag,attributes:O({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}}function Xb(t,e){function n(){return s.get().isSome()}function o(){n()&&$g.hide(f)}var r,u,s=cc(),l=Ro(!1),f=Su($g.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ja([im("dismissAutocompleter",[Sr(Ui(),(function(){return d()}))])]),lazySink:e.getSink})),d=function(){var e;n()&&(e=s.get().map((function(t){return t.element})),wp(e.getOr(Mt.fromDom(t.selection.getNode()))).each(Fe),o(),s.clear(),l.set(!1))},m=Rt((function(){return o=et(t.ui.registry.getAll().popups,(function(t){return io("Autocompleter",Tp,t).fold((function(t){throw new Error(rr(t))}),c)})),e=nt(o,(function(t){return t.ch})),n={},St(e,(function(t){n[t]={}})),r=Ct(n),i=rt(o),{dataset:o,triggerChars:r,lookupByChar:function(t){return P(i,(function(e){return e.ch===t}))}};var e,n,o,r,i})),g=function(r){var u=r;s.get().map((function(e){return mp(t.dom,t.selection.getRng(),e.triggerChar).bind((function(e){return vp(t,m,e,u)}))})).getOrThunk((function(){return e=t,o=(n=m)(),r=e.selection.getRng(),i=e.dom,u=r,Z(o.triggerChars,(function(t){return mp(i,u,t)})).bind((function(t){return vp(e,n,t)}));var e,n,o,r,i,u})).fold(d,(function(r){var u,c=r.context;n()||(u=function(t,e){return wp(Mt.fromDom(t.selection.getNode())).getOrThunk((function(){var n,o,r=Mt.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Tn(r,Mt.fromDom(e.extractContents())),e.insertNode(r.dom),qt(r).each((function(t){return t.dom.normalize()})),n=cs,(o=function(t){for(var e=Kt(t),r=e.length-1;0<=r;r--){var i=e[r];if(n(i))return vt.some(i);var u=o(i);if(u.isSome())return u}return vt.none()})(r).map((function(e){var n;t.selection.setCursorLocation(e.dom,"img"===Ft(n=e)?1:as(n).fold((function(){return Kt(n).length}),(function(t){return t.length})))})),r}))}(t,c.range),s.set({triggerChar:c.triggerChar,element:u,matchLength:c.text.length}),l.set(!1)),r.lookupData.then((function(n){s.get().map((function(u){var c,s,m,p,h=r.context;u.triggerChar===h.triggerChar&&(s=h.triggerChar,p=Z(m=n,(function(t){return vt.from(t.columns)})).getOr(1),0<(c=j(m,(function(n){return function(t,e,n,o,r,u,c){var s=1===o,l=!s||qp(t);return ct(R(t,(function(t){switch(t.type){case"separator":return io("Autocompleter.Separator",Op,t).fold(Yp,(function(t){return vt.some(Eb(t))}));case"cardmenuitem":return io("cardmenuitem",Bh,t).fold(Yp,(function(t){return vt.some((o=O(O({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),i=r,a=u,s={itemBehaviours:bv(t.meta,u),cardText:{matchText:e,highlightOn:c}},l={dom:hv(o.label),optComponents:[vt.some({dom:{tag:"div",classes:[wh,Sh]},components:Gv(o.items,s)})]},cv({data:sv(O({text:vt.none()},o)),disabled:o.disabled,getApi:function(t){return{isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){ud.set(t,e),St(ss(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(ud)&&ud.set(t,e)}))}))}}},onAction:o.onAction,onSetup:o.onSetup,triggersSubmenu:!1,itemBehaviours:vt.from(s.itemBehaviours).getOr([])},l,i,a.providers)));var o,i,a,s,l}));default:return io("Autocompleter.Item",_p,t).fold(Yp,(function(t){return vt.some(function(t,e,n,o,r,u,c,s){void 0===s&&(s=!0);var l=vv({presets:"normal",textContent:vt.none(),htmlContent:n?t.text.map((function(t){return yv(t,e)})):vt.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:vt.none(),checkMark:vt.none(),caret:vt.none(),value:t.value},c.providers,s,t.icon);return cv({data:sv(t),disabled:t.disabled,getApi:a({}),onAction:function(e){return r(t.value,t.meta)},onSetup:a(i),triggersSubmenu:!1,itemBehaviours:bv(t.meta,c)},l,u,c.providers)}(t,e,s,0,n,r,u,l))}))}})))}(n.items,n.matchText,(function(e,r){var i=t.selection.getRng();mp(t.dom,i,s).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var i=t.range,u={hide:function(){d()},reload:function(t){o(),g(t)}};l.set(!0),n.onAction(u,i,e,r),l.set(!1)}))}),p,dh.BUBBLE_TO_SANDBOX,e,n.highlightOn)}))).length?function(e,n,o,r){e.matchLength=n.text.length;var i,u,a,c,s,l,d=Z(o,(function(t){return vt.from(t.columns)})).getOr(1);$g.showAt(f,Xg.sketch((i=Jp("autocompleter-value",!0,r,d,"normal"),u=d,c=((a=vb.ContentFocus)===vb.ContentFocus?Rl:Il)(),s=pb(u,"normal"),l=Up("normal"),{dom:i.dom,components:i.components,items:i.items,value:i.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:a===vb.ContentFocus,focusManager:c,menuBehaviours:Vh("auto"!==u?[]:[Qi((function(t,e){$p(t,4,l.item).each((function(e){var n=e.numColumns,o=e.numRows;Og.setGridSize(t,o,n)}))}))])})),{anchor:{type:"node",root:Mt.fromDom(t.getBody()),node:vt.from(e.element)}}),$g.getContent(f).each(cd.highlightFirst)}(u,h,n,c):(10<=h.text.length-u.matchLength?d:o)())}))}))}))},p={onKeypress:cp((function(t){27!==t.which&&g()}),50),cancelIfNecessary:d,isMenuOpen:function(){return $g.isOpen(f)},isActive:n,isProcessingAction:l.get,getView:function(){return $g.getContent(f)}};function h(t,e){hr(t,pi(),{raw:e})}!1===t.hasPlugin("rtc")&&(r=p,(u=t).on("keypress compositionend",r.onKeypress.throttle),u.on("remove",r.onKeypress.cancel),u.on("keydown",(function(t){function e(){return r.getView().bind(cd.getHighlighted)}8===t.which&&r.onKeypress.throttle(t),r.isActive()&&(27===t.which&&r.cancelIfNecessary(),r.isMenuOpen()?13===t.which?(e().each(vr),t.preventDefault()):40===t.which?(e().fold((function(){r.getView().each(cd.highlightFirst)}),(function(e){h(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==t.which&&38!==t.which&&39!==t.which||e().each((function(e){h(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==t.which&&38!==t.which&&40!==t.which||r.cancelIfNecessary())})),u.on("NodeChange",(function(t){r.isActive()&&!r.isProcessingAction()&&wp(Mt.fromDom(t.element)).isNone()&&r.cancelIfNecessary()})))}(bb=vb={})[bb.ContentFocus=0]="ContentFocus",bb[bb.UiFocus=1]="UiFocus";var qb=No([{stopped:[]},{resume:["element"]},{complete:[]}]),Yb=function(t,e,n,o,r,i){return Lb(t,e,n,o,r,i).fold(k,(function(o){return Yb(t,e,n,o,r,i)}),S)},Kb=function(t,e,n,o,r){var i=Hb(n,o);return Yb(t,e,n,o,i,r)},Jb=pl({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=_(e,["attributes"]);return{uid:t.uid,dom:O({tag:"div",attributes:O({role:"presentation"},n)},o),components:t.components,behaviours:Xs(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[_o("components",[]),Gs("containerBehaviours",[]),_o("events",{}),_o("domModification",{}),_o("eventOrder",{})]}),$b=a([_o("prefix","form-field"),Gs("fieldBehaviours",[td,wf])]),Qb=a([Wf({schema:[lo("dom")],name:"label"}),Wf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[lo("text")],name:"aria-descriptor"}),Uf({factory:{sketch:function(t){var e,n,o=(e=["factory"],n={},tt(t,(function(t,o){wt(e,o)||(n[o]=t)})),n);return t.factory.sketch(o)}},schema:[lo("factory")],name:"field"})]),Zb=hl({name:"FormField",configFields:$b(),partFields:Qb(),factory:function(t,e,n,o){var r=qs(t.fieldBehaviours,[td.config({find:function(e){return il(e,t,"field")}}),wf.config({store:{mode:"manual",getValue:function(t){return td.getCurrent(t).bind(wf.getValue)},setValue:function(t,e){td.getCurrent(t).each((function(t){wf.setValue(t,e)}))}}})]),i=$i([Qi((function(e,n){var o=al(e,t,["label","field","aria-descriptor"]);o.field().each((function(e){var n=Mr(t.prefix);o.label().each((function(t){oe(t.element,"for",n),oe(e.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=Mr(t.prefix);oe(n.element,"id",o),oe(e.element,"aria-describedby",o)}))}))}))]);return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:{getField:function(e){return il(e,t,"field")},getLabel:function(e){return il(e,t,"label")}}}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),ty=Object.freeze({__proto__:null,exhibit:function(t,e){return Hr({attributes:cr([{key:e.tabAttr,value:"true"}])})}}),ey=pa({fields:[_o("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:ty}),ny=tinymce.util.Tools.resolve("tinymce.html.Entities"),oy=function(t,e,n,o){return{dom:ry(n),components:t.toArray().concat([e]),fieldBehaviours:Ja(o)}},ry=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},iy=Mr("form-component-change"),uy=Mr("form-close"),ay=Mr("form-cancel"),cy=Mr("form-action"),sy=Mr("form-submit"),ly=Mr("form-block"),fy=Mr("form-unblock"),dy=Mr("form-tabchange"),my=Mr("form-resize"),gy=a([yo("data"),_o("inputAttributes",{}),_o("inputStyles",{}),_o("tag","input"),_o("inputClasses",[]),Gu("onSetValue"),_o("styles",{}),_o("eventOrder",{}),Gs("inputBehaviours",[wf,Ag]),_o("selectOnFocus",!0)]),py=pl({name:"Input",configFields:gy(),factory:function(t,e){return{uid:t.uid,dom:Gb(t),components:[],behaviours:O(O({},Wb(n=t)),qs(n.inputBehaviours,[wf.config({store:O(O({mode:"manual"},n.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return Kr(t.element)},setValue:function(t,e){Kr(t.element)!==e&&Jr(t.element,e)}}),onSetValue:n.onSetValue})])),eventOrder:t.eventOrder};var n}}),hy={},vy={exports:hy};function by(t){setTimeout((function(){throw t}),0)}function yy(t){var e=Ft(t);return wt(My,e)}function xy(t,e){Gr(e.getRoot(t).getOr(t.element),e.invalidClass),e.notify.each((function(e){yy(t.element)&&oe(t.element,"aria-invalid",!1),e.getContainer(t).each((function(t){Ar(t,e.validHtml)})),e.onValid(t)}))}function wy(t,e,n,o){Wr(e.getRoot(t).getOr(t.element),e.invalidClass),e.notify.each((function(e){yy(t.element)&&oe(t.element,"aria-invalid",!0),e.getContainer(t).each((function(t){Ar(t,o)})),e.onInvalid(t,o)}))}function Sy(t,e,n){return e.validator.fold((function(){return By(Nn.value(!0))}),(function(e){return e.validate(t)}))}function ky(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),Sy(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return wy(t,e,0,n),Nn.error(n)}),(function(n){return xy(t,e),Nn.value(n)})):Nn.error("No longer in system")}))}!function(){var t=this,e=function(){var t,e,n,o={exports:{}};function r(){}function i(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var n,o=1===t._state?e.onFulfilled:e.onRejected;if(null!==o){try{n=o(t._value)}catch(n){return void c(e.promise,n)}a(e.promise,n)}else(1===t._state?a:c)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void s(t);if("function"==typeof n)return void f((o=n,r=e,function(){o.apply(r,arguments)}),t)}t._state=1,t._value=e,s(t)}catch(e){c(t,e)}var o,r}function c(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function l(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function f(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,c(e,t))}))}catch(t){if(n)return;n=!0,c(e,t)}}t=o,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=setTimeout,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(r);return u(this,new l(t,e,n)),n},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)!function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return a.call(u,(function(t){r(i,t)}),n),0}e[i]=u,0==--o&&t(e)}catch(u){n(u)}}(r,e[r])}))},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},i._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){n(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},t.exports?t.exports=i:e.Promise||(e.Promise=i);var d=o.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||d}};"object"==typeof hy&&void 0!==vy?vy.exports=e():(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=e()}();var Cy,Oy,_y=vy.exports.boltExport,Ty=function(t){function e(t){r()?i(t):o.push(t)}var n=vt.none(),o=[],r=function(){return n.isSome()},i=function(t){n.each((function(e){setTimeout((function(){t(e)}),0)}))};return t((function(t){r()||(n=vt.some(t),St(o,i),o=[])})),{get:e,map:function(t){return Ty((function(n){e((function(e){n(t(e))}))}))},isReady:r}},Ey={nu:Ty,pure:function(t){return Ty((function(e){e(t)}))}},Dy=function(t){function e(e){t().then(e,by)}return{map:function(e){return Dy((function(){return t().then(e)}))},bind:function(e){return Dy((function(){return t().then((function(t){return e(t).toPromise()}))}))},anonBind:function(e){return Dy((function(){return t().then((function(){return e.toPromise()}))}))},toLazy:function(){return Ey.nu(e)},toCached:function(){var e=null;return Dy((function(){return e=null===e?t():e}))},toPromise:t,get:e}},Ay=function(t){return Dy((function(){return new _y(t)}))},By=function(t){return Dy((function(){return _y.resolve(t)}))},My=["input","textarea"],Fy=Object.freeze({__proto__:null,markValid:xy,markInvalid:wy,query:Sy,run:ky,isInvalid:function(t,e){return Xr(e.getRoot(t).getOr(t.element),e.invalidClass)}}),Iy=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return $i([Sr(e.onEvent,(function(e){ky(e,t).get(c)}))].concat(e.validateOnLoad?[Qi((function(e){ky(e,t).get(i)}))]:[]))})).getOr({})}}),Ry=pa({fields:[lo("invalidClass"),_o("getRoot",vt.none),Oo("notify",[_o("aria","alert"),_o("getContainer",vt.none),_o("validHtml",""),Gu("onValid"),Gu("onInvalid"),Gu("onValidate")]),Oo("validator",[lo("validate"),_o("onEvent","input"),_o("validateOnLoad",!0)])],name:"invalidating",active:Iy,apis:Fy,extra:{validation:function(t){return function(e){var n=wf.getValue(e);return By(t(n))}}}}),Ny=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Py=pa({fields:[fo("others",ro(Nn.value,$o()))],name:"coupling",apis:Ny,state:Object.freeze({__proto__:null,init:function(){var t={},e=a({});return hu({readState:e,getOrCreate:function(e,n,o){var r=Ct(n.others);if(r)return it(t,o).getOrThunk((function(){var r=it(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}})}),Vy=a("sink"),Hy=a(Wf({name:Vy(),overrides:a({dom:{tag:"div"},behaviours:Ja([nf.config({useFixed:k})]),events:$i([Tr(pi()),Tr(ci()),Tr(yi())])})}));function Ly(t,e){var n=t.getHotspot(e).getOr(e),o=t.getAnchorOverrides();return t.layouts.fold((function(){return{type:"hotspot",hotspot:n,overrides:o}}),(function(t){return{type:"hotspot",hotspot:n,overrides:o,layouts:t}}))}function zy(t,e,n,o,r,i,u){var a,c=Ly(t,n),s=n,l=o,f=r,d=u,m=e,g=(0,(a=t).fetch)(s).map(m),p=Yw(s,a);return g.map((function(t){return t.bind((function(t){return vt.from(Jg.sketch(O(O({},f.menu()),{uid:lu(""),data:t,highlightImmediately:d===Cy.HighlightFirst,onOpenMenu:function(t,e){var n=p().getOrDie();nf.position(n,e,{anchor:c}),lf.decloak(l)},onOpenSubmenu:function(t,e,n){var o=p().getOrDie();nf.position(o,n,{anchor:{type:"submenu",item:e}}),lf.decloak(l)},onRepositionMenu:function(t,e,n){var o=p().getOrDie();nf.position(o,e,{anchor:c}),St(n,(function(t){nf.position(o,t.triggeredMenu,{anchor:{type:"submenu",item:t.triggeringItem}})}))},onEscape:function(){return Ag.focus(s),lf.close(l),vt.some(!0)}})))}))})).map((function(t){return t.fold((function(){lf.isOpen(o)&&lf.close(o)}),(function(t){lf.cloak(o),lf.open(o,t),i(o)})),o}))}function Uy(t,e,n,o,r,i){var u=Py.getCoupled(n,"sandbox");return(lf.isOpen(u)?function(t,e,n,o,r,i,u){return lf.close(o),By(o)}:zy)(t,e,n,u,o,r,i)}function jy(t){lf.getState(t).each((function(t){Jg.repositionMenus(t)}))}function Wy(t,e,n){var o=Bu(),r=Yw(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:kf(t.sandboxBehaviours,[wf.config({store:{mode:"memory",initialValue:e}}),lf.config({onOpen:function(r,i){var u,a,c,s,l,f,d=Ly(t,e);o.link(e.element),t.matchWidth&&(u=d.hotspot,a=i,c=t.useMinWidth,l=td.getCurrent(a).getOr(a),f=Ce(u.element),c?fe(l.element,"min-width",f+"px"):(s=l.element,On.set(s,f))),t.onOpen(d,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return Iu(n,o)||Iu(e,o)},getAttachPoint:function(){return r().getOrDie()}}),td.config({find:function(t){return lf.getState(t).bind((function(t){return td.getCurrent(t)}))}}),tc.config({channels:O(O({},Vs({isExtraPart:S})),Hs({doReposition:jy}))})])}}function Gy(t){jy(Py.getCoupled(t,"sandbox"))}function Xy(){return[_o("sandboxClasses",[]),Sf("sandboxBehaviours",[td,tc,lf,wf])]}function qy(t){return Wf({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:$i([kr(ri(),(function(e,n,o){return t(e,o)}),[e]),kr(ci(),(function(e,n,o){return t(e,o)}),[e]),kr(si(),(function(e,n,o){o.mouseIsDown.get()&&t(e,o)}),[e])])}}))}})}function Yy(t){var e=t.event.raw;return-1===e.type.indexOf("touch")?void 0!==e.clientX?vt.some(e).map((function(t){return kn(t.clientX,t.clientY)})):vt.none():void 0!==e.touches&&1===e.touches.length?vt.some(e.touches[0]).map((function(t){return kn(t.clientX,t.clientY)})):vt.none()}function Ky(t){return t.model.minX}function Jy(t){return t.model.minY}function $y(t){return t.model.minX-1}function Qy(t){return t.model.minY-1}function Zy(t){return t.model.maxX}function tx(t){return t.model.maxY}function ex(t){return t.model.maxX+1}function nx(t){return t.model.maxY+1}function ox(t,e,n){return e(t)-n(t)}function rx(t){return ox(t,Zy,Ky)}function ix(t){return ox(t,tx,Jy)}function ux(t){return rx(t)/2}function ax(t){return ix(t)/2}function cx(t){return t.stepSize}function sx(t){return t.snapToGrid}function lx(t){return t.snapStart}function fx(t){return t.rounded}function dx(t,e){return void 0!==t[e+"-edge"]}function mx(t){return dx(t,"left")}function gx(t){return dx(t,"right")}function px(t){return dx(t,"top")}function hx(t){return dx(t,"bottom")}function vx(t){return t.model.value.get()}function bx(t,e){return{x:t,y:e}}function yx(t,e){hr(t,fS(),{value:e})}function xx(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)}function wx(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)}function Sx(t,e,n){return Math.max(e,Math.min(n,t))}function kx(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=s?e-1:e,p=l?n+1:n;if(r<f)return g;if(d<r)return p;var h,v,b,y,x,w=Sx((x=f,(Math.min(d,Math.max(r,x))-x)/m*o+e),g,p);return u&&e<=w&&w<=n?(h=w,v=e,b=n,y=i,a.fold((function(){var t=Math.round((h-v)/y)*y;return Sx(v+t,v-1,b+1)}),(function(t){var e=Math.round((h-t)%y/y),n=Math.floor((h-t)/y),o=Math.floor((b-t)/y),r=Math.min(o,n+e);return Math.max(t,t+r*y)}))):c?Math.round(w):w}function Cx(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?u?a:l:(r-e)/o*c}function Ox(t){return t.element.dom.getBoundingClientRect()}function _x(t){return Ox(t)[dS]}function Tx(t){return Ox(t).right}function Ex(t){return Ox(t).top}function Dx(t){return Ox(t).bottom}function Ax(t){return Ox(t).width}function Bx(t){return Ox(t).height}function Mx(t,e){var n=Ox(t),o=Ox(e);return(n[dS]+n.right)/2-o[dS]}function Fx(t,e){var n=Ox(t),o=Ox(e);return(n.top+n.bottom)/2-o.top}function Ix(t,e){hr(t,fS(),{value:e})}function Rx(t,e,n){return kx({min:Ky(e),max:Zy(e),range:rx(e),value:n,step:cx(e),snap:sx(e),snapStart:lx(e),rounded:fx(e),hasMinEdge:mx(e),hasMaxEdge:gx(e),minBound:_x(t),maxBound:Tx(t),screenRange:Ax(t)})}function Nx(t){return function(e,n){return Ix(e,{x:r=(0<t?wx:xx)(vx(o=n).x,Ky(o),Zy(o),cx(o))}),vt.some(r).map(k);var o,r}}function Px(t,e,n,o,r,i){var u,a,c,s,l,f,d,m,g=(a=i,c=n,s=o,l=r,f=Ax(u=e),d=s.bind((function(t){return vt.some(Mx(t,u))})).getOr(0),m=l.bind((function(t){return vt.some(Mx(t,u))})).getOr(f),Cx({min:Ky(a),max:Zy(a),range:rx(a),value:c,hasMinEdge:mx(a),hasMaxEdge:gx(a),minBound:_x(u),minOffset:0,maxBound:Tx(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m}));return _x(e)-_x(t)+g}function Vx(t,e){hr(t,fS(),{value:e})}function Hx(t,e,n){return kx({min:Jy(e),max:tx(e),range:ix(e),value:n,step:cx(e),snap:sx(e),snapStart:lx(e),rounded:fx(e),hasMinEdge:px(e),hasMaxEdge:hx(e),minBound:Ex(t),maxBound:Dx(t),screenRange:Bx(t)})}function Lx(t){return function(e,n){return Vx(e,{y:r=(0<t?wx:xx)(vx(o=n).y,Jy(o),tx(o),cx(o))}),vt.some(r).map(k);var o,r}}function zx(t,e,n,o,r,i){var u,a,c,s,l,f,d,m,g=(a=i,c=n,s=o,l=r,f=Bx(u=e),d=s.bind((function(t){return vt.some(Fx(t,u))})).getOr(0),m=l.bind((function(t){return vt.some(Fx(t,u))})).getOr(f),Cx({min:Jy(a),max:tx(a),range:ix(a),value:c,hasMinEdge:px(a),hasMaxEdge:hx(a),minBound:Ex(u),minOffset:0,maxBound:Dx(u),maxOffset:f,centerMinEdge:d,centerMaxEdge:m}));return Ex(e)-Ex(t)+g}function Ux(t,e){hr(t,fS(),{value:e})}function jx(t,e){return{x:t,y:e}}function Wx(t,e){return function(n,o){return i=o,u=0<t?wx:xx,Ux(n,jx(a=(r=e)?vx(i).x:u(vx(i).x,Ky(i),Zy(i),cx(i)),r?u(vx(i).y,Jy(i),tx(i),cx(i)):vx(i).y)),vt.some(a).map(k);var r,i,u,a}}function Gx(t){return"<alloy.field."+t+">"}function Xx(t,e){return pl({name:"ColourPicker",configFields:[lo("dom"),_o("onValidHex",i),_o("onInvalidHex",i)],factory:function(n){function o(t,e,n){w.getOpt(t).each((function(t){b.setHue(t,n)}))}function r(t,e){S.getOpt(t).each((function(t){v.updateHex(t,e)}))}function u(t,e,n,o){var r=n,i=Tv(e);y.paletteRgba.set(i),y.paletteHue.set(r),St(o,(function(o){o(t,e,n)}))}var c,s,l,f,d,m,g,p,h,v=function(t,e,n,o){function r(n,o,r,u,a){var c,s,l=t(zS+"range"),f=[Zb.parts.label({dom:{tag:"label",innerHtml:r,attributes:{"aria-label":u}}}),Zb.parts.field({data:a,factory:py,inputAttributes:O({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:Ja([(c=o,s=n,Ry.config({invalidClass:e("invalid"),notify:{onValidate:function(t){hr(t,LS,{type:c})},onValid:function(t){hr(t,VS,{type:c,value:wf.getValue(t)})},onInvalid:function(t){hr(t,HS,{type:c,value:wf.getValue(t)})}},validator:{validate:function(e){var n=wf.getValue(e),o=s(n)?Nn.value(!0):Nn.error(t("aria.input.invalid"));return By(o)},validateOnLoad:!1}})),ey.config({})]),onSetValue:function(t){Ry.isInvalid(t)&&Ry.run(t).get(i)}})],d="hex"!==o?[Zb.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(d)}}function u(t,e){var n=e.red,o=e.green,r=e.blue;wf.setValue(t,{red:n,green:o,blue:r})}function a(t,e){c.getOpt(t).each((function(t){fe(t.element,"background-color","#"+e.value)}))}var c=Bm({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return pl({factory:function(){function i(t){return g[t].get()}function s(t,e){g[t].set(e)}function l(t,e){var n=e.event;"hex"!==n.type?s(n.type,vt.none()):o(t)}function f(t,e){var o,r,c,l,f=e.event;"hex"===f.type?function(t,e){n(t);var o=xv(e);s("hex",vt.some(e));var r=Tv(o);u(t,r),m(r),hr(t,FS,{hex:o}),a(t,o)}(t,f.value):(o=t,r=f.type,c=f.value,l=parseInt(c,10),s(r,vt.some(l)),i("red").bind((function(t){return i("green").bind((function(e){return i("blue").map((function(n){return Cv(t,e,n,1)}))}))})).each((function(t){var e,n,r=(e=o,n=kv(t),PS.getField(e,"hex").each((function(t){Ag.isFocused(t)||wf.setValue(e,{hex:n.value})})),n);hr(o,FS,{hex:r}),a(o,r)})))}function d(e){return{label:t(zS+e+".label"),description:t(zS+e+".description")}}function m(t){var e=t.red,n=t.green,o=t.blue;s("red",vt.some(e)),s("green",vt.some(n)),s("blue",vt.some(o))}var g={red:Ro(vt.some(255)),green:Ro(vt.some(255)),blue:Ro(vt.some(255)),hex:Ro(vt.some("ffffff"))},p=d("red"),h=d("green"),v=d("blue"),b=d("hex");return Go(PS.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Zb.sketch(r(Ov,"red",p.label,p.description,255))),n.field("green",Zb.sketch(r(Ov,"green",h.label,h.description,255))),n.field("blue",Zb.sketch(r(Ov,"blue",v.label,v.description,255))),n.field("hex",Zb.sketch(r(wv,"hex",b.label,b.description,"ffffff"))),c.asSpec()],formBehaviours:Ja([Ry.config({invalidClass:e("form-invalid")}),im("rgb-form-events",[Sr(VS,f),Sr(HS,l),Sr(LS,l)])])}})),{apis:{updateHex:function(t,e){var n;wf.setValue(t,{hex:e.value}),u(t,n=Tv(e)),m(n),a(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})}(t,e,n.onValidHex,n.onInvalidHex),b=(g=e,p=MS.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[g("sv-palette-spectrum")]}}),h=MS.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[g("sv-palette-thumb")],innerHtml:"<div class="+g("sv-palette-inner-thumb")+' role="presentation"></div>'}}),pl({factory:function(t){var e=a({x:0,y:0}),n=Ja([td.config({find:vt.some}),Ag.config({})]);return MS.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[g("sv-palette")]},model:{mode:"xy",getInitialValue:e},rounded:!1,components:[p,h],onChange:function(t,e,n){hr(t,RS,{value:n})},onInit:function(t,e,n,o){k(n.element.dom,Av(tb))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,e,n){var o=n;k(e.components()[0].element.dom,Av(_v(Mv(o,100,100))))},setThumb:function(t,e,n){var o=e,r=Fv(Tv(n));MS.setValue(o,{x:r.saturation,y:100-r.value})}},extraApis:{}})),y={paletteRgba:Ro(tb),paletteHue:Ro(0)},x=Bm((s=MS.parts.spectrum({dom:{tag:"div",classes:[(c=e)("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=MS.parts.thumb({dom:{tag:"div",classes:[c("hue-slider-thumb")],attributes:{role:"presentation"}}}),MS.sketch({dom:{tag:"div",classes:[c("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:a({y:0})},components:[s,l],sliderBehaviours:Ja([Ag.config({})]),onChange:function(t,e,n){hr(t,IS,{value:n})}}))),w=Bm(b.sketch({})),S=Bm(v.sketch({}));function k(t,e){var n,o,r=t.width,i=t.height,u=t.getContext("2d");null!==u&&(u.fillStyle=e,u.fillRect(0,0,r,i),(n=u.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),u.fillStyle=n,u.fillRect(0,0,r,i),(o=u.createLinearGradient(0,0,0,i)).addColorStop(0,"rgba(0,0,0,0)"),o.addColorStop(1,"rgba(0,0,0,1)"),u.fillStyle=o,u.fillRect(0,0,r,i))}return{uid:n.uid,dom:n.dom,components:[w.asSpec(),x.asSpec(),S.asSpec()],behaviours:Ja([im("colour-picker-events",[Sr(FS,(m=[o,function(t,e,n){x.getOpt(t).each((function(t){MS.setValue(t,{y:100-n/360*100})}))},function(t,e){w.getOpt(t).each((function(t){b.setThumb(t,e)}))}],function(t,e){var n=e.event.hex;u(t,n,Fv(Tv(n)).hue,m)})),Sr(RS,(d=[r],function(t,e){var n=e.event.value,o=y.paletteHue.get();u(t,Iv(Mv(o,n.x,100-n.y)),o,d)})),Sr(IS,(f=[o,r],function(t,e){var n=(100-e.event.value.y)/100*360,o=Fv(y.paletteRgba.get());u(t,Iv(Mv(n,o.saturation,o.value)),n,f)}))]),td.config({find:function(t){return S.getOpt(t)}}),Og.config({mode:"acyclic"})])}}})}function qx(t){return WS[t]}function Yx(t,e,n){return wf.config(Go({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))}function Kx(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Ja([Ag.config({ignore:!0}),ey.config({})])}}function Jx(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[Kx([$S]),t,Kx([QS])],behaviours:Ja([jS(1)])}}function $x(t,e){hr(t,pi(),{raw:{which:9,shiftKey:e}})}function Qx(t,e){var n=e.element;Xr(n,$S)?$x(t,!0):Xr(n,QS)&&$x(t,!1)}function Zx(t){return Rb(t,["."+$S,"."+QS].join(","),S)}function tw(t,e){return ek(document.createElement("canvas"),t,e)}function ew(t){var e=tw(t.width,t.height);return tk(e).drawImage(t,0,0),e}function nw(t){return t.naturalWidth||t.width}function ow(t){return t.naturalHeight||t.height}function rw(t,e,n){return e=e||"image/png",v(HTMLCanvasElement.prototype.toBlob)?new _y((function(o,r){t.toBlob((function(t){t?o(t):r()}),e,n)})):(o=t.toDataURL(e,n),new _y((function(t,e){(function(){var t=o.split(","),e=/data:([^;]+)/.exec(t[0]);if(!e)return vt.none();for(var n=e[1],r=t[1],i=atob(r),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var l=1024*s,f=Math.min(1024+l,u),d=new Array(f-l),m=l,g=0;m<f;++g,++m)d[g]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return vt.some(new Blob(c,{type:n}))})().fold((function(){e("uri is not base64: "+o)}),t)})));var o}function iw(t,e,n){function o(e,n){return t.then((function(t){return t.toDataURL(e||"image/png",n)}))}return{getType:a(e.type),toBlob:function(){return _y.resolve(e)},toDataURL:a(n),toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then((function(t){return rw(t,e,n)}))},toAdjustedDataURL:o,toAdjustedBase64:function(t,e){return o(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(ew)}}}function uw(t,e){return rw(t,e).then((function(e){return iw(_y.resolve(t),e,t.toDataURL())}))}function aw(t,e,n){var o="string"==typeof t?parseFloat(t):t;return n<o?o=n:o<e&&(o=e),o}function cw(t,e){for(var n=[],o=new Array(25),r=0;r<5;r++){for(var i=0;i<5;i++)n[i]=e[i+5*r];for(i=0;i<5;i++){for(var u=0,a=0;a<5;a++)u+=t[i+5*a]*n[a];o[i+5*r]=u}}return o}function sw(t,e){return t.toCanvas().then((function(n){return rk(n,t.getType(),e)}))}function lw(t){return function(e,n){return sw(e,t([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}}function fw(t,e){void 0===e&&(e=2);var n=Math.pow(10,e),o=Math.round(t*n);return Math.ceil(o/n)}function dw(t){return ik(t)}function mw(t){return ck(t)}function gw(t,e){return sk(t,e)}function pw(t,e){return uk(t,e)}function hw(t,e){return ak(t,e)}function vw(t,e){return o=e,(n=t).toCanvas().then((function(t){return mk(t,n.getType(),o)}));var n,o}function bw(t,e){return o=e,(n=t).toCanvas().then((function(t){return dk(t,n.getType(),o)}));var n,o}function yw(t,e,n){return Vm(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},e)}function xw(t,e){return yw(t,e,[])}function ww(t,e){return yw(t,e,[Tg.config({})])}function Sw(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:Ja([Tg.config({})])}}function kw(t,e,n){function o(t,e){var n=wf.getValue(t);return Ag.focus(n),hr(n,"keydown",{raw:e.event.raw}),$w.close(n),vt.some(!0)}var r=Ro(i),u=t.text.map((function(t){return Bm(Sw(t,e,n.providers))})),a=t.icon.map((function(t){return Bm(ww(t,n.providers.icons))})),c=t.role.fold((function(){return{}}),(function(t){return{role:t}})),s=t.tooltip.fold((function(){return{}}),(function(t){var e=n.providers.translate(t);return{title:e,"aria-label":e}})),l=Vm("chevron-down",{tag:"div",classes:[e+"__select-chevron"]},n.providers.icons);return Bm($w.sketch(O(O(O({},t.uid?{uid:t.uid}:{}),c),{dom:{tag:"button",classes:[e,e+"--select"].concat(R(t.classes,(function(t){return e+"--"+t}))),attributes:O({},s)},components:jv([a.map((function(t){return t.asSpec()})),u.map((function(t){return t.asSpec()})),vt.some(l)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Ja(T(T([],t.dropdownBehaviours,!0),[Lv((function(){return t.disabled||n.providers.isDisabled()})),rv(),Qw.config({}),Tg.config({}),im("dropdown-events",[uv(t,r),av(t,r)]),im("menubutton-update-display-text",[Sr(vk,(function(t,e){u.bind((function(e){return e.getOpt(t)})).each((function(t){Tg.set(t,[Zr(n.providers.translate(e.event.text))])}))})),Sr(bk,(function(t,e){a.bind((function(e){return e.getOpt(t)})).each((function(t){Tg.set(t,[ww(e.event.icon,n.providers.icons)])}))}))])],!1)),eventOrder:Go(hk,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Ja([Og.config({mode:"special",onLeft:o,onRight:o})]),lazySink:n.getSink,toggleClass:e+"--active",parts:{menu:jp(0,t.columns,t.presets)},fetch:function(e){return Ay(y(t.fetch,e))}}))).asSpec()}function Cw(t){return"separator"===t.type}function Ow(t,e,n,o){var r=Mr("primary-menu"),i=xk(t,n.shared.providers.menuItems());if(0===i.items.length)return vt.none();var u=Fb(r,i.items,e,n,o),a=et(i.menus,(function(t,o){return Fb(o,t,e,n,!1)})),c=Go(a,ar(r,u));return vt.from(Jg.tieredData(r,c,i.expansions))}function _w(t){return{isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)},setActive:function(e){var n=t.element;e?(Wr(n,"tox-tbtn--enabled"),oe(n,"aria-pressed",!0)):(Gr(n,"tox-tbtn--enabled"),ce(n,"aria-pressed"))},isActive:function(){return Xr(t.element,"tox-tbtn--enabled")}}}function Tw(t,e,n,o){return kw({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch((function(t){o(Ow(t,dh.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:_w,columns:1,presets:"normal",classes:[],dropdownBehaviours:[ey.config({})]},e,n.shared)}function Ew(t,e,n,o,r,i){void 0===n&&(n=[]);var u=e.fold((function(){return{}}),(function(t){return{action:t}})),a=O({buttonBehaviours:Ja([Lv((function(){return t.disabled||i.isDisabled()})),rv(),ey.config({}),im("button press",[wr("click"),wr("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),c=Go(a,{dom:o});return Go(c,{components:r})}function Dw(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},i=t.icon.map((function(t){return xw(t,n.icons)}));return Ew(t,e,o,r,jv([i]),n)}function Aw(t,e,n,o){void 0===o&&(o=[]);var r=Dw(t,vt.some(e),n,o);return np.sketch(r)}function Bw(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),u=t.icon?t.icon.map((function(t){return xw(t,n.icons)})):vt.none(),a=u.isSome()?jv([u]):[],c=u.isSome()?{}:{innerHtml:i},s=T(T(T(T([],t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),u.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),r,!0);return Ew(t,e,o,O(O({tag:"button",classes:s},c),{attributes:{title:i}}),a,n)}function Mw(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=Bw(t,vt.some(e),n,o,r);return np.sketch(i)}function Fw(t,e){return function(n){"custom"===e?hr(n,cy,{name:t,value:{}}):"submit"===e?pr(n,sy):"cancel"===e?pr(n,ay):console.error("Unknown button type: ",e)}}function Iw(t,e,n){if("menu"===e){var o=t,r=Bm(Tw(O(O({},t),{onSetup:function(e){return e.setDisabled(t.disabled),i},fetch:(u=o.items,a=function(){return r},c=n,function(t){t(R(u,(function(t){var e,n,o=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return O(O({type:t.type,active:!1},o),{onAction:function(t){var e=!t.isActive();t.setActive(e),n.storage.set(e),c.shared.getSink().each((function(t){a().getOpt(t).each((function(t){ba(t.element),hr(t,cy,{name:n.name,value:n.storage.get()})}))}))},onSetup:(e=n=t,function(t){t.setActive(e.storage.get())})})})))})}),"tox-tbtn",n,vt.none()));return r.asSpec()}var u,a,c;if("custom"===e||"cancel"===e||"submit"===e){var s=Fw(t.name,e);return Mw(O(O({},t),{borderless:!1}),s,n.shared.providers,[])}console.error("Unknown footer button type: ",e)}function Rw(t,e){return Uf({factory:Zb,name:t,overrides:function(t){return{fieldBehaviours:Ja([im("coupled-input-behaviour",[Sr(vi(),(function(n){il(n,t,e).bind(td.getCurrent).each((function(e){il(n,t,"lock").each((function(o){Fg.isOn(o)&&t.onLockedChange(n,e,o)}))}))}))])])}}})}function Nw(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return Nn.error(t);var n=parseFloat(e[1]),o=e[2];return Nn.value({value:n,unit:o})}function Pw(t,e){function n(t){return Tt(o,t)}var o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return t.unit===e?vt.some(t.value):n(t.unit)&&n(e)?o[t.unit]===o[e]?vt.some(t.value):vt.some(t.value/o[t.unit]*o[e]):vt.none()}function Vw(t){return vt.none()}function Hw(t,e){function n(t){return Vm(t,{tag:"span",classes:["tox-icon","tox-lock-icon__"+t]},e.icons)}function o(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}}function r(n){return Zb.parts.field({factory:py,inputClasses:["tox-textfield"],inputBehaviours:Ja([ud.config({disabled:function(){return t.disabled||e.isDisabled()}}),rv(),ey.config({}),im("size-input-events",[Sr(mi(),(function(t,e){hr(t,a,{isField1:n})})),Sr(bi(),(function(e,n){hr(e,iy,{name:t.name})}))])]),selectOnFocus:!1})}function i(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}}var u=Vw,a=Mr("ratio-event"),c=kk.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[n("lock"),n("unlock")],buttonBehaviours:Ja([ud.config({disabled:function(){return t.disabled||e.isDisabled()}}),rv(),ey.config({})])}),s=kk.parts.field1(o([Zb.parts.label(i("Width")),r(!0)])),l=kk.parts.field2(o([Zb.parts.label(i("Height")),r(!1)]));return kk.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,l,o([i("&nbsp;"),c])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,n){Nw(wf.getValue(t)).each((function(t){u(t).each((function(t){var n,o,r,i;wf.setValue(e,(i=-1!==(i=(n=t).value.toFixed((o=n.unit)in(r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4})?r[o]:1)).indexOf(".")?i.replace(/\.?0*$/,""):i)+n.unit)}))}))},coupledFieldBehaviours:Ja([ud.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){kk.getField1(t).bind(Zb.getField).each(ud.disable),kk.getField2(t).bind(Zb.getField).each(ud.disable),kk.getLock(t).each(ud.disable)},onEnabled:function(t){kk.getField1(t).bind(Zb.getField).each(ud.enable),kk.getField2(t).bind(Zb.getField).each(ud.enable),kk.getLock(t).each(ud.enable)}}),rv(),im("size-input-events2",[Sr(a,(function(t,e){var n,o,r,i=e.event.isField1,a=i?kk.getField1(t):kk.getField2(t),c=i?kk.getField2(t):kk.getField1(t),s=a.map(wf.getValue).getOr("");n=c.map(wf.getValue).getOr(""),o=Nw(s).toOptional(),r=Nw(n).toOptional(),u=Et(o,r,(function(t,e){return Pw(t,e.unit).map((function(t){return e.value/t})).map((function(t){return n=t,o=e.unit,function(t){return Pw(t,o).map((function(t){return{value:t*n,unit:o}}))};var n,o})).getOr(Vw)})).getOr(Vw)}))])])})}function Lw(t){if(h(t.changedTouches))for(var e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function zw(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.formBehaviours,[wf.config({store:{mode:"manual",getValue:function(e){return et(cl(e,t),(function(t,e){return t().bind((function(t){var n=td.getCurrent(t),o=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+Br(t.element));return n.fold((function(){return Nn.error(o)}),Nn.value)})).map(wf.getValue)}))},setValue:function(e,n){tt(n,(function(n,o){il(e,t,o).each((function(t){td.getCurrent(t).each((function(t){wf.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return il(e,t,n).bind(td.getCurrent)}}}}function Uw(){return td.config({find:vt.some})}function jw(t){return e=Dr,n=Ar,Yx(t,(function(t){return e(t.element)}),(function(t,e){return n(t.element,e)}));var e,n}(Oy=Cy=Cy||{})[Oy.HighlightFirst=0]="HighlightFirst",Oy[Oy.HighlightNone=1]="HighlightNone";var Ww,Gw,Xw,qw,Yw=function(t,e){return t.getSystem().getByUid(e.uid+"-"+Vy()).map((function(t){return function(){return Nn.value(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return Nn.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},Kw=a([lo("dom"),lo("fetch"),Gu("onOpen"),Xu("onExecute"),_o("getHotspot",vt.some),_o("getAnchorOverrides",a({})),Ic(),Gs("dropdownBehaviours",[Fg,Py,Og,Ag]),lo("toggleClass"),_o("eventOrder",{}),yo("lazySink"),_o("matchWidth",!1),_o("useMinWidth",!1),yo("role")].concat(Xy())),Jw=a([jf({schema:[Uu()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Hy()]),$w=hl({name:"Dropdown",configFields:Kw(),partFields:Jw(),factory:function(t,e,n,o){function r(t){lf.getState(t).each((function(t){Jg.highlightPrimary(t)}))}function u(t,e){return vr(t),vt.some(!0)}var a,s={expand:function(e){Fg.isOn(e)||Uy(t,c,e,o,i,Cy.HighlightNone).get(i)},open:function(e){Fg.isOn(e)||Uy(t,c,e,o,i,Cy.HighlightFirst).get(i)},isOpen:Fg.isOn,close:function(e){Fg.isOn(e)&&Uy(t,c,e,o,i,Cy.HighlightFirst).get(i)},repositionMenus:function(t){Fg.isOn(t)&&Gy(t)}};return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.dropdownBehaviours,[Fg.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Py.config({others:{sandbox:function(e){return Wy(t,e,{onOpen:function(){return Fg.on(e)},onClose:function(){return Fg.off(e)}})}}}),Og.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t,e){return $w.isOpen(t)?r(Py.getCoupled(t,"sandbox")):$w.open(t),vt.some(!0)},onEscape:function(t,e){return $w.isOpen(t)?($w.close(t),vt.some(!0)):vt.none()}}),Ag.config({})]),events:gm(vt.some((function(e){Uy(t,c,e,o,r,Cy.HighlightFirst).get(i)}))),eventOrder:O(O({},t.eventOrder),((a={})[Di()]=["disabling","toggling","alloy.base.behaviour"],a)),apis:s,domModification:{attributes:O(O({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:it(t.dom,"attributes").bind((function(t){return it(t,"type")})).getOr("button")}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),Qw=pa({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return $i([xr(ki(),k)])},exhibit:function(){return Hr({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Zw=Mr("color-input-change"),tS=Mr("color-swatch-change"),eS=Mr("color-picker-cancel"),nS=Wf({schema:[lo("dom")],name:"label"}),oS=qy("top-left"),rS=qy("top"),iS=qy("top-right"),uS=qy("right"),aS=qy("bottom-right"),cS=qy("bottom"),sS=qy("bottom-left"),lS=[nS,qy("left"),uS,rS,cS,oS,iS,sS,aS,Uf({name:"thumb",defaults:a({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:$i([Or(ri(),t,"spectrum"),Or(ii(),t,"spectrum"),Or(ui(),t,"spectrum"),Or(ci(),t,"spectrum"),Or(si(),t,"spectrum"),Or(fi(),t,"spectrum")])}}}),Uf({schema:[ur("mouseIsDown",(function(){return Ro(!1)}))],name:"spectrum",overrides:function(t){function e(e,o){return n.getValueFromEvent(o).map((function(o){return n.setValueFrom(e,t,o)}))}var n=t.model.manager;return{behaviours:Ja([Og.config({mode:"special",onLeft:function(e){return n.onLeft(e,t)},onRight:function(e){return n.onRight(e,t)},onUp:function(e){return n.onUp(e,t)},onDown:function(e){return n.onDown(e,t)}}),Ag.config({})]),events:$i([Sr(ri(),e),Sr(ii(),e),Sr(ci(),e),Sr(si(),(function(n,o){t.mouseIsDown.get()&&e(n,o)}))])}}})],fS=a("slider.change.value"),dS="left",mS=Nx(-1),gS=Nx(1),pS=vt.none,hS=vt.none,vS={"top-left":vt.none(),top:vt.none(),"top-right":vt.none(),right:vt.some((function(t,e){yx(t,{x:ex(e)})})),"bottom-right":vt.none(),bottom:vt.none(),"bottom-left":vt.none(),left:vt.some((function(t,e){yx(t,{x:$y(e)})}))},bS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Rx(t,e,n);return Ix(t,{x:o}),o},setToMin:function(t,e){Ix(t,{x:Ky(e)})},setToMax:function(t,e){Ix(t,{x:Zy(e)})},findValueOfOffset:Rx,getValueFromEvent:function(t){return Yy(t).map((function(t){return t.left}))},findPositionOfValue:Px,setPositionFromValue:function(t,e,n,o){var r=vx(n),i=Px(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),u=Ce(e.element)/2;fe(e.element,"left",i-u+"px")},onLeft:mS,onRight:gS,onUp:pS,onDown:hS,edgeActions:vS}),yS=vt.none,xS=vt.none,wS=Lx(-1),SS=Lx(1),kS={"top-left":vt.none(),top:vt.some((function(t,e){yx(t,{y:Qy(e)})})),"top-right":vt.none(),right:vt.none(),"bottom-right":vt.none(),bottom:vt.some((function(t,e){yx(t,{y:nx(e)})})),"bottom-left":vt.none(),left:vt.none()},CS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Hx(t,e,n);return Vx(t,{y:o}),o},setToMin:function(t,e){Vx(t,{y:Jy(e)})},setToMax:function(t,e){Vx(t,{y:tx(e)})},findValueOfOffset:Hx,getValueFromEvent:function(t){return Yy(t).map((function(t){return t.top}))},findPositionOfValue:zx,setPositionFromValue:function(t,e,n,o){var r=vx(n),i=zx(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=xe(e.element)/2;fe(e.element,"top",i-u+"px")},onLeft:yS,onRight:xS,onUp:wS,onDown:SS,edgeActions:kS}),OS=Yy,_S=Wx(-1,!1),TS=Wx(1,!1),ES=Wx(-1,!0),DS=Wx(1,!0),AS={"top-left":vt.some((function(t,e){yx(t,bx($y(e),Qy(e)))})),top:vt.some((function(t,e){yx(t,bx(ux(e),Qy(e)))})),"top-right":vt.some((function(t,e){yx(t,bx(ex(e),Qy(e)))})),right:vt.some((function(t,e){yx(t,bx(ex(e),ax(e)))})),"bottom-right":vt.some((function(t,e){yx(t,bx(ex(e),nx(e)))})),bottom:vt.some((function(t,e){yx(t,bx(ux(e),nx(e)))})),"bottom-left":vt.some((function(t,e){yx(t,bx($y(e),nx(e)))})),left:vt.some((function(t,e){yx(t,bx($y(e),ax(e)))}))},BS=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=jx(Rx(t,e,n.left),Hx(t,e,n.top));return Ux(t,o),o},setToMin:function(t,e){Ux(t,jx(Ky(e),Jy(e)))},setToMax:function(t,e){Ux(t,jx(Zy(e),tx(e)))},getValueFromEvent:OS,setPositionFromValue:function(t,e,n,o){var r=vx(n),i=Px(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),u=zx(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=Ce(e.element)/2,c=xe(e.element)/2;fe(e.element,"left",i-a+"px"),fe(e.element,"top",u-c+"px")},onLeft:_S,onRight:TS,onUp:ES,onDown:DS,edgeActions:AS}),MS=hl({name:"Slider",configFields:[_o("stepSize",1),_o("onChange",i),_o("onChoose",i),_o("onInit",i),_o("onDragStart",i),_o("onDragEnd",i),_o("snapToGrid",!1),_o("rounded",!0),yo("snapStart"),fo("model",co("mode",{x:[_o("minX",0),_o("maxX",100),ur("value",(function(t){return Ro(t.mode.minX)})),lo("getInitialValue"),Ku("manager",bS)],y:[_o("minY",0),_o("maxY",100),ur("value",(function(t){return Ro(t.mode.minY)})),lo("getInitialValue"),Ku("manager",CS)],xy:[_o("minX",0),_o("maxX",100),_o("minY",0),_o("maxY",100),ur("value",(function(t){return Ro({x:t.mode.minX,y:t.mode.minY})})),lo("getInitialValue"),Ku("manager",BS)]})),Gs("sliderBehaviours",[Og,wf]),ur("mouseIsDown",(function(){return Ro(!1)}))],partFields:lS,factory:function(t,e,n,o){function r(e){return ul(e,t,"thumb")}function i(e){return ul(e,t,"spectrum")}function u(e){return il(e,t,"left-edge")}function a(e){return il(e,t,"right-edge")}function c(e){return il(e,t,"top-edge")}function s(e){return il(e,t,"bottom-edge")}function l(e,n){v.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:a,getTopEdge:c,getBottomEdge:s,getSpectrum:i})}function f(t,e){h.value.set(e),l(t,r(t))}function d(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&il(e,t,"thumb").each((function(n){var o=h.value.get();t.onChoose(e,n,o)}))}function m(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,r(e))}function g(e,n){n.stop(),t.onDragEnd(e,r(e)),d(e)}var p,h=t.model,v=h.manager;return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.sliderBehaviours,[Og.config({mode:"special",focusIn:function(e){return il(e,t,"spectrum").map(Og.focusIn).map(k)}}),wf.config({store:{mode:"manual",getValue:function(t){return h.value.get()}}}),tc.config({channels:((p={})[mf()]={onReceive:d},p)})]),events:$i([Sr(fS(),(function(e,n){!function(e,n){f(e,n);var o=r(e);t.onChange(e,o,n),vt.some(!0)}(e,n.event.value)})),Qi((function(e,n){var o=h.getInitialValue();h.value.set(o);var u=r(e);l(e,u);var a=i(e);t.onInit(e,u,a,h.value.get())})),Sr(ri(),m),Sr(ui(),g),Sr(ci(),m),Sr(fi(),g)]),apis:{resetToMin:function(e){v.setToMin(e,t)},resetToMax:function(e){v.setToMax(e,t)},setValue:f,refresh:l},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(t,e,n){t.setValue(e,n)},resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),FS=Mr("rgb-hex-update"),IS=Mr("slider-update"),RS=Mr("palette-update"),NS=[Gs("formBehaviours",[wf])],PS={getField:Pr((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e,n={field:function(t,n){return e.push(t),tl("form",Gx(t),n)},record:a(e=[])},o=t(n),r=R(n.record(),(function(t){return Uf({name:t,pname:Gx(t)})}));return gl("form",NS,r,zw,o)}},VS=Mr("valid-input"),HS=Mr("invalid-input"),LS=Mr("validating-input"),zS="colorcustom.rgb.",US=function(t){return td.config({find:t.getOpt})},jS=function(t){return td.config({find:function(e){return Jt(e.element,t).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}})},WS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},GS=tinymce.util.Tools.resolve("tinymce.Resource"),XS=tinymce.util.Tools.resolve("tinymce.util.Tools"),qS=Ko([_o("preprocess",c),_o("postprocess",c)]),YS=function(t,e){var n=ao("RepresentingConfigs.memento processors",qS,e);return wf.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=wf.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);wf.setValue(i,r)}}})},KS=Yx,JS=function(t){return wf.config({store:{mode:"memory",initialValue:t}})},$S=Mr("alloy-fake-before-tabstop"),QS=Mr("alloy-fake-after-tabstop"),ZS=!(ln().browser.isIE()||ln().browser.isEdge()),tk=function(t){return t.getContext("2d")},ek=function(t,e,n){return t.width=e,t.height=n,t},nk=function(t){URL.revokeObjectURL(t.src)},ok=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],rk=function(t,e,n){var o=tk(t),r=function(t){for(var e,o,r,i,u=t.data,a=n[0],c=n[1],s=n[2],l=n[3],f=n[4],d=n[5],m=n[6],g=n[7],p=n[8],h=n[9],v=n[10],b=n[11],y=n[12],x=n[13],w=n[14],S=n[15],k=n[16],C=n[17],O=n[18],_=n[19],T=0;T<u.length;T+=4)e=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=e*a+o*c+r*s+i*l+f,u[T+1]=e*d+o*m+r*g+i*p+h,u[T+2]=e*v+o*b+r*y+i*x+w,u[T+3]=e*S+o*k+r*C+i*O+_;return t}(o.getImageData(0,0,t.width,t.height));return o.putImageData(r,0,0),uw(t,e)},ik=(Ww=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(t){return sw(t,Ww)}),uk=lw((function(t,e){return cw(t,[1,0,0,0,e=aw(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),ak=lw((function(t,e){var n;return e=aw(e,-1,1),cw(t,[(n=(e*=100)<0?127+e/100*127:127*(0==(n=e%1)?ok[e]:ok[Math.floor(e)]*(1-n)+ok[Math.floor(e)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),ck=(Gw=[0,-1,0,-1,5,-1,0,-1,0],function(t){return n=Gw,(e=t).toCanvas().then((function(t){return o=t,r=e.getType(),i=n,a=function(t,e,n){for(var o=function(t,e,n){return n<t?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),u=t.data,a=e.data,c=t.width,s=t.height,l=0;l<s;l++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(l+p-i,0,s-1)*c+v),y=n[p*r+h];d+=u[b]*y,m+=u[1+b]*y,g+=u[2+b]*y}var x=4*(l*c+f);a[x]=o(d,0,255),a[1+x]=o(m,0,255),a[2+x]=o(g,0,255)}return e}((u=tk(o)).getImageData(0,0,o.width,o.height),u.getImageData(0,0,o.width,o.height),i),u.putImageData(a,0,0),uw(o,r);var o,r,i,u,a}));var e,n}),sk=(Xw=function(t,e){return 255*Math.pow(t/255,1-e)},function(t,e){return t.toCanvas().then((function(n){return function(t,e,n){for(var o=tk(t),r=new Array(256),i=0;i<r.length;i++)r[i]=Xw(i,n);var u=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(u,0,0),uw(t,e)}(n,t.getType(),e)}))}),lk=function(t,e,n){var o=nw(t),r=ow(t),i=e/o,u=n/r,a=!1;(i<.5||2<i)&&(i=i<.5?.5:2,a=!0),(u<.5||2<u)&&(u=u<.5?.5:2,a=!0);var c=fk(t,i,u);return a?c.then((function(t){return lk(t,e,n)})):c},fk=function(t,e,n){return new _y((function(o){var r=nw(t),i=ow(t),u=Math.floor(r*e),a=Math.floor(i*n),c=tw(u,a);tk(c).drawImage(t,0,0,r,i,0,0,u,a),o(c)}))},dk=function(t,e,n){var o=(n<0?360+n:n)*Math.PI/180,r=t.width,i=t.height,u=Math.sin(o),a=Math.cos(o),c=fw(Math.abs(r*a)+Math.abs(i*u)),s=fw(Math.abs(r*u)+Math.abs(i*a)),l=tw(c,s),f=tk(l);return f.translate(c/2,s/2),f.rotate(o),f.drawImage(t,-r/2,-i/2),uw(l,e)},mk=function(t,e,n){var o=tw(t.width,t.height),r=tk(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),uw(o,e)},gk=function(t,e,n,o,r,i){var u=tw(r,i);return tk(u).drawImage(t,-n,-o),uw(u,e)},pk=Mr("toolbar.button.execute"),hk=((qw={})[Di()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],qw),vk=Mr("update-menu-text"),bk=Mr("update-menu-icon"),yk={type:"separator"},xk=function(t,e){var n,o,r;return V((n=l(t)?t.split(" "):t,o=e,0<(r=H(n,(function(t,e){return l(e)?""===e?t:"|"===e?0<t.length&&!Cw(t[t.length-1])?t.concat([yk]):t:Tt(o,e.toLowerCase())?t.concat([o[e.toLowerCase()]]):t:t.concat([e])}),[])).length&&Cw(r[r.length-1])&&r.pop(),r),(function(t,n){var o,r,i,u,a,c,s=function(t){if(Cw(t))return t;var e=it(t,"value").getOrThunk((function(){return Mr("generated-menu-item")}));return Go({value:e},t)}(n),l=(r=e,Tt(o=s,"getSubmenuItems")?(u=r,a=(i=o).getSubmenuItems(),c=xk(a,u),{item:i,menus:Go(c.menus,ar(i.value,c.items)),expansions:Go(c.expansions,ar(i.value,i.value))}):{item:o,menus:{},expansions:{}});return{menus:Go(t.menus,l.menus),items:[l.item].concat(t.items),expansions:Go(t.expansions,l.expansions)}}),{menus:{},expansions:{},items:[]})},wk=a([_o("field1Name","field1"),_o("field2Name","field2"),qu("onLockedChange"),ju(["lockClass"]),_o("locked",!1),Sf("coupledFieldBehaviours",[td,wf])]),Sk=a([Rw("field1","field2"),Rw("field2","field1"),Uf({factory:np,schema:[lo("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:Ja([Fg.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),kk=hl({name:"FormCoupledInputs",configFields:wk(),partFields:Sk(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:kf(t.coupledFieldBehaviours,[td.config({find:vt.some}),wf.config({store:{mode:"manual",getValue:function(e){var n=ll(e,t,["field1","field2"]),o={};return o[t.field1Name]=wf.getValue(n.field1()),o[t.field2Name]=wf.getValue(n.field2()),o},setValue:function(e,n){var o=ll(e,t,["field1","field2"]);ut(n,t.field1Name)&&wf.setValue(o.field1(),n[t.field1Name]),ut(n,t.field2Name)&&wf.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return il(e,t,"field1")},getField2:function(e){return il(e,t,"field2")},getLock:function(e){return il(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),Ck={undo:a(Mr("undo")),redo:a(Mr("redo")),zoom:a(Mr("zoom")),back:a(Mr("back")),apply:a(Mr("apply")),swap:a(Mr("swap")),transform:a(Mr("transform")),tempTransform:a(Mr("temp-transform")),transformApply:a(Mr("transform-apply"))},Ok=a("save-state"),_k=a("disable"),Tk=a("enable"),Ek={formActionEvent:cy,saveState:Ok,disable:_k,enable:Tk},Dk=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Ak=tinymce.util.Tools.resolve("tinymce.util.Observable"),Bk=tinymce.util.Tools.resolve("tinymce.util.VK");function Mk(t,e,n,o,r){return Aw({name:t,icon:vt.some(e),disabled:n,tooltip:vt.some(t),primary:!1,borderless:!1},o,r)}function Fk(t,e){e?ud.enable(t):ud.disable(t)}var Ik=0,Rk=function(t,e,n,o,r){function i(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}}function u(e,o,r,u){var a=o.x+r*e.deltaX,c=o.y+u*e.deltaY,s=Math.max(20,o.w+r*e.deltaW),l=Math.max(20,o.h+u*e.deltaH),f=(t=Dk.clamp({x:a,y:c,w:s,h:l},n,"move"===e.name),i(n,t));y.fire("updateRect",{rect:f}),v(f)}function a(e){c(t=e)}function c(t){function n(t,e){Du(m,"#"+d+"-"+t).each((function(t){de(t,{left:e.x+"px",top:e.y+"px",width:Math.max(0,e.w)+"px",height:Math.max(0,e.h)+"px"})}))}St(g,(function(e){Du(m,"#"+d+"-"+e.name).each((function(n){de(n,{left:t.w*e.xMul+t.x+"px",top:t.h*e.yMul+t.y+"px"})}))})),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)}var s,l,f=[],d="tox-crid-"+Ik++,m=Mt.fromDom(o),g=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],p=["top","right","bottom","left"],v=function(t){var e;a((e=n,{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}))};function b(t){oe(t.target,"aria-grabbed","focus"===t.raw.type?"true":"false")}re(l=Mt.fromTag("div"),{id:d,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),Tn(m,l),St(p,(function(t){Du(m,"#"+d).each((function(e){var n=Mt.fromTag("div");re(n,{id:d+"-"+t,class:"tox-croprect-block","data-mce-bogus":"all"}),fe(n,"display","none"),Tn(e,n)}))})),St(g,(function(t){Du(m,"#"+d).each((function(e){var n=Mt.fromTag("div");re(n,{id:d+"-"+t.name,"aria-label":t.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:t.label}),qr(n,["tox-croprect-handle","tox-croprect-handle-"+t.name]),fe(n,"display","none"),Tn(e,n)}))})),s=R(g,(function(e){var n;return function(t,e){function n(t){var n,r,i,u,f,g,h,y,x=t.raw,w=(n=Math.max,r=m.documentElement,i=m.body,u=n(r.scrollWidth,i.scrollWidth),f=n(r.clientWidth,i.clientWidth),g=n(r.offsetWidth,i.offsetWidth),h=n(r.scrollHeight,i.scrollHeight),y=n(r.clientHeight,i.clientHeight),{width:u<g?f:u,height:h<n(r.offsetHeight,i.offsetHeight)?y:h});Lw(x),t.prevent(),c=x.button,s=x.screenX,l=x.screenY;var S=ge(v,"cursor");de(a=Mt.fromTag("div",m),{position:"absolute",top:"0",left:"0",width:w.width+"px",height:w.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:S}),Tn(yn(p),a),d.push(sc(p,"mousemove",o),sc(p,"touchmove",o),sc(p,"mouseup",b),sc(p,"touchend",b)),e.start(x)}function o(t){var n=t.raw;if(Lw(n),n.button!==c)return b(t);n.deltaX=n.screenX-s,n.deltaY=n.screenY-l,t.prevent(),e.drag(n)}var r,i,u,a,c,s,l,f=[],d=[],m=null!==(r=e.document)&&void 0!==r?r:document,g=null!==(i=e.root)&&void 0!==i?i:m,p=Mt.fromDom(m),v=Mt.fromDom(g.getElementById(null!==(u=e.handle)&&void 0!==u?u:t)),b=function(t){Lw(t.raw),St(d,(function(t){return t.unbind()})),d=[],En(a),e.stop&&e.stop(t.raw)};return f.push(sc(v,"mousedown",n),sc(v,"touchstart",n)),{destroy:function(){St(d.concat(f),(function(t){return t.unbind()})),d=[],f=[],h(a)&&En(a)}}}(d,{document:o.ownerDocument,root:gn(m).dom,handle:d+"-"+e.name,start:function(){n=t},drag:function(t){u(e,n,t.deltaX,t.deltaY)}})})),c(t),f.push(sc(m,"focusin",b),sc(m,"focusout",b),sc(m,"keydown",(function(e){var n;function o(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),u(n,o,r,i)}switch(St(g,(function(t){if(ie(e.target,"id")===d+"-"+t.name)return n=t,!1})),e.raw.keyCode){case Bk.LEFT:o(e,0,t,-10,0);break;case Bk.RIGHT:o(e,0,t,10,0);break;case Bk.UP:o(e,0,t,0,-10);break;case Bk.DOWN:o(e,0,t,0,10);break;case Bk.ENTER:case Bk.SPACEBAR:e.prevent(),r()}})));var y=O(O({},Ak),{toggleVisibility:function(t){var e=T(T([],R(g,(function(t){return"#"+d+"-"+t.name})),!0),R(p,(function(t){return"#"+d+"-"+t})),!0).join(","),n=ss(m,e);St(n,t?function(t){return ve(t,"display")}:function(t){return fe(t,"display","none")})},setClampRect:function(e){n=e,c(t)},setRect:a,getInnerRect:function(){return i(n,t)},setInnerRect:v,setViewPortRect:function(n){e=n,c(t)},destroy:function(){St(s,(function(t){return t.destroy()})),s=[],St(f,(function(t){return t.unbind()})),f=[]}});return y};function Nk(t,e){function n(t){var e=w.getHistoryStates();_.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),hr(t,Ek.formActionEvent,{name:Ek.saveState(),value:e.undoEnabled})}function o(t){return t.toBlob()}function r(t){hr(t,Ek.formActionEvent,{name:Ek.disable(),value:{}})}function u(t,e,i,u,a){r(t),function(t){return e=t,new _y((function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})).then((function(e){return iw((n=t,new _y((function(t,e){function o(){i.removeEventListener("load",u),i.removeEventListener("error",a)}var r=URL.createObjectURL(n),i=new Image,u=function(){o(),t(i)},a=function(){o(),e("Unable to load data of type "+n.type+": "+r)};i.addEventListener("load",u),i.addEventListener("error",a),i.src=r,i.complete&&setTimeout(u,0)})).then((function(t){nk(t);var e=tw(nw(t),ow(t));return tk(e).drawImage(t,0,0),e}))),t,e);var n}));var e}(e).then(i).then(o).then(u).then((function(e){return k(t,e)})).then((function(){n(t),a(),S(t)})).catch((function(e){console.log(e),t.getSystem().isConnected()&&S(t)}))}function c(t,e,n){u(t,w.getBlobState().blob,e,(function(t){return w.updateTempState(t)}),n)}function s(t){var e=w.getBlobState().url;return w.destroyTempState(),n(t),e}var l,f,d,m,g,p,h,v,b,y,x,w=function(t){var e,n,o,r,u=Ro(t),a=cc(),c=(n=-1,{data:e=[],add:function(t){var o=e.splice(++n);return e.push(t),{state:t,removed:o}},undo:function(){if(o())return e[--n]},redo:function(){if(r())return e[++n]},canUndo:o=function(){return 0<n},canRedo:r=function(){return-1!==n&&n<e.length-1}});function s(t){u.set(t)}function l(t){URL.revokeObjectURL(t.url)}function f(t){var e=d(t);s(e);var n=c.add(e).removed;return XS.each(n,l),e.url}function d(t){return{blob:t,url:URL.createObjectURL(t)}}function m(){a.on(l),a.clear()}return c.add(t),{getBlobState:function(){return u.get()},setBlobState:s,addBlobState:f,getTempState:function(){return a.get().getOrThunk(u.get)},updateTempState:function(t){var e=d(t);return m(),a.set(e),e.url},addTempState:function(t){var e=d(t);return a.set(e),e.url},applyTempState:function(t){return a.get().fold(i,(function(e){f(e.blob),t()}))},destroyTempState:m,undo:function(){var t=c.undo();return s(t),t.url},redo:function(){var t=c.redo();return s(t),t.url},getHistoryStates:function(){return{undoEnabled:c.canUndo(),redoEnabled:c.canRedo()}}}}(t.currentState),S=function(t){T.getApplyButton(t).each((function(t){ud.enable(t)})),hr(t,Ek.formActionEvent,{name:Ek.enable(),value:{}})},k=function(t,e){return r(t),C.updateSrc(t,e)},C=(m=t.currentState.url,p=Bm({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),h=Ro(1),g=uc(),v=O(O({},g),{run:function(t){return g.get().each(t)}}),b=Ro({x:0,y:0,w:1,h:1}),y=Ro({x:0,y:0,w:1,h:1}),{memContainer:x=Bm(Jb.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[p.asSpec(),{dom:{tag:"img",attributes:{src:m}}},{dom:{tag:"div"},behaviours:Ja([im("image-panel-crop-events",[Qi((function(t){x.getOpt(t).each((function(t){var e=t.element.dom,n=Rk({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,i);n.toggleVisibility(!1),n.on("updateRect",(function(t){var e=t.rect,n=h.get(),o={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};b.set(o)})),v.set(n)}))})),Zi((function(){v.clear()}))])])}],containerBehaviours:Ja([Tg.config({}),im("image-panel-events",[Qi((function(t){D(t,m)}))])])})),updateSrc:D,zoom:function(t,e){var n=h.get(),o=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);h.set(o),x.getOpt(t).each((function(t){var e=t.components()[1].element;E(t,e)}))},showCrop:function(){v.run((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){v.run((function(t){t.toggleVisibility(!1)}))},getRect:function(){return b.get()},getMeasurements:function(){var t=y.get();return{width:t.w,height:t.h}}}),_=(f=Bm(Mk("Undo","undo",!0,(function(t){hr(t,Ck.undo(),{direction:1})}),l=e)),d=Bm(Mk("Redo","redo",!0,(function(t){hr(t,Ck.redo(),{direction:1})}),l)),{container:Jb.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[f.asSpec(),d.asSpec(),Mk("Zoom in","zoom-in",!1,(function(t){hr(t,Ck.zoom(),{direction:1})}),l),Mk("Zoom out","zoom-out",!1,(function(t){hr(t,Ck.zoom(),{direction:-1})}),l)]}),updateButtonUndoStates:function(t,e,n){f.getOpt(t).each((function(t){Fk(t,e)})),d.getOpt(t).each((function(t){Fk(t,n)}))}}),T=function(t,e){function n(t,n,o,r){return Bm(Mw({name:t,text:t,disabled:o,primary:r,icon:vt.none(),borderless:!1},n,e))}function o(t,n,o,r){return Bm(Aw({name:t,icon:vt.some(t),tooltip:vt.some(n),disabled:r,primary:!1,borderless:!1},o,e))}function r(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(ud)&&ud.disable(n)}))}function u(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(ud)&&ud.enable(n)}))}function c(t,e,n){hr(t,e,n)}function s(t){return pr(t,Ek.disable()),0}function l(t){return pr(t,Ek.enable()),0}function f(t,e){s(t),c(t,Ck.transform(),{transform:e}),l(t)}function d(t){return function(){J.getOpt(t).each((function(t){Tg.set(t,[K])}))}}function m(t,e){s(t),c(t,Ck.transformApply(),{transform:e,swap:d(t)}),l(t)}function g(){return n("Back",(function(t){return c(t,Ck.back(),{swap:d(t)})}),!1,!1)}function p(){return Bm({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Ja([ud.config({})])})}function h(){return n("Apply",(function(t){return c(t,Ck.apply(),{swap:d(t)})}),!0,!0)}function v(t,e){return function(n){return t(n,e)}}function b(t,e){var n,o=e;s(n=t),c(n,Ck.tempTransform(),{transform:o}),l(n)}function y(t,n,o,r,i){var u=MS.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),c=MS.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=MS.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Bm(MS.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:i,getInitialValue:a({x:r})},components:[u,c,s],sliderBehaviours:Ja([Ag.config({})]),onChoose:n}))}function x(t,e,n,o,i){var a,c,s,l,d,m,p=(a=t,c=e,s=n,l=o,d=i,[g(),(m=c,y(a,(function(t,e,n){f(t,v(m,n.x/100))}),s,l,d)),h()]);return Jb.sketch({dom:k,components:p.map((function(t){return t.asSpec()})),containerBehaviours:Ja([im("image-tools-filter-panel-buttons-events",[Sr(Ek.disable(),(function(t,e){r(p,t)})),Sr(Ek.enable(),(function(t,e){u(p,t)}))])])})}function w(t){return y(t,(function(t,e,n){var o=z.getOpt(t),r=j.getOpt(t),i=U.getOpt(t);o.each((function(e){r.each((function(n){i.each((function(o){var r,i,u,a=wf.getValue(e).x/100,c=wf.getValue(o).x/100,s=wf.getValue(n).x/100,l=(r=a,i=c,u=s,function(t){return sw(t,(e=i,n=u,cw([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[aw(r,0,2),0,0,0,0,0,aw(e,0,2),0,0,0,0,0,aw(n,0,2),0,0,0,0,0,1,0,0,0,0,0,1])));var e,n});f(t,l)}))}))}))}),0,100,200)}function S(t,e,n){return function(o){c(o,Ck.swap(),{transform:e,swap:function(){J.getOpt(o).each((function(e){Tg.set(e,[t]),n(e)}))}})}}var k={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},C=i,O=[g(),p(),n("Apply",(function(e){m(e,(function(e){var n,o,r,i,u,a,c,s,l,f=t.getRect();return n=f.x,o=f.y,r=f.w,i=f.h,a=n,c=o,s=r,l=i,(u=e).toCanvas().then((function(t){return gk(t,u.getType(),a,c,s,l)}))})),t.hideCrop()}),!1,!0)],_=Jb.sketch({dom:k,components:O.map((function(t){return t.asSpec()})),containerBehaviours:Ja([im("image-tools-crop-buttons-events",[Sr(Ek.disable(),(function(t,e){r(O,t)})),Sr(Ek.enable(),(function(t,e){u(O,t)}))])])}),T=Bm(Hw({name:"size",label:vt.none(),constrain:!0,disabled:!1},e)),E=[g(),p(),T,p(),n("Apply",(function(t){T.getOpt(t).each((function(e){var n,o,r=wf.getValue(e),i=parseInt(r.width,10),u=parseInt(r.height,10),a=(n=i,o=u,function(t){return r=n,i=o,(e=t).toCanvas().then((function(t){return lk(t,r,i).then((function(t){return uw(t,e.getType())}))}));var e,r,i});m(t,a)}))}),!1,!0)],D=Jb.sketch({dom:k,components:E.map((function(t){return t.asSpec()})),containerBehaviours:Ja([im("image-tools-resize-buttons-events",[Sr(Ek.disable(),(function(t,e){r(E,t)})),Sr(Ek.enable(),(function(t,e){u(E,t)}))])])}),A=v(vw,"h"),B=v(vw,"v"),M=v(bw,-90),F=v(bw,90),I=[g(),p(),o("flip-horizontally","Flip horizontally",(function(t){b(t,A)}),!1),o("flip-vertically","Flip vertically",(function(t){b(t,B)}),!1),o("rotate-left","Rotate counterclockwise",(function(t){b(t,M)}),!1),o("rotate-right","Rotate clockwise",(function(t){b(t,F)}),!1),p(),h()],R=Jb.sketch({dom:k,components:I.map((function(t){return t.asSpec()})),containerBehaviours:Ja([im("image-tools-fliprotate-buttons-events",[Sr(Ek.disable(),(function(t,e){r(I,t)})),Sr(Ek.enable(),(function(t,e){u(I,t)}))])])}),N=[g(),p(),h()],P=Jb.sketch({dom:k,components:N.map((function(t){return t.asSpec()}))}),V=x("Brightness",pw,-100,0,100),H=x("Contrast",hw,-100,0,100),L=x("Gamma",gw,-100,0,100),z=w("R"),U=w("G"),j=w("B"),W=[g(),z,U,j,h()],G=Jb.sketch({dom:k,components:W.map((function(t){return t.asSpec()}))}),X=vt.some(mw),q=vt.some(dw),Y=[o("crop","Crop",S(_,vt.none(),(function(e){t.showCrop()})),!1),o("resize","Resize",S(D,vt.none(),(function(e){T.getOpt(e).each((function(e){var n=t.getMeasurements(),o=n.width,r=n.height;wf.setValue(e,{width:o,height:r})}))})),!1),o("orientation","Orientation",S(R,vt.none(),C),!1),o("brightness","Brightness",S(V,vt.none(),C),!1),o("sharpen","Sharpen",S(P,X,C),!1),o("contrast","Contrast",S(H,vt.none(),C),!1),o("color-levels","Color levels",S(G,vt.none(),C),!1),o("gamma","Gamma",S(L,vt.none(),C),!1),o("invert","Invert",S(P,q,C),!1)],K=Jb.sketch({dom:k,components:Y.map((function(t){return t.asSpec()}))}),J=Bm(Jb.sketch({dom:{tag:"div"},components:[K],containerBehaviours:Ja([Tg.config({})])}));return{memContainer:J,getApplyButton:function(t){return J.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}}(C,e);function E(t,e){x.getOpt(t).each((function(t){var n=h.get(),o=Ce(t.element),r=xe(t.element),i=e.dom.naturalWidth*n,u=e.dom.naturalHeight*n,a=Math.max(0,o/2-i/2),c=Math.max(0,r/2-u/2),s={left:a.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:u.toString()+"px",position:"absolute"};de(e,s),p.getOpt(t).each((function(t){de(t.element,s)})),v.run((function(t){var e=b.get();t.setRect({x:e.x*n+a,y:e.y*n+c,w:e.w*n,h:e.h*n}),t.setClampRect({x:a,y:c,w:i,h:u}),t.setViewPortRect({x:0,y:0,w:o,h:r})}))}))}function D(t,e){var n,o=Mt.fromTag("img");return oe(o,"src",e),n=o.dom,new Sp((function(t){var e=function(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then((function(){t.getSystem().isConnected()&&x.getOpt(t).map((function(t){var e=xu({element:o});Tg.replaceAt(t,1,vt.some(e));var n=y.get(),r={x:0,y:0,w:o.dom.naturalWidth,h:o.dom.naturalHeight};y.set(r);var i,u=Dk.inflate(r,-20,-20);b.set(u),n.w===r.w&&n.h===r.h||(i=o,x.getOpt(t).each((function(t){var e=Ce(t.element),n=xe(t.element),o=i.dom.naturalWidth,r=i.dom.naturalHeight,u=Math.min(e/o,n/r);1<=u?h.set(1):h.set(u)}))),E(t,o)}))}))}return{dom:{tag:"div",attributes:{role:"presentation"}},components:[T.memContainer.asSpec(),C.memContainer.asSpec(),_.container],behaviours:Ja([wf.config({store:{mode:"manual",getValue:function(){return w.getBlobState()}}}),im("image-tools-events",[Sr(Ck.undo(),(function(t,e){var o=w.undo();k(t,o).then((function(e){S(t),n(t)}))})),Sr(Ck.redo(),(function(t,e){var o=w.redo();k(t,o).then((function(e){S(t),n(t)}))})),Sr(Ck.zoom(),(function(t,e){var n=e.event.direction;C.zoom(t,n)})),Sr(Ck.back(),(function(t,e){var n,o=s(n=t);k(n,o).then((function(t){S(n)})),(0,e.event.swap)(),C.hideCrop()})),Sr(Ck.apply(),(function(t,e){w.applyTempState((function(){s(t),(0,e.event.swap)()}))})),Sr(Ck.transform(),(function(t,e){return c(t,e.event.transform,i)})),Sr(Ck.tempTransform(),(function(t,e){var n=e.event.transform;u(t,w.getTempState().blob,n,(function(t){return w.addTempState(t)}),i)})),Sr(Ck.transformApply(),(function(t,e){var n=t,o=e.event.transform,r=e.event.swap,i=w.getBlobState().blob;u(n,i,o,(function(t){var e=w.addBlobState(t);return s(n),e}),r)})),Sr(Ck.swap(),(function(t,e){_.updateButtonUndoStates(t,!1,!1);var n=e.event.transform,o=e.event.swap;n.fold((function(){o()}),(function(e){c(t,e,o)}))}))]),Uw()])}}function Pk(t){return!Tt(t,"items")}function Vk(t,e){var n=t.label.map((function(t){return jb(t,e)})),o=[ud.config({disabled:function(){return t.disabled||e.isDisabled()}}),rv(),Og.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return pr(t,sy),vt.some(!0)}}),im("textfield-change",[Sr(vi(),(function(e,n){hr(e,iy,{name:t.name})})),Sr(Ti(),(function(e,n){hr(e,iy,{name:t.name})}))]),ey.config({})],r=t.validation.map((function(t){return Ry.config({getRoot:function(t){return qt(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=wf.getValue(e),o=t.validator(n);return By(!0===o?Nn.value(n):Nn.error(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),i=t.placeholder.fold(a({}),(function(t){return{placeholder:e.translate(t)}})),u=t.inputMode.fold(a({}),(function(t){return{inputmode:t}})),c=O(O({},i),u);return Ub(n,Zb.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:c,inputClasses:[t.classname],inputBehaviours:Ja(U([o,r])),selectOnFocus:!1,factory:py}),(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),[ud.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Zb.getField(t).each(ud.disable)},onEnabled:function(t){Zb.getField(t).each(ud.enable)}}),rv()])}function Hk(t){var e=Ro(null);return hu({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})}function Lk(t,e,n){var o=wf.getValue(n);wf.setValue(e,o),VO(e)}function zk(t,e){var n=t.element,o=Kr(n),r=n.dom;"number"!==ie(n,"type")&&e(r,o)}function Uk(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:i}}function jk(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:i}}function Wk(t,e){return n=t,R(P(e,(function(t){return t.type===n})),Uk);var n}function Gk(t,e){var n=t.toLowerCase();return P(e,(function(t){return ft((void 0!==t.meta&&void 0!==t.meta.text?t.meta:t).text.toLowerCase(),n)||ft(t.value.toLowerCase(),n)}))}function Xk(t){return function(e,n,o){return it(n,"name").fold((function(){return t(n,o)}),(function(r){return e.field(r,t(n,o))}))}}function qk(t,e,n){var o=Go(n,{shared:{interpreter:function(e){return KO(t,e,o)}}});return KO(t,e,o)}function Yk(t,e,n){function o(){return Mt.fromDom(t.getContentAreaContainer())}function r(){return p||!n()}var i,u,a,c,s,l,f,d,m,g,p=Qh(t);return{inlineDialog:(f=o,d=e,m=r,g={maxHeightFunction:Ec()},function(){return m()?{type:"node",root:te(f()),node:vt.from(f()),bubble:pc(12,12,JO),layouts:{onRtl:function(){return[Cm]},onLtr:function(){return[km]}},overrides:g}:{type:"hotspot",hotspot:d(),bubble:pc(-12,12,JO),layouts:{onRtl:function(){return[za]},onLtr:function(){return[Ua]}},overrides:g}}),banner:(c=o,s=e,l=r,function(){return l()?{type:"node",root:te(c()),node:vt.from(c()),layouts:{onRtl:function(){return[Zg]},onLtr:function(){return[Zg]}}}:{type:"hotspot",hotspot:s(),layouts:{onRtl:function(){return[Xa]},onLtr:function(){return[Xa]}}}}),cursor:(u=t,function(){return{type:"selection",root:a(),getSelection:function(){var t=u.selection.getRng();return vt.some(is.range(Mt.fromDom(t.startContainer),t.startOffset,Mt.fromDom(t.endContainer),t.endOffset))}}}),node:(i=a=function(){return Mt.fromDom(t.getBody())},function(t){return{type:"node",root:i(),node:t}})}}function Kk(t){return vt.from(t.getParam("style_formats")).filter(d).map((function(e){var n,o,r=(n=t,o=QO(e),n.formatter?i(o.customFormats):n.on("init",(function(){i(o.customFormats)})),o.formats);function i(t){St(t,(function(t){n.formatter.has(t.name)||n.formatter.register(t.name,t.format)}))}return t.getParam("style_formats_merge",!1,"boolean")?$O.concat(r):r})).getOr($O)}function Jk(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Go(t,o)}function $k(t,e,n,o){var r=function(e){return R(e,(function(e){var i,u,c,s,f,d=Ct(e);if(ut(e,"items")){var m=r(e.items);return Go(Go(e,{type:"submenu"}),{getStyleItems:a(m)})}return ut(e,"format")?Jk(e,n,o):1===d.length&&wt(d,"title")?Go(e,{type:"separator"}):(s={type:"formatter",format:c="custom-"+(u=l((i=e).name)?i.name:Mr(i.title)),isSelected:n(c),getStylePreview:o(c)},f=Go(i,s),t.formatter.register(u,f),f)}))};return r(e)}function Qk(t){return function(e){if(h(n=e)&&1===n.nodeType){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}var n;return!1}}function Zk(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}}function tC(t){return t.innerText||t.textContent}function eC(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)&&OO(t)}function nC(t){return t&&/^(H[1-6])$/.test(t.nodeName)}function oC(t){return nC(t)&&OO(t)}function rC(t){var e,n=t.id||Mr("h");return Zk("header",tC(t),"#"+n,nC(e=t)?parseInt(e.nodeName.substr(1),10):0,(function(){t.id=n}))}function iC(t){var e=t.id||t.name;return Zk("anchor",tC(t)||"#"+e,"#"+e,0,i)}function uC(t){return 0<ZO(t.title).length}function aC(t){return l(t)&&/^https?/.test(t)}function cC(t){return f(t)&&ot(t,(function(t){return!(d(e=t)&&e.length<=5&&W(e,aC));var e})).isNone()}function sC(){var t,e=eb.getItem(o_);if(null===e)return{};try{t=JSON.parse(e)}catch(t){if(t instanceof SyntaxError)return console.log("Local storage "+o_+" was not valid JSON",t),{};throw t}return cC(t)?t:(console.log("Local storage "+o_+" was not valid format",t),{})}function lC(t){return it(sC(),t).getOr([])}function fC(t,e){var n,o;aC(t)&&(o=P(it(n=sC(),e).getOr([]),(function(e){return e!==t})),n[e]=[t].concat(o).slice(0,5),function(t){if(!cC(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));eb.setItem(o_,JSON.stringify(t))}(n))}function dC(t){return!!t}function mC(t){return et(XS.makeMap(t,/[, ]/),dC)}function gC(t){return vt.from(t.getParam("file_picker_callback")).filter(v)}function pC(t){return vt.from(t).filter(l).getOrUndefined()}function hC(t){return{getHistory:lC,addToHistory:fC,getLinkInformation:function(){return!1===(e=t).getParam("typeahead_urls")?vt.none():vt.some({targets:n_(e.getBody()),anchorTop:pC(e.getParam("anchor_top","#top")),anchorBottom:pC(e.getParam("anchor_bottom","#bottom"))});var e},getValidationHandler:function(){return vt.from(void 0===(n=(e=t).getParam("file_picker_validator_handler",void 0,"function"))?e.getParam("filepicker_validator_handler",void 0,"function"):n);var e,n},getUrlPicker:function(e){return n=s=t,o=d=e,i=vt.some((r=n).getParam("file_picker_types")).filter(dC),u=vt.some(r.getParam("file_browser_callback_types")).filter(dC),a=i.or(u).map(mC),c=gC(r).fold(S,(function(t){return a.fold(k,(function(t){return 0<Ct(t).length&&t}))})),(g(c)?c?gC(n):vt.none():c[o]?gC(n):vt.none()).map((function(t){return function(e){return Ay((function(n){var o=O({filetype:d,fieldname:e.fieldname},vt.from(e.meta).getOr({}));t.call(s,(function(t,e){if(!l(t))throw new Error("Expected value to be string");if(void 0!==e&&!f(e))throw new Error("Expected meta to be a object");n({value:t,meta:e})}),e.value,o)}))}}));var n,o,r,i,u,a,c,s,d}}}function vC(t,e,n){var o,r,i,u,a,c,s,l,f,d,m,g,p,h=Ro(!1),v={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=Ro(Jh(e)?"bottom":"top")).get,setDockingMode:o.set},b={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:op.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return KO(YO,t,b)},anchors:Yk(e,n,v.isPositionedAtTop),header:v,getSink:function(){return Nn.value(t)}},urlinput:hC(e),styleselect:(f=Ro([]),d=Ro([]),m=Ro([]),g=Ro([]),p=Ro(!(l=function(t){var e=t.items;return void 0!==e&&0<e.length?j(e,l):[t.format]})),(s=e).on("PreInit",(function(t){var e=Kk(s),n=$k(s,e,y,x);f.set(n),d.set(j(n,l))})),s.on("addStyleModifications",(function(t){var e=$k(s,t.items,y,x);m.set(e),p.set(t.replace),g.set(j(e,l))})),{getData:function(){var t=p.get()?[]:f.get(),e=m.get();return t.concat(e)},getFlattenedKeys:function(){var t=p.get()?[]:d.get(),e=g.get();return t.concat(e)}}),colorinput:{colorPicker:function(t,e){kb(c)(t,e)},hasCustomColors:function(){return ob(a)},getColors:function(){return rb(u)},getColorCols:(i=u=a=c=e,function(){return ub(i)})},dialog:{isDraggableModal:(r=e,function(){return r.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return h.get()},setContextMenuState:function(t){return h.set(t)}};function y(t){return function(){return s.formatter.match(t)}}function x(t){return function(){var e=s.formatter.get(t);return void 0!==e?vt.some({tag:0<e.length&&(e[0].inline||e[0].block)||"div",styles:s.dom.parseStyle(s.formatter.getCssText(t))}):vt.none()}}return b}function bC(t){return(at(pe(t,"position"),"fixed")?vt.none():Yt(t)).orThunk((function(){var e=Mt.fromTag("span");return qt(t).bind((function(t){Tn(t,e);var n=Yt(e);return En(e),n}))}))}function yC(t){return bC(t).map(ke).getOrThunk((function(){return kn(0,0)}))}function xC(t,e){var n=t.element;Wr(n,e.transitionClass),Gr(n,e.fadeOutClass),Wr(n,e.fadeInClass),e.onShow(t)}function wC(t,e){var n=t.element;Wr(n,e.transitionClass),Gr(n,e.fadeInClass),Wr(n,e.fadeOutClass),e.onHide(t)}function SC(t,e,n){return W(t,(function(t){switch(t){case"bottom":return e.bottom<=n.bottom;case"top":return e.y>=n.y}}))}function kC(t,e){return e.getInitialPos().map((function(e){return Bn(e.bounds.x,e.bounds.y,Ce(t),xe(t))}))}function CC(t,e,n){return n.getInitialPos().bind((function(o){switch(n.clearInitialPos(),o.position){case"static":return vt.some(g_.static());case"absolute":var r=bC(t).map(Mn).getOrThunk((function(){return Mn(bn())}));return vt.some(g_.absolute(ka("absolute",it(o.style,"left").map((function(t){return e.x-r.x})),it(o.style,"top").map((function(t){return e.y-r.y})),it(o.style,"right").map((function(t){return r.right-e.right})),it(o.style,"bottom").map((function(t){return r.bottom-e.bottom})))));default:return vt.none()}}))}function OC(t,e,n){n.setDocked(!1),St(["left","right","top","bottom","position"],(function(e){return ve(t.element,e)})),e.onUndocked(t)}function _C(t,e,n,o){var r="fixed"===o.position;n.setDocked(r),Ca(t.element,o),(r?e.onDocked:e.onUndocked)(t)}function TC(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(i){var u=i.y<o.bottom&&i.bottom>o.y;u!==n.isVisible()&&(n.setVisible(u),r&&!u?(qr(t.element,[e.fadeOutClass]),e.onHide(t)):(u?xC:wC)(t,e))}))}))}function EC(t,e,n){var o,r,u,a,c,s;n.isDocked()&&(r=e,u=n,s=(o=t).element,u.setDocked(!1),kC(c=o.element,a=u).bind((function(t){return CC(c,t,a)})).each((function(t){t.fold((function(){return OC(o,r,u)}),(function(t){return _C(o,r,u,t)}),i)})),u.setVisible(!0),r.contextual.each((function(t){Yr(s,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(o)})),p_(o,r,u))}function DC(t,e){return wt(b_.getModes(t),e)}function AC(t){var e=t.element;qt(e).each((function(n){var o,r,i="padding-"+b_.getModes(t)[0];b_.isDocked(t)?(o=Ce(n),fe(e,"width",o+"px"),fe(n,i,we(r=e)+(parseInt(ge(r,"margin-top"),10)||0)+(parseInt(ge(r,"margin-bottom"),10)||0)+"px")):(ve(e,"width"),ve(n,i))}))}function BC(t,e){e?(Gr(t,x_.fadeOutClass),qr(t,[x_.transitionClass,x_.fadeInClass])):(Gr(t,x_.fadeInClass),qr(t,[x_.fadeOutClass,x_.transitionClass]))}function MC(t,e){var n=Mt.fromDom(t.getContainer());e?(Wr(n,w_),Gr(n,S_)):(Wr(n,S_),Gr(n,w_))}function FC(t,e){function n(t){u().each((function(e){return t(e.element)}))}function o(e){t.inline||AC(e),MC(t,b_.isDocked(e)),e.getSystem().broadcastOn([df()],{}),u().each((function(t){return t.getSystem().broadcastOn([df()],{})}))}var r,i=cc(),u=e.getSink,a=t.inline?[]:[tc.config({channels:((r={})[y_()]={onReceive:AC},r)})];return T([Ag.config({}),b_.config({contextual:O({lazyContext:function(e){var n=we(e.element),o=t.inline?t.getContentAreaContainer():t.getContainer(),r=Mn(Mt.fromDom(o)),i=r.height-n,u=r.y+(DC(e,"top")?0:n);return vt.some(Bn(r.x,u,r.width,i))},onShow:function(){n((function(t){return BC(t,!0)}))},onShown:function(t){n((function(t){return Yr(t,[x_.transitionClass,x_.fadeInClass])})),i.get().each((function(e){var n,o=t.element,r=jt(n=e);xa(r).filter((function(t){return!zt(n,t)})).filter((function(t){return zt(t,Mt.fromDom(r.dom.body))||Ut(o,t)})).each((function(){return ba(n)})),i.clear()}))},onHide:function(t){var e=t.element,o=u;wa(e).orThunk((function(){return o().toOptional().bind((function(t){return wa(t.element)}))})).fold(i.clear,i.set),n((function(t){return BC(t,!1)}))},onHidden:function(){n((function(t){return Yr(t,[x_.transitionClass])}))}},x_),lazyViewport:function(e){var n=Fn(),o=t.getParam("toolbar_sticky_offset",0,"number"),r=n.y+(DC(e,"top")?o:0),i=n.height-(DC(e,"bottom")?o:0);return Bn(n.x,r,n.width,i)},modes:[e.header.getDockingMode()],onDocked:o,onUndocked:o})],a,!0)}function IC(t){return io("menubutton",__,t)}function RC(t,e){return e.getAnimationRoot.fold((function(){return t.element}),(function(e){return e(t)}))}function NC(t){return t.dimension.property}function PC(t,e){return t.dimension.getDimension(e)}function VC(t,e){Yr(RC(t,e),[e.shrinkingClass,e.growingClass])}function HC(t,e){Gr(t.element,e.openClass),Wr(t.element,e.closedClass),fe(t.element,NC(e),"0px"),be(t.element)}function LC(t,e){Gr(t.element,e.closedClass),Wr(t.element,e.openClass),ve(t.element,NC(e))}function zC(t,e,n,o){n.setCollapsed(),fe(t.element,NC(e),PC(e,t.element)),be(t.element),VC(t,e),HC(t,e),e.onStartShrink(t),e.onShrunk(t)}function UC(t,e,n){var o=PC(e,t.element);("0px"===o?zC:function(t,e,n,o){var r=o.getOrThunk((function(){return PC(e,t.element)}));n.setCollapsed(),fe(t.element,NC(e),r),be(t.element);var i=RC(t,e);Gr(i,e.growingClass),Wr(i,e.shrinkingClass),HC(t,e),e.onStartShrink(t)})(t,e,n,vt.some(o))}function jC(t,e,n){var o=RC(t,e),r=Xr(o,e.shrinkingClass),i=PC(e,t.element);LC(t,e);var u=PC(e,t.element);(r?function(){fe(t.element,NC(e),i),be(t.element)}:function(){HC(t,e)})(),Gr(o,e.shrinkingClass),Wr(o,e.growingClass),LC(t,e),fe(t.element,NC(e),u),n.setExpanded(),e.onStartGrow(t)}function WC(t,e,n){return!0===Xr(RC(t,e),e.growingClass)}function GC(t,e,n){return!0===Xr(RC(t,e),e.shrinkingClass)}function XC(t){return"<alloy.field."+t+">"}function qC(t){return{element:function(){return t.element.dom}}}function YC(t){return td.getCurrent(t).bind((function(t){return B_.isGrowing(t)||B_.hasGrown(t)?td.getCurrent(t).bind((function(t){return L(R_.getSlotNames(t),(function(e){return R_.isShowing(t,e)}))})):vt.none()}))}function KC(t){var e=Mt.fromHtml(t),n=Kt(e),o=H(void 0!==e.dom.attributes?e.dom.attributes:[],(function(t,e){var n;return"class"===e.name?t:O(O({},t),((n={})[e.name]=e.value,n))}),{}),r=Array.prototype.slice.call(e.dom.classList,0),i=0===n.length?{}:{innerHtml:Dr(e)};return O({tag:Ft(e),classes:r,attributes:o},i)}function JC(t){return td.getCurrent(t).each((function(t){return ba(t.element)}))}function $C(t,e,n){function o(n){var o;!r.get()||"focusin"===(o=n).type&&(o.composed?$(o.composedPath()):vt.from(o.target)).map(Mt.fromDom).filter(Ge).exists((function(t){return Xr(t,"mce-pastebin")}))||(n.preventDefault(),JC(e()),t.editorManager.setActive(t))}var r=Ro(!1),i=cc();function u(o){var i,u,a,c,s,l,f,d,m,g;o!==r.get()&&(r.set(o),i=t,u=e(),a=o,c=n.providers,d=u.element,m=a,g="data-mce-"+(s="tabindex"),vt.from(i.iframeElement).map(Mt.fromDom).each((function(t){m?(ue(t,s).each((function(e){return oe(t,g,e)})),oe(t,s,-1)):(ce(t,s),ue(t,g).each((function(e){oe(t,s,e),ce(t,g)})))})),a?(L_.block(u,(f=c,function(t,e){return{dom:{tag:"div",attributes:{"aria-label":f.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:KC('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})),ve(d,"display"),ce(d,"aria-hidden"),i.hasFocus()&&JC(u)):(l=td.getCurrent(u).exists((function(t){return ya(t.element)})),L_.unblock(u),fe(d,"display","none"),oe(d,"aria-hidden","true"),l&&i.focus()),t.fire("AfterProgressState",{state:o}))}t.inline||t.on("PreInit",(function(){t.dom.bind(t.getWin(),"focusin",o),t.on("BeforeExecCommand",(function(t){"mcefocus"===t.command.toLowerCase()&&!0!==t.value&&o(t)}))})),t.on("ProgressState",(function(e){var n;i.on(ep.clearTimeout),b(e.time)?(n=ep.setEditorTimeout(t,(function(){return u(e.state)}),e.time),i.set(n)):(u(e.state),i.clear())}))}function QC(t,e,n){return{within:t,extra:e,withinWidth:n}}function ZC(t,e,n){var o,r=(o=function(t,e){var o=n(t);return vt.some({element:t,start:e,finish:e+o,width:o})},H(t,(function(t,e){return o(e,t.len).fold(a(t),(function(e){return{len:e.finish,list:t.list.concat([e])}}))}),{len:0,list:[]}).list),i=P(r,(function(t){return t.finish<=e})),u=V(i,(function(t,e){return t+e.width}),0);return{within:i,extra:r.slice(i.length),withinWidth:u}}function tO(t){return R(t,(function(t){return t.element}))}function eO(t,e){var n=R(e,(function(t){return ku(t)}));f_.setGroups(t,n)}function nO(t,e,n){var o,r,i,u,a,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,k=e.builtGroups.get();0!==k.length&&(o=ul(t,e,"primary"),r=Py.getCoupled(t,"overflowGroup"),fe(o.element,"visibility","hidden"),u=Z(i=k.concat([r]),(function(t){return wa(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))})),n([]),eO(o,i),a=Ce(o.element),0===(s=a,l=e.builtGroups.get(),d=r,y=(0===(m=ZC(l,s,f=function(t){return Ce(t.element)})).extra.length?vt.some(m):vt.none()).getOrThunk((function(){return ZC(l,s-f(d),f)})),x=y.within,w=y.extra,S=y.withinWidth,(c=1===w.length&&w[0].width<=f(d)?(b=S,QC(tO(x.concat(w)),[],b)):1<=w.length?(p=w,h=d,v=S,QC(tO(x).concat([h]),tO(p),v)):(g=S,QC(tO(x),[],g))).extra.length)?(Tg.remove(o,r),n([])):(eO(o,c.within),n(c.extra)),ve(o.element,"visibility"),be(o.element),u.each(Ag.focus))}function oO(t,e){var n=Py.getCoupled(t,"toolbarSandbox");lf.isOpen(n)?lf.close(n):lf.open(n,e.toolbar())}function rO(t,e,n,o){var r=n.getBounds.map((function(t){return t()})),i=n.lazySink(t).getOrDie();nf.positionWithinBounds(i,e,{anchor:{type:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:W_()}}},r)}function iO(t,e,n,o,r){f_.setGroups(e,r),rO(t,e,n,o),Fg.on(t)}function uO(t){return R(t,(function(t){return ku(t)}))}function aO(t,e,n){nO(t,n,(function(o){n.overflowGroups.set(o),e.getOpt(t).each((function(t){q_.setGroups(t,uO(o))}))}))}function cO(t,e){il(t,e,"overflow-button").bind((function(){return il(t,e,"overflow")})).each((function(n){TO(t,e),B_.toggleGrow(n)}))}function sO(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:O({tag:"div",classes:["tox-toolbar__group"]},e),components:[J_.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Ja([ey.config({}),Ag.config({})])}}function lO(t){return J_.sketch(sO(t))}function fO(t,e){var n=Qi((function(e){var n=R(t.initGroups,lO);f_.setGroups(e,n)}));return Ja([zv(t.providers.isDisabled),rv(),Og.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),im("toolbar-events",[n])])}function dO(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":sO({title:vt.none(),items:[]}),"overflow-button":Dw({name:"more",icon:vt.some("more-drawer"),disabled:!1,tooltip:vt.some("More..."),primary:!1,borderless:!1},vt.none(),t.providers)},splitToolbarBehaviours:fO(t,e)}}function mO(t){var e=t.cyclicKeying?"cyclic":"acyclic";return f_.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===ch.scrolling?["tox-toolbar--scrolling"]:[])},components:[f_.parts.groups({})],toolbarBehaviours:fO(t,e)})}function gO(t){return"string"==typeof t?t.split(" "):t}function pO(t,e){var n=O(O({},sT),e.menus),o=0<Ct(e.menus).length,r=P(void 0===e.menubar||!0===e.menubar?gO("file edit view insert format tools table help"):gO(!1===e.menubar?"":e.menubar),(function(t){var n=Tt(sT,t);return o?n||it(e.menus,t).exists((function(t){return Tt(t,"items")})):n}));return P(R(r,(function(o){var r=n[o],i={title:r.title,items:gO(r.items)},u=e,a=t.getParam("removed_menuitems","").split(/[ ,]/);return{text:i.title,getItems:function(){return j(i.items,(function(t){var e=t.toLowerCase();return 0===e.trim().length||M(a,(function(t){return t===e}))?[]:"separator"===e||"|"===e?[{type:"separator"}]:u.menuItems[e]?[u.menuItems[e]]:[]}))}}})),(function(t){return 0<t.getItems().length&&M(t.getItems(),(function(t){return"separator"!==t.type}))}))}function hO(t){function e(){t._skinLoaded=!0,t.fire("SkinLoaded")}return function(){t.initialized?e():t.on("init",e)}}function vO(t,e,n){return new Sp((function(o,r){n.load(e,o,r),t.on("remove",(function(){return n.unload(e)}))}))}function bO(t,e){var n,o,r,i,u,a,c,s,f=(r=(n=e).getParam("skin"),i=n.getParam("skin_url"),!1!==r&&(o=r||"oxide",i=i?n.documentBaseURI.toAbsolute(i):Xh.baseURL+"/skins/ui/"+o),i);f&&e.contentCSS.push(f+(t?"/content.inline":"/content")+".min.css"),!1===e.getParam("skin")==0&&l(f)?Sp.all([vO(e,f+"/skin.min.css",e.ui.styleSheetLoader),(a=e,c=f,s=Mt.fromDom(a.getElement()),pn(s).isSome()?vO(a,c+"/skin.shadowdom.min.css",Gh.DOM.styleSheetLoader):Sp.resolve())]).then(hO(e),(u=e,"Skin could not be loaded",function(){return u.fire("SkinLoadError",{message:"Skin could not be loaded"})})):hO(e)()}function yO(t,e){return function(n){function o(){n.setActive(t.formatter.match(e));var o=t.formatter.formatChanged(e,n.setActive);r.set(o)}var r=ac();return t.initialized?o():t.once("init",o),function(){t.off("init",o),r.clear()}}}function xO(t,e,n){return function(o){function r(){return n(o)}function i(){n(o),t.on(e,r)}return t.initialized?i():t.once("init",i),function(){t.off("init",i),t.off(e,r)}}}function wO(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}}function SO(t,e){return function(){return t.execCommand(e)}}function kO(t,e,n){var o,r,i,u=n.dataset,a="basic"===u.type?function(){return R(u.data,(function(t){return Jk(t,n.isSelectedFor,n.getPreviewFor)}))}:u.getData;return{items:(o=e,r=n,i=function(t,e,n){var o="formatter"===t.type&&r.isInvalid(t);return 0===e?o?[]:c(t,e,!1,n).toArray():c(t,e,o,n).toArray()},{validateItems:s,getFetch:function(t,e){return function(n,o){o(Ow(s(e()),dh.CLOSE_ON_EXECUTE,t,!1))}}}),getStyleItems:a};function c(t,e,n,u){var a=o.shared.providers.translate(t.title);if("separator"===t.type)return vt.some({type:"separator",text:a});if("submenu"!==t.type)return vt.some(O({type:"togglemenuitem",text:a,icon:t.icon,active:t.isSelected(u),disabled:n,onAction:r.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))));var c=j(t.getStyleItems(),(function(t){return i(t,e,u)}));return 0===e&&c.length<=0?vt.none():vt.some({type:"nestedmenuitem",text:a,disabled:c.length<=0,getSubmenuItems:function(){return j(t.getStyleItems(),(function(t){return i(t,e,u)}))}})}function s(t){var e=r.getCurrentValue(),n=r.shouldHide?0:1;return j(t,(function(t){return i(t,n,e)}))}}function CO(t,e,n){var o=kO(0,e,n),r=o.items,i=o.getStyleItems,u=xO(t,"NodeChange",(function(t){var e=t.getComponent();n.updateText(e)}));return kw({text:n.icon.isSome()?vt.none():n.text,icon:n.icon,tooltip:vt.from(n.tooltip),role:vt.none(),fetch:r.getFetch(e,i),onSetup:u,getApi:function(t){return{getComponent:a(t)}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)}function OO(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return t_(t)}return!1}(t)&&!e_(t)}function _O(t,e){function n(e){return sl(t)}function o(e,n){return function(o,r){return il(o,t,r).map((function(t){return e(t,r)})).getOr(n)}}function r(t,e){return"true"!==ie(t.element,"aria-hidden")}var i,u=o(r,!1),a=o((function(t,e){var n;r(t)&&(fe(n=t.element,"display","none"),oe(n,"aria-hidden","true"),hr(t,Gi(),{name:e,visible:!1}))})),c=(i=a,function(t,e){St(e,(function(e){return i(t,e)}))}),s=o((function(t,e){var n;r(t)||(ve(n=t.element,"display"),ce(n,"aria-hidden"),hr(t,Gi(),{name:e,visible:!0}))}));return{uid:t.uid,dom:t.dom,components:e,behaviours:Xs(t.slotBehaviours),apis:{getSlotNames:n,getSlot:function(e,n){return il(e,t,n)},isShowing:u,hideSlot:a,hideAllSlots:function(t){return c(t,n())},showSlot:s}}}function TO(t,e){il(t,e,"overflow").each((function(n){nO(t,e,(function(t){var e=R(t,(function(t){return ku(t)}));f_.setGroups(n,e)})),il(t,e,"overflow-button").each((function(t){B_.hasGrown(n)&&Fg.on(t)})),B_.refresh(n)}))}var EO,DO,AO,BO="data-value",MO=function(t,e,n,o){return R(n,(function(n){return Pk(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===o,onAction:function(){wf.setValue(t,n.value),hr(t,iy,{name:e}),Ag.focus(t)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:function(){return MO(t,e,n.items,o)}}}))},FO=function(t,e){return Z(t,(function(t){return Pk(t)?st(t.value===e,t):FO(t.items,e)}))},IO=pl({name:"HtmlSelect",configFields:[lo("options"),Gs("selectBehaviours",[Ag,wf]),_o("selectClasses",[]),_o("selectAttributes",{}),yo("data")],factory:function(t,e){var n=R(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return ar("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:qs(t.selectBehaviours,[Ag.config({}),wf.config({store:O({mode:"manual",getValue:function(t){return Kr(t.element)},setValue:function(e,n){L(t.options,(function(t){return t.value===n})).isSome()&&Jr(e.element,n)}},o)})])}}}),RO=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return $i([Sr(t.event,n),Zi((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[Sr(t,(function(){return e.cancel()}))]})).getOr([])))}}),NO=Object.freeze({__proto__:null,throttle:Hk,init:function(t){return t.stream.streams.state(t)}}),PO=pa({fields:[fo("stream",co("mode",{throttle:[lo("delay"),_o("stopEvent",!0),Ku("streams",{setup:function(t,e){var n=t.stream,o=cp(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:Hk})]})),_o("event","input"),yo("cancelEvent"),qu("onStream")],name:"streaming",active:RO,state:NO}),VO=function(t){zk(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},HO=a("alloy.typeahead.itemexecute"),LO=a([yo("lazySink"),lo("fetch"),_o("minChars",5),_o("responseTime",1e3),Gu("onOpen"),_o("getHotspot",vt.some),_o("getAnchorOverrides",a({})),_o("layouts",vt.none()),_o("eventOrder",{}),Io("model",{},[_o("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),_o("selectsOver",!0),_o("populateFromBrowse",!0)]),Gu("onSetValue"),Xu("onExecute"),Gu("onItemExecute"),_o("inputClasses",[]),_o("inputAttributes",{}),_o("inputStyles",{}),_o("matchWidth",!0),_o("useMinWidth",!1),_o("dismissOnBlur",!0),ju(["openClass"]),yo("initialData"),Gs("typeaheadBehaviours",[Ag,wf,PO,Og,Fg,Py]),ur("previewing",(function(){return Ro(!0)}))].concat(gy()).concat(Xy())),zO=a([jf({schema:[Uu()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(o){(function(t,e,n){if(t.selectsOver){var o=wf.getValue(e),r=t.getDisplayText(o),i=wf.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?vt.some((function(){var t;Lk(0,e,n),t=r.length,zk(e,(function(e,n){return e.setSelectionRange(t,n.length)}))})):vt.none()}return vt.none()})(t.model,o,n).fold((function(){return cd.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&Lk(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map((function(t){return hr(t,HO(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&Lk(t.model,e,n)}))}}}})]),UO=hl({name:"Typeahead",configFields:LO(),partFields:zO(),factory:function(t,e,n,o){function r(e,n,r){t.previewing.set(!1);var a=Py.getCoupled(e,"sandbox");lf.isOpen(a)?td.getCurrent(a).each((function(t){cd.getHighlighted(t).fold((function(){r(t)}),(function(){yr(a,t.element,"keydown",n)}))})):zy(t,u(e),e,a,o,(function(t){td.getCurrent(t).each(r)}),Cy.HighlightFirst).get(i)}function u(t){return function(e){return e.map((function(e){var n=j(rt(e.menus),(function(t){return P(t.items,(function(t){return"item"===t.type}))}));return wf.getState(t).update(R(n,(function(t){return t.data}))),e}))}}var a=Wb(t),c=[Ag.config({}),wf.config({onSetValue:t.onSetValue,store:O({mode:"dataset",getDataKey:function(t){return Kr(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){Jr(e.element,t.model.getDisplayText(n))}},t.initialData.map((function(t){return ar("initialValue",t)})).getOr({}))}),PO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,n){var r,a=Py.getCoupled(e,"sandbox");Ag.isFocused(e)&&Kr(e.element).length>=t.minChars&&(r=td.getCurrent(a).bind((function(t){return cd.getHighlighted(t).map(wf.getValue)})),t.previewing.set(!0),zy(t,u(e),e,a,o,(function(e){td.getCurrent(a).each((function(e){r.fold((function(){t.model.selectsOver&&cd.highlightFirst(e)}),(function(t){cd.highlightBy(e,(function(e){return wf.getValue(e).value===t.value})),cd.getHighlighted(e).orThunk((function(){return cd.highlightFirst(e),vt.none()}))}))}))}),Cy.HighlightFirst).get(i))},cancelEvent:Ii()}),Og.config({mode:"special",onDown:function(t,e){return r(t,e,cd.highlightFirst),vt.some(!0)},onEscape:function(t){var e=Py.getCoupled(t,"sandbox");return lf.isOpen(e)?(lf.close(e),vt.some(!0)):vt.none()},onUp:function(t,e){return r(t,e,cd.highlightLast),vt.some(!0)},onEnter:function(e){var n=Py.getCoupled(e,"sandbox"),o=lf.isOpen(n);if(o&&!t.previewing.get())return td.getCurrent(n).bind((function(t){return cd.getHighlighted(t)})).map((function(t){return hr(e,HO(),{item:t}),!0}));var r=wf.getValue(e);return pr(e,Ii()),t.onExecute(n,e,r),o&&lf.close(n),vt.some(!0)}}),Fg.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Py.config({others:{sandbox:function(e){return Wy(t,e,{onOpen:function(){return Fg.on(e)},onClose:function(){return Fg.off(e)}})}}}),im("typeaheadevents",[eu((function(e){Uy(t,u(e),e,o,i,Cy.HighlightFirst).get(i)})),Sr(HO(),(function(e,n){var o=Py.getCoupled(e,"sandbox");Lk(t.model,e,n.event.item),pr(e,Ii()),t.onItemExecute(e,o,n.event.item,wf.getValue(e)),lf.close(o),VO(e)}))].concat(t.dismissOnBlur?[Sr(_i(),(function(t){var e=Py.getCoupled(t,"sandbox");wa(e.element).isNone()&&lf.close(e)}))]:[]))];return{uid:t.uid,dom:Gb(Go(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:O(O({},a),qs(t.typeaheadBehaviours,c)),eventOrder:t.eventOrder}}}),jO=function(t){return O(O({},t),{toCached:function(){return jO(t.toCached())},bindFuture:function(e){return jO(t.bind((function(t){return t.fold((function(t){return By(Nn.error(t))}),(function(t){return e(t)}))})))},bindResult:function(e){return jO(t.map((function(t){return t.bind(e)})))},mapResult:function(e){return jO(t.map((function(t){return t.map(e)})))},mapError:function(e){return jO(t.map((function(t){return t.mapError(e)})))},foldResult:function(e,n){return t.map((function(t){return t.fold(e,n)}))},withTimeout:function(e,n){return jO(Ay((function(o){var r=!1,i=setTimeout((function(){r=!0,o(Nn.error(n()))}),e);t.get((function(t){r||(clearTimeout(i),o(t))}))})))}})},WO=function(t){return jO(Ay(t))},GO={type:"separator"},XO=Mr("aria-invalid"),qO={bar:Xk((function(t,e){return n=e.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:R(t.items,n.interpreter)};var n})),collection:Xk((function(t,e){return r=t,i=e.shared.providers,s=r.label.map((function(t){return jb(t,i)})),l=n((function(t,e,n,o){e.stop(),i.isDisabled()||hr(t,cy,{name:r.name,value:o})})),f=[Sr(di(),n((function(t,e,n){ba(n)}))),Sr(yi(),l),Sr(Bi(),l),Sr(mi(),n((function(t,e,n){Du(t.element,"."+xh).each((function(t){Gr(t,xh)})),Wr(n,xh)}))),Sr(gi(),n((function(t){Du(t.element,"."+xh).each((function(t){Gr(t,xh)}))}))),eu(n((function(t,e,n,o){hr(t,cy,{name:r.name,value:o})})))],Ub(s,Zb.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==r.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:c},behaviours:Ja([ud.config({disabled:i.isDisabled,onDisabled:function(t){o(t,(function(t){Wr(t,"tox-collection__item--state-disabled"),oe(t,"aria-disabled",!0)}))},onEnabled:function(t){o(t,(function(t){Gr(t,"tox-collection__item--state-disabled"),ce(t,"aria-disabled")}))}}),rv(),Tg.config({}),wf.config({store:{mode:"memory",initialValue:[]},onSetValue:function(t,e){var n=t,o=R(e,(function(t){var e=op.translate(t.text),n=1===r.columns?'<div class="tox-collection__item-label">'+e+"</div>":"",o='<div class="tox-collection__item-icon">'+t.icon+"</div>",u={_:" "," - ":" ","-":" "},a=e.replace(/\_| \- |\-/g,(function(t){return u[t]}));return'<div class="tox-collection__item'+(i.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+ny.encodeAllRaw(t.value)+'" title="'+a+'" aria-label="'+a+'">'+o+n+"</div>"})),u=R("auto"!==r.columns&&1<r.columns?I(o,r.columns):[o],(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}));Ar(n.element,u.join("")),"auto"===r.columns&&$p(t,5,"tox-collection__item").each((function(e){var n=e.numRows,o=e.numColumns;Og.setGridSize(t,n,o)})),pr(t,my)}}),ey.config({}),Og.config(1===(a=r.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===a?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+gh}}),im("collection-events",f)]),eventOrder:((u={})[Di()]=["disabling","alloy.base.behaviour","collection-events"],u)}),["tox-form__group--collection"],[]);function n(t){return function(e,n){Au(n.event.target,"[data-collection-item-value]").each((function(o){t(e,n,o,ie(o,"data-collection-item-value"))}))}}function o(t,e){return R(ss(t.element,".tox-collection__item"),e)}var r,i,u,a,s,l,f})),alertbanner:Xk((function(t,e){return o=e.shared.providers,Jb.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+(n=t).level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[np.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Rm(n.icon,o.icons),attributes:{title:o.translate(n.iconTooltip)}},action:function(t){hr(t,cy,{name:"alert-banner",value:n.url})},buttonBehaviours:Ja([Nm()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}}]});var n,o})),input:Xk((function(t,e){return o=e.shared.providers,Vk({name:(n=t).name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:n.disabled,classname:"tox-textfield",validation:vt.none(),maximized:n.maximized},o);var n,o})),textarea:Xk((function(t,e){return o=e.shared.providers,Vk({name:(n=t).name,multiline:!0,label:n.label,inputMode:vt.none(),placeholder:n.placeholder,flex:!0,disabled:n.disabled,classname:"tox-textarea",validation:vt.none(),maximized:n.maximized},o);var n,o})),label:Xk((function(t,e){return r={dom:{tag:"label",innerHtml:(o=e.shared).providers.translate((n=t).label),classes:["tox-label"]}},i=R(n.items,o.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[r].concat(i),behaviours:Ja([Uw(),Tg.config({}),jw(vt.none()),Og.config({mode:"acyclic"})])};var n,o,r,i})),iframe:(EO=function(t,e){return n=t,o=e.shared.providers,u=ZS&&n.sandboxed,a=O(O({},n.label.map((function(t){return{title:t}})).getOr({})),u?{sandbox:"allow-scripts allow-same-origin"}:{}),r=u,i=Ro(""),c={getValue:function(t){return i.get()},setValue:function(t,e){var n;r?oe(t.element,"srcdoc",e):(oe(t.element,"src","javascript:''"),(n=t.element.dom.contentWindow.document).open(),n.write(e),n.close()),i.set(e)}},Ub(n.label.map((function(t){return jb(t,o)})),Zb.parts.field({factory:{sketch:function(t){return Jx({uid:t.uid,dom:{tag:"iframe",attributes:a},behaviours:Ja([ey.config({}),Ag.config({}),KS(vt.none(),c.getValue,c.setValue)])})}}}),["tox-form__group--stretched"],[]);var n,o,r,i,u,a,c},function(t,e,n){var o=Go(e,{source:"dynamic"});return Xk(EO)(t,o,n)}),button:Xk((function(t,e){return n=t,o=e.shared.providers,r=Fw(n.name,"custom"),Ub(vt.none(),Zb.parts.field(O({factory:np},Bw(n,vt.some(r),o,[JS(""),Uw()]))),[],[]);var n,o,r})),checkbox:Xk((function(t,e){return r=t,i=e.shared.providers,u=wf.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),a=Zb.parts.field({factory:{sketch:c},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ja([Uw(),ud.config({disabled:function(){return r.disabled||i.isDisabled()}}),ey.config({}),Ag.config({}),u,Og.config({mode:"special",onEnter:n,onSpace:n,stopSpaceKeyup:!0}),im("checkbox-events",[Sr(bi(),(function(t,e){hr(t,iy,{name:r.name})}))])])}),s=Zb.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:i.translate(r.label)},behaviours:Ja([Qw.config({})])}),l=Bm({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[o("checked"),o("unchecked")]}),Zb.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,l.asSpec(),s],fieldBehaviours:Ja([ud.config({disabled:function(){return r.disabled||i.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Zb.getField(t).each(ud.disable)},onEnabled:function(t){Zb.getField(t).each(ud.enable)}}),rv()])});function n(t){return t.element.dom.click(),vt.some(!0)}function o(t){return Vm("checked"===t?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t]},i.icons)}var r,i,u,a,s,l})),colorinput:Xk((function(t,e){return o=t,r=e.shared,u=e.colorinput,s=Zb.parts.field({factory:py,inputClasses:["tox-textfield"],onSetValue:function(t){return Ry.run(t).get(i)},inputBehaviours:Ja([ud.config({disabled:r.providers.isDisabled}),rv(),ey.config({}),Ry.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return qt(t.element)},notify:{onValid:function(t){var e=wf.getValue(t);hr(t,Zw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=wf.getValue(t);if(0===e.length)return By(Nn.value(!0));var n=Mt.fromTag("span");fe(n,"background-color",e);var o=pe(n,"background-color").fold((function(){return Nn.error("blah")}),(function(t){return Nn.value(e)}));return By(o)}}})]),selectOnFocus:!1}),l=o.label.map((function(t){return jb(t,r.providers)})),f=Bm((a={dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[Ua,za,Xa]},onLtr:function(){return[za,Ua,Xa]}},components:[],fetch:lb(u.getColors(),u.hasCustomColors()),columns:u.getColorCols(),presets:"color",onItemAction:function(t,e){f.getOpt(t).each((function(t){"custom"===e?u.colorPicker((function(e){e.fold((function(){return pr(t,eS)}),(function(e){n(t,e),ib(e)}))}),"#ffffff"):n(t,"remove"===e?"":e)}))}},$w.sketch({dom:a.dom,components:a.components,toggleClass:"mce-active",dropdownBehaviours:Ja([Lv((c=r).providers.isDisabled),rv(),Qw.config({}),ey.config({})]),layouts:a.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:c.getSink,fetch:function(t){return Ay((function(t){return a.fetch(t)})).map((function(e){return vt.from(Ib(Go(gb(Mr("menu-value"),e,(function(e){a.onItemAction(t,e)}),a.columns,a.presets,dh.CLOSE_ON_EXECUTE,S,c.providers),{movement:pb(a.columns,a.presets)})))}))},parts:{menu:jp(0,0,a.presets)}}))),Zb.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:l.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[s,f.asSpec()]}]),fieldBehaviours:Ja([im("form-field-events",[Sr(Zw,(function(t,e){f.getOpt(t).each((function(t){fe(t.element,"background-color",e.event.color)})),hr(t,iy,{name:o.name})})),Sr(tS,(function(t,e){Zb.getField(t).each((function(n){wf.setValue(n,e.event.value),td.getCurrent(t).each(Ag.focus)}))})),Sr(eS,(function(t,e){Zb.getField(t).each((function(e){td.getCurrent(t).each(Ag.focus)}))}))])])});function n(t,e){hr(t,tS,{value:e})}var o,r,u,a,c,s,l,f})),colorpicker:Xk((function(t){var e=Bm(Xx(qx,(function(t){return"tox-"+t})).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(t){hr(t,cy,{name:"hex-valid",value:!0})},onInvalidHex:function(t){hr(t,cy,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[e.asSpec()],behaviours:Ja([wf.config({store:{mode:"manual",getValue:function(t){var n=e.get(t);return td.getCurrent(n).bind((function(t){return wf.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,n){var o=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(n),r=e.get(t);td.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){wf.setValue(t,{hex:vt.from(o[1]).getOr("")}),PS.getField(t,"hex").each((function(t){pr(t,vi())}))}))}}}),Uw()])}})),dropzone:Xk((function(t,e){return function(t,e){function n(t,e){e.stop()}function o(t){return function(e,n){St(t,(function(t){t(e,n)}))}}function r(t,e){ud.isDisabled(t)||u(t,e.event.raw.dataTransfer.files)}function i(t,e){u(t,e.event.raw.target.files)}function u(n,o){var r,i;wf.setValue(n,(r=o,i=XS.explode(e.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),P(kt(r),(function(t){return M(i,(function(e){return At(t.name.toLowerCase(),"."+e.toLowerCase())}))})))),hr(n,iy,{name:t.name})}var a=Bm({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ja([im("input-file-events",[Tr(yi()),Tr(Bi())])])});return Ub(t.label.map((function(t){return jb(t,e)})),Zb.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ja([JS([]),Uw(),ud.config({}),Fg.config({toggleClass:"dragenter",toggleOnExecute:!1}),im("dropzone-events",[Sr("dragenter",o([n,Fg.toggle])),Sr("dragleave",o([n,Fg.toggle])),Sr("dragover",n),Sr("drop",o([n,r])),Sr(bi(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},np.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[a.asSpec()],action:function(t){a.get(t).element.dom.click()},buttonBehaviours:Ja([ey.config({}),Lv(e.isDisabled),rv()])})]}]}}}}),["tox-form__group--stretched"],[])}(t,e.shared.providers)})),grid:Xk((function(t,e){return n=e.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:R(t.items,n.interpreter)};var n})),listbox:Xk((function(t,e){return n=t,r=(o=e).shared.providers,u=$(n.items).filter(Pk),c=n.label.map((function(t){return jb(t,r)})),s={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Zb.parts.field({dom:{},factory:{sketch:function(t){return kw({uid:t.uid,text:u.map((function(t){return t.text})),icon:vt.none(),tooltip:n.label,role:vt.none(),fetch:function(t,e){e(Ow(MO(t,n.name,n.items,wf.getValue(t)),dh.CLOSE_ON_EXECUTE,o,!1))},onSetup:a(i),getApi:a({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ey.config({}),wf.config({store:{mode:"manual",initialValue:u.map((function(t){return t.value})).getOr(""),getValue:function(t){return ie(t.element,BO)},setValue:function(t,e){FO(n.items,e).each((function(e){oe(t.element,BO,e.value),hr(t,vk,{text:e.text})}))}}})]},"tox-listbox",o.shared)}}})]},Zb.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:U([c.toArray(),[s]]),fieldBehaviours:Ja([ud.config({disabled:a(n.disabled),onDisabled:function(t){Zb.getField(t).each(ud.disable)},onEnabled:function(t){Zb.getField(t).each(ud.enable)}})])});var n,o,r,u,c,s})),selectbox:Xk((function(t,e){return n=t,o=e.shared.providers,r=R(n.items,(function(t){return{text:o.translate(t.text),value:t.value}})),i=n.label.map((function(t){return jb(t,o)})),u={dom:{tag:"div",classes:["tox-selectfield"]},components:U([[Zb.parts.field({dom:{},selectAttributes:{size:n.size},options:r,factory:IO,selectBehaviours:Ja([ud.config({disabled:function(){return n.disabled||o.isDisabled()}}),ey.config({}),im("selectbox-change",[Sr(bi(),(function(t,e){hr(t,iy,{name:n.name})}))])])})],(1<n.size?vt.none():vt.some(Vm("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},o.icons))).toArray()])},Zb.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:U([i.toArray(),[u]]),fieldBehaviours:Ja([ud.config({disabled:function(){return n.disabled||o.isDisabled()},onDisabled:function(t){Zb.getField(t).each(ud.disable)},onEnabled:function(t){Zb.getField(t).each(ud.enable)}}),rv()])});var n,o,r,i,u})),sizeinput:Xk((function(t,e){return Hw(t,e.shared.providers)})),urlinput:Xk((function(t,e){return function(t,e,n){function o(e){var o=wf.getValue(e);n.addToHistory(o.value,t.filetype)}var r,u,a,c,s=e.shared.providers,l=Zb.parts.field({factory:UO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":XO,type:"url"},minChars:0,responseTime:0,fetch:function(o){var r,i,u,a,c=Ow((r=t.filetype,i=n,u=wf.getValue(o),a=void 0!==u.meta.text?u.meta.text:u.value,i.getLinkInformation().fold((function(){return[]}),(function(t){var e=Gk(a,R(i.getHistory(r),(function(t){return jk(t,t)})));return"file"===r?H([e,Gk(a,Wk("header",t.targets)),Gk(a,U([vt.from(t.anchorTop).map((function(t){return jk("<top>",t)})).toArray(),Wk("anchor",t.targets),vt.from(t.anchorBottom).map((function(t){return jk("<bottom>",t)})).toArray()]))],(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(GO,e)}),[]):e}))),dh.BUBBLE_TO_SANDBOX,e,!1);return By(c)},getHotspot:function(t){return h.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Ry)&&Ry.run(t).get(i)},typeaheadBehaviours:Ja(U([n.getValidationHandler().map((function(e){return Ry.config({getRoot:function(t){return qt(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){d.getOpt(t).each((function(t){oe(t.element,"title",s.translate(e))}))}},validator:{validate:function(n){var o=wf.getValue(n);return WO((function(n){e({type:t.filetype,url:o.value},(function(t){var e,o;"invalid"===t.status?(e=Nn.error(t.message),n(e)):(o=Nn.value(t.message),n(o))}))}))},validateOnLoad:!1}})})).toArray(),[ud.config({disabled:function(){return t.disabled||s.isDisabled()}}),ey.config({}),im("urlinput-events",U(["file"===t.filetype?[Sr(vi(),(function(e){hr(e,iy,{name:t.name})}))]:[],[Sr(bi(),(function(e){hr(e,iy,{name:t.name}),o(e)})),Sr(Ti(),(function(e){hr(e,iy,{name:t.name}),o(e)}))]]))]])),eventOrder:((r={})[vi()]=["streaming","urlinput-events","invalidating"],r),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:jp(0,0,"normal")},onExecute:function(t,e,n){hr(e,sy,{})},onItemExecute:function(e,n,r,i){o(e),hr(e,iy,{name:t.name})}}),f=t.label.map((function(t){return jb(t,s)})),d=Bm((u="invalid",a=vt.some(XO),Vm("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+u],attributes:O({title:s.translate(c=void 0===c?u:c),"aria-live":"polite"},a.fold((function(){return{}}),(function(t){return{id:t}})))},s.icons))),m=Bm({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),g=n.getUrlPicker(t.filetype),p=Mr("browser.url.event"),h=Bm({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,m.asSpec()],behaviours:Ja([ud.config({disabled:function(){return t.disabled||s.isDisabled()}})])}),v=Bm(Mw({name:t.name,icon:vt.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return pr(t,p)}),s,[],["tox-browse-url"]));return Zb.sketch({dom:ry([]),components:f.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:U([[h.asSpec()],g.map((function(){return v.asSpec()})).toArray()])}]),fieldBehaviours:Ja([ud.config({disabled:function(){return t.disabled||s.isDisabled()},onDisabled:function(t){Zb.getField(t).each(ud.disable),v.getOpt(t).each(ud.disable)},onEnabled:function(t){Zb.getField(t).each(ud.enable),v.getOpt(t).each(ud.enable)}}),rv(),im("url-input-events",[Sr(p,(function(e){td.getCurrent(e).each((function(n){var o=wf.getValue(n),r=O({fieldname:t.name},o);g.each((function(o){o(r).get((function(o){wf.setValue(n,o),hr(e,iy,{name:t.name})}))}))}))}))])])})}(t,e,e.urlinput)})),customeditor:Xk((function(t){var e=cc(),n=Bm({dom:{tag:t.tag}}),o=cc();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ja([im("custom-editor-events",[Qi((function(r){n.getOpt(r).each((function(n){(Tt(t,"init")?t.init(n.element.dom):GS.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element.dom,t.settings)}))).then((function(t){o.on((function(e){t.setValue(e)})),o.clear(),e.set(t)}))}))}))]),wf.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){o.set(n)}),(function(t){return t.setValue(n)}))}}}),Uw()]),components:[n.asSpec()]}})),htmlpanel:Xk((function(t){return"presentation"===t.presets?Jb.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Jb.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Ja([ey.config({}),Ag.config({})])})})),imagetools:Xk((function(t,e){return Nk(t,e.shared.providers)})),table:Xk((function(t,e){return function(t,e){function n(t){return{dom:{tag:"td",innerHtml:e.translate(t)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:R(t.header,(function(t){return{dom:{tag:"th",innerHtml:e.translate(t)}}}))}]},{dom:{tag:"tbody"},components:R(t.cells,(function(t){return{dom:{tag:"tr"},components:R(t,n)}}))}],behaviours:Ja([ey.config({}),Ag.config({})])}}(t,e.shared.providers)})),panel:Xk((function(t,e){return{dom:{tag:"div",classes:t.classes},components:R(t.items,e.shared.interpreter)}}))},YO={field:function(t,e){return e}},KO=function(t,e,n){return it(qO,e.type).fold((function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e}),(function(o){return o(t,e,n)}))},JO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},$O=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],QO=function(t){return H(t,(function(t,e){if(Tt(e,"items")){var n=QO(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(Tt(e,"inline")||Tt(e,"block")||Tt(e,"selector")){var o="custom-"+(l(e.name)?e.name:e.title.toLowerCase());return{customFormats:t.customFormats.concat([{name:o,format:e}]),formats:t.formats.concat([{title:e.title,format:o,icon:e.icon}])}}return O(O({},t),{formats:t.formats.concat(e)})}),{customFormats:[],formats:[]})},ZO=XS.trim,t_=Qk("true"),e_=Qk("false"),n_=function(t){var e=R(ss(Mt.fromDom(t),"h1,h2,h3,h4,h5,h6,a:not([href])"),(function(t){return t.dom}));return P(R(P(e,oC),rC).concat(R(P(e,eC),iC)),uC)},o_="tinymce-url-history",r_=Kf,i_=qf,u_=a([_o("shell",!1),lo("makeItem"),_o("setupItem",i),Sf("listBehaviours",[Tg])]),a_=a([Wf({name:"items",overrides:function(){return{behaviours:Ja([Tg.config({})])}}})]),c_=hl({name:a("CustomList")(),configFields:u_(),partFields:a_(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[Tg.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:qs(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){var o;o=e,(t.shell?vt.some(o):il(o,t,"items")).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=Tg.contents(o),i=n.length,u=i-r.length,a=0<u?F(u,(function(){return t.makeItem()})):[],c=r.slice(i);St(c,(function(t){return Tg.remove(o,t)})),St(a,(function(t){return Tg.append(o,t)}));var s=Tg.contents(o);St(s,(function(o,r){t.setupItem(e,o,n[r],r)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),s_=a([lo("dom"),_o("shell",!0),Gs("toolbarBehaviours",[Tg])]),l_=a([Wf({name:"groups",overrides:function(){return{behaviours:Ja([Tg.config({})])}}})]),f_=hl({name:"Toolbar",configFields:s_(),partFields:l_(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[Tg.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:qs(t.toolbarBehaviours,r.behaviours),apis:{setGroups:function(e,n){var o;o=e,(t.shell?vt.some(o):il(o,t,"groups")).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){Tg.set(t,n)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),d_=a([]),m_=Object.freeze({__proto__:null,setup:i,isDocked:S,getBehaviours:d_}),g_=No([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),p_=function(t,e,n){var o,r,i,u;t.getSystem().isConnected()&&(i=n,u=(r=e).lazyViewport(o=t),i.isDocked()&&TC(o,r,i,u),function(t,e,n){var o,r,i,u=t.element;return at(pe(u,"position"),"fixed")?(r=e,kC(o=u,i=n).filter((function(t){return SC(i.getModes(),t,r)})).bind((function(t){return CC(o,t,i)}))):function(t,e,n){var o,r,i=Mn(t);if(SC(n.getModes(),i,e))return vt.none();o=t,r=i,n.setInitialPos({style:function(){var t={},e=o.dom;if(mt(e))for(var n=0;n<e.style.length;n++){var r=e.style.item(n);t[r]=e.style[r]}return t}(),position:ge(o,"position")||"static",bounds:r});var u=Fn(),a=i.x-u.x,c=e.y-u.y,s=u.bottom-e.bottom,l=i.y<=e.y;return vt.some(g_.fixed(ka("fixed",vt.some(a),l?vt.some(c):vt.none(),vt.none(),l?vt.none():vt.some(s))))}(u,e,n)}(o,u,i).each((function(t){t.fold((function(){return OC(o,r,i)}),(function(t){return _C(o,r,i,t)}),(function(t){TC(o,r,i,u,!0),_C(o,r,i,t)}))})))},h_=Object.freeze({__proto__:null,refresh:p_,reset:EC,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),v_=Object.freeze({__proto__:null,events:function(t,e){return $i([Er(wi(),(function(n,o){t.contextual.each((function(t){Xr(n.element,t.transitionClass)&&(Yr(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n)),o.stop()}))})),Sr(Vi(),(function(n,o){p_(n,t,e)})),Sr(Hi(),(function(n,o){EC(n,t,e)}))])}}),b_=pa({fields:[Oo("contextual",[mo("fadeInClass"),mo("fadeOutClass"),mo("transitionClass"),po("lazyContext"),Gu("onShow"),Gu("onShown"),Gu("onHide"),Gu("onHidden")]),Mo("lazyViewport",Fn),Fo("modes",["top","bottom"],Zo),Gu("onDocked"),Gu("onUndocked")],name:"docking",active:v_,apis:h_,state:Object.freeze({__proto__:null,init:function(t){var e=Ro(!1),n=Ro(!0),o=cc(),r=Ro(t.modes);return hu({isDocked:e.get,setDocked:e.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}})}),y_=a(Mr("toolbar-height-change")),x_={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},w_="tox-tinymce--toolbar-sticky-on",S_="tox-tinymce--toolbar-sticky-off",k_=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){n().each(b_.reset)})),t.on("ResizeWindow ResizeEditor",(function(){n().each(AC)})),t.on("SkinLoaded",(function(){n().each((function(t){b_.isDocked(t)?b_.reset(t):b_.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){n().each(b_.reset)}))),t.on("AfterScrollIntoView",(function(t){n().each((function(e){b_.refresh(e);var n,o,r,i,u,a,c,s,l,f,d,m,g,p,h,v,b=e.element;Dd(b)&&(n=t,i=(r=jt(o=b)).dom.defaultView.innerHeight,u=Ie(r),c=He(a=Mt.fromDom(n.elm)),s=xe(a),f=(l=c.y)+s,d=ke(o),m=xe(o),p=(g=d.top)+m,h=Math.abs(g-u.top)<2,v=Math.abs(p-(u.top+i))<2,h&&l<p?Re(u.left,l-m,r):v&&g<f&&Re(u.left,l-i+s+m,r))}))})),t.on("PostRender",(function(){MC(t,!1)}))},isDocked:function(t){return t().map(b_.isDocked).getOr(!1)},getBehaviours:FC}),C_=Ko([mo("type"),fo("items",to([Jo([mo("name"),bo("items",Zo)]),Zo]))].concat(Ep)),O_=[So("text"),So("tooltip"),So("icon"),po("fetch"),Mo("onSetup",(function(){return i}))],__=Ko(T([mo("type")],O_,!0)),T_=Ko([mo("type"),So("tooltip"),So("icon"),So("text"),ko("select"),po("fetch"),Mo("onSetup",(function(){return i})),Ao("presets","normal",["normal","color","listpreview"]),_o("columns",1),po("onAction"),po("onItemAction")]),E_=pl({factory:function(t,e){var n={focus:Og.focusIn,setMenus:function(t,n){var o=R(n,(function(t){return Tw(IC({type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}}).mapError((function(t){return rr(t)})).getOrDie(),"tox-mbtn",e.backstage,vt.some("menuitem"))}));Tg.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:Ja([Tg.config({}),im("menubar-events",[Qi((function(e){t.onSetup(e)})),Sr(di(),(function(t,e){Du(t.element,".tox-mbtn--active").each((function(n){Au(e.event.target,".tox-mbtn").each((function(e){zt(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){$w.expand(t),$w.close(n),Ag.focus(t)}))}))}))}))})),Sr(Wi(),(function(t,e){e.event.prevFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(n){e.event.newFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(t){$w.isOpen(n)&&($w.expand(t),$w.close(n))}))}))}))]),Og.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),vt.some(!0)}}),ey.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[lo("dom"),lo("uid"),lo("onEscape"),lo("backstage"),_o("onSetup",i)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),D_=Object.freeze({__proto__:null,refresh:function(t,e,n){var o;n.isExpanded()&&(ve(t.element,NC(e)),o=PC(e,t.element),fe(t.element,NC(e),o))},grow:function(t,e,n){n.isExpanded()||jC(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&UC(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&zC(t,e,n)},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:WC,isShrinking:GC,isTransitioning:function(t,e,n){return WC(t,e)||GC(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?UC:jC)(t,e,n)},disableTransitions:VC}),A_=Object.freeze({__proto__:null,exhibit:function(t,e,n){return Hr(e.expanded?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:ar(e.dimension.property,"0px")})},events:function(t,e){return $i([Er(wi(),(function(n,o){o.event.raw.propertyName===t.dimension.property&&(VC(n,t),e.isExpanded()&&ve(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),B_=pa({fields:[lo("closedClass"),lo("openClass"),lo("shrinkingClass"),lo("growingClass"),yo("getAnimationRoot"),Gu("onShrunk"),Gu("onStartShrink"),Gu("onGrown"),Gu("onStartGrow"),_o("expanded",!1),fo("dimension",co("property",{width:[Ku("property","width"),Ku("getDimension",(function(t){return Ce(t)+"px"}))],height:[Ku("property","height"),Ku("getDimension",(function(t){return xe(t)+"px"}))]}))],name:"sliding",active:A_,apis:D_,state:Object.freeze({__proto__:null,init:function(t){var e=Ro(t.expanded);return hu({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:y(e.set,!1),setExpanded:y(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),M_="container",F_=[Gs("slotBehaviours",[])],I_=et({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},Pr),R_=O(O({},I_),{sketch:function(t){var e,n={slot:function(t,n){return e.push(t),tl(M_,XC(t),n)},record:a(e=[])},o=t(n),r=R(n.record(),(function(t){return Uf({name:t,pname:XC(t)})}));return gl(M_,F_,r,_O,o)}}),N_=Ko([So("icon"),So("tooltip"),Mo("onShow",i),Mo("onHide",i),Mo("onSetup",(function(){return i}))]),P_=Mr("FixSizeEvent"),V_=Mr("AutoSizeEvent"),H_=Object.freeze({__proto__:null,block:function(t,e,n,o){oe(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=Ja([Og.config({mode:"special",onTab:function(){return vt.some(!0)},onShiftTab:function(){return vt.some(!0)}}),Ag.config({})]),u=o(r,i),a=r.getSystem().build(u);Tg.append(r,ku(a)),a.hasConfigured(Og)&&e.focus&&Og.focusIn(a),n.isBlocked()||e.onBlock(t),n.blockWith((function(){return Tg.remove(r,a)}))},unblock:function(t,e,n){ce(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),L_=pa({fields:[Mo("getRoot",vt.none),Bo("focus",!0),Gu("onBlock"),Gu("onUnblock")],name:"blocking",apis:H_,state:Object.freeze({__proto__:null,init:function(){var t=uc();return hu({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),z_=a([Gs("splitToolbarBehaviours",[Py]),ur("builtGroups",(function(){return Ro([])}))]),U_=a([ju(["overflowToggledClass"]),ko("getOverflowBounds"),lo("lazySink"),ur("overflowGroups",(function(){return Ro([])}))].concat(z_())),j_=a([Uf({factory:f_,schema:s_(),name:"primary"}),jf({schema:s_(),name:"overflow"}),jf({name:"overflow-button"}),jf({name:"overflow-group"})]),W_=a((function(t,e){var n=t,o=Math.floor(e);fe(n,"max-width",On.max(n,o,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")})),G_=a([ju(["toggledClass"]),lo("lazySink"),po("fetch"),ko("getBounds"),Oo("fireDismissalEventInstead",[_o("event",Ui())]),Ic()]),X_=a([jf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ja([Fg.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),jf({factory:f_,schema:s_(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:Ja([Og.config({mode:"cyclic",onEscape:function(e){return il(e,t,"button").each(Ag.focus),vt.none()}})])}}})]),q_=hl({name:"FloatingToolbarButton",factory:function(t,e,n,o){return O(O({},np.sketch(O(O({},o.button()),{action:function(t){oO(t,o)},buttonBehaviours:kf({dump:o.button().buttonBehaviours},[Py.config({others:{toolbarSandbox:function(e){return o=e,r=n,i=t,{dom:{tag:"div",attributes:{id:(u=Bu()).id}},behaviours:Ja([Og.config({mode:"special",onEscape:function(t){return lf.close(t),vt.some(!0)}}),lf.config({onOpen:function(t,e){i.fetch().get((function(t){iO(o,e,i,r.layouts,t),u.link(o.element),Og.focusIn(e)}))},onClose:function(){Fg.off(o),Ag.focus(o),u.unlink(o.element)},isPartOf:function(t,e,n){return Iu(e,n)||Iu(o,n)},getAttachPoint:function(){return i.lazySink(o).getOrDie()}}),tc.config({channels:O(O({},Vs(O({isExtraPart:S},i.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),Hs({doReposition:function(){lf.getState(Py.getCoupled(o,"toolbarSandbox")).each((function(t){rO(o,t,i,r.layouts)}))}}))})])};var o,r,i,u}}})])}))),{apis:{setGroups:function(e,o){lf.getState(Py.getCoupled(e,"toolbarSandbox")).each((function(r){iO(e,r,t,n.layouts,o)}))},reposition:function(e){lf.getState(Py.getCoupled(e,"toolbarSandbox")).each((function(o){rO(e,o,t,n.layouts)}))},toggle:function(t){oO(t,o)},getToolbar:function(t){return lf.getState(Py.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return lf.isOpen(Py.getCoupled(t,"toolbarSandbox"))}}})},configFields:G_(),partFields:X_(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),Y_=a([lo("items"),ju(["itemSelector"]),Gs("tgroupBehaviours",[Og])]),K_=a([Gf({name:"items",unit:"item"})]),J_=hl({name:"ToolbarGroup",configFields:Y_(),partFields:K_(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.tgroupBehaviours,[Og.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),$_=hl({name:"SplitFloatingToolbar",configFields:U_(),partFields:j_(),factory:function(t,e,n,o){var r=Bm(q_.sketch({fetch:function(){return Ay((function(e){e(uO(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[Ua,za]},onRtl:function(){return[za,Ua]},onBottomLtr:function(){return[Wa,ja]},onBottomRtl:function(){return[ja,Wa]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.splitToolbarBehaviours,[Py.config({others:{overflowGroup:function(){return J_.sketch(O(O({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(R(n,e.getSystem().build)),aO(e,r,t)},refresh:function(e){return aO(e,r,t)},toggle:function(t){r.getOpt(t).each((function(t){q_.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(q_.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){q_.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(q_.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),Q_=a([ju(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Gu("onOpened"),Gu("onClosed")].concat(z_())),Z_=a([Uf({factory:f_,schema:s_(),name:"primary"}),Uf({factory:f_,schema:s_(),name:"overflow",overrides:function(t){return{toolbarBehaviours:Ja([B_.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){il(e,t,"overflow-button").each((function(t){Fg.off(t),Ag.focus(t)})),t.onClosed(e)},onGrown:function(e){Og.focusIn(e),t.onOpened(e)},onStartGrow:function(e){il(e,t,"overflow-button").each(Fg.on)}}),Og.config({mode:"acyclic",onEscape:function(e){return il(e,t,"overflow-button").each(Ag.focus),vt.some(!0)}})])}}}),jf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:Ja([Fg.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),jf({name:"overflow-group"})]),tT=hl({name:"SplitSlidingToolbar",configFields:Q_(),partFields:Z_(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.splitToolbarBehaviours,[Py.config({others:{overflowGroup:function(t){return J_.sketch(O(O({},o["overflow-group"]()),{items:[np.sketch(O(O({},o["overflow-button"]()),{action:function(e){pr(t,r)}}))]}))}}}),im("toolbar-toggle-events",[Sr(r,(function(e){cO(e,t)}))])]),apis:{setGroups:function(e,n){var o=R(n,e.getSystem().build);t.builtGroups.set(o),TO(e,t)},refresh:function(e){return TO(e,t)},toggle:function(e){return cO(e,t)},isOpen:function(e){return il(e,t,"overflow").map(B_.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),eT=i_.optional({factory:E_,name:"menubar",schema:[lo("backstage")]}),nT=i_.optional({factory:{sketch:function(t){return c_.sketch({uid:t.uid,dom:t.dom,listBehaviours:Ja([Og.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return mO({type:t.type,uid:Mr("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),vt.some(!0)}})},setupItem:function(t,e,n,o){f_.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[lo("dom"),lo("onEscape")]}),oT=i_.optional({factory:{sketch:function(t){return(t.type===ch.sliding?function(t){var e=tT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=tT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=dO(t);return tT.sketch(O(O({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([y_()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([y_()],{type:"closed"})}}))}:t.type===ch.floating?function(t){var e=dO(t),n=$_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return $_.sketch(O(O({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=He(e),o=Gt(e),r=He(o),i=Math.max(o.dom.scrollHeight,r.height);return Bn(n.x+4,r.y,n.width-8,i)},parts:O(O({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:mO)({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),vt.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[lo("dom"),lo("onEscape"),lo("getSink")]}),rT=i_.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?FC:d_;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Ja(n(e,t.sharedBackstage))}}},name:"header",schema:[lo("dom")]}),iT=i_.optional({name:"socket",schema:[lo("dom")]}),uT=i_.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ja([ey.config({}),Ag.config({}),B_.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){td.getCurrent(t).each(R_.hideAllSlots),pr(t,V_)},onGrown:function(t){pr(t,V_)},onStartGrow:function(t){hr(t,P_,{width:pe(t.element,"width").getOr("")})},onStartShrink:function(t){hr(t,P_,{width:Ce(t.element)+"px"})}}),Tg.config({}),td.config({find:function(t){return $(Tg.contents(t))}})])}],behaviours:Ja([jS(0),im("sidebar-sliding-events",[Sr(P_,(function(t,e){fe(t.element,"width",e.event.width)})),Sr(V_,(function(t,e){ve(t.element,"width")}))])])}}},name:"sidebar",schema:[lo("dom")]}),aT=i_.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ja([Tg.config({}),L_.config({focus:!1}),td.config({find:function(t){return $(t.components())}})]),components:[]}}},name:"throbber",schema:[lo("dom")]}),cT=hl({name:"OuterContainer",factory:function(t,e,n){return{uid:t.uid,dom:t.dom,components:e,apis:{getSocket:function(e){return r_.getPart(e,t,"socket")},setSidebar:function(e,n){r_.getPart(e,t,"sidebar").each((function(t){return function(t,e){td.getCurrent(t).each((function(t){return Tg.set(t,[(n=e,R_.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(e=t,r=R(Ct(o=n),(function(t){var e=o[t],n=uo(io("sidebar",N_,e));return{name:t,getApi:qC,onSetup:n.onSetup,onShow:n.onShow,onHide:n.onHide}})),R(r,(function(t){var n=Ro(i);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Vh([uv(t,n),av(t,n),Sr(Gi(),(function(t,e){var n=e.event;L(r,(function(t){return t.name===n.name})).each((function(e){(n.visible?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))),slotBehaviours:Vh([Qi((function(t){return R_.hideAllSlots(t)}))])};var e,o,r})))]);var n}))}(t,n)}))},toggleSidebar:function(e,n){r_.getPart(e,t,"sidebar").each((function(t){var e=n;td.getCurrent(t).each((function(t){td.getCurrent(t).each((function(n){B_.hasGrown(t)?R_.isShowing(n,e)?B_.shrink(t):(R_.hideAllSlots(n),R_.showSlot(n,e)):(R_.hideAllSlots(n),R_.showSlot(n,e),B_.grow(t))}))}))}))},whichSidebar:function(e){return r_.getPart(e,t,"sidebar").bind(YC).getOrNull()},getHeader:function(e){return r_.getPart(e,t,"header")},getToolbar:function(e){return r_.getPart(e,t,"toolbar")},setToolbar:function(e,n){r_.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){r_.getPart(e,t,"multiple-toolbar").each((function(t){c_.setItems(t,n)}))},refreshToolbar:function(e){r_.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(e){r_.getPart(e,t,"toolbar").each((function(t){var e=t.getApis().toggle;null!=e?vt.some(function(e){return e(t)}(e)):vt.none()}))},isToolbarDrawerToggled:function(e){return r_.getPart(e,t,"toolbar").bind((function(t){return vt.from(t.getApis().isOpen).map((function(e){return e(t)}))})).getOr(!1)},getThrobber:function(e){return r_.getPart(e,t,"throbber")},focusToolbar:function(e){r_.getPart(e,t,"toolbar").orThunk((function(){return r_.getPart(e,t,"multiple-toolbar")})).each((function(t){Og.focusIn(t)}))},setMenubar:function(e,n){r_.getPart(e,t,"menubar").each((function(t){E_.setMenus(t,n)}))},focusMenubar:function(e){r_.getPart(e,t,"menubar").each((function(t){E_.focus(t)}))}},behaviours:t.behaviours}},configFields:[lo("dom"),lo("behaviours")],partFields:[rT,eT,oT,nT,iT,uT,aT],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=R(n,lO);t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=R(n,(function(t){return R(t,lO)}));t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),sT={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},lT=y(bO,!1),fT=y(bO,!0);function dT(t,e,n,o){var r;return{type:"basic",data:(r=t.getParam(e,n,"string"),R(o===DO.SemiColon?r.replace(/;$/,"").split(";"):r.split(" "),(function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}})))}}function mT(t){var e={type:"basic",data:jT};return{tooltip:"Align",text:vt.none(),icon:vt.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:vt.none,getPreviewFor:function(t){return vt.none},onAction:function(e){return function(){return L(jT,(function(t){return t.format===e.format})).each((function(e){return t.execCommand(e.command)}))}},updateText:function(e){var n=L(jT,(function(e){return t.formatter.match(e.format)})).fold(a("left"),(function(t){return t.title.toLowerCase()}));hr(e,bk,{icon:"align-"+n})},dataset:e,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}}function gT(t){return R(t.split(/\s*,\s*/),(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))}function pT(t){function e(){function e(t){return t?gT(t)[0]:""}var r=t.queryCommandValue("FontName"),i=o.data,u=r?r.toLowerCase():"";return{matchOpt:L(i,(function(t){var n=t.format;return n.toLowerCase()===u||e(n).toLowerCase()===e(u).toLowerCase()})).orThunk((function(){return st(0===(t=u).indexOf("-apple-system")&&(e=gT(t.toLowerCase()),W(WT,(function(t){return-1<e.indexOf(t.toLowerCase())}))),{title:n,format:u});var t,e})),font:r}}var n="System Font",o=dT(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",DO.SemiColon);return{tooltip:"Fonts",text:vt.some(n),icon:vt.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return vt.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold(a(r),(function(t){return t.title}));hr(t,vk,{text:i})},dataset:o,shouldHide:!1,isInvalid:S}}function hT(t){function e(){var e=vt.none(),n=o.data,r=t.queryCommandValue("FontSize");if(r)for(var i=function(t){var o,i,u,a,c=(i=t,/[0-9.]+px$/.test(o=r)?(u=72*parseInt(o,10)/96,a=Math.pow(10,i||0),Math.round(u*a)/a+"pt"):it(XT,o).getOr(o)),s=it(GT,c).getOr("");e=L(n,(function(t){return t.format===r||t.format===c||t.format===s}))},u=3;e.isNone()&&0<=u;u--)i(u);return{matchOpt:e,size:r}}var n=a(vt.none),o=dT(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",DO.Space);return{tooltip:"Font sizes",text:vt.some("12pt"),icon:vt.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.size,i=o.fold(a(r),(function(t){return t.title}));hr(t,vk,{text:i})},dataset:o,shouldHide:!1,isInvalid:S}}function vT(t,e){var n=e(),o=R(n,(function(t){return t.format}));return vt.from(t.formatter.closest(o)).bind((function(t){return L(n,(function(e){return e.format===t}))})).orThunk((function(){return st(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))}function bT(t){var e=dT(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",DO.SemiColon);return{tooltip:"Blocks",text:vt.some("Paragraph"),icon:vt.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:vt.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return vt.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:wO(t),updateText:function(n){var o=vT(t,(function(){return e.data})).fold(a("Paragraph"),(function(t){return t.title}));hr(n,vk,{text:o})},dataset:e,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}}function yT(t,e){return{tooltip:"Formats",text:vt.some("Paragraph"),icon:vt.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:vt.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?vt.some({tag:0<n.length&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):vt.none()}},onAction:wO(t),updateText:function(e){var n=function(t){var e=t.items;return void 0!==e&&0<e.length?j(e,n):[{title:t.title,format:t.format}]},o=j(Kk(t),n),r=vT(t,a(o)).fold(a("Paragraph"),(function(t){return t.title}));hr(e,vk,{text:r})},shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}}function xT(t){return{isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)}}}function wT(t){return{setActive:function(e){Fg.set(t,e)},isActive:function(){return Fg.isOn(t)},isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)}}}function ST(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})}function kT(t,e,n,o,r,i){var u;return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]),attributes:ST(n,i)},components:jv([t.map((function(t){return xw(t,i.icons)})),e.map((function(t){return Sw(t,"tox-tbtn",i)}))]),eventOrder:((u={})[ci()]=["focusing","alloy.base.behaviour","common-button-display-events"],u),buttonBehaviours:Ja([zv(i.isDisabled),rv(),im("common-button-display-events",[Sr(ci(),(function(t,e){e.event.prevent(),pr(t,ZT)}))])].concat(o.map((function(n){return KT.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return jv([t.icon.map((function(t){return xw(t,i.icons)})),t.text.map((function(t){return Sw(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}}function CT(t,e,n){var o,r=Ro(i),u=kT(t.icon,t.text,t.tooltip,vt.none(),vt.none(),n);return np.sketch({dom:u.dom,components:u.components,eventOrder:hk,buttonBehaviours:Ja([im("toolbar-button-events",[(o={onAction:t.onAction,getApi:e.getApi},eu((function(t,e){iv(o,t)((function(e){hr(t,pk,{buttonApi:e}),o.onAction(e)}))}))),uv(e,r),av(e,r)]),zv((function(){return t.disabled||n.isDisabled()})),rv()].concat(e.toolbarButtonBehaviours))})}function OT(t,e){return function(n,o,r){var i=t(n).mapError((function(t){return rr(t)})).getOrDie();return e(i,o,r)}}function _T(t,e,n,o){var i,u=e.outerContainer,a=n.toolbar,c=n.buttons;r(a,l)?(i=a.map((function(e){var r={toolbar:e,buttons:c,allowToolbarGroups:n.allowToolbarGroups};return iE(t,r,{backstage:o},vt.none())})),cT.setToolbars(u,i)):cT.setToolbar(u,iE(t,n,{backstage:o},vt.none()))}function TT(t){return/^[0-9\.]+(|px)$/i.test(""+t)?vt.some(parseInt(""+t,10)):vt.none()}function ET(t){return b(t)?t+"px":t}function DT(t,e,n){var o=e.filter((function(e){return t<e})),r=n.filter((function(e){return e<t}));return o.or(r).getOr(t)}function AT(t){var e=th(t),n=eh(t),o=oh(t);return TT(e).map((function(t){return DT(t,n,o)}))}function BT(t,e){var n=Mn(t);return{pos:e?n.y:n.bottom,bounds:n}}function MT(t,e){return Sr(pk,(function(n,o){var r,i=t.get(n),u=(r=i,{hide:function(){return pr(r,Fi())},getValue:function(){return wf.getValue(r)}});e.onAction(u,o.event.buttonApi)}))}function FT(t,e,n){return e.bottom-t.y>=(n=void 0===n?.01:n)&&t.bottom-e.y>=n}function IT(t){var e=function(t){var e=t.getBoundingClientRect();if(e.height<=0&&e.width<=0){var n=Qt(Mt.fromDom(t.startContainer),t.startOffset).element;return(Xe(n)?qt(n):vt.some(n)).filter(Ge).map((function(t){return t.dom.getBoundingClientRect()})).getOr(e)}return e}(t.selection.getRng());if(t.inline){var n=Ie();return Bn(n.left+e.left,n.top+e.top,e.width,e.height)}var o=He(Mt.fromDom(t.getBody()));return Bn(o.x+e.left,o.y+e.top,e.width,e.height)}function RT(t,e,n,o){void 0===o&&(o=0);var r,i,u,a,c=Pe(window),s=Mn(Mt.fromDom(t.getContentAreaContainer())),l=ih(t)||uh(t)||qh(t),f=(r=s,i=c,u=o,{x:a=Math.max(r.x+u,i.x),width:Math.min(r.right-u,i.right)-a}),d=f.x,m=f.width;if(t.inline&&!l)return Bn(d,c.y,m,c.height);var g=function(t,e,n,o,r,i){var u=Mt.fromDom(t.getContainer()),a=Du(u,".tox-editor-header").getOr(u),c=Mn(a),s=c.y>=e.bottom,l=o&&!s;if(t.inline&&l)return{y:Math.max(c.bottom+i,n.y),bottom:n.bottom};if(t.inline&&!l)return{y:n.y,bottom:Math.min(c.y-i,n.bottom)};var f="line"===r?Mn(u):e;return l?{y:Math.max(c.bottom+i,n.y),bottom:Math.min(f.bottom-i,n.bottom)}:{y:Math.max(f.y+i,n.y),bottom:Math.min(c.y-i,n.bottom)}}(t,s,c,e.header.isPositionedAtTop(),n,o),p=g.y,h=g.bottom;return Bn(d,p,m,h-p)}function NT(t){return"node"===t}function PT(t,e){var n=N(P(e,(function(e){return e.predicate(t.dom)})),(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:n.pass,contextForms:n.fail}}function VT(t,e){function n(t){return zt(t,r)}var o,r=Mt.fromDom(e.getBody()),i=Mt.fromDom(e.selection.getNode());return n(o=i)||Ut(r,o)?function(t,e,n){var o=PT(t,e);if(0<o.contextForms.length)return vt.some({elem:t,toolbars:[o.contextForms[0]]});var r=PT(t,n);if(0<r.contextForms.length)return vt.some({elem:t,toolbars:[r.contextForms[0]]});if(0<o.contextToolbars.length||0<r.contextToolbars.length){var i=function(t){if(t.length<=1)return t;function e(e){return M(t,(function(t){return t.position===e}))}function n(e){return P(t,(function(t){return t.position===e}))}var o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),u=R(n("selection"),(function(t){return O(O({},t),{position:"node"})}));return i.concat(u)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return vt.some({elem:t,toolbars:i})}return vt.none()}(i,t.inNodeScope,t.inEditorScope).orThunk((function(){return r=t,(e=n)(o=i)?vt.none():lr(o,(function(t){if(Ge(t)){var e=PT(t,r.inNodeScope),n=e.contextToolbars,o=e.contextForms,i=0<o.length?o:(a=n).length<=1?a:u("selection").orThunk((function(){return u("node")})).orThunk((function(){return u("line")})).map((function(t){return t.position})).fold((function(){return[]}),(function(t){return P(a,(function(e){return e.position===t}))}));return 0<i.length?vt.some({elem:t,toolbars:i}):vt.none()}function u(t){return L(a,(function(e){return e.position===t}))}var a;return vt.none()}),e);var e,o,r})):vt.none()}function HT(t,e,n,o){function r(){var e=x.get().getOr("node"),n=NT(e)?1:0;return RT(t,h,e,n)}function u(){return!(t.removed||v()&&p.isContextMenuOpen())}function a(){if(u()){var e=r(),n=at(x.get(),"node")?(o=t,b.get().filter(vn).map(He).getOrThunk((function(){return IT(o)}))):IT(t);return e.height<=0||!FT(n,e)}return 1;var o}function c(){b.clear(),y.clear(),x.clear(),$g.hide(w)}function s(){var t;$g.isOpen(w)&&(ve(t=w.element,"display"),a()?fe(t,"display","none"):(y.set(0),$g.reposition(w)))}function l(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:Ja([Og.config({mode:"acyclic"}),im("pop-dialog-wrap-events",[Qi((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return Og.focusIn(e)}))})),Zi((function(e){t.shortcuts.remove("ctrl+F9")}))])])}}function f(e,o){var r,i,u,a,c,s,l,f="node"===e?h.anchors.node(o):h.anchors.cursor(),d=(r=t,i=e,u=v(),a={lastElement:b.get,isReposition:function(){return at(y.get(),0)},getMode:function(){return nf.getMode(n)}},"line"===i?{bubble:pc(12,0,dE),layouts:{onLtr:function(){return[ia]},onRtl:function(){return[ua]}},overrides:mE}:{bubble:pc(0,12,dE,1/12),layouts:(c=r,s=a,l=i,u?{onLtr:function(t){return[Xa,za,Ua,ja,Wa,Ga].concat(m(t))},onRtl:function(t){return[Xa,Ua,za,Wa,ja,Ga].concat(m(t))}}:{onLtr:function(t){return[Ga,Xa,ja,za,Wa,Ua].concat(m(t))},onRtl:function(t){return[Ga,Xa,Wa,Ua,ja,za].concat(m(t))}}),overrides:mE});function m(t){return NT(l)?[(e=t,function(t,n,o,r,i){var u=function(t,e,n,o,r){var i=IT(t),u=o.lastElement().exists((function(t){return zt(n,t)})),a=n,c=t.selection.getRng(),s=Qt(Mt.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&zt(s.element,a)?u?Em:Zg:u?function(t,n){var r=pe(t,"position");fe(t,"position",n);var u=FT(i,Mn(e))&&!o.isReposition()?Am:Em;return r.each((function(e){return fe(t,"position",e)})),u}(e,o.getMode()):("fixed"===o.getMode()?r.y+Ie().top:r.y)+(xe(e)+12)<=i.y?Zg:tp}(c,r,e,s,i),a=O(O({},t),{y:i.y,height:i.height});return O(O({},u(a,n,o,r,i)),{alwaysFit:!0})})]:[];var e}return Go(f,d)}function d(t,e){var o,i,c,s;C.cancel(),u()&&(o=k(t),c=f(i=t[0].position,e),x.set(i),y.set(1),ve(s=w.element,"display"),at(Et(e,b.get(),zt),!0)||(Gr(s,bE),nf.reset(n,w)),$g.showWithinBounds(w,l(o),{anchor:c,transition:{classes:[bE],mode:"placement"}},(function(){return vt.some(r())})),e.fold(b.clear,b.set),a()&&fe(s,"display","none"))}var m,g,p=o.backstage,h=p.shared,v=ln().deviceType.isTouch,b=cc(),y=cc(),x=cc(),w=Su((m={sink:n,onEscape:function(){return t.focus(),vt.some(!0)}},g=Ro([]),$g.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){g.set([]),$g.getContent(t).each((function(t){ve(t.element,"visibility")})),Gr(t.element,vE),ve(t.element,"width")},inlineBehaviours:Ja([im("context-toolbar-events",[Er(wi(),(function(t,e){"width"===e.event.raw.propertyName&&(Gr(t.element,vE),ve(t.element,"width"))})),Sr(hE,(function(t,e){var n=t.element;ve(n,"width");var o=Ce(n);$g.setContent(t,e.event.contents),Wr(n,vE);var r=Ce(n);fe(n,"width",o+"px"),$g.getContent(t).each((function(t){e.event.focus.bind((function(t){return ba(t),wa(n)})).orThunk((function(){return Og.focusIn(t),xa(gn(n))}))})),ep.setTimeout((function(){fe(t.element,"width",r+"px")}),0)})),Sr(gE,(function(t,e){$g.getContent(t).each((function(e){g.set(g.get().concat([{bar:e,focus:xa(gn(t.element))}]))})),hr(t,hE,{contents:e.event.forwardContents,focus:vt.none()})})),Sr(pE,(function(t,e){Q(g.get()).each((function(e){g.set(g.get().slice(0,g.get().length-1)),hr(t,hE,{contents:ku(e.bar),focus:e.focus})}))}))]),Og.config({mode:"special",onEscape:function(t){return Q(g.get()).fold((function(){return m.onEscape()}),(function(e){return pr(t,pE),vt.some(!0)}))}})]),lazySink:function(){return Nn.value(m.sink)}}))),S=Rt((function(){return function(t,e){var n={},o=[],r=[],i={},u={},a=Ct(t);return St(a,(function(a){var c,s,l,f,d,m=t[a];"contextform"===m.type?(l=a,d=uo(io("ContextForm",Vp,f=m)),(n[l]=d).launch.map((function(t){i["form:"+l]=O(O({},f.launch),{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){e(d)}})})),("editor"===d.scope?r:o).push(d),u[l]=d):"contexttoolbar"===m.type&&(c=a,io("ContextToolbar",Hp,s=m).each((function(t){("editor"===s.scope?r:o).push(t),u[c]=t})))})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:u,formNavigators:i}}(e,(function(t){var e=k([t]);hr(w,gE,{forwardContents:l(e)})}))})),k=function(e){var n=t.ui.registry.getAll().buttons,r=S(),i=O(O({},n),r.formNavigators),u=Yh(t)===ch.scrolling?ch.scrolling:ch.default,a=U(R(e,(function(e){return"contexttoolbar"===e.type?iE(t,{buttons:i,toolbar:e.items,allowToolbarGroups:!1},o,vt.some(["form:"])):(n=h.providers,fE(e,n));var n})));return mO({type:u,uid:Mr("context-toolbar"),initGroups:a,onEscape:vt.none,cyclicKeying:!0,providers:h.providers})},C=cp((function(){t.hasFocus()&&!t.removed&&(Xr(w.element,bE)?C.throttle():VT(S(),t).fold(c,(function(t){d(t.toolbars,vt.some(t.elem))})))}),17);t.on("init",(function(){t.on("remove",c),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",s),t.on("click keyup focus SetContent",C.throttle),t.on(lE,c),t.on("contexttoolbar-show",(function(e){it(S().lookupTable,e.toolbarKey).each((function(n){d([n],st(e.target!==t,e.target)),$g.getContent(w).each(Og.focusIn)}))})),t.on("focusout",(function(e){ep.setEditorTimeout(t,(function(){wa(n.element).isNone()&&wa(w.element).isNone()&&c()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&c()})),t.on("AfterProgressState",(function(e){e.state?c():t.hasFocus()&&C.throttle()})),t.on("NodeChange",(function(t){wa(w.element).fold(C.throttle,i)}))}))}(AO=DO=DO||{})[AO.SemiColon=0]="SemiColon",AO[AO.Space=1]="Space";var LT,zT,UT,jT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],WT=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],GT={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},XT={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},qT=Object.freeze({__proto__:null,events:function(t,e){function n(n,o){t.updateState.each((function(t){var r=t(n,o);e.set(r)})),t.renderComponents.each((function(t){var r=R(t(o,e.get()),n.getSystem().build);Ts(n,r)}))}return $i([Sr(Ei(),(function(e,o){var r,i=o;i.universal||(r=t.channel,wt(i.channels,r)&&n(e,i.data))})),Qi((function(e,o){t.initialData.each((function(t){n(e,t)}))}))])}}),YT=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),KT=pa({fields:[lo("channel"),yo("renderComponents"),yo("updateState"),yo("initialData")],name:"reflecting",active:qT,apis:YT,state:Object.freeze({__proto__:null,init:function(){var t=Ro(vt.none());return{readState:function(){return t.get().getOr("none")},get:t.get,set:t.set,clear:function(){return t.set(vt.none())}}}})}),JT=a([lo("toggleClass"),lo("fetch"),qu("onExecute"),_o("getHotspot",vt.some),_o("getAnchorOverrides",a({})),Ic(),qu("onItemExecute"),yo("lazySink"),lo("dom"),Gu("onOpen"),Gs("splitDropdownBehaviours",[Py,Og,Ag]),_o("matchWidth",!1),_o("useMinWidth",!1),_o("eventOrder",{}),yo("role")].concat(Xy())),$T=a([Uf({factory:np,schema:[lo("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Ja([Ag.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(vr)},buttonBehaviours:Ja([Fg.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),Uf({factory:np,schema:[lo("dom")],name:"button",defaults:function(){return{buttonBehaviours:Ja([Ag.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),Wf({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[lo("text")],name:"aria-descriptor"}),jf({schema:[Uu()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,e,n)}))}}}}),Hy()]),QT=hl({name:"SplitDropdown",configFields:JT(),partFields:$T(),factory:function(t,e,n,o){function r(t){td.getCurrent(t).each((function(t){cd.highlightFirst(t),Og.focusIn(t)}))}function u(e){Uy(t,c,e,o,r,Cy.HighlightFirst).get(i)}function a(e){return vr(ul(e,t,"button")),vt.some(!0)}var s,l=O(O({},$i([Qi((function(e,n){il(e,t,"aria-descriptor").each((function(t){var n=Mr("aria");oe(t.element,"id",n),oe(e.element,"aria-describedby",n)}))}))])),gm(vt.some(u))),f={repositionMenus:function(t){Fg.isOn(t)&&Gy(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:f,eventOrder:O(O({},t.eventOrder),((s={})[Di()]=["disabling","toggling","alloy.base.behaviour"],s)),events:l,behaviours:qs(t.splitDropdownBehaviours,[Py.config({others:{sandbox:function(e){var n=ul(e,t,"arrow");return Wy(t,e,{onOpen:function(){Fg.on(n),Fg.on(e)},onClose:function(){Fg.off(n),Fg.off(e)}})}}}),Og.config({mode:"special",onSpace:a,onEnter:a,onDown:function(t){return u(t),vt.some(!0)}}),Ag.config({}),Fg.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),ZT=Mr("focus-button"),tE=function(t,e,n){return CT(t,{toolbarButtonBehaviours:[].concat(0<n.length?[im("toolbarButtonWith",n)]:[]),getApi:xT,onSetup:t.onSetup},e)},eE=function(t,e,n){return Go(CT(t,{toolbarButtonBehaviours:[Tg.config({}),Fg.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[im("toolbarToggleButtonWith",n)]:[]),getApi:wT,onSetup:t.onSetup},e))},nE=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],oE={button:OT(pp,(function(t,e){return n=e.backstage.shared.providers,tE(t,n,[]);var n})),togglebutton:OT(hp,(function(t,e){return n=e.backstage.shared.providers,eE(t,n,[]);var n})),menubutton:OT(IC,(function(t,e){return Tw(t,"tox-tbtn",e.backstage,vt.none())})),splitbutton:OT((function(t){return io("SplitButton",T_,t)}),(function(t,e){return o=t,r=e.backstage.shared,l=Mr("channel-update-split-dropdown-display"),f=Ro(i),d={getApi:n,onSetup:o.onSetup},QT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:O({"aria-pressed":!1},ST(o.tooltip,r.providers))},onExecute:function(t){o.onAction(n(t))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:Ja([Nv(r.providers.isDisabled),rv(),im("split-dropdown-events",[Sr(ZT,Ag.focus),uv(d,f),av(d,f)]),Qw.config({})]),eventOrder:((u={})[Li()]=["alloy.base.behaviour","split-dropdown-events"],u),toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:(a=n,c=o,s=r.providers,function(t){return Ay((function(t){return c.fetch(t)})).map((function(e){return vt.from(Ib(Go(gb(Mr("menu-value"),e,(function(e){c.onItemAction(a(t),e)}),c.columns,c.presets,dh.CLOSE_ON_EXECUTE,c.select.getOr(S),s),{movement:pb(c.columns,c.presets),menuBehaviours:Vh("auto"!==c.columns?[]:[Qi((function(t,e){$p(t,4,Lp(c.presets)).each((function(e){var n=e.numRows,o=e.numColumns;Og.setGridSize(t,n,o)}))}))])})))}))}),parts:{menu:jp(0,o.columns,o.presets)},components:[QT.parts.button(kT(o.icon,o.text,vt.none(),vt.some(l),vt.some([Fg.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),QT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Rm("chevron-down",r.providers.icons)},buttonBehaviours:Ja([Nv(r.providers.isDisabled),rv(),Nm()])}),QT.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]});function n(t){return{isDisabled:function(){return ud.isDisabled(t)},setDisabled:function(e){return ud.set(t,e)},setIconFill:function(e,n){Du(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){oe(t,"fill",n)}))},setIconStroke:function(e,n){Du(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){oe(t,"stroke",n)}))},setActive:function(e){oe(t.element,"aria-pressed",e),Du(t.element,"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Fg.set(t,e)}))}))},isActive:function(){return Du(t.element,"span").exists((function(e){return t.getSystem().getByDom(e).exists(Fg.isOn)}))}}}var o,r,u,a,c,s,l,f,d})),grouptoolbarbutton:OT((function(t){return io("GroupToolbarButton",C_,t)}),(function(t,e,n){var o,r,i,u,a,c,s=n.ui.registry.getAll().buttons,l=((o={})[Yc]=e.backstage.shared.header.isPositionedAtTop()?bc.TopToBottom:bc.BottomToTop,o);if(Yh(n)!==ch.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");return i=e.backstage,u=function(t){return iE(n,{buttons:s,toolbar:t,allowToolbarGroups:!1},e,vt.none())},a=l,c=i.shared,q_.sketch({lazySink:c.getSink,fetch:function(){return Ay((function(t){t(R(u(r.items),lO))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:kT((r=t).icon,r.text,r.tooltip,vt.none(),vt.none(),c.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:a}}}})})),styleSelectButton:function(t,e){return CO(t,n=e.backstage,yT(t,O({type:"advanced"},n.styleselect)));var n},fontsizeSelectButton:function(t,e){return CO(t,e.backstage,hT(t))},fontSelectButton:function(t,e){return CO(t,e.backstage,pT(t))},formatButton:function(t,e){return CO(t,e.backstage,bT(t))},alignMenuButton:function(t,e){return CO(t,e.backstage,mT(t))}},rE={styleselect:oE.styleSelectButton,fontsizeselect:oE.fontsizeSelectButton,fontselect:oE.fontSelectButton,formatselect:oE.formatButton,align:oE.alignMenuButton},iE=function(t,e,n,o){var i,u,a,c,s=(a=e.toolbar,c=e.buttons,!1===a?[]:void 0===a||!0===a?(i=c,u=R(nE,(function(t){var e=P(t.items,(function(t){return Tt(i,t)||Tt(rE,t)}));return{name:t.name,items:e}})),P(u,(function(t){return 0<t.items.length}))):l(a)?R(a.split("|"),(function(t){return{items:t.trim().split(" ")}})):r(a,(function(t){return Tt(t,"name")&&Tt(t,"items")}))?a:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]));return P(R(s,(function(r){var i=j(r.items,(function(r){return 0===r.trim().length?[]:(i=t,u=e.buttons,a=r,c=e.allowToolbarGroups,s=n,l=o,it(u,a.toLowerCase()).orThunk((function(){return l.bind((function(t){return Z(t,(function(t){return it(u,t+a.toLowerCase())}))}))})).fold((function(){return it(rE,a.toLowerCase()).map((function(t){return t(i,s)})).orThunk((function(){return vt.none()}))}),(function(t){return"grouptoolbarbutton"!==t.type||c?(n=s,o=i,it(oE,(e=t).type).fold((function(){return console.error("skipping button defined by",e),vt.none()}),(function(t){return vt.some(t(e,n,o))}))):(console.warn("Ignoring the '"+a+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),vt.none());var e,n,o})).toArray());var i,u,a,c,s,l}));return{title:vt.from(t.translate(r.name)),items:i}})),(function(t){return 0<t.items.length}))},uE=ln(),aE=uE.os.isiOS()&&uE.os.version.major<=12,cE=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=Ro(0),u=e.outerContainer;lT(t);var a=Mt.fromDom(r.targetNode),c=te(gn(a)),s=e.mothership;af(a,s,De),Ms(c,e.uiMothership),t.on("PostRender",(function(){_T(t,e,n,o),i.set(t.getWin().innerWidth),cT.setMenubar(u,pO(t,n)),cT.setSidebar(u,n.sidebar),function(t,e){function n(){var e=c.get();e.left===u.innerWidth&&e.top===u.innerHeight||(c.set(kn(u.innerWidth,u.innerHeight)),Bv(t))}function o(){var e=t.getDoc().documentElement,n=s.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(s.set(kn(e.offsetWidth,e.offsetHeight)),Bv(t))}function r(e){return t.fire("ScrollContent",e)}var i=t.dom,u=t.getWin(),a=t.getDoc().documentElement,c=Ro(kn(u.innerWidth,u.innerHeight)),s=Ro(kn(a.offsetWidth,a.offsetHeight));i.bind(u,"resize",n),i.bind(u,"scroll",r);var l=lc(Mt.fromDom(t.getBody()),"load",o),f=e.uiMothership.element;t.on("hide",(function(){fe(f,"display","none")})),t.on("show",(function(){ve(f,"display")})),t.on("NodeChange",o),t.on("remove",(function(){l.unbind(),i.unbind(u,"resize",n),i.unbind(u,"scroll",r),u=null}))}(t,e)}));var l,f,d,g,p=cT.getSocket(u).getOrDie("Could not find expected socket element");aE&&(de(p.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),f=function(){t.fire("ScrollContent")},d=null,g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];m(d)&&(d=setTimeout((function(){d=null,f.apply(null,t)}),20))},l=sc(p.element,"scroll",g),t.on("remove",l.unbind)),ov(t,e),t.addCommand("ToggleSidebar",(function(e,n){cT.toggleSidebar(u,n),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return cT.whichSidebar(u)}));var h=Yh(t);h!==ch.sliding&&h!==ch.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=t.getWin().innerWidth;n!==i.get()&&(cT.refreshToolbar(e.outerContainer),i.set(n))}));var v={enable:function(){nv(e,!1)},disable:function(){nv(e,!0)},isDisabled:function(){return ud.isDisabled(u)}};return{iframeContainer:p.element.dom,editorContainer:u.element.dom,api:v}}}),sE=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,u=e.uiMothership,c=e.outerContainer,s=Ro(null),l=Mt.fromDom(r.targetNode),f=function(t,e,n,o,r){function i(){return w.get()&&!t.removed}function u(t){return x?t.fold(a(0),(function(t){return 1<t.components().length?xe(t.components()[1].element):0})):0}function c(){f.broadcastOn([df()],{})}function s(t){var n,o,a,s,l;void 0===t&&(t=!1),i()&&(g||(n=h.getOrThunk((function(){var t=TT(ge(bn(),"margin-left")).getOr(0);return Ce(bn())-ke(e).left+t})),fe(r.get().element,"max-width",n+"px")),x&&cT.refreshToolbar(d),g||(o=u(cT.getToolbar(d)),a=Mn(e),s=b()?Math.max(a.y-xe(r.get().element)+o,0):a.bottom,de(d.element,{position:"absolute",top:Math.round(s)+"px",left:Math.round(a.x)+"px"})),p&&(l=r.get(),t?b_.reset(l):b_.refresh(l)),c())}function l(n){var o,a;void 0===n&&(n=!0),!g&&p&&i()&&(o=v.getDockingMode(),(a=function(n){switch(Kh(t)){case lh.auto:var o=u(cT.getToolbar(d)),r=xe(n.element)-o,i=Mn(e);if(i.y>r)return"top";var a=Gt(e),c=Math.max(a.dom.scrollHeight,xe(a));return i.bottom<c-r||Fn().bottom<i.bottom-r?"bottom":"top";case lh.bottom:return"bottom";default:return lh.top,"top"}}(r.get()))!==o&&(function(t){var e=r.get();b_.setModes(e,[t]),v.setDockingMode(t);var n=b()?bc.TopToBottom:bc.BottomToTop;oe(e.element,Yc,n)}(a),n&&s(!0)))}var f=n.uiMothership,d=n.outerContainer,m=Gh.DOM,g=Qh(t),p=ev(t),h=oh(t).or(AT(t)),v=o.shared.header,b=v.isPositionedAtTop,y=Yh(t),x=y===ch.sliding||y===ch.floating,w=Ro(!1);return{isVisible:i,isPositionedAtTop:b,show:function(){w.set(!0),fe(d.element,"display","flex"),m.addClass(t.getBody(),"mce-edit-focus"),ve(f.element,"display"),l(!1),s()},hide:function(){w.set(!1),n.outerContainer&&(fe(d.element,"display","none"),m.removeClass(t.getBody(),"mce-edit-focus")),fe(f.element,"display","none")},update:s,updateMode:l,repositionPopups:c}}(t,l,e,o,s),d=t.getParam("toolbar_persist",!1,"boolean");function m(){var r;s.get()?f.show():(s.set(cT.getHeader(c).getOrDie()),Ms(r=Zh(t),i),Ms(r,u),_T(t,e,n,o),cT.setMenubar(c,pO(t,n)),f.show(),function(t,e,n,o){function r(o){var r=BT(e,n.isPositionedAtTop()),u=r.pos,a=r.bounds,c=i.get(),s=c.pos,l=c.bounds,f=a.height!==l.height||a.width!==l.width;i.set({pos:u,bounds:a}),f&&Bv(t,o),n.isVisible()&&(s!==u?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))}var i=Ro(BT(e,n.isPositionedAtTop()));o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),t.on("NodeChange keydown",(function(t){ep.requestAnimationFrame((function(){return r(t)}))})),t.on("ScrollWindow",(function(){return n.updateMode()}));var u=ac();u.set(lc(Mt.fromDom(t.getBody()),"load",r)),t.on("remove",(function(){u.clear()}))}(t,l,f,d),t.nodeChanged())}fT(t),t.on("show",m),t.on("hide",f.hide),d||(t.on("focus",m),t.on("blur",f.hide)),t.on("init",(function(){(t.hasFocus()||d)&&m()})),ov(t,e);var g={show:function(){f.show()},hide:function(){f.hide()},enable:function(){nv(e,!1)},disable:function(){nv(e,!0)},isDisabled:function(){return ud.isDisabled(c)}};return{editorContainer:c.element.dom,api:g}}}),lE="contexttoolbar-hide",fE=function(t,e){var n,o,r,u,a=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),c=Bm(py.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Ja([Og.config({mode:"special",onEnter:function(t){return s.findPrimary(t).map((function(t){return vr(t),!0}))},onLeft:function(t,e){return e.cut(),vt.none()},onRight:function(t,e){return e.cut(),vt.none()}})])})),s=(n=c,o=t.commands,r=e,u=R(o,(function(t){return Bm(("contextformtogglebutton"===t.type?function(t,e,n){var o=e.original;o.primary;var r=_(o,["primary"]),u=uo(hp(O(O({},r),{type:"togglebutton",onAction:i})));return eE(u,n.backstage.shared.providers,[MT(t,e)])}:function(t,e,n){var o=e.original;o.primary;var r=_(o,["primary"]),u=uo(pp(O(O({},r),{type:"button",onAction:i})));return tE(u,n.backstage.shared.providers,[MT(t,e)])})(n,t,{backstage:{shared:{providers:r}}}))})),{asSpecs:function(){return R(u,(function(t){return t.asSpec()}))},findPrimary:function(t){return Z(o,(function(e,n){return e.primary?vt.from(u[n]).bind((function(e){return e.getOpt(t)})).filter(x(ud.isDisabled)):vt.none()}))}});return[{title:vt.none(),items:[c.asSpec()]},{title:vt.none(),items:s.asSpecs()}]},dE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},mE={maxHeightFunction:Ec(),maxWidthFunction:W_()},gE=Mr("forward-slide"),pE=Mr("backward-slide"),hE=Mr("change-slide-event"),vE="tox-pop--resizing",bE="tox-pop--transition",yE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},xE=(UT=["Infinity",(LT="[0-9]+")+"\\."+wE(LT)+wE(zT="[eE][+-]?[0-9]+"),"\\."+LT+wE(zT),LT+wE(zT)].join("|"),new RegExp("^([+-]?(?:"+UT+"))(.*)$"));function wE(t){return"(?:"+t+")?"}function SE(t,e){function n(){var n=e.getOptions(t),o=e.getCurrent(t).map(e.hash),r=cc();return R(n,(function(n){return{type:"togglemenuitem",text:e.display(n),onSetup:function(i){function u(t){t&&(r.on((function(t){return t.setActive(!1)})),r.set(i)),i.setActive(t)}u(at(o,e.hash(n)));var a=e.watcher(t,n,u);return function(){r.clear(),a()}},onAction:function(){return e.setCurrent(t,n)}}}))}t.ui.registry.addMenuButton(e.name,{tooltip:e.text,icon:e.icon,fetch:function(t){return t(n())},onSetup:e.onToolbarSetup}),t.ui.registry.addNestedMenuItem(e.name,{type:"nestedmenuitem",text:e.text,getSubmenuItems:n,onSetup:e.onMenuSetup})}function kE(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}}function CE(t,e){return xO(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(n){n.setDisabled(t.mode.isReadOnly()||!t.undoManager[e]())}))}function OE(t,e){var n,o,r,i,u,c,s,l,f,d,m,g,h,v,b,y,x,w,S,k,C,_,T,E,D,A=t;St([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(t){A.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:SO(A,t.cmd),onSetup:yO(A,t.name)})})),A.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:SO(A,"JustifyNone")}),function(t){var e,n;!function(t){XS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:yO(t,e.name),onAction:kE(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:yO(t,n),onAction:kE(t,n)})}}(t),e=t,XS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:SO(e,t.action)})})),n=t,XS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:SO(n,t.action),onSetup:yO(n,t.name)})}))}(E=t),D=E,XS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(t){D.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:SO(D,t.action)})})),D.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:kE(D,"code")}),T=kO(0,m=f=e,mT(d=l=t)),d.ui.registry.addNestedMenuItem("align",{text:m.shared.providers.translate("Align"),getSubmenuItems:function(){return T.items.validateItems(T.getStyleItems())}}),v=kO(0,h=f,pT(g=l)),g.ui.registry.addNestedMenuItem("fontformats",{text:h.shared.providers.translate("Fonts"),getSubmenuItems:function(){return v.items.validateItems(v.getStyleItems())}}),b=l,x=O({type:"advanced"},(y=f).styleselect),w=kO(0,y,yT(b,x)),b.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return w.items.validateItems(w.getStyleItems())}}),k=kO(0,f,bT(S=l)),S.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return k.items.validateItems(k.getStyleItems())}}),_=kO(0,f,hT(C=l)),C.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return _.items.validateItems(_.getStyleItems())}}),(c=u=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:CE(c,"hasUndo"),onAction:SO(c,"undo")}),c.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:CE(c,"hasRedo"),onAction:SO(c,"redo")}),(s=u).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:CE(s,"hasUndo"),onAction:SO(s,"undo")}),s.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:CE(s,"hasRedo"),onAction:SO(s,"redo")}),function(t){var e;(e=t).addCommand("mceApplyTextcolor",(function(t,n){var o,r=t,i=n;(o=e).undoManager.transact((function(){o.focus(),o.formatter.apply(r,{value:i}),o.nodeChanged()}))})),e.addCommand("mceRemoveTextcolor",(function(t){var n,o=t;(n=e).undoManager.transact((function(){n.focus(),n.formatter.remove(o,{value:null},null,!0),n.nodeChanged()}))}));var n=Ro(Sb),o=Ro(Sb);db(t,"forecolor","forecolor","Text color",n),db(t,"backcolor","hilitecolor","Background color",o),mb(t,"forecolor","forecolor","Text color"),mb(t,"backcolor","hilitecolor","Background color")}(t),function(t){var e;t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:SO(t,"mceToggleVisualAid")}),t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:xO(e=t,"VisualAid",(function(t){t.setActive(e.hasVisual)})),onAction:SO(t,"mceToggleVisualAid")})}(t),(r=t).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:xO(i=r,"NodeChange",(function(t){t.setDisabled(!i.queryCommandState("outdent"))})),onAction:SO(r,"outdent")}),r.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:SO(r,"indent")}),SE(n=t,cD),o=n,vt.from(o.getParam("content_langs",void 0,"array")).map((function(t){return{name:"language",text:"Language",icon:"language",getOptions:a(t),hash:function(t){return p(t.customCode)?t.code:t.code+"/"+t.customCode},display:function(t){return t.title},watcher:function(t,e,n){return t.formatter.formatChanged("lang",n,!1,{value:e.code,customValue:e.customCode}).unbind},getCurrent:function(t){return fr(Mt.fromDom(t.selection.getNode()),(function(t){return vt.some(t).filter(Ge).bind((function(t){return ue(t,"lang").map((function(e){return{code:e,customCode:ue(t,"data-mce-lang").getOrUndefined(),title:""}}))}))}))},setCurrent:function(t,e){return t.execCommand("Lang",!1,e)},onToolbarSetup:function(t){var e=ac();return t.setActive(o.formatter.match("lang",{},void 0,!0)),e.set(o.formatter.formatChanged("lang",t.setActive,!0)),e.clear}}})).each((function(t){return SE(n,t)}))}function _E(t,e){return{type:"makeshift",x:t,y:e}}function TE(t){return"longpress"===t.type||0===t.type.indexOf("touch")}function EE(t,e,n){switch(n){case"node":return{type:"node",node:vt.some(Mt.fromDom((o=t).selection.getNode())),root:Mt.fromDom(o.getBody())};case"point":return function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(TE(t)){var e=t.touches[0];return _E(e.pageX,e.pageY)}return _E(t.pageX,t.pageY)}(e):(n=t.getContentAreaContainer(),o=function(t){if(TE(t)){var e=t.touches[0];return _E(e.clientX,e.clientY)}return _E(t.clientX,t.clientY)}(e),i=(r=Gh.DOM.getPos(n)).x,u=r.y,_E(o.x+i,o.y+u)):sD(t);var n,o,r,i,u}(t,e);case"selection":return sD(t)}var o}function DE(t,e,n,o,r,i){function u(){var u,a,c,m,g,p,h,v,b,y;c=n(),m=o,g=r,h=!(f||s||l&&d),b=EE(u=t,a=e,v=p=i),y=O({bubble:pc(0,"point"===v?12:0,fD),layouts:lD,overrides:{maxWidthFunction:W_(),maxHeightFunction:Ec()}},b),Ow(c,dh.CLOSE_ON_EXECUTE,m,!0).map((function(t){a.preventDefault(),$g.showMenuWithinBounds(g,{anchor:y},{menu:{markers:Up("normal"),highlightImmediately:h},data:t,type:"horizontal"},(function(){return vt.some(RT(u,m.shared,"node"===p?"node":"selection"))})),u.fire(lE)}))}var a,c=ln(),s=c.os.isiOS(),l=c.os.isOSX(),f=c.os.isAndroid(),d=c.deviceType.isTouch();(l||s)&&"node"!==i?(a=function(){(function(t){function e(){ep.setEditorTimeout(t,(function(){t.selection.setRng(n)}),10),i()}var n=t.selection.getRng();function o(t){t.preventDefault(),t.stopImmediatePropagation()}function r(){return i()}t.once("touchend",e),t.on("mousedown",o,!0),t.once("longpresscancel",r);var i=function(){t.off("touchend",e),t.off("longpresscancel",r),t.off("mousedown",o)}})(t),u()},function(t,e){var n=t.selection;if(!(n.isCollapsed()||e.touches.length<1)){var o=e.touches[0],r=n.getRng();return ds(t.getWin(),is.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}}(t,e)?a():(t.once("selectionchange",a),t.once("touchend",(function(){return t.off("selectionchange",a)})))):u()}function AE(t){return"string"==typeof t?t.split(/[ ,]/):t}function BE(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")}function ME(t){return l(t)?"|"===t:"separator"===t.type}function FE(t,e){if(0===e.length)return t;var n=Q(t).filter((function(t){return!ME(t)})).fold((function(){return[]}),(function(t){return[dD]}));return t.concat(n).concat(e).concat([dD])}function IE(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)}function RE(t,e){return IE(t,e)?t.selection.getStart(!0):e.target}function NE(t,e,n){function o(t){return $g.hide(u)}function r(e){var o;BE(t)&&e.preventDefault(),e.ctrlKey&&!BE(t)||!1===t.getParam("contextmenu")||(o=function(t,e){var n=t.getParam("contextmenu_avoid_overlap","","string"),o=IE(t,e)?"selection":"point";if(dt(n)){var r=RE(t,e);return Rb(Mt.fromDom(r),n)?"node":o}return o}(t,e),(i()?DE:function(t,e,n,o,r,i){var u=n(),a=EE(t,e,i);Ow(u,dh.CLOSE_ON_EXECUTE,o,!1).map((function(t){e.preventDefault(),$g.showMenuAt(r,{anchor:a},{menu:{markers:Up("normal")},data:t})}))})(t,e,(function(){var n,o,r,i=RE(t,e),u=t.ui.registry.getAll(),a=(r=(o=t).ui.registry.getAll().contextMenus,vt.from(o.getParam("contextmenu")).map(AE).getOrThunk((function(){return P(AE("link linkchecker image imagetools table spellchecker configurepermanentpen"),(function(t){return Tt(r,t)}))}))),c=u.contextMenus,s=i;return 0<(n=H(a,(function(t,e){return it(c,e.toLowerCase()).map((function(e){var n=e.update(s);if(l(n))return FE(t,n.split(" "));if(0<n.length){var o=R(n,mD);return FE(t,o)}return t})).getOrThunk((function(){return t.concat([e])}))}),[])).length&&ME(n[n.length-1])&&n.pop(),n}),n,u,o))}var i=ln().deviceType.isTouch,u=Su($g.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Ja([im("dismissContextMenu",[Sr(Ui(),(function(e,n){lf.close(e),t.focus()}))])])}));t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");t.on(e,o),t.on("longpress contextmenu",r)}))}function PE(t){return function(e){return e.translate(-t.left,-t.top)}}function VE(t){return function(e){return e.translate(t.left,t.top)}}function HE(t){return function(e,n){return H(t,(function(t,e){return e(t)}),kn(e,n))}}function LE(t,e,n){return t.fold(HE([VE(n),PE(e)]),HE([PE(e)]),HE([]))}function zE(t,e,n){return t.fold(HE([VE(n)]),HE([]),HE([VE(e)]))}function UE(t,e,n){return t.fold(HE([]),HE([PE(n)]),HE([VE(e),PE(n)]))}function jE(t,e,n){var o=t.fold((function(t,e){return{position:vt.some("absolute"),left:vt.some(t+"px"),top:vt.some(e+"px")}}),(function(t,e){return{position:vt.some("absolute"),left:vt.some(t-n.left+"px"),top:vt.some(e-n.top+"px")}}),(function(t,e){return{position:vt.some("fixed"),left:vt.some(t+"px"),top:vt.some(e+"px")}}));return O({right:vt.none(),bottom:vt.none()},o)}function WE(t,e,n,o){function r(t,r){return function(i,u){var a=t(e,n,o);return r(i.getOr(a.left),u.getOr(a.top))}}return t.fold(r(UE,pD),r(zE,hD),r(LE,vD))}function GE(t,e){var n=ie(t,e);return p(n)?NaN:parseInt(n,10)}function XE(t,e,n,o){return Z(t,(function(t){var r,i,u=t.sensor,a=t.range.left,c=t.range.top,s=zE(e,r=n,i=o),l=zE(u,r,i);return Math.abs(s.left-l.left)<=a&&Math.abs(s.top-l.top)<=c?vt.some({output:WE(t.output,e,n,o),extra:t.extra}):vt.none()}))}function qE(t,e){var n;t.getSystem().addToGui(e),qt((n=e).element).filter(Ge).each((function(t){pe(t,"z-index").each((function(e){oe(t,wD,e)})),fe(t,"z-index",ge(n.element,"z-index"))}))}function YE(t){qt(t.element).filter(Ge).each((function(t){ue(t,wD).fold((function(){return ve(t,"z-index")}),(function(e){return fe(t,"z-index",e)})),ce(t,wD)})),t.getSystem().removeFromGui(t)}function KE(t,e,n){return t.getSystem().build(Jb.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))}function JE(t,e){return{bounds:t.getBounds(),height:we(e.element),width:Oe(e.element)}}function $E(t,e,n,o,r){var i=n.update(o,r),u=n.getStartData().getOrThunk((function(){return JE(e,t)}));i.each((function(n){var o,r,i,c,s,l,f,d,m,g,p,h,v,b,y,x,w,S,k,C,O,_,T,E,D,A=t,B=u,M=n,F=(o=e).getTarget(A.element);o.repositionTarget&&(r=Ie(jt(A.element)),i=yC(F),_=pe(O=F,"left"),T=pe(O,"top"),E=pe(O,"position"),D=function(t,e,n){return("fixed"===n?vD:pD)(parseInt(t,10),parseInt(e,10))},c=(_.isSome()&&T.isSome()&&E.isSome()?vt.some(D(_.getOrDie(),T.getOrDie(),E.getOrDie())):vt.none()).getOrThunk((function(){var t=ke(O);return hD(t.left,t.top)})),s=A,l=o.snaps,f=c,d=r,m=i,g=M,p=B,v=l.fold((function(){var t,e,n=LE((t=g.left,e=g.top,f.fold((function(n,o){return pD(n+t,o+e)}),(function(n,o){return hD(n+t,o+e)}),(function(n,o){return vD(n+t,o+e)}))),d,m);return vD(n.left,n.top)}),(function(t){var e=function(t,e,n,o,r,i){var u,a,c,s,l,f,d=(u=n,a=o,l=GE(s=t.element,(c=e).leftAttr),f=GE(s,c.topAttr),(isNaN(l)||isNaN(f)?vt.none():vt.some(kn(l,f))).fold((function(){return u}),(function(t){return vD(t.left+a.left,t.top+a.top)}))),m=(e.mustSnap?bD:yD)(t,e,d,r,i),g=LE(d,r,i),p=e,h=g,v=t.element;return oe(v,p.leftAttr,h.left+"px"),oe(v,p.topAttr,h.top+"px"),m.fold((function(){return{coord:vD(g.left,g.top),extra:vt.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))}(s,t,f,g,d,m);return e.extra.each((function(e){t.onSensor(s,e)})),e.coord})),b=d,y=m,x=(h=p).bounds,w=zE(v,b,y),S=Ha(w.left,x.x,x.x+x.width-h.width),k=Ha(w.top,x.y,x.y+x.height-h.height),C=hD(S,k),me(F,jE(v.fold((function(){var t=UE(C,b,y);return pD(t.left,t.top)}),a(C),(function(){var t=LE(C,b,y);return vD(t.left,t.top)})),0,i))),o.onDrag(A,F,M)}))}function QE(t,e,n,o){e.each(YE),n.snaps.each((function(e){var n,o;n=e,ce(o=t.element,n.leftAttr),ce(o,n.topAttr)}));var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)}function ZE(t){return function(e,n){function o(t){n.setStartData(JE(e,t))}return $i(T([Sr(Vi(),(function(t){n.getStartData().each((function(){return o(t)}))}))],t(e,n,o),!0))}}function tD(t,e,n){return[Sr(ci(),(function(o,r){var i,u,a,c,s;0===r.event.raw.button&&(r.stop(),a={drop:i=function(){return QE(o,vt.some(c),t,e)},delayDrop:(u=Nb(i,200)).schedule,forceDrop:i,move:function(n){u.cancel(),$E(o,t,e,CD,n)}},c=KE(o,t.blockerClass,(s=a,$i([Sr(ci(),s.forceDrop),Sr(fi(),s.drop),Sr(si(),(function(t,e){s.move(e.event)})),Sr(li(),s.delayDrop)]))),n(o),qE(o,c))}))]}function eD(t,e,n){function o(n){QE(n,r.get(),t,e),r.clear()}var r=cc();return[Sr(ri(),(function(i,u){u.stop();var a,c,s,l=KE(i,t.blockerClass,(c=a=function(){return o(i)},s=function(n){$E(i,t,e,_D,n)},$i([Sr(ri(),c),Sr(ui(),a),Sr(ai(),a),Sr(ii(),(function(t,e){s(e.event)}))])));r.set(l),n(i),qE(i,l)})),Sr(ii(),(function(n,o){o.stop(),$E(n,t,e,_D,o.event)})),Sr(ui(),(function(t,e){e.stop(),o(t)})),Sr(ai(),o)]}function nD(t,e,n,o,r,i){return t.fold((function(){return DD.snap({sensor:hD(n-20,o-20),range:kn(r,i),output:hD(vt.some(n),vt.some(o)),extra:{td:e}})}),(function(t){var r=n-20,i=o-20,u=t.element.dom.getBoundingClientRect();return DD.snap({sensor:hD(r,i),range:kn(40,40),output:hD(vt.some(n-u.width/2),vt.some(o-u.height/2)),extra:{td:e}})}))}function oD(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r=o.td,i=e.get(),u=r;i.exists((function(t){return zt(t,u)}))||(e.set(r),n(r))},mustSnap:!0}}function rD(t){return Bm(np.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ja([DD.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),Qw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}function iD(t,e){function n(t){var n=He(t);return nD(g.getOpt(e),t,n.x,n.y,n.width,n.height)}function o(t){var n=He(t);return nD(p.getOpt(e),t,n.right,n.bottom,n.width,n.height)}function r(e,n,o,r){var i=o(n);DD.snapTo(e,i),function(e){var o=n.dom.getBoundingClientRect();ve(e.element,"display");var i=Xt(Mt.fromDom(t.getBody())).dom.innerHeight,u=o[r]<0,a=o[r]>i;(u||a)&&fe(e.element,"display","none")}(e)}function i(t){return r(h,t,n,"top")}function u(t){return r(v,t,o,"bottom")}var a=Ro([]),c=Ro([]),s=Ro(!1),l=cc(),f=cc(),d=oD((function(){return R(a.get(),n)}),l,(function(e){f.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),m=oD((function(){return R(c.get(),o)}),f,(function(e){l.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),g=rD(d),p=rD(m),h=Su(g.asSpec()),v=Su(p.asSpec());ln().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){s.get()||(Es(e,h),Es(e,v),s.set(!0)),l.set(t.start),f.set(t.finish),t.otherCells.each((function(e){a.set(e.upOrLeftCells),c.set(e.downOrRightCells),i(t.start),u(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){l.get().each(i),f.get().each(u)})),t.on("TableSelectionClear",(function(){s.get()&&(As(h),As(v),s.set(!1)),l.clear(),f.clear()})))}var uD,aD,cD={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(t){return e=["fixed","relative","empty"],vt.from(xE.exec(t)).bind((function(t){var n=Number(t[1]),o=t[2],r=o;return M(e,(function(t){return M(yE[t],(function(t){return r===t}))}))?vt.some({value:n,unit:o}):vt.none()})).map((function(t){return t.value+t.unit})).getOr(t);var e},display:c,watcher:function(t,e,n){return t.formatter.formatChanged("lineheight",n,!1,{value:e}).unbind},getCurrent:function(t){return vt.from(t.queryCommandValue("LineHeight"))},setCurrent:function(t,e){return t.execCommand("LineHeight",!1,e)}},sD=function(t){return{type:"selection",root:Mt.fromDom(t.selection.getNode())}},lD={onLtr:function(){return[Xa,za,Ua,ja,Wa,Ga,Zg,tp,Cm,Sm,km,wm]},onRtl:function(){return[Xa,Ua,za,Wa,ja,Ga,Zg,tp,km,wm,Cm,Sm]}},fD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},dD={type:"separator"},mD=function(t){function e(t){return{text:t.text,icon:t.icon,disabled:t.disabled,shortcut:t.shortcut}}var n;if(l(t))return t;switch(t.type){case"separator":return dD;case"submenu":return O(O({type:"nestedmenuitem"},e(t)),{getSubmenuItems:function(){var e=t.getSubmenuItems();return l(e)?e:R(e,mD)}});default:return O(O({type:"menuitem"},e(t)),{onAction:(n=t.onAction,function(){return n()})})}},gD=No([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),pD=gD.offset,hD=gD.absolute,vD=gD.fixed,bD=function(t,e,n,o,r){var i=e.getSnapPoints(t);return XE(i,n,o,r).orThunk((function(){return H(i,(function(t,e){var i,u,a,c,s,l,f,d=(i=e.sensor,e.range.left,e.range.top,c=zE(n,u=o,a=r),s=zE(i,u,a),l=Math.abs(c.left-s.left),f=Math.abs(c.top-s.top),kn(l,f));return t.deltas.fold((function(){return{deltas:vt.some(d),snap:vt.some(e)}}),(function(n){return(d.left+d.top)/2<=(n.left+n.top)/2?{deltas:vt.some(d),snap:vt.some(e)}:t}))}),{deltas:vt.none(),snap:vt.none()}).snap.map((function(t){return{output:WE(t.output,n,o,r),extra:t.extra}}))}))},yD=function(t,e,n,o,r){return XE(e.getSnapPoints(t),n,o,r)},xD=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r,i,u,a=e.getTarget(t.element);e.repositionTarget&&(r=Ie(jt(t.element)),i=yC(a),me(a,jE([WE((u=o).output,u.output,r,i),u.extra][0],0,i)))}}),wD="data-initial-z-index",SD=Oo("snaps",[lo("getSnapPoints"),Gu("onSensor"),lo("leftAttr"),lo("topAttr"),_o("lazyViewport",Fn),_o("mustSnap",!1)]),kD=[_o("useFixed",S),lo("blockerClass"),_o("getTarget",c),_o("onDrag",i),_o("repositionTarget",!0),_o("onDrop",i),Mo("getBounds",Fn),SD],CD=Object.freeze({__proto__:null,getData:function(t){return vt.from(kn(t.x,t.y))},getDelta:function(t,e){return kn(e.left-t.left,e.top-t.top)}}),OD=T(T([],kD,!0),[Ku("dragger",{handlers:ZE(tD)})],!1),_D=Object.freeze({__proto__:null,getData:function(t){var e,n=t.raw.touches;return 1===n.length?(e=n[0],vt.some(kn(e.clientX,e.clientY))):vt.none()},getDelta:function(t,e){return kn(e.left-t.left,e.top-t.top)}}),TD=T(T([],kD,!0),[Ku("dragger",{handlers:ZE(eD)})],!1),ED=T(T([],kD,!0),[Ku("dragger",{handlers:ZE((function(t,e,n){return T(T([],tD(t,e,n),!0),eD(t,e,n),!0)}))})],!1),DD=ha({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:OD,touch:TD,mouseOrTouch:ED}),name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:vt.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=vt.none(),e=vt.none(),n=a({});return hu({readState:n,reset:function(){t=vt.none(),e=vt.none()},update:function(e,n){return e.getData(n).bind((function(n){return o=e,r=n,i=t.map((function(t){return o.getDelta(t,r)})),t=vt.some(r),i;var o,r,i}))},getStartData:function(){return e},setStartData:function(t){e=vt.some(t)}})}}),apis:xD});function AD(t,e,n){var o,r,i,u,a,c,s=Mt.fromDom(t.getContainer());tt((o=t,r=e,i=n,u=xe(s),a=Ce(s),(c={}).height=DT(u+r.top,nh(o),rh(o)),i===uD.Both&&(c.width=DT(a+r.left,eh(o),oh(o))),c),(function(t,e){return fe(s,e,ET(t)),0})),t.fire("ResizeEditor")}function BD(t,e,n,o){return AD(t,kn(20*n,20*o),e),vt.some(!0)}function MD(t,e){var n,o,r,i,u,a,c,s,l,f,d,m,g,p,h,v;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(v=[],t.getParam("elementpath",!0,"boolean")&&v.push((g=t,h=e,(p={}).delimiter||(p.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ja([Og.config({mode:"flow",selector:"div[role=button]"}),ud.config({disabled:h.isDisabled}),rv(),ey.config({}),Tg.config({}),im("elementPathEvents",[Qi((function(t,e){g.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return Og.focusIn(t)})),g.on("NodeChange",(function(e){var n,o,r=function(t){for(var e=[],n=t.length;0<n--;){var o=t[n];if(1===o.nodeType&&!function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return 1;if("bookmark"===t.getAttribute("data-mce-type"))return 1}}(o)){var r=g.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||e.push({name:r.name,element:o}),r.isPropagationStopped())break}}return e}(e.parents);0<r.length?Tg.set(t,(n=R(r||[],(function(t,e){return np.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":e,"tab-index":-1,"aria-level":e+1},innerHtml:t.name},action:function(e){g.focus(),g.selection.select(t.element),g.nodeChanged()},buttonBehaviours:Ja([Lv(h.isDisabled),rv()])})})),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+p.delimiter+" "}},H(n.slice(1),(function(t,e){var n=t;return n.push(o),n.push(e),n}),[n[0]]))):Tg.set(t,[])}))}))])]),components:[]})),t.hasPlugin("wordcount")&&v.push((f=t,d=e,np.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ja([Lv(d.isDisabled),rv(),ey.config({}),Tg.config({}),wf.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),im("wordcount-events",[eu((function(t){var e=wf.getValue(t),n="words"===e.mode?"characters":"words";wf.setValue(t,{mode:n,count:e.count}),b(t,e.count,n)})),Qi((function(t){f.on("wordCountUpdate",(function(e){var n=wf.getValue(t).mode;wf.setValue(t,{mode:n,count:e.wordCount}),b(t,e.wordCount,n)}))}))])]),eventOrder:((m={})[Di()]=["disabling","alloy.base.behaviour","wordcount-events"],m)}))),t.getParam("branding",!0,"boolean")&&v.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(l=op.translate(["Powered by {0}","Tiny"]))+'">'+l+"</a>"}}),n=0<v.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:v}]:[],i=e,a=!(u=r=t).hasPlugin("autoresize"),o=(s=!1===(c=u.getParam("resize",a))?uD.None:"both"===c?uD.Both:uD.Vertical)===uD.None?vt.none():vt.some(Vm("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:i.translate("Resize")},behaviours:[DD.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,e,n){return AD(r,n,s)},blockerClass:"tox-blocker"}),Og.config({mode:"special",onLeft:function(){return BD(r,s,-1,0)},onRight:function(){return BD(r,s,1,0)},onUp:function(){return BD(r,s,0,-1)},onDown:function(){return BD(r,s,0,1)}}),ey.config({}),Ag.config({})]},i.icons)),n.concat(o.toArray()))};function b(t,e,n){return Tg.set(t,[Zr(d.translate(["{0} "+n,e[n]]))])}}function FD(t){function e(){return d.bind(cT.getHeader)}function n(){return Nn.value(x)}function o(){return d.bind((function(t){return cT.getThrobber(t)})).getOrDie("Could not find throbber element")}var r,u,a,c,s=t.inline,l=s?sE:cE,f=ev(t)?k_:m_,d=vt.none(),m=ln(),g=m.browser.isIE()?["tox-platform-ie"]:[],p=m.deviceType.isTouch()?["tox-platform-touch"]:[],h=Jh(t),v=Zh(t),b=op.isRtl()?{attributes:{dir:"rtl"}}:{},y={attributes:((r={})[Yc]=h?bc.BottomToTop:bc.TopToBottom,r)},x=Su((u=zt(bn(),v)&&"grid"===ge(v,"display"),a={dom:O({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(g).concat(p)},b),behaviours:Ja([nf.config({useFixed:function(){return f.isDocked(e)}})])},c={dom:{styles:{width:document.body.clientWidth+"px"}},events:$i([Sr(Hi(),(function(){fe(Z.element,"width",document.body.clientWidth+"px")}))])},Go(a,u?c:{}))),w=Bm({dom:{tag:"div",classes:["tox-anchorbar"]}}),S=vC(x,t,(function(){return d.bind((function(t){return w.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),k=cT.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:S,onEscape:function(){t.focus()}}),C=Yh(t),_=cT.parts.toolbar(O({dom:{tag:"div",classes:["tox-toolbar"]},getSink:n,providers:S.shared.providers,onEscape:function(){t.focus()},type:C,lazyToolbar:function(){return d.bind((function(t){return cT.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return e().getOrDie("Could not find header element")}},y)),T=cT.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:S.shared.providers,onEscape:function(){t.focus()},type:C}),E=cT.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),D=cT.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),A=cT.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:S}),B=t.getParam("statusbar",!0,"boolean")&&!s?vt.some(MD(t,S.shared.providers)):vt.none(),M={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[E,D]},F=qh(t),I=uh(t),R=ih(t),N=cT.parts.header({dom:O({tag:"div",classes:["tox-editor-header"]},y),components:U([R?[k]:[],F?[T]:I?[_]:[],Qh(t)?[]:[w.asSpec()]]),sticky:ev(t),editor:t,sharedBackstage:S.shared}),P=U([h?[]:[N],s?[]:[M],h?[N]:[]]),V=U([[{dom:{tag:"div",classes:["tox-editor-container"]},components:P}],s?[]:B.toArray(),[A]]),H=tv(t),L=O(O({role:"application"},op.isRtl()?{dir:"rtl"}:{}),H?{"aria-hidden":"true"}:{}),z=Su(cT.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(h?["tox-tinymce--toolbar-bottom"]:[]).concat(p).concat(g),styles:O({visibility:"hidden"},H?{opacity:"0",border:"0"}:{}),attributes:L},components:V,behaviours:Ja([rv(),ud.config({disableClass:"tox-tinymce--disabled"}),Og.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));d=vt.some(z);t.shortcuts.add("alt+F9","focus menubar",(function(){cT.focusMenubar(z)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){cT.focusToolbar(z)})),t.addCommand("ToggleToolbarDrawer",(function(){cT.toggleToolbarDrawer(z)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return cT.isToolbarDrawerToggled(z)}));var j,W,G,X,q,Y,K,J,$,Q=zb(z),Z=zb(x);return j=t,W=Q,G=Z,X=va(),q=sc(X,"touchstart",ot),Y=sc(X,"touchmove",(function(t){return tt(Ni(),t)})),K=sc(X,"touchend",(function(t){return tt(Pi(),t)})),J=sc(X,"mousedown",ot),$=sc(X,"mouseup",(function(t){0===t.raw.button&&nt(mf(),{target:t.target})})),j.on("PostRender",(function(){j.on("click",rt),j.on("tap",rt),j.on("mouseup",it),j.on("mousedown",ut),j.on("ScrollWindow",ct),j.on("ResizeWindow",st),j.on("ResizeEditor",lt),j.on("AfterProgressState",ft),j.on("DismissPopups",dt)})),j.on("remove",(function(){j.off("click",rt),j.off("tap",rt),j.off("mouseup",it),j.off("mousedown",ut),j.off("ScrollWindow",ct),j.off("ResizeWindow",st),j.off("ResizeEditor",lt),j.off("AfterProgressState",ft),j.off("DismissPopups",dt),J.unbind(),q.unbind(),Y.unbind(),K.unbind(),$.unbind()})),j.on("detach",(function(){Fs(W),Fs(G),W.destroy(),G.destroy()})),{mothership:Q,uiMothership:Z,backstage:S,renderUI:function(){var r,i;f.setup(t,S.shared,e),OE(t,S),NE(t,n,S),i=(r=t).ui.registry.getAll().sidebars,St(Ct(i),(function(t){function e(){return at(vt.from(r.queryCommandValue("ToggleSidebar")),t)}var n=i[t];r.ui.registry.addToggleButton(t,{icon:n.icon,tooltip:n.tooltip,onAction:function(n){r.execCommand("ToggleSidebar",!1,t),n.setActive(e())},onSetup:function(t){function n(){return t.setActive(e())}return r.on("ToggleSidebar",n),function(){r.off("ToggleSidebar",n)}}})})),$C(t,o,S.shared),et(t.getParam("toolbar_groups",{},"object"),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var u,a=t.ui.registry.getAll(),c=a.buttons,s=a.menuItems,d=a.contextToolbars,m=a.sidebars,g=ah(t),p={menuItems:s,menus:(u=t.getParam("menu"))?et(u,(function(t){return O(O({},t),{items:t.items})})):{},menubar:t.getParam("menubar"),toolbar:g.getOrThunk((function(){return t.getParam("toolbar",!0)})),allowToolbarGroups:C===ch.floating,buttons:c,sidebar:m};HT(t,d,x,{backstage:S}),iD(t,x);var h=t.getElement(),v=function(){var e,n,o,r,i,u,a=ET((r=Zp(o=n=t),i=nh(o),u=rh(o),TT(r).map((function(t){return DT(t,i,u)})).getOr(Zp(n)))),c=ET(AT(e=t).getOr(th(e)));return t.inline||(he("div","width",c)&&fe(z.element,"width",c),he("div","height",a)?fe(z.element,"height",a):fe(z.element,"height","200px")),a}();return l.render(t,{mothership:Q,uiMothership:Z,outerContainer:z},p,S,{targetNode:h,height:v})},getUi:function(){return{channels:{broadcastAll:Z.broadcast,broadcastOn:Z.broadcastOn,register:i}}}};function tt(t,e){St([W,G],(function(n){n.broadcastEvent(t,e)}))}function nt(t,e){St([W,G],(function(n){n.broadcastOn([t],e)}))}function ot(t){return nt(ff(),{target:t.target})}function rt(t){return nt(ff(),{target:Mt.fromDom(t.target)})}function it(t){0===t.button&&nt(mf(),{target:Mt.fromDom(t.target)})}function ut(){St(j.editorManager.get(),(function(t){j!==t&&t.fire("DismissPopups",{relatedTarget:j})}))}function ct(t){return tt(Vi(),Cc(t))}function st(t){nt(df(),{}),tt(Hi(),Cc(t))}function lt(){return nt(df(),{})}function ft(t){t.state&&nt(ff(),{target:Mt.fromDom(j.getContainer())})}function dt(t){nt(ff(),{target:Mt.fromDom(t.relatedTarget.getContainer())})}}function ID(t){return ir("items","items",{tag:"required",process:{}},Zn(oo((function(e){return io("Checking item of "+t,QA,e).fold((function(t){return Nn.error(rr(t))}),(function(t){return Nn.value(t)}))}))))}function RD(t){return l(t.type)&&l(t.name)}function ND(t){return{internalDialog:uo(io("dialog",uB,t)),dataValidator:(e=j(P(sB(t),RD),(function(t){return vt.from(lB[t.type]).fold((function(){return[]}),(function(e){return[fo(t.name,e)]}))})),Ko(e)),initialData:t.initialData};var e}function PD(t){var e=[],n={};return tt(t,(function(t,o){t.fold((function(){e.push(o)}),(function(t){n[o]=t}))})),0<e.length?Nn.error(e):Nn.value(n)}function VD(t,e){fe(t,"height",e+"px"),ln().browser.isIE()?ve(t,"flex-basis"):fe(t,"flex-basis",e+"px")}function HD(t,e,n){Eu(t,'[role="dialog"]').each((function(t){Du(t,'[role="tablist"]').each((function(o){n.get().map((function(n){return fe(e,"height","0"),fe(e,"flex-basis","0"),Math.min(n,(i=e,u=o,a=Gt(r=t).dom,c="fixed"===ge(Eu(r,".tox-dialog-wrap").getOr(r),"position")?Math.max(a.clientHeight,window.innerHeight):Math.max(a.offsetHeight,a.scrollHeight),s=xe(i),l=i.dom.offsetLeft>=u.dom.offsetLeft+Ce(u)?Math.max(xe(u),s):s,f=parseInt(ge(r,"margin-top"),10)||0,d=parseInt(ge(r,"margin-bottom"),10)||0,c-(xe(r)+f+d-l)));var r,i,u,a,c,s,l,f,d})).each((function(t){VD(e,t)}))}))}))}function LD(t){return Du(t,'[role="tabpanel"]')}function zD(t,e){function n(t){var e=PD(wf.getValue(t)).getOr({}),n=u.get(),o=Go(n,e);u.set(o)}function o(t){var e=u.get();wf.setValue(t,e)}var r,i,u=Ro({}),a=Ro(null),c=R(t.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[PS.sketch((function(r){return{dom:{tag:"div",classes:["tox-form"]},components:R(t.items,(function(t){return qk(r,t,e)})),formBehaviours:Ja([Og.config({mode:"acyclic",useTabstopAt:x(Zx)}),im("TabView.form.events",[Qi(o),Zi(n)]),tc.config({channels:cr([{key:xB,value:{onReceive:n}},{key:wB,value:{onReceive:o}}])})])}}))]}}})),s=(r=c,i=cc(),{extraEvents:[Qi((function(t){var e=t.element;LD(e).each((function(n){var o;fe(n,"visibility","hidden"),t.getSystem().getByDom(n).toOptional().each((function(t){var e,o,u;$(K((o=n,u=t,R(e=r,(function(t,n){Tg.set(u,e[n].view());var r=o.dom.getBoundingClientRect();return Tg.set(u,[]),r.height}))),(function(t,e){return e<t?-1:t<e?1:0}))).fold(i.clear,i.set)})),HD(e,n,i),ve(n,"visibility"),o=t,$(r).each((function(t){return yB.showTab(o,t.value)})),ep.requestAnimationFrame((function(){HD(e,n,i)}))}))})),Sr(Hi(),(function(t){var e=t.element;LD(e).each((function(t){HD(e,t,i)}))})),Sr(my,(function(t,e){var n=t.element;LD(n).each((function(t){var e=xa(gn(t));fe(t,"visibility","hidden");var o=pe(t,"height").map((function(t){return parseInt(t,10)}));ve(t,"height"),ve(t,"flex-basis");var r=t.dom.getBoundingClientRect().height;o.forall((function(t){return t<r}))?(i.set(r),HD(n,t,i)):o.each((function(e){VD(t,e)})),ve(t,"visibility"),e.each(ba)}))}))],selectFirst:!1});return yB.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=wf.getValue(e);hr(t,dy,{name:o,oldName:a.get()}),a.set(o)},tabs:c,components:[yB.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[pB.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ja([ey.config({})])}),yB.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:s.selectFirst,tabSectionBehaviours:Ja([im("tabpanel",s.extraEvents),Og.config({mode:"acyclic"}),td.config({find:function(t){return $(yB.getViewItems(t))}}),wf.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([xB],{}),u.get()},setValue:function(t,e){u.set(e),t.getSystem().broadcastOn([wB],{})}}})])})}function UD(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:O(O({},e.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:Ja([jS(0),KT.config({channel:CB,updateState:function(t,e){return vt.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){return"tabpanel"!==t.body.type?[(e=t.body,o=n,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(r=Bm(PS.sketch((function(t){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:R(e.items,(function(e){return qk(t,e,o)}))}})))).asSpec()]}],behaviours:Ja([Og.config({mode:"acyclic",useTabstopAt:x(Zx)}),US(r),YS(r,{postprocess:function(t){return PD(t).fold((function(t){return console.error(t),{}}),c)}})])})]:[zD(t.body,n)];var e,o,r},initialData:t})])}}(aD=uD=uD||{})[aD.None=0]="None",aD[aD.Both=1]="Both",aD[aD.Vertical=2]="Vertical";var jD,WD=a([lo("lazySink"),yo("dragBlockClass"),Mo("getBounds",Fn),_o("useTabstopAt",k),_o("eventOrder",{}),Gs("modalBehaviours",[Og]),Xu("onExecute"),Yu("onEscape")]),GD={sketch:c},XD=a([Wf({name:"draghandle",overrides:function(t,e){return{behaviours:Ja([DD.config({mode:"mouse",getTarget:function(t){return Eu(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),Uf({schema:[lo("dom")],name:"title"}),Uf({factory:GD,schema:[lo("dom")],name:"close"}),Uf({factory:GD,schema:[lo("dom")],name:"body"}),Wf({factory:GD,schema:[lo("dom")],name:"footer"}),jf({factory:{sketch:function(t,e){return O(O({},t),{dom:e.dom,components:e.components})}},schema:[_o("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),_o("components",[])],name:"blocker"})]),qD=hl({name:"ModalDialog",configFields:WD(),partFields:XD(),factory:function(t,e,n,o){var r,i=cc(),u=Mr("modal-events"),a=O(O({},t.eventOrder),((r={})[Li()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){i.set(e);var n=t.lazySink(e).getOrDie(),r=o.blocker(),u=n.getSystem().build(O(O({},r),{components:r.components.concat([ku(e)]),behaviours:Ja([Ag.config({}),im("dialog-blocker-events",[Er(mi(),(function(){Og.focusIn(e)}))])])}));Es(n,u),Og.focusIn(e)},hide:function(t){i.clear(),qt(t.element).each((function(e){t.getSystem().getByDom(e).each((function(t){As(t)}))}))},getBody:function(e){return ul(e,t,"body")},getFooter:function(e){return ul(e,t,"footer")},setIdle:function(t){L_.unblock(t)},setBusy:function(t,e){L_.block(t,e)}},eventOrder:a,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:qs(t.modalBehaviours,[Tg.config({}),Og.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),L_.config({getRoot:i.get}),im(u,[Qi((function(e){var n,o,r,i=e.element,u=ul(e,t,"title").element,a=ue(i,"id").fold((function(){var t=Mr("dialog-label");return oe(u,"id",t),t}),c);oe(i,"aria-labelledby",a),n=e.element,o=ul(e,t,"body").element,r=vt.from(ie(n,"id")).fold((function(){var t=Mr("dialog-describe");return oe(o,"id",t),t}),c),oe(n,"aria-describedby",r)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),YD=Ko([mo("type"),mo("name")].concat(Ah)),KD=tr,JD=[ir("name","name",jn((function(){return Mr("button-name")})),Zo),So("icon"),Ao("align","end",["start","end"]),Bo("primary",!1),Bo("disabled",!1)],$D=T(T([],JD,!0),[mo("text")],!1),QD=T([go("type",["submit","cancel","custom"])],$D,!0),ZD=co("type",{submit:QD,cancel:QD,custom:QD,menu:T([go("type",["menu"]),So("text"),So("tooltip"),So("icon"),bo("items",YD)],JD,!0)}),tA=[mo("type"),mo("text"),go("level",["info","warn","error","success"]),mo("icon"),_o("url","")],eA=Ko(tA),nA=[mo("type"),mo("text"),Bo("disabled",!1),Bo("primary",!1),ir("name","name",jn((function(){return Mr("button-name")})),Zo),So("icon"),Bo("borderless",!1)],oA=Ko(nA),rA=[mo("type"),mo("name"),mo("label"),Bo("disabled",!1)],iA=Ko(rA),uA=tr,aA=[mo("type"),mo("name")],cA=aA.concat([So("label")]),sA=cA.concat([_o("columns","auto")]),lA=Ko(sA),fA=Jo([mo("value"),mo("text"),mo("icon")]),dA=Ko(cA),mA=Zo,gA=Ko(cA),pA=Zo,hA=aA.concat([Do("tag","textarea"),mo("scriptId"),mo("scriptUrl"),To("settings",void 0,or)]),vA=aA.concat([Do("tag","textarea"),po("init")]),bA=oo((function(t){return io("customeditor.old",Qn(vA),t).orThunk((function(){return io("customeditor.new",Qn(hA),t)}))})),yA=Zo,xA=Ko(cA),wA=Zn(Yo),SA=[mo("type"),mo("html"),Ao("presets","presentation",["presentation","document"])],kA=Ko(SA),CA=cA.concat([Bo("sandboxed",!0)]),OA=Ko(CA),_A=Zo,TA=cA.concat([fo("currentState",Ko([lo("blob"),mo("url")]))]),EA=Ko(TA),DA=cA.concat([So("inputMode"),So("placeholder"),Bo("maximized",!1),Bo("disabled",!1)]),AA=Ko(DA),BA=Zo,MA=[mo("text"),mo("value")],FA=[mo("text"),bo("items",(jD=Rt((function(){return IA})),{extract:function(t,e){return jD().extract(t,e)},toString:function(){return jD().toString()}}))],IA=to([Ko(MA),Ko(FA)]),RA=cA.concat([bo("items",IA),Bo("disabled",!1)]),NA=Ko(RA),PA=Zo,VA=cA.concat([vo("items",[mo("text"),mo("value")]),Eo("size",1),Bo("disabled",!1)]),HA=Ko(VA),LA=Zo,zA=cA.concat([Bo("constrain",!0),Bo("disabled",!1)]),UA=Ko(zA),jA=Ko([mo("width"),mo("height")]),WA=[mo("type"),bo("header",Zo),bo("cells",Zn(Zo))],GA=Ko(WA),XA=cA.concat([So("placeholder"),Bo("maximized",!1),Bo("disabled",!1)]),qA=Ko(XA),YA=Zo,KA=cA.concat([Ao("filetype","file",["image","media","file"]),_o("disabled",!1)]),JA=Ko(KA),$A=Ko([mo("value"),_o("meta",{})]),QA=$n((function(){return no("type",{alertbanner:eA,bar:Ko((n=ID("bar"),[mo("type"),n])),button:oA,checkbox:iA,colorinput:dA,colorpicker:gA,dropzone:xA,grid:Ko((t=ID("grid"),[mo("type"),fo("columns",Qo),t])),iframe:OA,input:AA,listbox:NA,selectbox:HA,sizeinput:UA,textarea:qA,urlinput:JA,customeditor:bA,htmlpanel:kA,imagetools:EA,collection:lA,label:Ko((e=ID("label"),[mo("type"),mo("label"),e])),table:GA,panel:tB});var t,e,n})),ZA=[mo("type"),_o("classes",[]),bo("items",QA)],tB=Ko(ZA),eB=[ir("name","name",jn((function(){return Mr("tab-name")})),Zo),mo("title"),bo("items",QA)],nB=[mo("type"),vo("tabs",eB)],oB=Ko(nB),rB=$D,iB=ZD,uB=Ko([mo("title"),fo("body",no("type",{panel:tB,tabpanel:oB})),Do("size","normal"),bo("buttons",iB),_o("initialData",{}),Mo("onAction",i),Mo("onChange",i),Mo("onSubmit",i),Mo("onClose",i),Mo("onCancel",i),_o("onTabChange",i)]),aB=Ko(T([go("type",["cancel","custom"])],rB,!0)),cB=Ko([mo("title"),mo("url"),wo("height"),wo("width"),Co("buttons",aB),Mo("onAction",i),Mo("onCancel",i),Mo("onClose",i),Mo("onMessage",i)]),sB=function(t){return f(t)?[t].concat(j(rt(t),sB)):d(t)?j(t,sB):[]},lB={checkbox:uA,colorinput:mA,colorpicker:pA,dropzone:wA,input:BA,iframe:_A,sizeinput:jA,selectbox:LA,listbox:PA,size:jA,textarea:YA,urlinput:$A,customeditor:yA,collection:fA,togglemenuitem:KD},fB={open:function(t,e){var n=ND(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(uo(io("dialog",cB,e)))},redial:ND},dB=pl({name:"TabButton",configFields:[_o("uid",void 0),lo("value"),ir("dom","dom",Gn((function(){return{attributes:{role:"tab",id:Mr("aria"),"aria-selected":"false"}}})),$o()),yo("action"),_o("domModification",{}),Gs("tabButtonBehaviours",[Ag,Og,wf]),lo("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:gm(t.action),behaviours:qs(t.tabButtonBehaviours,[Ag.config({}),Og.config({mode:"execution",useSpace:!0,useEnter:!0}),wf.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),mB=a([lo("tabs"),lo("dom"),_o("clickToDismiss",!1),Gs("tabbarBehaviours",[cd,Og]),ju(["tabClass","selectedClass"])]),gB=a([Gf({factory:dB,name:"tabs",unit:"tab",overrides:function(t){return{action:function(e){var n=e.getSystem().getByUid(t.uid).getOrDie(),o=cd.isHighlighted(n,e);(o&&t.clickToDismiss?function(t,e){cd.dehighlight(t,e),hr(t,qi(),{tabbar:t,button:e})}:o?i:function(t,e){cd.highlight(t,e),hr(t,Xi(),{tabbar:t,button:e})})(n,e)},domModification:{classes:[t.markers.tabClass]}}}})]),pB=hl({name:"Tabbar",configFields:mB(),partFields:gB(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:qs(t.tabbarBehaviours,[cd.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){oe(e.element,"aria-selected","true")},onDehighlight:function(t,e){oe(e.element,"aria-selected","false")}}),Og.config({mode:"flow",getInitial:function(t){return cd.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),hB=pl({name:"Tabview",configFields:[Gs("tabviewBehaviours",[Tg])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:qs(t.tabviewBehaviours,[Tg.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),vB=a([_o("selectFirst",!0),Gu("onChangeTab"),Gu("onDismissTab"),_o("tabs",[]),Gs("tabSectionBehaviours",[])]),bB=a([Uf({factory:pB,schema:[lo("dom"),ho("markers",[lo("tabClass"),lo("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),Uf({factory:hB,name:"tabview"})]),yB=hl({name:"TabSection",configFields:vB(),partFields:bB(),factory:function(t,e,n,o){function r(e,n){il(e,t,"tabbar").each((function(t){n(t).each(vr)}))}return{uid:t.uid,dom:t.dom,components:e,behaviours:Xs(t.tabSectionBehaviours),events:$i(U([t.selectFirst?[Qi((function(t,e){r(t,cd.getFirst)}))]:[],[Sr(Xi(),(function(e,n){var o=n.event.button,r=wf.getValue(o);il(o,t,"tabview").each((function(e){L(t.tabs,(function(t){return t.value===r})).each((function(n){var r=n.view();ue(o.element,"id").each((function(t){oe(e.element,"aria-labelledby",t)})),Tg.set(e,r),t.onChangeTab(e,o,r)}))}))})),Sr(qi(),(function(e,n){var o=n.event.button;t.onDismissTab(e,o)}))]])),apis:{getViewItems:function(e){return il(e,t,"tabview").map((function(t){return Tg.contents(t)})).getOr([])},showTab:function(t,e){r(t,(function(t){return L(cd.getCandidates(t),(function(t){return wf.getValue(t)===e})).filter((function(e){return!cd.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),xB="send-data-to-section",wB="send-data-to-view",SB=Mr("update-dialog"),kB=Mr("update-title"),CB=Mr("update-body"),OB=Mr("update-footer"),_B=Mr("body-send-message");function TB(t){return(TB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EB(t,e){return(EB=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function DB(t,e,n){return(DB=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),1}catch(t){return}}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&EB(r,n.prototype),r}).apply(null,arguments)}function AB(t){return function(t){if(Array.isArray(t))return BB(t)}(t)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(t){if(t){if("string"==typeof t)return BB(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?BB(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BB(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var MB,FB=Object.hasOwnProperty,IB=Object.setPrototypeOf,RB=Object.isFrozen,NB=Object.getPrototypeOf,PB=Object.getOwnPropertyDescriptor,VB=Object.freeze,HB=Object.seal,LB=Object.create,zB="undefined"!=typeof Reflect&&Reflect,UB=zB.apply||function(t,e,n){return t.apply(e,n)},jB=(VB=VB||function(t){return t},HB=HB||function(t){return t},zB.construct||function(t,e){return DB(t,AB(e))}),WB=tM(Array.prototype.forEach),GB=tM(Array.prototype.pop),XB=tM(Array.prototype.push),qB=tM(String.prototype.toLowerCase),YB=tM(String.prototype.match),KB=tM(String.prototype.replace),JB=tM(String.prototype.indexOf),$B=tM(String.prototype.trim),QB=tM(RegExp.prototype.test),ZB=(MB=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return jB(MB,e)});function tM(t){return function(e){for(var n=arguments.length,o=new Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return UB(t,e,o)}}function eM(t,e){IB&&IB(t,null);for(var n=e.length;n--;){var o,r=e[n];"string"!=typeof r||(o=qB(r))!==r&&(RB(e)||(e[n]=o),r=o),t[r]=!0}return t}function nM(t){var e,n=LB(null);for(e in t)UB(FB,t,[e])&&(n[e]=t[e]);return n}function oM(t,e){for(;null!==t;){var n=PB(t,e);if(n){if(n.get)return tM(n.get);if("function"==typeof n.value)return tM(n.value)}t=NB(t)}return function(t){return console.warn("fallback value for",t),null}}var rM=VB(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),iM=VB(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),uM=VB(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aM=VB(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cM=VB(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sM=VB(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),lM=VB(["#text"]),fM=VB(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),dM=VB(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mM=VB(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gM=VB(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pM=HB(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hM=HB(/<%[\w\W]*|[\w\W]*%>/gm),vM=HB(/^data-[\-\w.\u00B7-\uFFFF]/),bM=HB(/^aria-[\-\w]+$/),yM=HB(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xM=HB(/^(?:\w+script|data):/i),wM=HB(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),SM=HB(/^html$/i);function kM(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}}function CM(t,e){return qD.parts.close(np.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:Ja([ey.config({})])}))}function OM(){return qD.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function _M(t,e){return qD.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:KC("<p>"+(n=e.translate(t),qM().sanitize(n)+"</p>"))}]}]});var n}function TM(t){return qD.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})}function EM(t,e){return[Jb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Jb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]}function DM(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return qD.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),vt.some(!0)},useTabstopAt:function(t){return!Zx(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:O({position:"relative"},t.extraStyles)},components:T([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:KC('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:YM?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:Ja(T([Ag.config({}),im("dialog-events",t.dialogEvents.concat([Er(mi(),(function(t,e){Og.focusIn(t)}))])),im("scroll-lock",[Qi((function(){Wr(bn(),i)})),Zi((function(){Gr(bn(),i)}))])],t.extraBehaviours,!0)),eventOrder:O(((e={})[Di()]=["dialog-events"],e[Li()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[zi()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})}function AM(t){return np.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[Vm("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(t){pr(t,ay)}})}function BM(t,e,n){function o(t){return[Zr(n.translate(t.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:O({},e.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:Ja([KT.config({channel:kB,renderComponents:o})])}}function MM(){return{dom:KC('<div class="tox-dialog__draghandle"></div>')}}function FM(t,e){return n={title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},o=e.shared.providers,r=qD.parts.title(BM(n,vt.none(),o)),i=qD.parts.draghandle(MM()),u=qD.parts.close(AM(o)),a=[r].concat(n.draggable?[i]:[]).concat([u]),Jb.sketch({dom:KC('<div class="tox-dialog__header"></div>'),components:a});var n,o,r,i,u,a}function IM(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:KC('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function RM(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){qD.setBusy(t(),(function(t,o){return IM(n.message,o,e)}))},onUnblock:function(){qD.setIdle(t())}}}function NM(t,e,n,o){var r;return Su(DM(O(O({},t),{lazySink:o.shared.getSink,extraBehaviours:T([KT.config({channel:SB,updateState:function(t,e){return vt.some(e)},initialData:e}),JS({})],t.extraBehaviours,!0),onEscape:function(t){pr(t,ay)},dialogEvents:n,eventOrder:((r={})[Ei()]=[KT.name(),tc.name()],r[Li()]=["scroll-lock",KT.name(),"messages","dialog-events","alloy.base.behaviour"],r[zi()]=["alloy.base.behaviour","dialog-events","messages",KT.name(),"scroll-lock"],r)})))}function PM(t){return R(t,(function(t){return"menu"===t.type?(n=R((e=t).items,(function(t){var e=Ro(!1);return O(O({},t),{storage:e})})),O(O({},e),{items:n})):t;var e,n}))}function VM(t){return H(t,(function(t,e){return"menu"!==e.type?t:H(e.items,(function(t,e){return t[e.name]=e.storage,t}),t)}),{})}function HM(t,e){return[_r(mi(),Qx),t(uy,(function(t,n){e.onClose(),n.onClose()})),t(ay,(function(t,e,n,o){e.onCancel(t),pr(o,uy)})),Sr(fy,(function(t,n){return e.onUnblock()})),Sr(ly,(function(t,n){return e.onBlock(n.event)}))]}function LM(t,e){function n(t,e){return Jb.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:R(e,(function(t){return t.memento.asSpec()}))})}var o=N(e.map((function(t){return t.footerButtons})).getOr([]),(function(t){return"start"===t.align}));return[n("start",o.pass),n("end",o.fail)]}function zM(t,e){return{dom:KC('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ja([KT.config({channel:OB,initialData:t,updateState:function(t,n){var o=R(n.buttons,(function(t){var n=Bm(Iw(t,t.type,e));return{name:t.name,align:t.align,memento:n}}));return vt.some({lookupByName:function(t,e){return n=t,r=e,L(o,(function(t){return t.name===r})).bind((function(t){return t.memento.getOpt(n)}));var n,r},footerButtons:o})},renderComponents:LM})])}}function UM(t,e){return qD.parts.footer(zM(t,e))}function jM(t,e){if(t.getRoot().getSystem().isConnected()){var n=td.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return PS.getField(n,e).fold((function(){var o=t.getFooter();return KT.getState(o).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return vt.some(t)}))}return vt.none()}function WM(t,e,n){function o(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)}var r={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=wf.getValue(o),i=et(n,(function(t){return t.get()}));return O(O({},r),i)},setData:function(e){o((function(o){var i,u,a=r.getData(),c=O(O({},a),e),s=(i=c,u=t.getRoot(),KT.getState(u).get().map((function(t){return uo(io("data",t.dataValidator,i))})).getOr(i)),l=t.getFormWrapper();wf.setValue(l,s),tt(n,(function(t,e){Tt(c,e)&&t.set(c[e])}))}))},disable:function(e){jM(t,e).each(ud.disable)},enable:function(e){jM(t,e).each(ud.enable)},focus:function(e){jM(t,e).each(Ag.focus)},block:function(t){if(!l(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(e){hr(e,ly,{message:t})}))},unblock:function(){o((function(t){pr(t,fy)}))},showTab:function(e){o((function(n){var o=t.getBody();KT.getState(o).get().exists((function(t){return t.isTabPanel()}))&&td.getCurrent(o).each((function(t){yB.showTab(t,e)}))}))},redial:function(t){o((function(n){var o=e(t);n.getSystem().broadcastOn([SB],o),n.getSystem().broadcastOn([kB],o.internalDialog),n.getSystem().broadcastOn([CB],o.internalDialog),n.getSystem().broadcastOn([OB],o.internalDialog),r.setData(o.initialData)}))},close:function(){o((function(t){pr(t,uy)}))}};return r}function GM(t){return f(t)&&-1!==ZM.indexOf(t.mceAction)}function XM(t){function e(t,e,n,o){return fB.open((function(t,r,i){function l(){return P.on((function(t){$g.reposition(t),b_.refresh(t)}))}var f,d,m,g,p,h,v,b,y,x,w,S,k,C,_,E,D,A,B,M,F,I,R,N=uo(io("data",i,r)),P=cc(),V=u.shared.header.isPositionedAtTop(),H=(d={dataValidator:i,initialData:N,internalDialog:t},m={redial:fB.redial,closeWindow:function(){P.on($g.hide),c.off("ResizeEditor",l),P.clear(),n(H.instanceApi)}},g=u,p=o,C=Mr("dialog-label"),_=Mr("dialog-content"),E=Bm((b={title:d.internalDialog.title,draggable:!0},y=C,x=g.shared.providers,Jb.sketch({dom:KC('<div class="tox-dialog__header"></div>'),components:[BM(b,vt.some(y),x),MM(),AM(x)],containerBehaviours:Ja([DD.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Au(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),D=Bm((w={body:d.internalDialog.body},S=g,k=p,UD(w,vt.some(_),S,k))),B=VM(A=PM(d.internalDialog.buttons)),M=Bm($M({buttons:A},g)),F=JM((function(){return R}),{onBlock:function(t){L_.block(I,(function(e,n){return IM(t.message,n,g.shared.providers)}))},onUnblock:function(){L_.unblock(I)},onClose:function(){return m.closeWindow()}},g.shared.getSink),I=Su({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((h={role:"dialog"})["aria-labelledby"]=C,h["aria-describedby"]=_,h)},eventOrder:((v={})[Ei()]=[KT.name(),tc.name()],v[Di()]=["execute-on-form"],v[Li()]=["reflecting","execute-on-form"],v),behaviours:Ja([Og.config({mode:"cyclic",onEscape:function(t){return pr(t,uy),vt.some(!0)},useTabstopAt:function(t){return!Zx(t)&&("button"!==Ft(t)||"disabled"!==ie(t,"disabled"))}}),KT.config({channel:SB,updateState:function(t,e){return vt.some(e)},initialData:d}),Ag.config({}),im("execute-on-form",F.concat([Er(mi(),(function(t,e){Og.focusIn(t)}))])),L_.config({getRoot:function(){return vt.some(I)}}),Tg.config({}),JS({})]),components:[E.asSpec(),D.asSpec(),M.asSpec()]}),R=WM({getRoot:a(I),getFooter:function(){return M.get(I)},getBody:function(){return D.get(I)},getFormWrapper:function(){var t=D.get(I);return td.getCurrent(t).getOr(t)}},m.redial,B),{dialog:I,instanceApi:R}),L=Su($g.sketch(O(O({lazySink:u.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},V?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Ja(T([im("window-manager-inline-events",[Sr(Ui(),(function(t,e){pr(H.dialog,ay)}))])],(f=c,s&&V?[]:[b_.config({contextual:{lazyContext:function(){return vt.some(Mn(Mt.fromDom(f.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]),!0)),isExtraPart:function(t,e){return Rb(n=e,".tox-alert-dialog")||Rb(n,".tox-confirm-dialog");var n}})));return P.set(L),$g.showWithin(L,ku(H.dialog),{anchor:e},vt.some(bn())),s&&V||(b_.refresh(L),c.on("ResizeEditor",l)),H.instanceApi.setData(N),Og.focusIn(H.dialog),H.instanceApi}),t)}var n,o,r,i,u=t.backstage,c=t.editor,s=ev(c),d=(o=(n=t).backstage.shared,{open:function(t,e){function r(){qD.hide(c),e()}var i=Bm(Iw({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:vt.none()},"cancel",n.backstage)),u=OM(),a=CM(r,o.providers),c=Su(DM({lazySink:function(){return o.getSink()},header:kM(u,a),body:_M(t,o.providers),footer:vt.some(TM(EM([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Sr(ay,r)],eventOrder:{}}));qD.show(c);var s=i.get(c);Ag.focus(s)}}),m=(i=(r=t).backstage.shared,{open:function(t,e){function n(t){qD.hide(s),e(t)}var o=Bm(Iw({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:vt.none()},"submit",r.backstage)),u=Iw({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:vt.none()},"cancel",r.backstage),a=OM(),c=CM((function(){return n(!1)}),i.providers),s=Su(DM({lazySink:function(){return i.getSink()},header:kM(a,c),body:_M(t,i.providers),footer:vt.some(TM(EM([],[u,o.asSpec()]))),onEscape:function(){return n(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Sr(ay,(function(){return n(!1)})),Sr(sy,(function(){return n(!0)}))],eventOrder:{}}));qD.show(s);var l=o.get(s);Ag.focus(l)}});return{open:function(t,n,o){return void 0!==n&&"toolbar"===n.inline?e(t,u.shared.anchors.inlineDialog(),o,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?e(t,u.shared.anchors.cursor(),o,n.ariaAttrs):function(t,e){return fB.open((function(t,n,o){var r,i,c,s,l,f,d,m,g,p,h,v,b,y,x=n,w=(i={redial:fB.redial,closeWindow:function(){qD.hide(w.dialog),e(w.instanceApi)}},c=u,f=FM((r={dataValidator:o,initialData:x,internalDialog:t}).internalDialog.title,c),s=c,l=UD({body:r.internalDialog.body},vt.none(),s,!1),d=qD.parts.body(l),g=VM(m=PM(r.internalDialog.buttons)),p=UM({buttons:m},c),h=JM((function(){return y}),RM((function(){return b}),c.shared.providers,i),c.shared.getSink),v=function(){switch(r.internalDialog.size){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(),b=NM({header:f,body:d,footer:vt.some(p),extraClasses:v,extraBehaviours:[],extraStyles:{}},r,h,c),y=WM({getRoot:a(b),getBody:function(){return qD.getBody(b)},getFooter:function(){return qD.getFooter(b)},getFormWrapper:function(){var t=qD.getBody(b);return td.getCurrent(t).getOr(t)}},i.redial,g),{dialog:b,instanceApi:y});return qD.show(w.dialog),w.instanceApi.setData(x),w.instanceApi}),t)}(t,o)},openUrl:function(t,e){return n=e,fB.openUrl((function(t){var e=function(t,e,n,o){var r,i,u,a=FM(t.title,o),c=(i={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Jx({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Ja([ey.config({}),Ag.config({})])})]}],behaviours:Ja([Og.config({mode:"acyclic",useTabstopAt:x(Zx)})])},qD.parts.body(i)),s=t.buttons.bind((function(t){return 0===t.length?vt.none():vt.some(UM({buttons:t},o))})),d=KM((function(){return w}),RM((function(){return y}),o.shared.providers,e)),m=O(O({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),p=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new QM(t.url,{base_uri:new QM(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),b=ac(),y=NM({header:a,body:c,footer:s,extraClasses:p,extraBehaviours:[im("messages",[Qi((function(){var e=sc(Mt.fromDom(window),"message",(function(e){var o,r;h.isSameOrigin(new QM(e.raw.origin))&&(GM(o=e.raw.data)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!g(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,w,o):!GM(r=o)&&f(r)&&Tt(r,"mceAction")&&t.onMessage(w,o))}));b.set(e)})),Zi(b.clear)]),tc.config({channels:((r={})[_B]={onReceive:function(t,e){Du(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(e,v)}))}},r)})],extraStyles:m},t,d,o),w={block:function(t){if(!l(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");S((function(e){hr(e,ly,{message:t})}))},unblock:function(){S((function(t){pr(t,fy)}))},close:function(){S((function(t){pr(t,uy)}))},sendMessage:function(t){S((function(e){e.getSystem().broadcastOn([_B],t)}))}};function S(t){u.getSystem().isConnected()&&t(u)}return{dialog:u=y,instanceApi:w}}(t,{closeWindow:function(){qD.hide(e.dialog),n(e.instanceApi)}},c,u);return qD.show(e.dialog),e.instanceApi}),t);var n},alert:function(t,e){d.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){m.open(t,(function(t){e(t)}))}}}var qM=function t(e){function n(e){return t(e)}var o=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;if(n.version="2.3.8",n.removed=[],!o||!o.document||9!==o.document.nodeType)return n.isSupported=!1,n;var r,i=o.document,u=o.document,a=o.DocumentFragment,c=o.HTMLTemplateElement,s=o.Node,l=o.Element,f=o.NodeFilter,d=o.NamedNodeMap,m=void 0===d?o.NamedNodeMap||o.MozNamedAttrMap:d,g=o.HTMLFormElement,p=o.DOMParser,h=o.trustedTypes,v=l.prototype,b=oM(v,"cloneNode"),y=oM(v,"nextSibling"),x=oM(v,"childNodes"),w=oM(v,"parentNode");"function"!=typeof c||(r=u.createElement("template")).content&&r.content.ownerDocument&&(u=r.content.ownerDocument);var S=function(t,e){if("object"!==TB(t)||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix",r="dompurify"+((n=e.currentScript&&e.currentScript.hasAttribute(o)?e.currentScript.getAttribute(o):n)?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(h,i),k=S?S.createHTML(""):"",C=u,O=C.implementation,_=C.createNodeIterator,T=C.createDocumentFragment,E=C.getElementsByTagName,D=i.importNode,A={};try{A=nM(u).documentMode?u.documentMode:{}}catch(e){}var B={};function M(t){return t instanceof RegExp||t instanceof Function}function F(t){St&&St===t||(t=nM(t=t&&"object"===TB(t)?t:{}),G="ALLOWED_TAGS"in t?eM({},t.ALLOWED_TAGS):X,q="ALLOWED_ATTR"in t?eM({},t.ALLOWED_ATTR):Y,pt="ADD_URI_SAFE_ATTR"in t?eM(nM(ht),t.ADD_URI_SAFE_ATTR):ht,mt="ADD_DATA_URI_TAGS"in t?eM(nM(gt),t.ADD_DATA_URI_TAGS):gt,ft="FORBID_CONTENTS"in t?eM({},t.FORBID_CONTENTS):dt,J="FORBID_TAGS"in t?eM({},t.FORBID_TAGS):{},$="FORBID_ATTR"in t?eM({},t.FORBID_ATTR):{},I="USE_PROFILES"in t&&t.USE_PROFILES,Q=!1!==t.ALLOW_ARIA_ATTR,Z=!1!==t.ALLOW_DATA_ATTR,tt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,et=t.SAFE_FOR_TEMPLATES||!1,nt=t.WHOLE_DOCUMENT||!1,it=t.RETURN_DOM||!1,ut=t.RETURN_DOM_FRAGMENT||!1,at=t.RETURN_TRUSTED_TYPE||!1,rt=t.FORCE_BODY||!1,ct=!1!==t.SANITIZE_DOM,st=!1!==t.KEEP_CONTENT,lt=t.IN_PLACE||!1,W=t.ALLOWED_URI_REGEXP||W,xt=t.NAMESPACE||yt,t.CUSTOM_ELEMENT_HANDLING&&M(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&M(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(K.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),R=-1===wt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,N="application/xhtml+xml"===R?function(t){return t}:qB,et&&(Z=!1),ut&&(it=!0),I&&(G=eM({},AB(lM)),q=[],!0===I.html&&(eM(G,rM),eM(q,fM)),!0===I.svg&&(eM(G,iM),eM(q,dM),eM(q,gM)),!0===I.svgFilters&&(eM(G,uM),eM(q,dM),eM(q,gM)),!0===I.mathMl&&(eM(G,cM),eM(q,mM),eM(q,gM))),t.ADD_TAGS&&eM(G=G===X?nM(G):G,t.ADD_TAGS),t.ADD_ATTR&&eM(q=q===Y?nM(q):q,t.ADD_ATTR),t.ADD_URI_SAFE_ATTR&&eM(pt,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&eM(ft=ft===dt?nM(ft):ft,t.FORBID_CONTENTS),st&&(G["#text"]=!0),nt&&eM(G,["html","head","body"]),G.table&&(eM(G,["tbody"]),delete J.tbody),VB&&VB(t),St=t)}n.isSupported="function"==typeof w&&O&&void 0!==O.createHTMLDocument&&9!==A;var I,R,N,P,V=pM,H=hM,L=vM,z=bM,U=xM,j=wM,W=yM,G=null,X=eM({},[].concat(AB(rM),AB(iM),AB(uM),AB(cM),AB(lM))),q=null,Y=eM({},[].concat(AB(fM),AB(dM),AB(mM),AB(gM))),K=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),J=null,$=null,Q=!0,Z=!0,tt=!1,et=!1,nt=!1,ot=!1,rt=!1,it=!1,ut=!1,at=!1,ct=!0,st=!0,lt=!1,ft=null,dt=eM({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),mt=null,gt=eM({},["audio","video","img","source","image","track"]),pt=null,ht=eM({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",bt="http://www.w3.org/2000/svg",yt="http://www.w3.org/1999/xhtml",xt=yt,wt=["application/xhtml+xml","text/html"],St=null,kt=u.createElement("form"),Ct=eM({},["mi","mo","mn","ms","mtext"]),Ot=eM({},["foreignobject","desc","title","annotation-xml"]),_t=eM({},["title","style","font","a","script"]),Tt=eM({},iM);eM(Tt,uM),eM(Tt,aM);var Et=eM({},cM);function Dt(t){XB(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=k}catch(e){t.remove()}}}function At(t,e){try{XB(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){XB(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!q[t])if(it||ut)try{Dt(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}}function Bt(t){var e,n,o;rt?t="<remove></remove>"+t:o=(n=YB(t,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===R&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var r=S?S.createHTML(t):t;if(xt===yt)try{e=(new p).parseFromString(r,R)}catch(t){}if(!e||!e.documentElement){e=O.createDocument(xt,"template",null);try{e.documentElement.innerHTML=P?"":r}catch(t){}}var i=e.body||e.documentElement;return t&&o&&i.insertBefore(u.createTextNode(o),i.childNodes[0]||null),xt===yt?E.call(e,nt?"html":"body")[0]:nt?e.documentElement:i}function Mt(t){return _.call(t.ownerDocument||t,t,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)}function Ft(t){return"object"===TB(s)?t instanceof s:t&&"object"===TB(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function It(t,e,o){B[t]&&WB(B[t],(function(t){t.call(n,e,o,St)}))}function Rt(t){var e;if(It("beforeSanitizeElements",t,null),t instanceof g&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof m)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore))return Dt(t),1;if(QB(/[\u0080-\uFFFF]/,t.nodeName))return Dt(t),1;var o=N(t.nodeName);if(It("uponSanitizeElement",t,{tagName:o,allowedTags:G}),t.hasChildNodes()&&!Ft(t.firstElementChild)&&(!Ft(t.content)||!Ft(t.content.firstElementChild))&&QB(/<[/\w]/g,t.innerHTML)&&QB(/<[/\w]/g,t.textContent))return Dt(t),1;if("select"===o&&QB(/<template/i,t.innerHTML))return Dt(t),1;if(G[o]&&!J[o])return t instanceof l&&!function(t){var e=w(t);e&&e.tagName||(e={namespaceURI:yt,tagName:"template"});var n=qB(t.tagName),o=qB(e.tagName);return t.namespaceURI===bt?e.namespaceURI===yt?"svg"===n:e.namespaceURI===vt?"svg"===n&&("annotation-xml"===o||Ct[o]):Boolean(Tt[n]):t.namespaceURI===vt?e.namespaceURI===yt?"math"===n:e.namespaceURI===bt?"math"===n&&Ot[o]:Boolean(Et[n]):t.namespaceURI===yt&&(e.namespaceURI!==bt||Ot[o])&&(e.namespaceURI!==vt||Ct[o])&&!Et[n]&&(_t[n]||!Tt[n])}(t)||("noscript"===o||"noembed"===o)&&QB(/<\/no(script|embed)/i,t.innerHTML)?(Dt(t),1):(et&&3===t.nodeType&&(e=t.textContent,e=KB(e,V," "),e=KB(e,H," "),t.textContent!==e&&(XB(n.removed,{element:t.cloneNode()}),t.textContent=e)),It("afterSanitizeElements",t,null),0);if(!J[o]&&Vt(o)){if(K.tagNameCheck instanceof RegExp&&QB(K.tagNameCheck,o))return;if(K.tagNameCheck instanceof Function&&K.tagNameCheck(o))return}if(st&&!ft[o]){var r=w(t)||t.parentNode,i=x(t)||t.childNodes;if(i&&r)for(var u=i.length-1;0<=u;--u)r.insertBefore(b(i[u],!0),y(t))}return Dt(t),1}function Nt(t,e,n){if(ct&&("id"===e||"name"===e)&&(n in u||n in kt))return!1;if((!Z||$[e]||!QB(L,e))&&(!Q||!QB(z,e)))if(!q[e]||$[e]){if(!(Vt(t)&&(K.tagNameCheck instanceof RegExp&&QB(K.tagNameCheck,t)||K.tagNameCheck instanceof Function&&K.tagNameCheck(t))&&(K.attributeNameCheck instanceof RegExp&&QB(K.attributeNameCheck,e)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(e))||"is"===e&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&QB(K.tagNameCheck,n)||K.tagNameCheck instanceof Function&&K.tagNameCheck(n))))return!1}else if(!pt[e]&&!QB(W,KB(n,j,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==JB(n,"data:")||!mt[t])&&(!tt||QB(U,KB(n,j,"")))&&n)return!1;return!0}function Pt(t){It("beforeSanitizeAttributes",t,null);var e=t.attributes;if(e){for(var o={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q},r=e.length;r--;){var i,u=(i=e[r]).name,a=i.namespaceURI,c="value"===u?i.value:$B(i.value),s=N(u);if(o.attrName=s,o.attrValue=c,o.keepAttr=!0,o.forceKeepAttr=void 0,It("uponSanitizeAttribute",t,o),c=o.attrValue,!o.forceKeepAttr&&(At(u,t),o.keepAttr))if(QB(/\/>/i,c))At(u,t);else if(et&&(c=KB(c,V," "),c=KB(c,H," ")),Nt(N(t.nodeName),s,c))try{a?t.setAttributeNS(a,u,c):t.setAttribute(u,c),GB(n.removed)}catch(t){}}It("afterSanitizeAttributes",t,null)}}eM(Et,sM);var Vt=function(t){return 0<t.indexOf("-")};return n.sanitize=function(t,e){var r,u,c,l,f;if("string"!=typeof(t=(P=!t)?"\x3c!--\x3e":t)&&!Ft(t)){if("function"!=typeof t.toString)throw ZB("toString is not a function");if("string"!=typeof(t=t.toString()))throw ZB("dirty is not a string, aborting")}if(!n.isSupported){if("object"===TB(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof t)return o.toStaticHTML(t);if(Ft(t))return o.toStaticHTML(t.outerHTML)}return t}if(ot||F(e),n.removed=[],lt="string"!=typeof t&&lt){if(t.nodeName){var d=N(t.nodeName);if(!G[d]||J[d])throw ZB("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof s)1===(u=(r=Bt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===u.nodeName||"HTML"===u.nodeName?r=u:r.appendChild(u);else{if(!it&&!et&&!nt&&-1===t.indexOf("<"))return S&&at?S.createHTML(t):t;if(!(r=Bt(t)))return it?null:at?k:""}r&&rt&&Dt(r.firstChild);for(var m=Mt(lt?t:r);c=m.nextNode();)3===c.nodeType&&c===l||Rt(c)||(c.content instanceof a&&function t(e){var n,o=Mt(e);for(It("beforeSanitizeShadowDOM",e,null);n=o.nextNode();)It("uponSanitizeShadowNode",n,null),Rt(n)||(n.content instanceof a&&t(n.content),Pt(n));It("afterSanitizeShadowDOM",e,null)}(c.content),Pt(c),l=c);if(l=null,lt)return t;if(it){if(ut)for(f=T.call(r.ownerDocument);r.firstChild;)f.appendChild(r.firstChild);else f=r;return q.shadowroot?D.call(i,f,!0):f}var g=nt?r.outerHTML:r.innerHTML;return nt&&G["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&QB(SM,r.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+g),et&&(g=KB(g,V," "),g=KB(g,H," ")),S&&at?S.createHTML(g):g},n.setConfig=function(t){F(t),ot=!0},n.clearConfig=function(){St=null,ot=!1},n.isValidAttribute=function(t,e,n){return St||F({}),Nt(N(t),N(e),n)},n.addHook=function(t,e){"function"==typeof e&&(B[t]=B[t]||[],XB(B[t],e))},n.removeHook=function(t){if(B[t])return GB(B[t])},n.removeHooks=function(t){B[t]&&(B[t]=[])},n.removeAllHooks=function(){B={}},n}(),YM=Wv.deviceType.isTouch(),KM=function(t,e){function n(e,n){return Sr(e,(function(e,o){var r,i;r=e,i=function(r,i){n(t(),r,o.event,e)},KT.getState(r).get().each((function(t){i(t)}))}))}return T(T([],HM(n,e),!0),[n(cy,(function(t,e,n){e.onAction(t,{name:n.name})}))],!1)},JM=function(t,e,n){function o(e,n){return Sr(e,(function(e,o){var r,i;r=e,i=function(r,i){n(t(),r,o.event,e)},KT.getState(r).get().each((function(t){i(t.internalDialog)}))}))}return T(T([],HM(o,e),!0),[o(sy,(function(t,e){return e.onSubmit(t)})),o(iy,(function(t,e,n){e.onChange(t,{name:n.name})})),o(cy,(function(t,e,o,r){function i(){return Og.focusIn(r)}function u(t){return ae(t,"disabled")||ue(t,"aria-disabled").exists((function(t){return"true"===t}))}var a=gn(r.element),c=xa(a);e.onAction(t,{name:o.name,value:o.value}),xa(a).fold(i,(function(t){u(t)||c.exists((function(e){return Ut(t,e)&&u(e)}))?i():n().toOptional().filter((function(e){return!Ut(e.element,t)})).each(i)}))})),o(dy,(function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})})),Zi((function(e){var n=t();wf.setValue(e,n.getData())}))],!1)},$M=zM,QM=tinymce.util.Tools.resolve("tinymce.util.URI"),ZM=["insertContent","setContent","execCommand","close","block","unblock"];C.add("silver",(function(t){var e=FD(t),n=e.uiMothership,o=e.backstage,r=e.renderUI,i=e.getUi;return Xb(t,o.shared),{renderUI:r,getWindowManagerImpl:a(XM({editor:t,backstage:o})),getNotificationManagerImpl:function(){return e=t,r=n,i=o.shared,{open:function(t,n){function o(){n(),$g.hide(c)}var u=!t.closeButton&&t.timeout&&(0<t.timeout||t.timeout<0),a=Su(ap.sketch({text:t.text,level:wt(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:vt.from(t.icon),closeButton:!u,onAction:o,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),c=Su($g.sketch(O({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{}},i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));function s(){var t=Mn(Mt.fromDom(e.getContentAreaContainer())),n=Fn(),o=Ha(n.x,t.x,t.right),r=Ha(n.y,t.y,t.bottom),i=Math.max(t.right,n.right),u=Math.max(t.bottom,n.bottom);return vt.some(Bn(o,r,i-o,u-r))}return r.add(c),0<t.timeout&&ep.setTimeout((function(){o()}),t.timeout),{close:o,moveTo:function(t,e){$g.showAt(c,ku(a),{anchor:{type:"makeshift",x:t,y:e}})},moveRel:function(t,e){var n,o,r,u=ku(a),l={maxHeightFunction:Ec()};"banner"!==e&&h(t)?(n=function(){switch(e){case"bc-bc":return tp;case"tc-tc":return Zg;case"tc-bc":return Ga;default:return Xa}}(),o={type:"node",root:bn(),node:vt.some(Mt.fromDom(t)),overrides:l,layouts:{onRtl:function(){return[n]},onLtr:function(){return[n]}}},$g.showWithinBounds(c,u,{anchor:o},s)):(r=O(O({},i.anchors.banner()),{overrides:l}),$g.showWithinBounds(c,u,{anchor:r},s))},text:function(t){ap.updateText(a,t)},settings:t,getEl:function(){return a.element.dom},progressBar:{value:function(t){ap.updateProgress(a,t)}}}},close:function(t){t.close()},reposition:function(t){0<t.length&&St(t,(function(e,n){0===n?e.moveRel(null,"banner"):e.moveRel(t[n-1].getEl(),"bc-tc")}))},getArgs:function(t){return t.settings}};var e,r,i},ui:i()}}))}();