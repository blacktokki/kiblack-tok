{"version":3,"sources":["src/components/CommonSection.tsx","src/hooks/lists/useMessengerChannelList.ts","src/components/ModalSection.tsx","src/components/TextButton.tsx","src/hooks/lists/useMessengerMemberList.ts","src/navigation/index.tsx","src/hooks/useWebsocketContext.tsx","src/modals/ChannelEditModal.tsx","src/hooks/useIsMobile.ts","src/components/HeaderRight.tsx","src/apis/notification.ts","src/components/ContractFooter.tsx","src/screens/main/LoginScreen.tsx","src/components/LinkPreview.tsx","src/lib/react-native-webrtc/useWebsocketContext.tsx","src/lib/react-native-webrtc/webrtc/p2p.tsx","src/lib/react-native-webrtc/webrtc/index.ts","src/lib/react-native-webrtc/LocalCam.tsx","src/lib/react-native-webrtc/RemoteCam.tsx","src/screens/main/ChatScreen/VideoCallSection.tsx","src/components/FilePreview.tsx","src/screens/main/ChatScreen/TimerTags.tsx","src/hooks/lists/useTimerMessageContent.ts","src/screens/main/ChatScreen/index.tsx","src/screens/main/HomeScreen/ConfigSections.tsx","src/screens/main/HomeScreen/index.tsx","src/screens/main/InviteeScreen.tsx","src/screens/index.ts","src/components/Themed.tsx","src/hooks/lists/useUserMembershipList.ts","src/components/TabView.tsx","src/components/CommonItem.tsx","src/components/RowField.tsx","src/components/TextField.tsx","src/hooks/lists/useMessengerContentList.ts","src/components/Calendar.tsx","src/modals/DateTimePickerModal.tsx","src/modals/GuestLogoutModal.tsx","src/components/CommonTextInput.tsx","src/components/MemberItem.tsx","src/constants/Colors.ts","src/modals/MessageModal.tsx","src/modals/ProfileModal.tsx","src/components/Profile.tsx","src/hooks/useFirebaseContext.tsx","src/hooks/useLocalSearch.ts","src/modals/InviteModal.tsx","src/hooks/lists/useExternalMembershipList.ts","src/hooks/useColorScheme.ts","src/components/CommonButton.tsx","src/apis/axios.ts","src/lang/index.ts","src/hooks/useLangContext.tsx","src/hooks/useAuthContext.tsx","src/hooks/useModalsContext.tsx","src/apis/account.ts","src/apis/messenger.ts","src/navigation/LinkingConfiguration.ts","src/screens/NotFoundScreen.tsx","src/navigation/DrawerNavigator.tsx","src/modals/index.ts","src/navigation/RootNavigator.tsx","src/components/MobileSafeAreaView.tsx","App.tsx","src/hooks/useCachedResources.ts","src/hooks/useResizeContext.tsx","node_modules/moment/locale sync /^/.//.*$","src/lib/react-native-paper/Avatar.tsx","src/components/Avatar.tsx","web/firebase-config.js","src/assets/fonts/SpaceMono-Regular.ttf"],"names":["CommonSection","props","style","styles","outerContainer","outerContainerStyle","container","containerStyle","withSeparator","separator","lightColor","darkColor","undefined","title","titleView","titleStyle","subtitle","bodyView","bodyStyle","children","StyleSheet","create","width","maxWidth","alignItems","backgroundColor","marginHorizontal","marginVertical","flexDirection","marginBottom","flex","fontSize","textAlign","marginTop","height","padding","justifyContent","borderWidth","borderColor","Colors","borderRadius","useMessengerChannelList","auth","queryClient","useQueryClient","lastJsonMessage","useWebsocketContext","data","useQuery","a","async","user","id","getMessengerChannelList","useEffect","setQueryData","_data","find","v","sort","b","map","channel","last_message","content","message_set","created","useMessengerChannelSorted","channelList","useMessengerChannelMutation","useMutation","postChannel","onSuccess","invalidateQueries","update","putChannel","direct","postDirectChannel","mutateAsync","windowType","useResizeContext","alignSelf","flexShrink","margin","BottomSheet","useMessengerMemberList","channel_id","getMessengerMemberList","useMessengerMemberMutation","invite","postBulkMessengerMember","leave","deleteMessengerMember","navigationRef","React","navigate","name","params","current","Navigation","defaultColorScheme","useDefaultColorScheme","userColorScheme","useColorScheme","colorScheme","ref","documentTitle","formatter","options","route","linking","process","versions","LinkingConfiguration","theme","DarkTheme","DefaultTheme","l","search","decoded","slice","split","s","replace","join","window","history","replaceState","pathname","hash","location","ignoreWarnings","_console","_","clone","console","warn","message","Object","forEach","value","indexOf","defaultContext","sendJsonMessage","WebSocketContext","createContext","SCHEMA","DOMAIN","WebSocketInternalProvider","path","Context","useBackground","useState","token","setToken","AppState","currentState","isActive","setIsActive","useWebSocket","shouldReconnect","closeEvent","protocols","onOpen","e","log","onClose","AsyncStorage","getItem","then","onChange","nextState","addEventListener","removeEventListener","Provider","WebSocketProvider","disable","useContext","ChannelEditModal","member_id","type","lang","useLangContext","useAuthContext","setModal","useModalsContext","channelMutation","messengerMemberMutation","setName","description","setDescription","back","_name","avatarFromChannel","setValue","multiline","onPress","groupId","newChannel","owner","group","screen","field","useMobileDetect","isMobile","Platform","OS","dispatch","defaultButtonProps","username","endsWith","GuestLogoutModal","buttonProps","extra","filter","k","key","textStyle","color","getNotification","user_id","axios","get","length","postNotification","notification","post","putNotification","put","openURL","url","href","Linking","View","Styles","footer_buttons","footer_button","AntDesign","size","iconColor","paddingBottom","paddingRight","login_container","login_header","paddingTop","login_header_logo","resizeMode","login_header_text","login_header_text_bold","fontWeight","login_wrapper","borderTopRightRadius","borderTopLeftRadius","form","form_error","form_error_text","textAlignVertical","form_input","paddingHorizontal","button","button_label","login_social","login_social_separator","login_social_separator_line","login_social_separator_text","login_social_buttons","login_social_button","login_social_icon","login_social_facebook","login_footer_text","guest_footer_text","login_footer_link","link","image","Image","source","uri","maxHeight","peerConstraints","iceServers","JSON","parse","sessionConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","VoiceActivityDetection","mediaConstraints","audio","video","framerate","onICEcandidate","pc","_message","rtcMessage","candidate","RTCIceCandidate","addIceCandidate","sendICEcandidate","event","sendMessage","receiver","target","optimizeSdp","offerDescription","arr","sdp","str","i","test","RTCSessionDescription","createOffer","pcRefCurrent","stream","addStream","setLocalDescription","camStyle","cam","bottonContainer","position","bottom","buttonBar","label","pcRef","useRef","sender","setSender","_stream","setStream","isPlay","useMemo","CustomRTCView","useCallback","memo","videoProps","start","mode","mediaDevices","getUserMedia","newStream","getDisplayMedia","catch","entries","error","stop","getTracks","track","websocketOnMessage","response","channel_name","peerConnection","RTCPeerConnection","answerDescription","setRemoteDescription","useLocalCam","Text","Button","setReceiver","setUser","close","clearInterval","statsInterval","iceConnectionState","activeStream","setInterval","getStats","stats","statsOutput","framePerSecond","report","kind","keys","statName","framesPerSecond","Date","toTimeString","addTransceiver","direction","streams","getRemoteStreams","createAnswer","localDescription","useRemoteCam","TextInput","onChangeText","VideoView","scale","flexGrow","focusGuest","setFocusGuest","VideoCallContainer","setDisable","useIsMobile","videoMode","setVideoMode","guests","setGuests","useRtcContext","Math","max","ceil","sqrt","toggleVideoMode","Themed","aspectRatio","borderLeftWidth","borderBottomWidth","flexWrap","RemoteCam","LocalCam","CommonButton","Ionicons","file","showBorder","FontAwesome","filename","floor","pow","toFixed","humanFileSize","filesize","_timerFormat","m","now","year","format","month","day","TimerTag","moment","end","timer","ratio","diff","TouchableOpacity","setExpand","isExpand","overflow","paddingVertical","Avatar","userId","selectable","linkDefault","wordBreak","linkStyle","timerMessages","getTimerMessageContentList","HTML5_FMT","DATETIME_LOCAL","sorted","ms","min","Number","MAX_VALUE","timeout","setTimeout","clearTimeout","useTimerMessageContentList","setNow","expand","MessengerContentPageItem","nextPage","next","nextContent","index2","date","isSystem","isFirst","isSelf","ownerId","dayChanged","marginLeft","onLongPress","MessageModal","file_set","fileIndex","FilePreview","link_set","linkIndex","LinkPreview","ConfigSection","text","locale","setLocale","configTheme","useConfigColorScheme","useFirebaseContext","noti","enable","setNoti","setEnable","n","TextButton","textDecorationLine","setColorScheme","MemberTabView","userList","useUserMembershipList","memberItem","item","index","MemberItem","member","ProfileModal","background","MessengerTabView","today","toISOString","avatar","CommonItem","marginRight","opacity","paddingLeft","member_count","unread_count","ConfigTabView","ConfigSections","getBottomTabs","OneTab","component","icon","MaterialCommunityIcons","TwoTab","FourTab","SimpleLineIcons","InviteeScreen","navigation","enterGuest","setEnterGuest","useLayoutEffect","setOptions","headerRight","user_ids","main","HomeScreen","home","setHome","HeaderRight","tab","ContractFooter","TabView","tabs","tabBarPosition","parseInt","onTab","setParams","ChatScreen","inputRef","channelAvatar","useMessengerContentList","fetchNextPage","memberList","setTimer","autoFocus","setAutoFocus","bottomTab","setBottomTab","postValue","contentMutation","useMessengerContentMutation","InviteModal","datetime","renderItem","canGoBack","goBack","focus","minWidth","VideoCallSection","d","contentContainerStyle","pages","onScroll","nativeEvent","contentOffset","y","contentSize","onLayout","p","layout","TimerTags","borderBottomRightRadius","top","Entypo","DateTimePickerModal","callback","onSubmitEditing","blurOnSubmit","onFocus","borderBottomLeftRadius","Promise","resolve","reject","input","document","createElement","onchange","files","onabort","onerror","click","f","disabled","login","LoginScreen","setUsername","password","setPassword","_login","placeholder","autoCapitalize","keyboardType","secureTextEntry","modal","useThemeColor","colorName","colorFromProps","otherProps","light","dark","getUserMembershipList","setIndex","icons","assign","renderTabBar","indicatorStyle","activeColor","inactiveColor","renderIcon","scene","onTabPress","findIndex","navigationState","routes","onIndexChange","renderScene","SceneMap","setHover","press","setPress","onPressIn","onPressOut","onHoverIn","onHoverOut","minHeight","RowField","rowStyle","TextField","CommonTextInput","useInfiniteQuery","pageParam","getMessengerContentList","select","getNextPageParam","lastPage","refetchOnReconnect","refetchOnWindowFocus","pageParams","page","len","newCurrent","postMessage","_delete","deleteMessengerContent","variables","mutate","delete","LocaleConfig","locales","monthNames","months","monthNamesShort","monthsShort","dayNames","weekdays","dayNamesShort","weekdaysShort","defaultLocale","Calendar","markingType","markedDates","renderArrow","monthFormat","initialDate","disableAllTouchEventsForDisabledDays","onMonthChange","onDayPress","setDate","dateString","dayComponent","dayTypes","hours","Array","toString","padStart","minutes","getDisableDays","startDate","startOf","add","endDate","endOf","result","push","DATE","_moment","restMinute","defaultMoment","dayType","setDayType","hour","setHour","minute","setMinute","disableDays","setDisableDays","reduce","c","selected","itemStyle","selectedValue","onValueChange","Item","contentHeight","setContentHeight","editable","onContentSizeChange","onBlur","onEndEditing","tint","tabIconDefault","tabIconSelected","header","buttonColor","buttonBackgroundColor","buttonBorderColor","Clipboard","setString","subowner","patchUser","finally","firebaseConfig","require","messagingSenderId","apiKeyEncrypted","charCodeAt","app","firebase","initializeApp","apiKey","messaging","onMessage","payload","Notification","permission","body","alert","requestToken","requestPermission","navigator","serviceWorker","register","serviceWorkerRegistration","scope","getToken","vapidKey","currentToken","preventDefault","unregister","notiListener","_enable","changeEnable","localSearchReducer","initialState","action","keyword","active","Error","InviteItem","selectedRef","has","setSelected","GroupTabView","compare","useReducer","searchState","useLocalSearch","memberSet","Set","includes","dispatchKeyword","ExternalMembershipTabView","setKeyword","copied","setCopied","timeoutRef","externalMemberList","getExternalMembershipList","useExternalMembershipList","inviteLink","drawerTabs","external","ModalSection","useInitColorScheme","complete","setComplete","Appearance","set","setItem","useTheme","DefaultButton","hover","_props","accountURL","defaultOption","baseURL","withCredentials","headers","_axios","interceptors","request","use","config","status","r","defaults","removeItem","translations","ko","RNLocalize","languageTag","isRTL","I18nManager","forceRTL","intl","createIntl","messages","createIntlCache","IntlContext","IntlProvider","formatMessage","defaultMessage","AuthContext","authReducer","AuthProvider","authState","setError","membership_set","g","root_group_id","checkLogin","logout","ModalsContext","ModalsProvider","allModals","modals","setModals","animationType","setAnimationType","visible","Component","newModals","transparent","guestLogin","checkLoginToken","isOffline","code","startsWith","getUserList","group_id","patch","ids","updated","deleteChannel","id_lt","id_lt_param","results","timer_gt","formData","FormData","append","content_id","values","ROOTPATH","prefixes","screens","Main","NotFound","NotFoundScreen","linkText","DrawerTabView","MessengerTab","colors","onAddList","tabBar","card","borderTopColor","border","pointerEvents","Profile","accessibilityRole","borderTopWidth","drawerTab","Tab","elevation","borderRightWidth","Root","createStackNavigator","RootNavigator","Navigator","headerMode","screenOptions","cardStyle","animationEnabled","cardStyleInterpolator","CardStyleInterpolators","forVerticalIOS","Screen","MainNavigator","headerShown","gestureDirection","modalValues","DrawerNavigator","headerStyle","headerTitleStyle","headerLeft","canGOBackScreen","headerLeftContainerStyle","forHorizontalIOS","innerHeight","setHeight","Dimensions","QueryClient","App","isLoadingComplete","setLoadingComplete","SplashScreen","Font","font","useCachedResources","isAppearenceComplete","MobileSafeAreaView","client","StatusBar","getWindowType","ResizeContextContext","ResizeContextProvider","detectMobile","useWindowDimensions","setWindowType","webpackContext","req","webpackContextResolve","__webpack_require__","o","module","exports","normalizeHash","initHash","abs","stringToHSL","toUpperCase"],"mappings":"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","file":"static/js/app.9b79668c.chunk.js","sourcesContent":["import * as React from 'react';\nimport { View, Text } from './Themed';\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle } from 'react-native';\nimport Colors from '../constants/Colors';\n\nexport type SectionParamList = {\n    title?: string,\n    titleStyle?:StyleProp<TextStyle>\n    outerContainerStyle?:StyleProp<TextStyle>\n    containerStyle?:StyleProp<ViewStyle>\n    bodyStyle?:StyleProp<ViewStyle>\n    subtitle?: string\n    withSeparator?: boolean\n    children?: React.ReactNode\n}\n\nexport default function CommonSection(props:SectionParamList){\n  return (\n    <View style={[styles.outerContainer, props.outerContainerStyle]}>\n        <View style={[styles.container, props.containerStyle]}>\n            {props.withSeparator?<View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />:undefined}\n            {props.title?<View style={styles.titleView}>\n              <Text style={[styles.title, props.titleStyle]}>{props.title}</Text>\n              <Text style={styles.subtitle}>{props.subtitle}</Text>\n            </View>:undefined}\n            <View style={[styles.bodyView, props.bodyStyle]}>\n            {props.children}\n            </View>\n          </View>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n  outerContainer:{\n    width:'100%',\n    maxWidth:1080,\n    alignItems:'stretch',\n    backgroundColor:'transparent'\n  },  \n  container: {\n      marginHorizontal:20,\n      marginVertical: 10,\n      backgroundColor:'transparent',\n    },\n    titleView:{\n      width: '100%',\n      flexDirection:'row',\n      backgroundColor:'transparent',\n      marginBottom:5,\n    },\n    title: {\n      flex:1,\n      fontSize: 16,\n    },\n    subtitle: {\n      flex:1,\n      fontSize: 12,\n      textAlign: 'right',\n      marginTop:4\n    },\n    separator: {\n      marginBottom: 20,\n      height: 1,\n      width: '100%',\n    },\n    bodyView:{\n      width: '100%',\n      padding: 20,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderWidth:1,\n      borderColor:Colors.borderColor,\n      borderRadius:6\n    }\n  });\n  ","import { useEffect } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { getMessengerChannelList, postChannel, postDirectChannel, putChannel } from \"../../apis\";\nimport { MessengerChannel, MessengerContent } from \"../../types\";\nimport { Auth } from \"../useAuthContext\";\nimport useWebsocketContext from \"../useWebsocketContext\";\n\nexport default function useMessengerChannelList(auth?:Auth){\n  const queryClient = useQueryClient()\n  const {lastJsonMessage} = useWebsocketContext()\n  const { data } = useQuery(\"MessengerChannelList\" , async()=>auth?.user?.id?(await getMessengerChannelList(auth.user.id)):[])\n\n  useEffect(()=>{\n    if(lastJsonMessage !=null){\n      if(lastJsonMessage['type']=='enter'){\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>{\n          return (_data?.find(v=>v.id==lastJsonMessage['data']['id'])?_data:[lastJsonMessage['data'] , ...(_data|| [])]).sort((a, b)=>a.id - b.id)\n        })\n      }\n      if (lastJsonMessage['type']=='next_message'){\n        const data:MessengerContent = lastJsonMessage['data']\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>(_data || []).map(v=>{\n          if (v.id == data.channel){\n            return {...v, last_message:{content:data.message_set[0]?.content, created:data.created}}\n          }\n          return v\n        }))\n      }\n      // if(lastJsonMessage['type']=='leave'){\n      //   queryClient.setQueryData<Channel[]>(\"MessengerChannelList\", (_data)=>_data?.filter(v=>v.id!=lastJsonMessage['data']['channel_id']) || [])\n      // }\n    }\n  }, [lastJsonMessage])\n  return data\n}\n\nexport function useMessengerChannelSorted(auth?:Auth){\n  const channelList = useMessengerChannelList(auth);\n  return channelList?.sort((a, b)=>(a.last_message?.created || '') < (b.last_message?.created || '')?1:-1)\n}\nexport function useMessengerChannelMutation(){\n  const queryClient = useQueryClient()\n\n  const create = useMutation(postChannel, {\n    onSuccess: ()=>queryClient.invalidateQueries(\"MessengerChannelList\")\n  });\n\n  const update = useMutation(putChannel, {\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\n  })\n\n  const direct = useMutation(postDirectChannel, {\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\n  })\n\n  return { create:create.mutateAsync, update:update.mutateAsync, direct:direct.mutateAsync}\n}","import React from 'react'\nimport CommonSection from \"./CommonSection\";\nimport useResizeContext from '../hooks/useResizeContext';\n\nexport default (props:{children?: React.ReactNode})=>{\n    const windowType = useResizeContext();\n    return <CommonSection\n        outerContainerStyle={{flex:1, alignSelf:'center', backgroundColor:'#8888', maxWidth:undefined, flexShrink:1}}\n        containerStyle={{flex:1, margin:0, justifyContent:'center', alignItems:'center'}}\n        bodyStyle={windowType=='landscape'?{width:'90%', height:'90%', padding:'5%'}:{width:'100%', height:'100%', maxWidth:1080}}\n    >\n        {props.children}\n    </CommonSection>\n}\n\nexport const BottomSheet = (props:{children?: React.ReactNode})=><CommonSection\n    outerContainerStyle={{flex:1, alignSelf:'center', backgroundColor:'#8888', maxWidth:undefined}}\n    containerStyle={{flex:1, margin:0, justifyContent:'flex-end'}}\n>\n    {props.children}\n</CommonSection>","import React, { useState } from 'react';\nimport { StyleSheet} from 'react-native';\nimport { CustomButtonProps } from '../types';\nimport CommonButton from './CommonButton';\n\nexport default (props:CustomButtonProps)=>{\n    return <CommonButton {...props} style={[styles.style, props.style]}/>\n}\n\nconst styles = StyleSheet.create({\n    style:{\n        borderRadius:6, \n        backgroundColor: 'transparent',\n        borderWidth:0\n    },\n});\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { postBulkMessengerMember, deleteMessengerMember, getMessengerMemberList } from \"../../apis\";\n\nexport default function useMessengerMemberList(channel_id:number){\n  const { data } = useQuery([\"MessengerMemberList\", channel_id] , async()=>await getMessengerMemberList(channel_id))\n  return data\n}\n\n\nexport function useMessengerMemberMutation(){\n  const queryClient = useQueryClient()\n  const invite = useMutation(postBulkMessengerMember, {\n    onSuccess: ()=>{\n      queryClient.invalidateQueries(\"MessengerMemberList\")\n    }\n  })\n\n  const leave = useMutation(deleteMessengerMember, {\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"MessengerChannelList\")\n      queryClient.invalidateQueries(\"MessengerMemberList\")\n    }\n  })\n  return {invite:invite.mutateAsync, leave:leave.mutateAsync}\n}","/**\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\n * https://reactnavigation.org/docs/getting-started\n *\n */\nimport _ from 'lodash';\nimport { NavigationContainer, DefaultTheme, DarkTheme, NavigationContainerRef } from '@react-navigation/native';\nimport * as React from 'react';\n\nimport LinkingConfiguration from './LinkingConfiguration';\nimport RootNavigator from './RootNavigator';\n\nimport { useColorScheme as useDefaultColorScheme } from 'react-native';\nimport { useColorScheme as useColorScheme } from 'react-native-appearance';\nimport { ResizeContextProvider } from '../hooks/useResizeContext';\n\n\nconst navigationRef = React.createRef<NavigationContainerRef>();\n\nexport function navigate(name:string, params?:any) {\n  if (params)\n    navigationRef.current?.navigate(name, params);\n  navigationRef.current?.navigate(name);\n}\n\nexport default function Navigation() {\n  const defaultColorScheme = useDefaultColorScheme()\n  const userColorScheme = useColorScheme()\n  const colorScheme = userColorScheme =='no-preference'?defaultColorScheme:userColorScheme\n  return <NavigationContainer\n    ref={navigationRef}\n    documentTitle={{formatter: (options, route) => {return `TOKKI TOK`}}}\n    linking={(process.versions && process.versions['electron'])?undefined:LinkingConfiguration}\n    theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n        <ResizeContextProvider>\n          <RootNavigator />\n        </ResizeContextProvider>\n  </NavigationContainer>\n}\n\n(function(l) {  // for github-page\n    if (l !== undefined && l.search[1] === '/' ) {\n        var decoded = l.search.slice(1).split('&').map(function(s) { \n        return s.replace(/~and~/g, '&')\n        }).join('?');\n        window.history.replaceState(null, '',\n            l.pathname.slice(0, -1) + decoded + l.hash\n        );\n    }\n}(window.location))\n    \nconst ignoreWarnings = ['ReactNativeFiberHostComponent'];\nconst _console = _.clone(console);\nconsole.warn = (message: string|Object) => {\n    var warn = true;\n    if (message instanceof Object)\n    warn = false;\n    else{\n    ignoreWarnings.forEach((value)=>{\n        if (message.indexOf && message.indexOf(value) <= -1) {\n            warn = false;\n        }\n    })\n    };\n    if (warn){\n        _console.warn(message);\n    }\n    else{\n        // console.log(message)\n    }\n};\n","import React, { Context, createContext,  useContext, useEffect, useState } from \"react\"\nimport useWebSocket from \"react-use-websocket\"\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\"\n// @ts-ignore\nimport {API_URL} from \"@env\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { AppState, AppStateStatus } from \"react-native\";\n\ntype WebsocketContextType = {lastJsonMessage:any, sendJsonMessage:SendJsonMessage }\nconst defaultContext = {lastJsonMessage:undefined, sendJsonMessage:()=>{}}\nconst WebSocketContext = createContext<WebsocketContextType>(defaultContext);\nconst [SCHEMA, DOMAIN] = `${API_URL}`.split('://')\n\nexport const WebSocketInternalProvider = ({children, path, Context, useBackground}:{children:React.ReactNode, path:string, Context:Context<WebsocketContextType>, useBackground?:boolean})=>{\n  const [token, setToken] = useState<string|null>(null)\n  const [isActive, setIsActive] = useState<boolean>(useBackground || AppState.currentState == 'active')\n  const { lastJsonMessage, sendJsonMessage } = useWebSocket(`${SCHEMA=='https'?'wss':'ws'}://${DOMAIN}/${path}`,{\n    shouldReconnect: (closeEvent) => true,\n    protocols: token?['Authorization',  token]:undefined,\n    onOpen: (e)=>{console.log(`success websocket connection(${path})`)},\n    onClose: (e)=> {console.log(`closed websocket connection(${path})`)},\n  }, isActive && token!=null)\n  useEffect(()=>{\n    AsyncStorage.getItem('Authorization').then(setToken)\n    const onChange = (nextState:AppStateStatus)=>setIsActive(useBackground || nextState == 'active')\n    AppState.addEventListener(\"change\", onChange)\n    return ()=>AppState.removeEventListener(\"change\", onChange)\n  }, [])\n  return <Context.Provider value={token!=null?{lastJsonMessage, sendJsonMessage}:defaultContext}>\n      {children}\n    </Context.Provider>\n}\n\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\n  return disable?<>{children}</>:<WebSocketInternalProvider path={'messenger/ws/'} Context={WebSocketContext}>\n    {children}\n  </WebSocketInternalProvider>\n}\n\nexport default ()=>{\n  const webSocketContext = useContext(WebSocketContext)\n  return webSocketContext\n}\n\n","import React, {useState, useEffect } from 'react';\nimport { StyleSheet } from 'react-native';\nimport { View, Text } from '../components/Themed';\nimport CommonButton from '../components/CommonButton';\n// import useBoardChannelList, { useBoardChannelMutation } from '../hooks/lists/useBoardChannelList';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { navigate } from '../navigation';\nimport { Channel } from '../types';\nimport useMessengerChannelList, { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\nimport TextField from '../components/TextField';\nimport useModalsContext from '../hooks/useModalsContext';\nimport useLangContext from '../hooks/useLangContext';\nimport ModalSection from '../components/ModalSection';\nimport { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\nimport { avatarFromChannel } from '../components/Avatar';\n\nexport default function ChannelEditModal({id, member_id, type}: {id?:number, member_id?:number, type:string}) {\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const channelList = useMessengerChannelList(auth)\n  const channelMutation = useMessengerChannelMutation()\n  const messengerMemberMutation = useMessengerMemberMutation()\n  const channel = channelList?.find(v=>v.id==id)\n  const [name, setName] = useState('')\n  const [description, setDescription] = useState('')\n  const back = ()=>{\n    setModal(ChannelEditModal, null)\n  }\n\n  useEffect(()=>{\n    if (channel){\n      const {name:_name} = avatarFromChannel(channel, auth.user)\n      setName(_name)\n      setDescription(channel?.description || '')\n    }\n  }, [channel])\n  return <ModalSection>\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\n      <View style={{width:'100%'}}>\n        <Text style={{fontSize:20}}>{id?lang('Chat Setting'):lang('New chat')}</Text>\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n        <TextField name={lang('Channel Name')} value={name} setValue={setName} width={'60%'}/>\n        <TextField name={lang('Description')} value={description} setValue={setDescription} multiline width={'60%'}/>\n      </View>\n      <View style={{width:'100%', flexDirection:'row'}}>\n        {member_id &&<View style={{flexDirection:'row', justifyContent:'flex-start'}}>\n          <CommonButton title={lang('leave')} style={{marginHorizontal:5}} onPress={()=>messengerMemberMutation.leave(member_id).then(back)}/>\n        </View>}\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\n          <CommonButton title={lang('save')} onPress={()=>{\n            if(auth?.user?.id && auth.groupId){\n              const newChannel:Channel = {id, name, description, type, owner:auth?.user?.id, group:auth.groupId};\n              (id?channelMutation.update(newChannel):channelMutation.create(newChannel)).then(v=>navigate(\"Main\", {\n                screen:v.type == 'messenger'?'ChatScreen':'BoardScreen',\n                params:{id:v.id}\n              }))\n            }\n          }}/>\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\n        </View>\n      </View>\n    </View>\n  </ModalSection>\n}\n\nconst styles = StyleSheet.create({\n  field:{\n    width:'50%',\n    flexDirection:'row',\n    padding:10,\n  },\n  separator: {\n    marginBottom: 20,\n    height: 1,\n    width: '100%',\n  },\n})","import { Platform } from 'react-native';\n//@ts-ignore\nimport useMobileDetect from 'use-mobile-detect-hook';\n\nexport default ()=>{\n    const detectMobile = useMobileDetect();\n    return (detectMobile.isMobile() || Platform.OS == 'android' || Platform.OS == 'ios') as boolean\n}","import React from 'react'\nimport TextButton from \"./TextButton\"\nimport useAuthContext from \"../hooks/useAuthContext\"\nimport useResizeContext from '../hooks/useResizeContext'\nimport { View } from 'react-native'\nimport useModalsContext from '../hooks/useModalsContext'\nimport GuestLogoutModal from '../modals/GuestLogoutModal'\nimport useLangContext from '../hooks/useLangContext'\n\ntype ButtonProps = {title:string, onPress:()=>void, windowType?:'landscape'|'portrait'}\n\nexport default (props:{extra?:ButtonProps[]})=>{\n    const { lang } = useLangContext()\n    const {auth, dispatch} = useAuthContext()\n    const { setModal } = useModalsContext()\n    const windowType = useResizeContext()\n    const defaultButtonProps:ButtonProps[] = [{title:lang('sign out'), onPress:()=>{\n        if (auth?.user?.username.endsWith(\".guest\")){\n            setModal(GuestLogoutModal, {})\n        }\n        else{\n            dispatch({type:\"LOGOUT_REQUEST\"})\n        }\n    }}]\n    const buttonProps = (props.extra?[...props.extra, ...defaultButtonProps]:defaultButtonProps).filter(v=>v.windowType==windowType || v.windowType == undefined)\n    return<View style={{flexDirection:'row'}}>\n        {buttonProps.map((v,k)=><TextButton key={k} {...v} textStyle={{color:'white'}} color='#gray'/>)}\n    </View>\n}\n  ","import { Notification } from '../types';\nimport axios from './axios';\n\nexport const getNotification = async (user_id:number)=>{\n    const data = (await axios.get(`/api/v1/notifications/?type=WEB&user=${user_id}`) ).data as Notification[]\n    return data.length?data[0]:undefined\n}\n\nexport const postNotification = async(notification:Notification)=>{\n    return (await axios.post(`/api/v1/notifications/`, notification)).data as Notification\n}\n\nexport const putNotification = async(notification:Notification)=>{\n    return (await axios.put(`/api/v1/notifications/${notification.id}/`, notification)).data as Notification\n}","import React from 'react'\nimport { View, StyleSheet, Linking, Platform } from 'react-native'\nimport { TouchableOpacity } from 'react-native-gesture-handler'\nimport { AntDesign } from '@expo/vector-icons'; \nimport useColorScheme from '../hooks/useColorScheme';\nimport Colors from '../constants/Colors';\n\nconst openURL = Platform.OS=='web'?(url:string)=>{location.href=url}:Linking.openURL\n\nexport default ()=>{\n    const theme = useColorScheme()\n    return<View style={Styles.footer_buttons}>\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>openURL(\"https://github.com/blacktokki/tokki-tok\")}>\n            <AntDesign name=\"github\" size={24} color={Colors[theme].iconColor} />\n        </TouchableOpacity>\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>Linking.openURL(\"mailto:ydh051541@naver.com\")}>\n            <AntDesign name=\"mail\" size={24} color={Colors[theme].iconColor} />\n        </TouchableOpacity>\n    </View>\n}\n\nconst Styles = StyleSheet.create({\n      footer_buttons: {\n        width: '100%',\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        paddingBottom: 20,\n        paddingRight: 20,\n      },\n      footer_button: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: 38,\n        height: 38,\n        marginHorizontal: 12,\n        borderWidth: 1,\n        borderColor: '#E7E7E7',\n        borderRadius: 60,\n      },\n})","import React, {useLayoutEffect, useState} from 'react';\nimport {\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n  StyleSheet,\n} from 'react-native';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useAuthContext from '../../hooks/useAuthContext';\nimport useLangContext from '../../hooks/useLangContext';\nimport ContractFooter from '../../components/ContractFooter';\n\nexport default function LoginScreen({\n  navigation, route\n}: StackScreenProps<any, 'Login'>) {\n  const { lang } = useLangContext()\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const {error, dispatch} = useAuthContext()\n  const _login = ()=>dispatch({type:'LOGIN_REQUEST', username, password})\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: undefined\n    });\n  }, [navigation, route]);\n\n  return (<View style={Styles.login_container}>\n    <View style={Styles.login_wrapper}>\n      <View style={Styles.form}>\n        {error && <View style={Styles.form_error}>\n          <Text style={Styles.form_error_text}>{lang(error)}</Text>\n        </View>}\n        <TextInput\n          style={Styles.form_input}\n          value={username}\n          placeholder={lang('Username')}\n          onChangeText={(text) => setUsername(text)}\n          autoCapitalize={'none'}\n          keyboardType={'email-address'}\n          onSubmitEditing={_login}\n        />\n        <TextInput\n          style={Styles.form_input}\n          value={password}\n          placeholder={lang('Password')}\n          secureTextEntry\n          onChangeText={(text) => setPassword(text)}\n          onSubmitEditing={_login}\n        />\n        <TouchableOpacity onPress={_login}>\n          <View style={Styles.button}>\n            <Text style={Styles.button_label}>{lang('Sign in')}</Text>\n          </View>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => dispatch({type:\"LOGIN_GUEST\"})}>\n          <Text style={Styles.guest_footer_text}>\n            {lang(\"Sign in as guest\")}\n          </Text>\n        </TouchableOpacity>\n      </View>\n      <View style={Styles.login_social}>\n        <View style={Styles.login_social_separator}>\n          <View style={Styles.login_social_separator_line} />\n          <Text style={Styles.login_social_separator_text}>{'*'}</Text>\n          <View style={Styles.login_social_separator_line} />\n        </View>\n        <View style={Styles.login_social_buttons}>\n        </View>\n      </View>\n      {/* <>\n        <TouchableOpacity onPress={() => navigate(\"RegistrationScreen\")}>\n          <Text style={Styles.login_footer_text}>\n            {\"Don't have an account? \"}\n            <Text style={Styles.login_footer_link}>{'Sign up'}</Text>\n          </Text>\n        </TouchableOpacity>\n      </> */}\n    </View>\n    <ContractFooter/>\n  </View>);\n};\n\nconst Styles = StyleSheet.create({\n    login_container: {\n      flex: 1,\n      backgroundColor: '#FFF',\n    },\n    login_header: {\n      alignItems: 'center',\n      paddingTop: 30,\n      paddingBottom: 50,\n      backgroundColor: '#208AEC',\n    },\n    login_header_logo: {\n      width: 220,\n      resizeMode: 'contain',\n    },\n    login_header_text: {\n      marginTop: 15,\n      color: '#f0f0f0',\n      fontSize: 16,\n    },\n    login_header_text_bold: {\n      color: '#fff',\n      fontWeight: 'bold',\n    },\n    login_wrapper: {\n      flex: 1,\n      justifyContent: 'space-between',\n      paddingTop: 40,\n      borderTopRightRadius: 12,\n      borderTopLeftRadius: 12,\n      backgroundColor: '#fff',\n      alignItems: 'center',\n    },\n    form: {\n      width: '100%',\n      maxWidth: 320,\n    },\n    form_error: {\n      height: 22,\n      width:'100%',\n    },\n    form_error_text:{\n      textAlignVertical:'center',\n      color:'red',\n      fontSize:13,\n    },\n    form_input: {\n      height: 44,\n      paddingHorizontal: 20,\n      marginBottom: 20,\n      backgroundColor: '#EDF0F7',\n      borderRadius: 50,\n    },\n    button: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: 44,\n      backgroundColor: '#0065A4',\n      borderRadius: 50,\n    },\n    button_label: {\n      color: '#fff',\n      fontSize: 16,\n    },\n    login_social: {\n      width: '100%',\n      maxWidth: 280,\n      marginTop: 20,\n    },\n    login_social_separator: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    login_social_separator_line: {\n      flex: 1,\n      width: '100%',\n      height: 1,\n      backgroundColor: '#E0E0E0',\n    },\n    login_social_separator_text: {\n      marginHorizontal: 10,\n      color: '#808080',\n      fontSize: 16,\n    },\n    login_social_buttons: {\n      flexDirection: 'row',\n      justifyContent: 'center',\n      marginTop: 20,\n    },\n    login_social_button: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: 60,\n      height: 60,\n      marginHorizontal: 12,\n      borderWidth: 1,\n      borderColor: '#E7E7E7',\n      borderRadius: 60,\n    },\n    login_social_icon: {\n      width: 38,\n      height: 38,\n      resizeMode: 'contain',\n    },\n    login_social_facebook: {\n      backgroundColor: '#4267B2',\n      borderColor: '#4267B2',\n    },\n    login_footer_text: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      color: '#808080',\n      fontSize: 14,\n    },\n    guest_footer_text: {\n      flexDirection: 'row',\n      alignSelf: 'center',\n      color: '#808080',\n      fontSize: 15,\n      margin: 15\n    },\n    login_footer_link: {\n      color: '#208AEC',\n      fontSize: 15,\n      fontWeight: 'bold',\n    },\n  });\n  ","import React from 'react'\nimport { TouchableOpacity } from \"react-native-gesture-handler\"\nimport CommonSection from \"./CommonSection\"\nimport { Image, Linking, TextStyle } from \"react-native\"\nimport { View, Text } from \"./Themed\"\nimport { Link } from \"../types\"\n\n\n\nexport default ({link, isMobile}:{link:Link, isMobile:boolean})=>{\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={{padding:0}}>\n    <TouchableOpacity onPress={()=>Linking.openURL(link.url)} style={{flexDirection:'row'}} containerStyle={{width:'100%'}}>\n        {link.image && <Image source={{uri:link.image}} resizeMode=\"cover\" style={{ width:'100%', maxWidth:isMobile?120:150, maxHeight:isMobile?120:150, borderWidth:1}}/>}\n        <View style={{flex:1, marginHorizontal:20}}>\n        <Text style={{fontSize:18}}>{link.title}</Text>\n        <Text style={{fontSize:14}}>{link.description}</Text>\n        <Text style={{fontSize:12}}>{link.url}</Text>\n        </View>\n    </TouchableOpacity>\n    </CommonSection>\n}","import React, { createContext, useContext } from \"react\"\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\";\nimport { WebSocketInternalProvider } from \"../../hooks/useWebsocketContext\";\n\nconst WebSocketContext = createContext<{lastJsonMessage:any, sendJsonMessage:SendJsonMessage }>({lastJsonMessage:undefined, sendJsonMessage:()=>{}});\n\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\n  return disable?<></>:<WebSocketInternalProvider path={'messenger/ws/rtc/'} Context={WebSocketContext} useBackground>\n    {children}\n  </WebSocketInternalProvider>\n}\n\nexport default ()=>{\n  const webSocketContext = useContext(WebSocketContext)\n  return webSocketContext\n}\n\n","import React, { useCallback, useRef, useState, useMemo } from \"react\";\n//@ts-ignore\nimport { RTCView, mediaDevices, RTCPeerConnection, MediaStream, RTCSessionDescription, RTCIceCandidate } from \"react-native-webrtc-web-shim\";\n// @ts-ignore\nimport {TURN_SERVER} from \"@env\"\n\n\nconsole.log(TURN_SERVER?\"use turn server\": \"use stun server\")\n\nexport const peerConstraints = {\n\ticeServers: [TURN_SERVER?JSON.parse(TURN_SERVER):{urls: 'stun:stun.l.google.com:19302'}]\n};\n\nexport const sessionConstraints = {\n\tmandatory: {\n\t\tOfferToReceiveAudio: true,\n\t\tOfferToReceiveVideo: true,\n\t\tVoiceActivityDetection: true\n\t}\n};\n\nconst mediaConstraints = {audio:true, video:{framerate:30}}\n\n//@ts-ignore\nexport {MediaStream, RTCPeerConnection, RTCSessionDescription} from \"react-native-webrtc-web-shim\";\n\nconst onICEcandidate = (pc:typeof RTCPeerConnection, message:any)=>{\n\tconst _message = message.data.rtcMessage\n\t\tconst candidate = new RTCIceCandidate(_message);\n\t\tif (pc) {\n\t\t\tconsole.log(\"ICE candidate Added\");\n\t\t\tpc.addIceCandidate(candidate);\n\t\t}\n}\n\nconst sendICEcandidate = (event:any, sendMessage:(data:any)=>void, receiver:string, target:string) => {\n\t// When you find a null candidate then there are no more candidates.\n\t// Gathering of candidates has finished.\n\tif ( !event.candidate ) { return; };\n\t// Send the event.candidate onto the person you're calling.\n\t// Keeping to Trickle ICE Standards, you should send the candidates immediately.\n\tsendMessage({type:'ICEcandidate', receiver, data:{target, rtcMessage:event.candidate}})\n  }\n\nconst BAND_WIDTH = 8000\n\nconst optimizeSdp = (offerDescription:RTCSessionDescription)=>{\n\tvar arr = offerDescription.sdp.split('\\r\\n');\n\tarr.forEach((str:string, i:number) => {\n\t\tif (/^a=fmtp:\\d*/.test(str)) {\n\t\t\tarr[i] = str + `;x-google-max-bitrate=${BAND_WIDTH};x-google-min-bitrate=${BAND_WIDTH};x-google-start-bitrate=${BAND_WIDTH}`;\n\t\t} else if (/^a=mid:(0|video)/.test(str)) { // if with audio then 0=>1\n\t\t\tarr[i] += `\\r\\nb=AS:${BAND_WIDTH}`;\n\t\t}\n\t});\n  \treturn new RTCSessionDescription({\n    \ttype: offerDescription.type,\n    \tsdp: arr.join('\\r\\n'),\n  \t})\n}\n\nconst createOffer = async(pcRefCurrent:{pc?:typeof RTCPeerConnection, receiver:string}, sendMessage:(data:any)=>void, stream:typeof MediaStream, target:string, user?:{name:string})=>{\n\tstream && pcRefCurrent.pc.addStream( stream );\n\tconst offerDescription = optimizeSdp((await pcRefCurrent.pc.createOffer( sessionConstraints )));\n\tawait pcRefCurrent.pc.setLocalDescription( offerDescription );\n\tsendMessage({type:'call', receiver:pcRefCurrent.receiver, data:{target, name:user?.name, rtcMessage:offerDescription}})\n}\n\nexport const useLocalCam = (sendMessage:(data:any)=>void)=>{\n\tconst pcRef = useRef<Record<number,{pc:typeof RTCPeerConnection, receiver:string}>>({})\n\tconst [sender, setSender] = useState<string>()\n\tconst [_stream, setStream] = useState<MediaStream>()\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\n\tconst CustomRTCView = useCallback(React.memo(({style}:{style:any})=>(_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>)) , [_stream])\n\tconst start = useCallback(async(user:{name:string}, stream?:typeof MediaStream, mode?:'camera'|'display')=>{\n\t\tconsole.log(\"start\");\n\t\tif (!_stream || mode!==undefined) {\n\t\t\ttry {\n\t\t\t\tlet newStream:typeof MediaStream;\n\t\t\t\tif(mode == 'camera'){\n\t\t\t\t\tnewStream = await mediaDevices.getUserMedia(mediaConstraints)\n\t\t\t\t}\n\t\t\t\telse if (mode == 'display'){\n\t\t\t\t\tnewStream = await mediaDevices.getDisplayMedia(mediaConstraints)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewStream = stream || await mediaDevices.getUserMedia(mediaConstraints).catch((e:any)=>mediaDevices.getDisplayMedia(mediaConstraints));\n\t\t\t\t}\n\t\t\t\tsetStream(newStream)\n\t\t\t\tObject.entries(pcRef.current).map(([k, v])=>{\n\t\t\t\t\tcreateOffer(v, sendMessage, newStream, 'guest', user)\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}, [_stream])\n\tconst stop = useCallback(()=>{\n\t\tconsole.log(\"stop\");\n\t\tif(_stream){\n\t\t\t_stream.getTracks().map((track:any) => track.stop());\n\t\t\tsetStream(undefined)\n\t\t}\n\t}, [_stream])\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\twebsocketOnMessage: async(response:any, user:{name:string})=>{\n\t\t\tlet type = response.type;\n\t\t\tif (type == 'connection'){\n\t\t\t\tsetSender(response.data.channel_name)\n\t\t\t}\n\t\t\tif (type == 'start' && response.data.target=='host'){\n\t\t\t  console.log('1 start')\n\t\t\t  const peerConnection = new RTCPeerConnection( peerConstraints );\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'guest'));\n\t\t\t  pcRef.current[response.sender] = {pc:peerConnection, receiver: response.sender}\n\t\t\t  createOffer(pcRef.current[response.sender], sendMessage, _stream, 'guest', user)\n\t\t\t}\n\t\t\t\n\t\t\tif (type == \"answer\" && response.data.target == 'host'){\n\t\t\t  console.log('3 answer')\n\t\t\t  const peerConnection = pcRef.current[response.sender].pc\n\t\t\t  const answerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t  await peerConnection.setRemoteDescription( answerDescription );\n\t\t\t  // const streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t  // setMirrorStream(streams[streams.length - 1])\n\t\t\t}\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='host'){\n\t\t\t\tconst peerConnection = pcRef.current[response.sender].pc\n\t\t\t\tonICEcandidate(peerConnection, response)\n\t\t\t}\n\t\t},\n\t\tCustomRTCView,\n\t\tisPlay,\n\t\tsender,\n\t\t// renderMirrorView,\n\t}\n}\n\nexport const useRemoteCam = (sendMessage:(data:any)=>void)=>{\n\tconst pcRef = useRef<{pc?:RTCPeerConnection, receiver?:string, statsInterval?:any}>({})\n\tconst [user, setUser] = useState<{name:string}>()\n\tconst [_stream, setStream] = useState<MediaStream>()\n\tconst CustomRTCView = useCallback(React.memo((style:any)=>_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>), [_stream])\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\n\tconst start = useCallback((receiver:string)=>{\n\t\tconsole.log(\"start\");\n\t\tif (!pcRef.current.pc) {\n\t\t  pcRef.current.pc = new RTCPeerConnection( peerConstraints );\n\t\t  pcRef.current.receiver = receiver\n\t\t}\n\t\tif (!_stream){\n\t\t\tsendMessage({type:'start', receiver, data:{'target': 'host'}})\n\t\t}\n\t}, [_stream])\n\tconst stop = () => {\n\t\tconsole.log(\"stop\");\n\t\tif (pcRef.current.pc) {\n\t\t  // peerConnection._unregisterEvents();\n\t\t  setStream(undefined)\n\t\t  pcRef.current.pc.close();\n\t\t  pcRef.current.pc = undefined\n\t\t  pcRef.current.receiver = undefined\n\t\t  clearInterval(pcRef.current.statsInterval)\n\t\t}\n\t}\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\twebsocketOnMessage: async(response:any)=>{\n\t\t\tlet type = response.type;\n\t\t\tif (type == 'start' && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\n\t\t\t\tconsole.log('(remote)1 start')\n\t\t\t\tconst peerConnection = pcRef.current.pc\n\t\t\t\tsetUser({name: response.data.name})\n\t\t\t\tpeerConnection.addEventListener('icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\n\t\t\t\tpeerConnection.addEventListener('iceconnectionstatechange', (e:any)=>{\n\t\t\t\t\tif (pcRef.current.pc.iceConnectionState == 'connected'){\n\t\t\t\t\t\tlet activeStream = false\n\t\t\t\t\t\tpcRef.current.statsInterval = setInterval(async()=>{\n\t\t\t\t\t\t\tconst stats = await pcRef.current.pc.getStats(null)\n\t\t\t\t\t\t\tlet statsOutput = \"\";\n\t\t\t\t\t\t\tlet framePerSecond = undefined\n\t\t\t\t\t\t\tstats.forEach((report:any) => {\n\t\t\t\t\t\t\t\tif (report.type === \"inbound-rtp\" && report.kind === \"video\") {\n\t\t\t\t\t\t\t\t\tObject.keys(report).forEach((statName) => {\n\t\t\t\t\t\t\t\t\t\tstatsOutput += `${statName}: ${report[statName]}\\n`;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tframePerSecond = report.framesPerSecond\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(activeStream, framePerSecond)\n\t\t\t\t\t\t\tif (framePerSecond != undefined){\n\t\t\t\t\t\t\t\tactiveStream = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (activeStream){\n\t\t\t\t\t\t\t\tstop()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(new Date().toTimeString().split(' ')[0], statsOutput)\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t\telse if (pcRef.current.pc.iceConnectionState == 'failed'){\n\t\t\t\t\t\tstop()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// peerConnection.addTransceiver('audio', {\n\t\t\t\t// \tdirection: 'recvonly'\n\t\t\t\t// });\n\t\t\t\tpeerConnection.addTransceiver('video', {\n\t\t\t\t\tdirection: 'recvonly'\n\t\t\t\t});\n\t\t\t\tawait createOffer({pc:pcRef.current.pc, receiver:response.sender}, sendMessage, _stream, 'host', user)\n\t\t\t}  \n\t\t\tif (type == \"answer\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\n\t\t\t\tconsole.log('(remote)3 answer')\n\t\t\t\tconst answerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t\tawait pcRef.current.pc.setRemoteDescription( answerDescription );\n\t\t\t\tconst streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t\tsetStream(streams[streams.length - 1])\n\t\t\t\tsendMessage({type:'end', receiver:pcRef.current.receiver, data:{}})\n\t\t\t}\n\t\t\tif (type == \"call\" && response.sender == pcRef.current?.receiver){\n\t\t\t  console.log('2 call')\n\t\t\t  const peerConnection = pcRef.current.pc\n\t\t\t  setUser({name:response.data.name})\n\t\t\t  if (!peerConnection)\n\t\t\t\treturn\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\n\t\t\t  const offerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t  await peerConnection.setRemoteDescription( offerDescription );\n\t\t\t  const answerDescription = await peerConnection.createAnswer( sessionConstraints );\n\t\t\t  await peerConnection.setLocalDescription( answerDescription );\n\t\t\t  sendMessage({type:'answer', receiver:pcRef.current.receiver, data:{target:'host', rtcMessage:peerConnection.localDescription}})\n\t\t\t  // Here is a good place to process candidates.\n\t\t\t  const streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t  setStream(streams[streams.length - 1])\n\t\t\t}\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver)\n\t\t\t  onICEcandidate(pcRef.current.pc, response)\n\t\t},\n\t\tCustomRTCView,\n\t\tuser,\n\t\tisPlay\n\t}\n}","import {StyleSheet} from \"react-native\";\nexport {useLocalCam, useRemoteCam} from \"./p2p\"\n\nexport const camStyle = StyleSheet.create({\n\tcontainer:{ flex: 1},\n\tcam:{ flex: 1, height:'100%'},\n\tbottonContainer: {position:\"absolute\", bottom:0, justifyContent:'flex-end'},\n\tbuttonBar: { flexDirection: \"row\", justifyContent: \"space-around\" },\n\tlabel: {backgroundColor:'#0008', color:'white', paddingHorizontal:5},\n})","import React, { useEffect } from \"react\";\nimport {Button, View, Text} from \"react-native\";\nimport useWebsocketContext from \"./useWebsocketContext\";\nimport { useLocalCam, camStyle} from \"./webrtc\";\n\n\nexport default (props:{user?:{name:string}|null, mode?:'camera'|'display'|null})=>{\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay} = useLocalCam(sendJsonMessage)\n  useEffect(()=>{\n    props.user && lastJsonMessage && websocketOnMessage(lastJsonMessage, props.user)\n  }, [lastJsonMessage, props.user])\n  useEffect(()=>{\n    if(props.mode && !isPlay){\n      props.user && start(props.user, undefined, props.mode)\n    }\n    else if(props.mode===null && isPlay){\n      stop()\n    }\n    return ()=>{isPlay && stop()}\n  }, [isPlay, props.user, props.mode])\n  return (\n    <View style={camStyle.container}>\n      <CustomRTCView style={camStyle.cam}/>\n      <View style={camStyle.bottonContainer}>\n        <View style={camStyle.buttonBar}>  \n        </View>\n        <View style={{flexDirection:'row'}}><Text style={camStyle.label}>{props.user?.name}</Text></View>\n        <View style={camStyle.buttonBar}>\n          {props.mode === undefined && !isPlay && <Button title=\"Start\" onPress={()=>props.user && start(props.user)} />}\n          {props.mode === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\n        </View>\n      </View>\n    </View>\n  );\n}\n","import React, { useState, useEffect, } from \"react\";\nimport {Button,Text, TextInput, View} from \"react-native\";\nimport useWebsocketContext from \"./useWebsocketContext\";\nimport { useRemoteCam, camStyle} from \"./webrtc\";\n\nexport default (props:{receiver?:string})=>{\n  const [receiver, setReceiver] = useState('')\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay, user} = useRemoteCam(sendJsonMessage)\n  useEffect(()=>{\n    lastJsonMessage && websocketOnMessage(lastJsonMessage)\n  }, [lastJsonMessage])\n  useEffect(()=>{\n    if(props.receiver){\n      start(props.receiver)\n    }\n    return ()=>stop()\n  }, [props.receiver])\n  return (\n    <View style={camStyle.container}>\n      <CustomRTCView style={camStyle.cam}/>\n      <View style={camStyle.bottonContainer}>\n        <View style={camStyle.buttonBar}>\n        </View>\n        <View style={{flexDirection:'row'}}>{\n          (props.receiver || isPlay)?\n          <Text style={camStyle.label}>{user?.name || 'loading...'}</Text>:\n          <>\n            <Text style={{borderWidth:1}}>Receiver:&nbsp;</Text>\n            <TextInput style={{borderWidth:1, flex:1}} value={receiver} onChangeText={setReceiver}/>\n          </> \n        }</View>\n        <View style={camStyle.buttonBar}>\n          {props.receiver === undefined && !isPlay && <Button title=\"Start\" onPress={()=>start(receiver)} />}\n          {props.receiver === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\n        </View>\n      </View>\n    </View>\n  );\n}\n\n","import React, {useEffect, useState} from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport { View as ThemedView } from '../../../components/Themed' \nimport Colors from '../../../constants/Colors';\nimport {default as useRtcContext, WebSocketProvider as RtcProvider} from \"../../../lib/react-native-webrtc/useWebsocketContext\";\nimport LocalCam from '../../../lib/react-native-webrtc/LocalCam';\nimport RemoteCam from '../../../lib/react-native-webrtc/RemoteCam';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport CommonButton from '../../../components/CommonButton';\nimport { Ionicons } from '@expo/vector-icons';\nimport useIsMobile from '../../../hooks/useIsMobile';\n\ntype VideoType = 'camera'|'display'|null\ntype VideoCallProps = {channel_id:number, setDisable:(disable:boolean)=>void, disable?:boolean}\n\n\nconst VideoView = (props:{\n  scale:string,\n  focusGuest?:string,\n  setFocusGuest:(focusGuest?:string)=>void\n  receiver?:string\n  children:React.ReactNode\n})=>{\n  return <View style={[{maxWidth:props.scale, maxHeight:props.scale, borderWidth:1, borderColor:Colors.borderColor, backgroundColor:'gray', flexDirection:'row', flexGrow:1}, (props.focusGuest == undefined || props.focusGuest == props.receiver)?{height:'100%'}:{maxWidth:0, height:0}]}>\n    <TouchableOpacity style={{flex:1}} containerStyle={{flex:1, justifyContent:'center'}} onPress={()=>props.setFocusGuest(props.focusGuest?undefined:props.receiver)}>\n    {props.children}\n    </TouchableOpacity>\n  </View>\n    \n  \n}\n\nconst VideoCallContainer = ({channel_id, disable, setDisable}:VideoCallProps)=>{\n  const {auth} = useAuthContext()\n  const isMobile = useIsMobile()\n  const [videoMode, setVideoMode] = useState<VideoType>(null)\n  const [guests, setGuests] = useState<string[]>([])\n  const [focusGuest, setFocusGuest] = useState<string>()\n  const windowType = useResizeContext()\n  const { lastJsonMessage, sendJsonMessage } = useRtcContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null){\n      if(lastJsonMessage['type']=='connection'){\n        sendJsonMessage({'type':'broadcast', 'data':{'channel_id':channel_id}})\n      }\n      if(lastJsonMessage['type']=='broadcast_guest' || lastJsonMessage['type']=='broadcast_host'){\n        setGuests([...guests, lastJsonMessage['sender']])\n      }\n      if(lastJsonMessage['type']=='broadcast_disconnect'){\n        const channel_name = lastJsonMessage['sender']\n        const exist = guests.find(v=>v == channel_name)\n        exist && setGuests(guests.filter(v=>v != channel_name))\n      }\n    }\n  }, [lastJsonMessage])\n  const scale = focusGuest?'100%':`${100 / Math.max(2, Math.ceil(Math.sqrt(guests.length + 1)))}%`\n  const toggleVideoMode = (mode:VideoType)=>{\n    setVideoMode(videoMode!=mode?mode:null)\n  }\n  return lastJsonMessage !==undefined ?\n    <ThemedView style={[\n      {aspectRatio:!disable?16/9:0, borderColor:Colors.borderColor, borderRadius:10},\n      windowType=='landscape'?{flexShrink:1, flexGrow:0, height:'100%', borderLeftWidth:1, paddingBottom:65}:{maxHeight:'36%', width:'100%', borderBottomWidth:1}\n    ]}>\n      <View style={{aspectRatio:focusGuest?undefined:16/9, backgroundColor:'white', flexWrap:'wrap', flexDirection:'row', width:'100%', height:'100%'}}>\n        {guests.map((receiver, i)=><VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={receiver}>\n          <RemoteCam receiver={receiver}/>\n        </VideoView>\n        )}\n        <VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={auth.user?.name}>\n          <LocalCam user={auth.user} mode={videoMode}/>\n        </VideoView>\n      </View>\n      <ThemedView style={[\n          {position:'absolute', alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\n          windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\n        ]}>\n        <CommonButton title={'⏺️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('camera')}/>\n        {!isMobile && <CommonButton title={'🖥️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('display')}/>}\n        <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>setDisable(true)}>\n          <Ionicons size={20} name=\"arrow-back\" color={'deepskyblue'}/>\n        </CommonButton>\n      </ThemedView>\n    </ThemedView>:\n  <></>\n  }\n  \nexport default React.memo(({channel_id, disable, setDisable}:VideoCallProps)=>{\n  return <RtcProvider disable={disable}>\n    <VideoCallContainer channel_id={channel_id} disable={disable} setDisable={setDisable}/>\n  </RtcProvider>\n})\n","import React from 'react'\nimport { TouchableOpacity } from \"react-native-gesture-handler\"\nimport CommonSection from \"./CommonSection\"\nimport { Linking, TextStyle } from \"react-native\"\nimport { FontAwesome } from '@expo/vector-icons'; \nimport { View, Text } from \"./Themed\"\nimport { File } from \"../types\"\nimport useColorScheme from '../hooks/useColorScheme';\nimport Colors from '../constants/Colors';\n\nfunction humanFileSize(size:number) {\n    var i = size == 0 ? 0 : Math.floor(Math.log(size) / Math.log(1024));\n    return (size / Math.pow(1024, i)).toFixed(2) + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n  }\n  \n\nexport default ({file, isMobile, showBorder}:{file:File, isMobile:boolean, showBorder:boolean})=>{\n    const theme = useColorScheme()\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={showBorder?{padding:10}:{borderWidth:0, padding:0}}>\n    <TouchableOpacity onPress={()=>Linking.openURL(file.file)} style={{flexDirection:'row', alignItems:'flex-start'}} containerStyle={{width:'100%'}}>\n        <FontAwesome name=\"file-o\" size={20} color={Colors[theme].iconColor} />\n        <View style={{flex:1, marginHorizontal:10}}>\n            <Text style={{fontSize:18}}>{file.filename}</Text>\n            <Text style={{fontSize:14}}>{humanFileSize(file.filesize)}</Text>\n        </View>\n    </TouchableOpacity>\n    </CommonSection>\n}","import React, {useState, useEffect} from \"react\"\nimport moment from \"moment\";\nimport {View, TouchableOpacity} from 'react-native'\nimport { Text } from \"../../../components/Themed\";\nimport useTimerMessageContentList from \"../../../hooks/lists/useTimerMessageContent\";\nimport { MessengerContent } from \"../../../types\";\nimport Avatar from \"../../../components/Avatar\";\nimport Hyperlink from \"react-native-hyperlink\";\n\nexport function timerFormat(datetime:string){\n    return _timerFormat(moment(datetime), moment())\n}\n\nfunction _timerFormat(m:moment.Moment, now:moment.Moment){\n    if (m.year() != now.year()){\n        return m.format('YYYY.MM')\n    }\n    if(m.month()!= now.month() || m.day() != now.day()){\n        return m.format('MM.DD')\n    }\n    return m.format('HH:mm')\n  }\n\nconst TimerTag = (props:{data:MessengerContent, now:moment.Moment, isExpand:boolean, setExpand:(id?:number)=>void})=>{\n    const start = moment(props.data.created)\n    const end = moment(props.data.timer)\n    const ratio = (start.diff(props.now)/start.diff(end))\n    return <TouchableOpacity onPress={()=>props.setExpand(props.isExpand?undefined:props.data.id)}>\n        <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\n            <View style={{backgroundColor:'darkgray', position:'absolute', width:`${ratio*100}%`, height:'100%'}}/>\n            {props.isExpand?\n            <View style={{paddingVertical:5, paddingHorizontal:5, maxWidth:270}}>\n                <View style={{flexDirection:'row'}}>\n                    <Avatar name={props.data.name} userId={props.data.user} size={20}/>\n                    <View style={{paddingHorizontal:5}}><Text>{props.data.name}</Text></View>\n                </View>\n                <View style={{flexDirection:'row', alignItems:'stretch'}}>\n                    <Text>⌚</Text>\n                    <Text selectable>{moment(props.data.timer).format('L HH:mm')}</Text>\n                </View>\n                {/* @ts-ignore */}\n                <Hyperlink linkDefault={ true } style={{wordBreak:\"break-word\"}} linkStyle={{color: '#12b886'}}>\n                    <Text selectable>{props.data.message_set[0].content}</Text>\n                </Hyperlink>\n            </View>:    \n            <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\n                <Avatar name={props.data.name} userId={props.data.user} size={20}/>\n                <View style={{paddingHorizontal:5}}><Text>{_timerFormat(end, props.now)}</Text></View>\n            </View>}\n        </View>\n    </TouchableOpacity>\n}\n\n\nexport default (props:{channel_id:number})=>{\n    const timerMessages = useTimerMessageContentList(props.channel_id)\n    const [now, setNow] = useState(moment())\n    const [expand, setExpand] = useState<number>()\n    useEffect(()=>{\n        const timeout = setTimeout(()=>{\n            setNow(moment())\n        }, 2000)\n        return ()=>clearTimeout(timeout)\n    }, [now])\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:20}}>\n        {timerMessages?.map((v,i)=><TimerTag key={i} data={v} now={now} isExpand={v.id==expand} setExpand={setExpand}/>)}\n    </View>\n}","import { useEffect, useMemo } from \"react\"\nimport { useQuery, useQueryClient } from \"react-query\"\nimport { getTimerMessageContentList } from \"../../apis\"\nimport { MessengerContent } from \"../../types\"\nimport useWebsocketContext from \"../useWebsocketContext\"\nimport moment from \"moment\"\n\nexport default function useTimerMessageContentList(channel_id:number){  \n  const queryClient = useQueryClient()\n  const { data } = useQuery<MessengerContent[]>(\n    [\"TimerMessageContentList\", channel_id], \n    async()=>await getTimerMessageContentList(channel_id, moment().format(moment.HTML5_FMT.DATETIME_LOCAL)), \n  )\n  const { lastJsonMessage } = useWebsocketContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null && lastJsonMessage['data']['channel'] == channel_id){\n      if(lastJsonMessage['type']=='next_message'){\n        if(lastJsonMessage['data']['timer'] && moment() < moment(lastJsonMessage['data']['timer']))\n          queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\n            return [...(_data || []), lastJsonMessage['data']]\n          })\n      }\n      if(lastJsonMessage['type']=='delete_message'){\n        queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\n          return [...(_data?.filter(v=>v.id!=lastJsonMessage['data'].id) || [])]\n        })\n      }\n    }\n  }, [lastJsonMessage])\n  const sorted = useMemo(()=>data?.sort((a, b)=>(a.timer || '') > (b.timer || '')?1:-1), [data])\n  useEffect(()=>{\n    if (sorted?.[0]?.timer){\n      const id = sorted[0].id\n      const ms = Math.min(moment(sorted[0].timer).diff(moment()), Number.MAX_VALUE)\n      let timeout = setTimeout(()=>{\n        queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\n          return (_data || []).filter(v=>v.id!=id || moment(v.timer).diff(moment()) > 0)\n        })\n      }, ms)\n      return ()=>clearTimeout(timeout)\n    }\n  },[sorted])\n  return sorted\n}\n","import React, {useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState} from 'react';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport { Platform, StyleSheet, View, TouchableOpacity } from 'react-native';\nimport CommonSection from '../../../components/CommonSection';\nimport { FlatList, TextInput } from 'react-native-gesture-handler';\nimport CommonButton from '../../../components/CommonButton';\nimport useMessengerContentList, { MessengerContentPage, useMessengerContentMutation } from '../../../hooks/lists/useMessengerContentList';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport HeaderRight from '../../../components/HeaderRight';\nimport useMessengerMemberList from '../../../hooks/lists/useMessengerMemberList';\nimport Colors from '../../../constants/Colors';\nimport useColorScheme from '../../../hooks/useColorScheme';\nimport { Text, View as ThemedView } from '../../../components/Themed' \nimport Hyperlink from 'react-native-hyperlink'\nimport useMessengerChannelList from '../../../hooks/lists/useMessengerChannelList';\nimport useIsMobile from '../../../hooks/useIsMobile';\nimport LinkPreview from '../../../components/LinkPreview';\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\nimport VideoCallSection from './VideoCallSection';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport FilePreview from '../../../components/FilePreview';\nimport useModalsContext from '../../../hooks/useModalsContext';\nimport InviteModal from '../../../modals/InviteModal';\nimport DateTimePickerModal from '../../../modals/DateTimePickerModal'\nimport useLangContext from '../../../hooks/useLangContext';\nimport { Entypo } from '@expo/vector-icons';\nimport TimerTags, { timerFormat } from './TimerTags';\nimport moment from 'moment';\nimport MessageModal from '../../../modals/MessageModal';\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\n\n\nfunction uploadFile(){\n  return new Promise<Blob|undefined>((resolve, reject)=>{\n    if (Platform.OS == 'web'){\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.onchange = e => { \n        resolve((e.target as any).files[0])\n      }\n      input.onabort = reject\n      input.onerror = reject\n      input.click();\n    }\n    else\n      resolve(undefined)\n  })\n}\n\nconst MessengerContentPageItem = React.memo((props:MessengerContentPage & {ownerId?:number})=>{\n  const isMobile = useIsMobile()\n  const { setModal } = useModalsContext()\n  let nextPage = props.next;\n    while(nextPage?.next && nextPage.current.length==0){\n      nextPage = nextPage.next\n    }\n    const nextContent = nextPage?.current[0]\n    return <View style={{flexDirection: 'column-reverse'}}>\n      \n      {props.current.map((content, index2)=>{\n        const next = index2 + 1 < props.current.length?props.current[index2+1]:nextContent\n        const created:string = content.created.slice(0, 16)\n        const date = created.slice(0, 10)\n        const isSystem = content.user == null\n        const isFirst = next==undefined || (content.user != next.user || created != next.created.slice(0, 16))\n        const isSelf = props.ownerId == content.user\n        const dayChanged = next==undefined || date != next.created.slice(0, 10)\n        const message = content.message_set[0]\n        const openModal = ()=>setModal(MessageModal, {id:content.id, content:message.content})\n        if (isSystem)\n          return <View key={content.id} style={{flexDirection:'row', justifyContent:'center', width:'100%', marginVertical:5}}>\n            <Text>{message.content}</Text>\n          </View>\n        return <View key={content.id}>\n          {dayChanged?<View style={{flexDirection:'row', justifyContent:'center', width:'100%'}}><Text>{date}</Text></View>:undefined}\n          <View key={content.id} style={{flexDirection:'row', justifyContent:isSelf?'space-between':'flex-start', width:'100%'}}>\n            {isFirst && !isSelf? <View style={{marginTop:3, marginLeft:12}}><Avatar name={content.name} userId={content.user} size={36}/></View>:<View style={{width:48}}/>}\n            <CommonSection outerContainerStyle={{width:undefined, maxWidth:'90%'}} title={isFirst?content.name:undefined} titleStyle={{flex:undefined}} bodyStyle={{padding:10}} subtitle={`${created.slice(11)}`}>\n              <TouchableOpacity onLongPress={openModal}>\n                {content.timer && <View style={{flexDirection:'row', alignItems:'stretch'}}>\n                  <Text style={{fontSize:12}}>⌚</Text>\n                  <Text style={{fontSize:12}} selectable={!isMobile}>{moment(content.timer).format('L HH:mm')}</Text>\n                </View>}\n                <View style={{width:\"100%\"}}>\n                  {/* @ts-ignore */}\n                  <Hyperlink linkDefault={ true } style={{wordBreak:\"break-word\"}} linkStyle={{color: '#12b886'}}>\n                    <Text selectable={!isMobile} style={{textAlign:isSelf?'right':'left'}}>{message.content}</Text>\n                  </Hyperlink>\n                </View>\n              {content.file_set.map((file, fileIndex)=><FilePreview key={fileIndex} file={file} isMobile={isMobile} showBorder={content.file_set.length>1 || message.content.length>0}/>)}\n              {content.link_set.map((link, linkIndex)=><LinkPreview key={linkIndex} link={link} isMobile={isMobile}/>)}\n              </TouchableOpacity>        \n            </CommonSection>\n          </View>\n        </View>\n      })}\n    </View>\n\n})\n\nexport default function ChatScreen({navigation, route}: StackScreenProps<any, 'Chat'>) {\n  const { lang, locale } = useLangContext()\n  const isMobile = useIsMobile()\n  const channel_id = route?.params?.id\n  const height = useRef(0)\n  const inputRef = useRef<TextInput>(null)\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const channel = useMessengerChannelList(auth)?.find(v=>v.id==parseInt(channel_id))\n  const channelAvatar = channel?avatarFromChannel(channel, auth.user):undefined\n  const {data, fetchNextPage } = useMessengerContentList(channel_id)\n  const memberList = useMessengerMemberList(channel_id)\n  const member_id = useMemo(()=>memberList?.find(v=>v.user == auth.user?.id)?.id, [auth, memberList])\n  const windowType = useResizeContext()\n  const [value, setValue] = useState('')\n  const [timer, setTimer] = useState<string>()\n  const [autoFocus, setAutoFocus] = useState<boolean|null>(null)\n  const [videoMode, setVideoMode] = useState<boolean>(false)\n  const [bottomTab, setBottomTab] = useState<boolean>(false)\n\n  const theme = useColorScheme()\n  const postValue = ()=>{\n    if (value.length>0){\n      contentMutation.create({channel:channel_id, user:auth.user?.id, content:value, timer})\n      setValue('')\n      setTimer(undefined)\n      setBottomTab(false)\n      setAutoFocus(true)\n    }\n  }\n  const contentMutation = useMessengerContentMutation()\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: ()=> <HeaderRight extra={[\n        {title:lang('invite'), onPress:()=>setModal(InviteModal, {id:channel_id})},\n        {title:lang('setting'), onPress:()=>setModal(ChannelEditModal, {id:channel_id, type:'messenger', member_id})}\n      ]}/>,\n      title: channelAvatar?.name\n    });\n  }, [navigation, route, member_id, locale]);\n\n  const renderItem = useCallback(({item, index}:{item:MessengerContentPage, index:number})=><MessengerContentPageItem {...item} ownerId={auth.user?.id}/>, [auth])\n  \n  const back = ()=>{\n    if(navigation.canGoBack())\n        navigation.goBack()\n      else{\n        navigation.navigate('HomeScreen', {tab:2})\n      }\n  }\n  useEffect(()=>{\n    setModal(null, null)\n    if (!channel_id)\n      back()\n  }, [route])\n  useEffect(()=>{\n    if (memberList===null || (memberList!=undefined && memberList.find(v=>v.user==auth.user?.id)==undefined))\n      back()\n  }, [memberList])\n  useEffect(()=>{\n    if(autoFocus){\n      (inputRef.current as any).focus()\n      setAutoFocus(false)\n    }\n  }, [autoFocus])\n  useEffect(()=>{\n    if (autoFocus==null && !isMobile){\n      const timeout = setTimeout(()=>setAutoFocus(true), 500)\n      return ()=>clearTimeout(timeout)\n    }\n  })\n  return <View style={[\n    {flex:1, alignItems:'center'},\n    windowType=='landscape'?{flexDirection:'row-reverse', minWidth:480}:{flexDirection:'column'}\n  ]}>\n    <VideoCallSection channel_id={channel_id} setDisable={(d)=>setVideoMode(!d)} disable={!videoMode}/>\n    <View style={[{flex:videoMode?undefined:1, flexShrink:1}, windowType=='landscape'?{minWidth:320, height:'100%'}:{width:'100%'}]}>\n      <FlatList\n        style={{flexDirection: 'column-reverse'}}\n        contentContainerStyle={{padding:10, flexGrow:1, flexDirection: 'column-reverse'}}\n        data={data?.pages}\n        renderItem={renderItem}\n        onScroll={(e)=>{\n          if (e.nativeEvent.contentOffset.y + e.nativeEvent.contentSize.height - height.current < 1)\n            fetchNextPage()\n        }}\n        onLayout={(p)=>{height.current = p.nativeEvent.layout.height}}\n      />\n      <View style={{position:'absolute'}}>\n        <TimerTags channel_id={channel_id}/>\n      </View>\n      <ThemedView style={{bottom:0, width:'100%', paddingTop:15, paddingBottom:10, paddingHorizontal:19}}>\n        <View style={{alignItems:'center', width:'100%',flexDirection:'row'}}>\n          <CommonButton title={''} style={{height:40, paddingTop:8, borderTopRightRadius:0, borderBottomRightRadius:0}} onPress={()=>setBottomTab(!bottomTab)}>\n            <View style={{top:-2}}>\n              <Entypo name={bottomTab?\"cross\":\"plus\"} size={24} color={Colors[theme].text}/>\n            </View>\n          </CommonButton>\n          {timer && <CommonButton style={{height:40, paddingTop:8, borderRadius:0}} title={`⌚${timerFormat(timer)}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>}\n          <TextInput ref={inputRef} value={value} onChangeText={setValue} style={{\n            flex:1, borderWidth:1, height:40, borderColor:Colors.borderColor, backgroundColor:Colors[theme].background, color:Colors[theme].text\n          }} onSubmitEditing={postValue} blurOnSubmit={true} onFocus={()=>setBottomTab(false)}/>\n          <CommonButton style={{height:40, paddingTop:8, borderTopLeftRadius:0, borderBottomLeftRadius:0}} title={'💬'} onPress={postValue}/>\n        </View>\n\n        {bottomTab && <View style={{alignItems:'center', width:'100%', flexDirection:'row', paddingTop:15, paddingBottom:5}}>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`📤\\n ${lang('Upload File')}`} onPress={()=>uploadFile().then(f=>{contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', file:f});setBottomTab(false)})}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`⌚\\n ${lang('Timer Message')}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center'}} title={`📹\\n ${lang('Video Call')}`} onPress={()=>{setVideoMode(!videoMode);setBottomTab(false)}} disabled={videoMode}/>\n        </View>}\n      </ThemedView>\n    </View>\n  </View>\n}","import React from \"react\"\nimport CommonSection from \"../../../components/CommonSection\"\nimport Colors from \"../../../constants/Colors\"\nimport useColorScheme, { setColorScheme } from \"../../../hooks/useColorScheme\"\nimport { StyleSheet, Text, View} from 'react-native';\nimport useLangContext from \"../../../hooks/useLangContext\";\nimport { useColorScheme as useConfigColorScheme} from 'react-native-appearance';\nimport useAuthContext from \"../../../hooks/useAuthContext\";\nimport useFirebaseContext from \"../../../hooks/useFirebaseContext\";\nimport TextButton from \"../../../components/TextButton\";\n\n\nconst ConfigSection = ({title, children}:{title:string, children?: React.ReactNode})=>{\n  const theme = useColorScheme()\n  const color = Colors[theme].text\n  return <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\n    <Text style={{fontSize:20, color, fontWeight:'600'}}>{title}</Text>\n    {children}\n  </CommonSection>\n}\n\nexport default ()=>{\n  const { lang, locale, setLocale } = useLangContext()\n  const theme = useColorScheme()\n  const configTheme = useConfigColorScheme()\n  const { auth } = useAuthContext()\n  const {enable:noti, setEnable:setNoti} = useFirebaseContext(auth)\n  const color = Colors[theme].text\n  return <>\n    <ConfigSection title={lang('* Notification Settings')}>\n      <View style={{flexDirection:'row'}}>\n        {[[lang('On'), true], [lang('Off'), false]].map(([title, n])=><TextButton\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:noti==n?'underline':'none'}} style={{borderRadius:20}} onPress={()=>{setNoti(n)}}/>)}\n      </View>\n    </ConfigSection>\n    <ConfigSection title={lang('* Language Settings')}>\n    <View style={{flexDirection:'row'}}>\n        {[[lang('Auto'), 'auto'], ['한국어', 'ko'], ['English', 'en']].map(([title, l])=><TextButton \n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:locale==l?'underline':'none'}} style={{borderRadius:20}} onPress={()=>setLocale(l)}/>)}\n      </View>\n    </ConfigSection>\n    <ConfigSection title={lang('* Skin Settings')}>\n      <View style={{flexDirection:'row'}}>\n        {[[lang('Auto'), 'no-preference'], [lang('Light'), 'light'], [lang('Dark'), 'dark']].map(([title, colorScheme])=><TextButton \n          key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:configTheme==colorScheme?'underline':'none'}} style={{borderRadius:20}} onPress={(\n            )=>setColorScheme(colorScheme)}/>)}\n      </View>\n    </ConfigSection>\n  </>\n}","import React, {useState, useEffect, useLayoutEffect, useMemo} from 'react';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport { StyleSheet, View} from 'react-native';\nimport { Text as StyledText } from 'react-native-paper';\nimport { Text } from '../../../components/Themed'\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport TabView from '../../../components/TabView';\nimport HeaderRight from '../../../components/HeaderRight';\nimport TextButton from '../../../components/TextButton';\nimport Colors from '../../../constants/Colors';\nimport useColorScheme  from '../../../hooks/useColorScheme';\nimport useModalsContext from '../../../hooks/useModalsContext';\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\nimport useLangContext from '../../../hooks/useLangContext';\nimport ContractFooter from '../../../components/ContractFooter';\nimport { TabViewRecord } from '../../../types';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport useUserMembershipList from '../../../hooks/lists/useUserMembershipList';\nimport { FontAwesome, Ionicons, MaterialCommunityIcons, SimpleLineIcons } from '@expo/vector-icons';\nimport { useMessengerChannelSorted } from '../../../hooks/lists/useMessengerChannelList';\nimport { ScrollView } from 'react-native-gesture-handler';\nimport CommonItem from '../../../components/CommonItem';\nimport MemberItem from '../../../components/MemberItem';\nimport ProfileModal from '../../../modals/ProfileModal';\nimport { navigate } from '../../../navigation';\nimport CommonSection from '../../../components/CommonSection';\nimport ConfigSections from './ConfigSections';\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\n\nconst MemberTabView = ()=>{\n  const {auth} = useAuthContext()\n  const theme = useColorScheme()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const memberItem = React.useMemo(\n      ()=>userList && userList.map((item, index)=><MemberItem key={index} member={item} onPress={()=>setModal(ProfileModal, {id:item.id})}/>), [userList])\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n      {memberItem}\n  </ScrollView>\n}\n\nconst MessengerTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted(auth)\n  const theme = useColorScheme()\n\n  const today = (new Date()).toISOString().slice(0, 10)\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n      {channelList?.map((item, index)=>{\n          const {avatar, name} = avatarFromChannel(item, auth.user)\n          const date = item.last_message?.created.slice(0,10)\n          return <CommonItem key={index} bodyStyle={{flexDirection:'row', justifyContent:'space-between'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\n              <View style={{flexDirection:'row'}}>\n                  {avatar?\n                    <View style={{ marginRight:20}}>\n                      <Avatar name={avatar.name} size={44} userId={avatar.id}/>\n                    </View>:\n                    <FontAwesome size={40} color={Colors[theme].iconColor} style={{ marginBottom: -3, marginRight:20 }} name='users'/>}\n                  <View>\n                      <View style={{flexDirection:'row'}}>\n                          <Text style={{fontSize:18}}>{name}</Text>\n                          <Text style={{fontSize:18, opacity: 0.4, paddingLeft:5}}>{item.member_count}</Text>\n                      </View>\n                      <Text style={{fontSize:16, opacity: 0.4}}>{item.last_message?.content}</Text>\n                  </View>\n              </View>\n              <View>\n                  <Text style={{fontSize:14, opacity: 0.4, textAlign:'right'}}>{date==today?item.last_message?.created.slice(11,16):date}</Text>\n                  <Text style={{fontSize:14, textAlign:'right'}}>{item.unread_count?item.unread_count:' '}</Text>\n              </View>\n          </CommonItem>\n      })}\n  </ScrollView>\n}\n\n\nconst ConfigTabView = ()=>{\n  const theme = useColorScheme()\n  return <View style={{flex:1, backgroundColor:Colors[theme].background}}>\n    <ConfigSections/>\n  </View>\n}\n\nconst getBottomTabs = (theme:'light'|'dark')=>{\n  const color = Colors[theme].iconColor\n  return {\n    OneTab:{\n        title:'member',\n        component:MemberTabView,\n        icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\n    },\n    TwoTab:{\n        title:'chat',\n        component:MessengerTabView,\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\n    },\n    // ThreeTab:{\n    //     title:'board',\n    //     component:()=><></>,\n    //     icon:<></>\n    // },\n    FourTab:{\n        title:'config',\n        component:ConfigTabView,\n        icon:<SimpleLineIcons size={30} color={color} style={{ marginBottom: -3 }} name='options'/>\n    }\n  } as TabViewRecord\n}\n\n\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\n  const { lang, locale } = useLangContext()\n  const windowType = useResizeContext();\n  const theme = useColorScheme()\n  const { setModal } = useModalsContext()\n  const [ home, setHome ] = useState(windowType == 'landscape')\n  const color = Colors[theme].text\n  const options = [\n    {title:lang('member'), headerRight:()=><HeaderRight/>},\n    {title:lang('chat'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(ChannelEditModal, {type:'messenger'})}]}/>},\n    // {title:'board', headerRight:()=><HeaderRight extra={[{title:'create', onPress:()=>setModal(ChannelEditModal, props:{type:'board'}}) }]}/>},\n    {title:lang('config'), headerRight:()=><HeaderRight/>}\n  ]\n  \n  useLayoutEffect(() => {\n    const index = route?.params?.tab | 0\n    navigation.setOptions(windowType == 'portrait'?options[index]:{\n      title: lang('home'),\n      headerRight: ()=><HeaderRight/>\n    });\n  }, [navigation, route, windowType, locale]);\n  useEffect(()=>{\n    setHome(windowType == 'landscape')\n  }, [windowType])\n  return home?\n    <View style={{flex:1, justifyContent:'center', alignItems:'center'}}>\n      <View style={{width:'80%', flex:1, marginTop:72}}>\n        <StyledText style={{fontSize:32, color}}>Tokki Tok</StyledText>\n        <View style={{backgroundColor:Colors.borderColor, height:1, width:'100%'}}/>\n        {/* <Text style={{fontSize:20, color:'gray'}}>Welcome! This is a messenger for teams.</Text>*/}\n        <View style={{height:24}}/>\n        <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:'transparent'}}>\n          <TextButton title={lang('+ New chat')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(ChannelEditModal, {type:'messenger'})}/>\n        </CommonSection>\n        <ConfigSections/>\n      </View>\n      <ContractFooter/>\n    </View>:\n    <TabView tabs={getBottomTabs(theme)} tabBarPosition=\"bottom\" index={parseInt(route.params?.['tab'] || 0)} onTab={(index)=>{navigation.setParams({tab:index})}}/>\n}\n\n","import React, {useEffect, useLayoutEffect, useState} from 'react';\n\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useAuthContext from '../../hooks/useAuthContext';\nimport useMessengerChannelList from '../../hooks/lists/useMessengerChannelList';\nimport { Text } from '../../components/Themed';\nimport { useMessengerMemberMutation } from '../../hooks/lists/useMessengerMemberList';\n\nexport default function InviteeScreen({navigation, route}: StackScreenProps<any, 'Invitee'>) {\n    const id = route?.params?.id\n    const {auth, dispatch} = useAuthContext()\n    const [enterGuest, setEnterGuest] = useState(false)\n    const channelList = useMessengerChannelList(auth)\n    const messengerMemberMutation = useMessengerMemberMutation()\n    useLayoutEffect(() => {\n        navigation.setOptions({headerRight: undefined});\n    }, []);\n    useEffect(()=>{\n        if(auth.user==null && enterGuest==false){\n            dispatch({type:\"LOGIN_GUEST\"})\n            setEnterGuest(true)\n        }\n        else if(auth.user && channelList!==undefined){\n            if(channelList.find(v=>v.id==id) === undefined){\n                console.log(`invite processing (channel:${id})`)\n                messengerMemberMutation.invite({\n                    channel_id:id,\n                    user_ids:[auth.user.id]\n                }).then(()=>navigation.replace(\"ChatScreen\", {id}))\n            }\n            else{\n                console.log('already invite')\n                navigation.replace(\"ChatScreen\", {id})\n            }\n        }\n    }, [auth, channelList, enterGuest])\n  return <Text>{'초대중'}</Text>\n};\n","import LoginScreen from \"./main/LoginScreen\";\nimport ChatScreen from \"./main/ChatScreen\";\nimport HomeScreen from \"./main/HomeScreen\";\nimport TabOneScreen from \"./main/TabOneScreen\";\nimport InviteeScreen from \"./main/InviteeScreen\";\n// import BoardScreen from \"../lib/blacktokki-board/BoardScreen\";\n// import BoardEditScreen from \"../lib/blacktokki-board/BoardEditScreen\";\nimport { Screens } from \"../types\";\n\nexport const main = {\n    HomeScreen:{\n        title:'home',\n        component:HomeScreen,\n        path:'home',\n    },\n    ChatScreen:{\n        title:'chat',\n        component:ChatScreen,\n        path:'chat'\n    },\n    // BoardScreen:{\n    //     title:'board',\n    //     component:BoardScreen,\n    //     path:'board'\n    // },\n    // TabOneScreen:{\n    //     title:'tab one',\n    //     component:TabOneScreen,\n    //     path:'one'\n    // },\n    InviteeScreen:{\n        title: '',        \n        component:InviteeScreen,\n        path:'invitee'\n    }\n} as Screens\n\nexport const login = {\n    LoginScreen:{\n        path: 'login',\n        title: 'Sign in',\n        component:LoginScreen\n    },\n    InviteeScreen:{\n        path:'invitee',\n        title: '',\n        component:InviteeScreen\n    }\n} as Screens\n\nexport const modal = {\n    // BoardEditScreen:{\n    //     title:'board',\n    //     component:BoardEditScreen,\n    //     path:'modal/board'\n    // },\n} as Screens","/**\n * Learn more about Light and Dark modes:\n * https://docs.expo.io/guides/color-schemes/\n */\n\nimport * as React from 'react';\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\n\nimport Colors from '../constants/Colors'\nimport useColorScheme from '../hooks/useColorScheme';\n\nexport function useThemeColor(\n  props: { light?: string; dark?: string },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\n) {\n  const theme = useColorScheme();\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n\ntype ThemeProps = {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport type TextProps = ThemeProps & DefaultText['props'];\nexport type ViewProps = ThemeProps & DefaultView['props'];\n\nexport function Text(props: TextProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\n\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\n}\n\nexport function View(props: ViewProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\n\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","import { useQuery } from \"react-query\";\nimport { getUserMembershipList } from \"../../apis\";\nimport { Auth } from \"../useAuthContext\";\n\nexport default function useUserMembershipList(auth?:Auth){\n  const { data } = useQuery([\"UserMembershipList\", auth?.groupId] , async()=>auth?.groupId?(await getUserMembershipList(auth?.groupId)):[])\n  return data\n}","import React from 'react';\nimport { TabView, SceneMap,NavigationState, SceneRendererProps, TabBar } from 'react-native-tab-view';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport useLangContext from '../hooks/useLangContext';\nimport { TabViewRecord } from '../types';\n\n\nexport default (props:{tabs:TabViewRecord, tabBarPosition:\"top\"|\"bottom\", index?:number, onTab?:(index:number)=>void})=>{\n  const { lang } = useLangContext()\n  const [index, setIndex] = React.useState(props.index || 0);\n  const theme = useColorScheme()\n  const entries = Object.entries(props.tabs)\n  const onTab = props.onTab\n  const icons = Object.assign({}, ...entries.map(([k, v])=>({[k]:v.icon})))\n  return <TabView\n    renderTabBar={(props:SceneRendererProps & {navigationState: NavigationState<any>})=>{\n      return <TabBar\n        {...props}\n        indicatorStyle={{ backgroundColor: \"#2196F3\" }}\n        style={{ backgroundColor:Colors[theme].background }}\n        activeColor={Colors[theme].text}\n        inactiveColor={Colors[theme].text}\n        renderIcon={(scene)=>icons[scene.route.key]}\n        onTabPress={(scene)=>onTab?.(entries.findIndex(([k, v])=>k == scene.route.key))}\n      />\n    }}\n    navigationState={{ index, routes: entries.map(([k, v])=>({key:k, title:lang(v.title)}))}}\n    onIndexChange={setIndex}\n    renderScene={SceneMap(Object.assign({}, ...entries.map(([k, v])=>({[k]:v.component}))))}\n    tabBarPosition={props.tabBarPosition}\n  />\n}\n\n","import * as React from 'react';\nimport { View } from './Themed';\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle, Pressable } from 'react-native';\nimport Colors from '../constants/Colors';\n\nexport type ItemParamList = {\n    outerContainerStyle?:StyleProp<TextStyle>\n    containerStyle?:StyleProp<ViewStyle>\n    bodyStyle?:StyleProp<ViewStyle>\n    children?: React.ReactNode\n    onPress?: ()=>void\n}\n\nexport default function CommonItem(props:ItemParamList){\n  const [hover, setHover] = React.useState(false)\n  const [press, setPress] = React.useState(false)\n  return (\n    <Pressable\n      style={[styles.outerContainer ,props.outerContainerStyle, (press)?{backgroundColor:'rgb(242,242,242)'}:{}]}\n      onPressIn={()=>{setPress(true)}}\n      onPressOut={()=>{setPress(false);props.onPress?.()}}\n       //@ts-ignore\n       onHoverIn={()=>setHover(true)}\n       onHoverOut={()=>setHover(false)}\n    >\n        <View style={[styles.container ,props.containerStyle]}>\n            <View style={[styles.bodyView, props.bodyStyle]}>\n                <>{props.children}</>\n            </View>\n      </View>\n    </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({\n  outerContainer:{\n    width:'100%',\n    maxWidth:1080,\n    alignItems:'stretch',\n  },  \n  container: {\n      marginHorizontal:20,\n      backgroundColor:'transparent'\n    },\n    bodyView:{\n      width: '100%',\n      padding: 10,\n      minHeight: 40,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderBottomWidth:1,\n      borderColor:Colors.borderColor,\n      backgroundColor:'transparent'\n    }\n  });\n  ","import React, { useMemo } from 'react';\n\nimport { TextProps, StyleProp } from 'react-native';\nimport {View, Text } from './Themed'\nimport useResizeContext from '../hooks/useResizeContext';\n\ntype Props = {\n  name: string,\n  width?:number,\n  children: React.ReactNode\n  textStyle?: StyleProp<TextProps>\n}\n\nexport default function RowField(props:Props) {\n  const windowType = useResizeContext()\n  const rowStyle = useMemo(()=>windowType=='landscape'?\n    {flexDirection:'row', alignItems: 'center', justifyContent:'space-between'}:\n    {flexDirection:'column', alignItems:'flex-start'} as any\n  , [windowType])\n  return (\n    <View style={[{paddingVertical:5, width:'100%'}, rowStyle]}>\n        <Text style={[windowType=='landscape'?{flex:1}:{width:'100%'},{paddingHorizontal: 15, fontSize:16}, props.textStyle]}>{props.name}</Text>\n        <View style={[windowType=='landscape'?{flex:6}:{width:'100%'},{paddingHorizontal: 15}]}>\n          <View style={{width:props.width}}>\n            {props.children}\n          </View>\n        </View>\n    </View>\n  )\n}","import React from 'react';\nimport { StyleProp, TextStyle } from 'react-native';\nimport { CustomTextInputProps } from '../types';\nimport CommonTextInput from './CommonTextInput';\nimport RowField from './RowField';\n\nexport default function TextField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\n  return (\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\n      <CommonTextInput {...props} />\n   </RowField>\n  )\n}","import { useCallback, useEffect, useState } from \"react\"\nimport { InfiniteData, useInfiniteQuery, useMutation, useQueryClient } from \"react-query\"\nimport { getMessengerContentList, postMessage, deleteMessengerContent } from \"../../apis\"\nimport { MessengerContent } from \"../../types\"\nimport useWebsocketContext from \"../useWebsocketContext\"\n\nexport type MessengerContentPage = {\n  next?:MessengerContentPage\n  current:MessengerContent[]\n}\n\nexport default function useMessengerContentList(channel_id:number){  \n  const queryClient = useQueryClient()\n  const { data, fetchNextPage } = useInfiniteQuery<MessengerContentPage>(\n    [\"MessengerContentList\", channel_id], \n    async({pageParam})=>getMessengerContentList(channel_id, pageParam).then(current=>({current})), \n    {\n      select:data=>{\n        if(data.pages.length > 1)\n          data.pages[data.pages.length - 2].next = data.pages[data.pages.length - 1]\n        return data;\n      },\n      getNextPageParam:(lastPage)=>lastPage?.current.length?lastPage.current[lastPage.current.length - 1].id:undefined,\n      refetchOnReconnect:false,\n      refetchOnWindowFocus:true\n    }\n  )\n  const { lastJsonMessage } = useWebsocketContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null && lastJsonMessage['data']['channel'] == channel_id){\n      if(lastJsonMessage['type']=='next_message'){\n        queryClient.setQueryData<InfiniteData<MessengerContentPage>>([\"MessengerContentList\", channel_id], (_data)=>{\n          if(_data?.pages[0].current && _data?.pages[0].current[0].id != lastJsonMessage['data'].id)\n            _data.pages[0].current = [lastJsonMessage['data'], ..._data?.pages[0].current]\n          return {...(_data || {pages:[], pageParams:[]})}\n        })\n      }\n      if(lastJsonMessage['type']=='delete_message'){\n        queryClient.setQueryData<InfiniteData<MessengerContentPage>>([\"MessengerContentList\", channel_id], (_data)=>{\n          console.log(_data?.pages)\n          _data?.pages.forEach(page=>{\n            const len = page.current.length\n            const newCurrent = page.current.filter(v=>v.id!=lastJsonMessage['data'].id)\n            console.log(len, newCurrent)\n            if (len != newCurrent.length){\n              page.current = newCurrent\n            }\n          })\n          return {...(_data || {pages:[], pageParams:[]})}\n        })\n      }\n    }\n  }, [lastJsonMessage])\n  return { data, fetchNextPage }\n}\n\nexport function useMessengerContentMutation(){\n  // const queryClient = useQueryClient()\n  const create = useMutation(postMessage, {\n    onSuccess: () => {\n      // queryClient.setQueryData(['MessengerContentList'], (data:any) => ({\n      //   pages: data.pages.slice(0, 1),\n      //   pageParams: data.pageParams.slice(0, 1),\n      // }))\n      // queryClient.invalidateQueries(\"MessengerContentList\")\n    }\n  });\n  const _delete = useMutation(deleteMessengerContent, {\n    onSuccess: (d, variables) => {\n      // queryClient.setQueryData(['MessengerContentList'], (data:any) => ({\n      //   pages: (data.pages as MessengerContent[][]).map(v=>v.filter(v2=>v2.id != variables)),\n      //   pageParams: data.pageParams,\n      // }))\n    }\n  })\n  return { create:create.mutate, delete:_delete.mutate }\n}","import React from 'react';\nimport moment from 'moment';\nimport { StyleSheet, Text, View,StyleProp, ViewStyle } from 'react-native';\nimport {LocaleConfig, Calendar as BaseCalendar} from 'react-native-calendars';\nimport { DateData, DayState, MarkedDates, MarkingTypes } from 'react-native-calendars/src/types';\n\nmoment.locale('ko')\n\nLocaleConfig.locales['ko'] = {\n  monthNames: moment.months(),\n  monthNamesShort: moment.monthsShort(),\n  dayNames: moment.weekdays(),\n  dayNamesShort: moment.weekdaysShort(),\n  today: \"오늘\"\n};\nLocaleConfig.defaultLocale = 'ko';\n\nexport const defaultWidth = 400\n\nexport type CalendarProps = {\n  date?:string,\n  setDate?:(date:string)=>void,\n  style:StyleProp<ViewStyle>\n  markingType?:MarkingTypes\n  markedDates?:MarkedDates\n  onMonthChange?:(date:DateData)=>void\n  disableAllTouchEventsForDisabledDays?:boolean\n  dayComponent?:React.ComponentType<{date:DateData, state:DayState}>\n}\n\nexport default function Calendar(props:CalendarProps) {\n  return (\n    <View>\n      <BaseCalendar\n        markingType={props.markingType}\n        markedDates={props.markedDates}\n        renderArrow={direction => <Text>{direction == 'left'?\"이전\":\"다음\"}</Text>}\n        monthFormat={'yyyy년 MM월'}\n        initialDate={props.date}\n        disableAllTouchEventsForDisabledDays={props.disableAllTouchEventsForDisabledDays}\n        onMonthChange={props.onMonthChange}\n        onDayPress={(date)=> props.setDate?.(date.dateString)}\n        current={props.date}\n        style={[{width:defaultWidth }, props.style]}\n        dayComponent={props.dayComponent as any}\n      />\n      {/* <Text style={styles.dateText}>선택: {props.date}</Text> */}\n    </View>\n  );\n}\n","import React, { useState } from 'react';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport {Picker} from '@react-native-picker/picker';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\nimport Calendar from '../components/Calendar';\nimport moment from 'moment';\n\nconst dayTypes = ['AM', 'PM'].map(value=>({label:value, value}))\nconst hours = [...Array(12).keys()].map((value, index)=>(index + 1).toString().padStart(2, '0')).map(value=>({label:value, value}))\nconst minutes = [...Array(12).keys()].map((value, index)=>(index * 5).toString().padStart(2, '0')).map(value=>({label:value, value}))\n\n\nconst getDisableDays=(date:moment.Moment)=>{\n  const startDate = date.clone().startOf('month').add(-1, 'month')\n  const endDate = date.clone().endOf('month').add(1, 'month')\n  const today = moment().startOf('day')\n  const result = []\n  while(startDate<=endDate && startDate<today){\n    result.push(startDate.format(moment.HTML5_FMT.DATE))\n    startDate.add(1, 'day')\n  }\n  return result\n}\n\nconst defaultMoment = ()=>{\n  const m = moment()\n  const restMinute = parseInt(m.format('mm')) % 5\n  m.add(5-restMinute, 'minute')\n  return m\n}\n\nexport default function DateTimePickerModal({datetime, callback}:{datetime?:string, callback:(datetime?:string)=>void}) {\n  const _moment = datetime?moment(datetime):defaultMoment()\n  const { lang } = useLangContext()\n  const theme = useColorScheme()\n  const [date, setDate] = useState(_moment.format(moment.HTML5_FMT.DATE));\n  const [dayType, setDayType] = useState(_moment.locale('en').format('A'))\n  const [hour, setHour] = useState(_moment.format('hh'))\n  const [minute, setMinute] = useState(_moment.format('mm'))\n  const [disableDays, setDisableDays] = useState<string[]>(getDisableDays(_moment))\n  const { setModal } = useModalsContext()\n  const back = ()=>{\n    setModal(DateTimePickerModal, null)\n  }\n  return <BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Date & Time')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    <Calendar \n      style={undefined} \n      setDate={setDate}\n      disableAllTouchEventsForDisabledDays={true}\n      onMonthChange={(v)=>setDisableDays(getDisableDays(moment(v.dateString)))}\n      markedDates={{\n        ...disableDays.reduce((p, c)=>{p[c]={disabled:true};return p}, {} as Record<string, any>),\n        ...(date?[date]:[]).reduce((p, c)=>{p[c]={selected:true};return p}, {} as Record<string, any>)\n      }}\n    \n    />\n    <View style={{flexDirection:'row', paddingVertical:10, width:400, height:50}}>\n      <Picker\n        style={{flex:1}}\n        itemStyle={{fontSize:20}}\n        selectedValue={dayType}\n        onValueChange={setDayType}>\n        {dayTypes.map(v=><Picker.Item key={v.value} label={v.label} value={v.value} />)}\n      </Picker>\n      <Text style={{fontSize:20}}> </Text>\n      <Picker\n        style={{flex:1}}\n        itemStyle={{fontSize:20}}\n        selectedValue={hour}\n        onValueChange={setHour}>\n        {hours.map(v=><Picker.Item key={v.value} label={v.label} value={v.value} />)}\n      </Picker>\n      <Text style={{fontSize:20}}> : </Text>\n      <Picker\n        style={{flex:1}}\n        itemStyle={{fontSize:20}}\n        selectedValue={minute}\n        onValueChange={setMinute}>\n        {minutes.map(v=><Picker.Item key={v.value} label={v.label} value={v.value} />)}\n      </Picker>\n    </View>\n    <View style={{flexDirection:'row'}}>\n      <CommonButton title={lang('save')} onPress={()=>{\n        callback?.(moment(`${date} ${hour}:${minute} ${dayType}`).format(moment.HTML5_FMT.DATETIME_LOCAL))\n        back()\n      }}/>\n      <CommonButton title={lang('cancel')} onPress={()=>{\n        callback?.(undefined)\n        back()\n      }}/>\n      \n    </View>\n  </BottomSheet>\n}\n","import React from 'react';\nimport useAuthContext from '../hooks/useAuthContext';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { BottomSheet } from '../components/ModalSection';\n\nexport default function GuestLogoutModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const { setModal } = useModalsContext()\n  const {dispatch} = useAuthContext()\n  const back = ()=>{\n    setModal(GuestLogoutModal, null)\n  }\n  return <BottomSheet>\n    <Text>{lang('Guest users cannot reconnect after logging out. Please create an account or log in.')}</Text>\n    <View style={{width:'100%', flexDirection:'row', justifyContent:'flex-end'}}>\n      <CommonButton title={lang('sign out')} onPress={()=>dispatch({type:\"LOGOUT_REQUEST\"})}/>\n      <CommonButton title={lang('cancel')} onPress={()=>back()}/>\n    </View>\n  </BottomSheet>\n}\n","import React, { useState } from 'react';\nimport { TextInput } from 'react-native';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { CustomTextInputProps } from '../types';\n\nexport default (props:CustomTextInputProps)=>{\n    const [contentHeight, setContentHeight] = useState<number>()\n    const minHeight = props.minHeight || 30\n    const theme = useColorScheme()\n    return <TextInput style={[{\n            borderColor:'#d0d7de', \n            fontSize:16, \n            borderWidth:1, \n            borderRadius:6, \n            paddingHorizontal:10, \n            paddingVertical:3, \n            backgroundColor:Colors[theme].background,\n            color:Colors[theme].text,\n            height:props.multiline?contentHeight:minHeight,\n        }, props.style]} \n        editable={!props.disabled} \n        value={props.value} \n        onChangeText={props.setValue}\n        onContentSizeChange={props.multiline?(e) => setContentHeight(Math.max(e.nativeEvent.contentSize.height, minHeight) + 2):undefined}\n        onBlur={()=>props.onBlur?.(props.value)}\n        onEndEditing={()=>props.onEndEditing?.(props.value)}\n        multiline={props.multiline}\n    />\n}","import React from \"react\"\nimport CommonItem from \"./CommonItem\"\nimport { UserMembership } from \"../types\"\nimport Avatar from \"./Avatar\"\nimport { Text, View } from \"./Themed\"\n\nexport default ({member:item, onPress}:{member:UserMembership, onPress?:()=>void})=> {\n    return <CommonItem key={item.id} bodyStyle={{flexDirection:'row', justifyContent:'flex-start'}} onPress={onPress}>\n        <View style={{marginTop:4, marginRight:12}}><Avatar name={item.name} userId={item.id} size={44}/></View>\n        <Text style={{fontSize:20, fontWeight:'400'}}>{item.name}</Text>\n    </CommonItem>\n}","const tintColorLight = '#2f95dc';\nconst tintColorDark = '#fff';\n\nexport default {\n  light: {\n    text: '#000',\n    background: '#fff',\n    tint: tintColorLight,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorLight,\n    header:'#24292f',\n    buttonColor:'rgb(242,242,242)',\n    buttonBackgroundColor: '#f6f8fa', //'rgba(9,30,66,0.08)',//rgb(242,242,242)\\\n    buttonBorderColor:'rgba(27,31,36,0.15)',\n    iconColor: 'black'\n  },\n  dark: {\n    text: '#fff',\n    background: '#000',\n    tint: tintColorDark,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorDark,\n    header:'#161b22',\n    buttonColor:'rgb(1,4,9)',\n    buttonBackgroundColor: '#282624',\n    buttonBorderColor:'rgba(229,225,220,0.15)',\n    iconColor: 'white'\n  },\n  borderColor:'#d0d7de',\n  \n  focus:'#0065A4',\n};\n","import React from 'react';\nimport Clipboard from '@react-native-clipboard/clipboard/dist';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { BottomSheet } from '../components/ModalSection';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport { Ionicons } from '@expo/vector-icons';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { useMessengerContentMutation } from '../hooks/lists/useMessengerContentList';\n\nexport default function MessageModal({id, content}:{id:number, content:string}) {\n  const { lang } = useLangContext()\n  const { setModal } = useModalsContext()\n  const theme = useColorScheme()\n  const contentMutation = useMessengerContentMutation()\n  const back = ()=>{\n    setModal(MessageModal, null)\n  }\n  return <BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Message')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n      <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} title={lang('copy')} onPress={()=>{Clipboard.setString(content);back()}}/>\n      <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} textStyle={{color:'red'}} title={lang('delete')} onPress={()=>{contentMutation.delete(id);back()}}/>\n  </BottomSheet>\n}\n","import React, { useEffect } from 'react';\nimport Profile from '../components/Profile';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\nimport CommonButton from '../components/CommonButton';\nimport { Channel } from '../types';\nimport { navigate } from '../navigation';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\n\nexport default function ProfileModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const theme = useColorScheme()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const user = userList?.find(v=>v.id==id)\n  const isSelf = auth.user && user && (auth.user?.id==user?.id)\n  const channelMutation = useMessengerChannelMutation()\n  const back = ()=>{\n    setModal(ProfileModal, null)\n  }\n  useEffect(()=>{\n    if (!(id && user) && userList)\n      back()\n  }, [userList])\n  return user?<BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('profile')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    \n    <Profile username={user.username} name={user.name} userId={user.id} />\n    <CommonButton title={lang(isSelf?'Chat with me':'1:1 Chat')} onPress={()=>{\n      if(auth?.user?.id && auth.groupId){\n        const newChannel:Channel = {name:\"\", type:'messenger', owner:auth?.user?.id, group:auth.groupId, subowner:isSelf?undefined:user.id};\n        channelMutation.direct(newChannel).then(v=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id:v.id}}))\n      }\n    }}/>\n  </BottomSheet>:<></>\n}\n","import React from 'react';\nimport {View} from 'react-native'\nimport {Text} from './Themed';\nimport { ProfileProps } from '../types';\nimport Avatar from './Avatar';\nimport TextButton from './TextButton';\nimport CommonTextInput from './CommonTextInput';\nimport { patchUser } from '../apis';\nimport useAuthContext from '../hooks/useAuthContext';\n\nexport default (props:ProfileProps)=>{\n    const [name, setName] = React.useState<string>()\n    const { auth, dispatch } = useAuthContext()\n    const isSelf = auth.user?.id == props.userId\n    const onChange = ()=>{\n        isSelf && patchUser({id:props.userId, name:name || ''}).finally(()=>{\n            setName(undefined)\n            dispatch({type:\"REFRESH\"})\n        })\n    }\n    return <View style={{width:'100%', height:135, justifyContent:'space-evenly', alignItems:'center'}}>\n        <Avatar {...props} size={75}/>\n        {name===undefined?\n            <TextButton textStyle={{fontWeight:'bold', fontSize:15}} onPress={()=>isSelf && setName(props.name)} title={props.name} disabled={!isSelf}/>:\n            <CommonTextInput value={name} style={{textAlign:'center'}} setValue={setName} onBlur={onChange} onEndEditing={onChange} />}\n        <Text style={{fontWeight:'normal', fontSize:14}}>{props.username}</Text>\n    </View>\n}","import { useState,  useEffect } from \"react\"\nimport firebase from \"firebase/app\";\nimport \"firebase/messaging\";\n//@ts-ignore\nimport {FCM_PUBLIC_VAPID_KEY, FCM_API_KEY} from \"@env\"\nimport { Notification as NotificationType, UserMembership } from \"../types\";\nimport { getNotification, postNotification, putNotification } from \"../apis/notification\";\nimport { Auth } from \"./useAuthContext\";\nconst firebaseConfig = require(\"../../web/firebase-config.js\")\n// Initialize Firebase\nconst key = firebaseConfig.messagingSenderId\nconst apiKeyEncrypted = (FCM_API_KEY as string).split('').map((v, i)=> (v.charCodeAt(0) ^ key.charCodeAt(i)).toString(16).padStart(2, '0')).join('')\nconst app = firebase.initializeApp({...firebaseConfig, apiKey:FCM_API_KEY});\n// const analytics = getAnalytics(app);\nconst messaging = firebase.messaging(app);\n\nmessaging.onMessage((payload) => {\n  if (!(\"Notification\" in window)) {\n    alert(\"This browser does not support desktop notification\");\n  }\n  else if (Notification.permission === \"granted\") {\n    const message_set = JSON.parse(payload.data['message_set'])[0]\n    new Notification(payload.data.channel_name, { body: `${payload.data.name}: ${message_set.content}` });\n  }\n});\n\nconst requestToken = async()=>{\n  const permission = await Notification.requestPermission();\n  if (permission === 'granted') {\n    const serviceWorkerRegistration = await navigator.serviceWorker.register(`${process.env.PUBLIC_URL}/firebase-messaging-sw.js?${apiKeyEncrypted}`)\n    console.log('[SW]: SCOPE: ', serviceWorkerRegistration.scope);\n    const currentToken = await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY }).catch(\n      async()=>await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY })\n    )\n    window.addEventListener('beforeunload', (event:any) => {\n      event.preventDefault();\n      serviceWorkerRegistration.unregister()\n    });\n    if (currentToken)\n      return currentToken\n  }\n  return undefined\n}\n\n\nlet noti:NotificationType|undefined\nlet notiListener:((enable:boolean)=>void)[] = []\n\nconst initEnable = async(user:UserMembership, callback:(enable:boolean)=>void)=>{\n  notiListener.push(callback)\n  if (notiListener.length == 1){  \n    noti = await getNotification(user.id)\n    if (noti === undefined){\n      noti = await postNotification({user:user.id, type:'WEB', token:null})\n    }\n    else if(noti.token){\n      requestToken().then(async token=>{\n        if(noti)\n          noti = await putNotification({...noti, token:(token||null)})\n        notiListener.map(c=>c(noti?.token?true:false))\n      })\n    }\n    notiListener.map(c=>c(noti?.token?true:false))\n  }\n}\n\nconst changeEnable = async(enable:boolean)=>{\n  if (noti){\n    if(enable){\n      const token = await requestToken() || null\n      noti = await putNotification({...noti, token})\n    }\n    else{\n      noti = await putNotification({...noti, token:null})\n    }\n  }\n  return noti?.token?true:false\n}\n\nexport default (auth:Auth)=>{\n  const [enable, setEnable] = useState<boolean|null>(null)\n  useEffect(()=>{\n    if (auth.user){\n      if(noti === undefined)\n        initEnable(auth.user, setEnable)\n      else{\n        setEnable(noti.token?true:false)\n        noti = undefined\n        notiListener = []\n      }\n    }else{\n      setEnable(false)\n    }\n  }, [auth.user])\n  return {\n    enable,\n    setEnable:(_enable:boolean)=>changeEnable(_enable).then(setEnable)\n  }\n}\n","import { useMemo, useReducer } from \"react\"\n\ntype LocalSearchAction = {type:string, keyword?:string}\n\ntype LocalSearchState ={active:boolean, keyword:string}\n\n\n\nconst localSearchReducer =(initialState:LocalSearchState, action:LocalSearchAction)=>{\n    switch (action.type){\n        case 'SEARCH':\n          return {\n            ...initialState,\n            keyword: action.keyword\n          } as LocalSearchState\n        case 'ENABLE_SEARCH':\n          return {\n            ...initialState,\n            active:true,\n          }\n        case 'DISABLE_SEARCH':\n            return{\n                ...initialState,\n                active:false,\n                keyword: ''\n            }\n        default:\n            throw new Error( `Unhandled action type: ${action.type}`)\n    }\n  }\n\n\nexport default function useLocalSearch<T>(target:T[], compare:(value:T, keyword:string)=>boolean) {\n  const [searchState, dispatch] = useReducer(localSearchReducer, {active:false, keyword:''})\n  const data = useMemo(()=>searchState.active?target.filter(v=>compare(v, searchState.keyword)):target, [searchState, target])\n  return {searchState, dispatch, data}\n}","import React, {useRef,MutableRefObject, useMemo, useState, useEffect } from 'react';\nimport Clipboard from '@react-native-clipboard/clipboard/dist';\nimport { View, Text } from '../components/Themed';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport { TabViewRecord, UserMembership } from '../types';\nimport CommonButton from '../components/CommonButton';\nimport useMessengerMemberList, { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\nimport useModalsContext from '../hooks/useModalsContext';\nimport useExternalMembershipList from '../hooks/lists/useExternalMembershipList';\nimport TextField from '../components/TextField';\nimport useLocalSearch from '../hooks/useLocalSearch';\nimport TabView from '../components/TabView';\nimport { FlatList, TouchableOpacity } from 'react-native-gesture-handler';\nimport useLangContext from '../hooks/useLangContext';\nimport MemberItem from '../components/MemberItem';\nimport ModalSection from '../components/ModalSection';\n\nconst InviteItem = (props:{item:UserMembership, selectedRef:MutableRefObject<Set<number>>})=>{\n  const [selected, setSelected] = useState(props.selectedRef.current.has(props.item.id))\n  return <View style={selected?{borderWidth:1, borderColor:'blue'}:{}}>\n    <MemberItem member={props.item} onPress={()=>{\n      if (selected){\n        setSelected(false)\n        props.selectedRef.current.delete(props.item.id)\n      }\n      else{\n        setSelected(true)\n        props.selectedRef.current.add(props.item.id)\n      }\n    }}/>\n  </View>\n\n}\ntype InviteTabViewProps = {\n  id:number,\n  selectedRef:MutableRefObject<Set<number>>\n}\n\nconst GroupTabView = ({id, selectedRef}:InviteTabViewProps)=>{\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const memberList = useMessengerMemberList(id)\n  const messengerMemberMutation = useMessengerMemberMutation()\n  const rawData = useMemo(()=>{\n    const memberSet = new Set(memberList?.map(v=>v.user))\n    return userList?.filter(v=>!memberSet.has(v.id)) || []\n  }, [userList, memberList])\n  const {data, dispatch:dispatchKeyword, searchState} = useLocalSearch(rawData, (v, keyword)=>(v.username.includes(keyword) || v.name.includes(keyword)))\n  const search = (k:string)=>{\n    if (k?.length>0){\n      dispatchKeyword({type:'ENABLE_SEARCH'})\n      dispatchKeyword({type:'SEARCH', keyword:k})\n    }\n    else{\n      dispatchKeyword({type:'DISABLE_SEARCH'})\n    }\n  }\n  const back = ()=>{\n    setModal(InviteModal, null)\n  }\n  return <View style={{alignItems:'center', flex:1}}>\n    <View style={{'width': '100%', flex:1}}>\n      <TextField name={`${lang('Username')} & ${lang('Name')}`} value={searchState.keyword} setValue={search} width={'80%'}/>\n      {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\n    </View>\n    <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\n      <CommonButton title={lang('invite')} onPress={()=>{\n        messengerMemberMutation.invite({\n          channel_id:id,\n          user_ids:[...selectedRef.current]\n        }).then(back)\n      }}/>\n      <CommonButton title={lang('cancel')} onPress={back}/>\n    </View>\n  </View>\n}\n\nconst DELAY = 500\n\nconst ExternalMembershipTabView = ({id, selectedRef}:InviteTabViewProps)=>{\n  const { lang } = useLangContext()\n  const [value, setValue] = useState('')\n  const [keyword, setKeyword] = useState('')\n  const [copied, setCopied] = useState(false)\n  const timeoutRef = useRef<NodeJS.Timeout>()\n  const { setModal } = useModalsContext()\n  const memberList = useMessengerMemberList(id)\n  const externalMemberList = useExternalMembershipList(keyword)\n  const data = useMemo(()=>{\n    const memberSet = new Set(memberList?.map(v=>v.user))\n    return externalMemberList?.filter(v=>!memberSet.has(v.id)) || []\n  }, [externalMemberList, memberList])\n  const messengerMemberMutation = useMessengerMemberMutation()\n  useEffect(()=>{\n    timeoutRef.current = setTimeout(()=>{\n      setKeyword(value)\n    }, DELAY)\n    return ()=>{timeoutRef.current && clearTimeout(timeoutRef.current)}\n  }, [value])\n  const back = ()=>{\n    setModal(InviteModal, null)\n  }\n  const inviteLink = location.href.replace('chat', 'invitee')\n  return <View style={{alignItems:'center', flex:1}}>\n  <TouchableOpacity style={{paddingVertical:10, flexDirection:\"row\"}} onPress={()=>{Clipboard.setString(inviteLink);setCopied(true)}}>\n    <Text style={{fontSize:14}}>{lang('invite link')}{\": \"}</Text>\n    <Text style={{fontSize:14, color:'#12b886'}}>{inviteLink}{\" \"}</Text>\n    {copied && <Text style={{fontSize:12, color:'red'}}>{lang(\"copied\")}</Text>}\n  </TouchableOpacity>\n  <View style={{'width': '100%', flex:1}}>\n    <TextField name={lang('Username')} value={value} setValue={setValue} width={'80%'}/>\n    {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\n  </View>\n  <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\n    <CommonButton title={lang('invite')} onPress={()=>{\n      messengerMemberMutation.invite({\n        channel_id:id,\n        user_ids:[...selectedRef.current]\n      }).then(back)\n    }}/>\n    <CommonButton title={lang('cancel')} onPress={back}/>\n  </View>\n</View>\n}\n\nexport default function InviteModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const selectedRef = useRef<Set<number>>(new Set())\n  const drawerTabs:TabViewRecord = {\n    group:{\n      title: 'Group',\n      component: ()=><GroupTabView id={id} selectedRef={selectedRef}/>,\n      icon: <></>\n    },\n    external:{\n      title: 'External members',\n      component: ()=><ExternalMembershipTabView id={id} selectedRef={selectedRef}/>,\n      icon: <></>\n    }\n  }\n  return <ModalSection>\n    <View style={{flex:1, width:'100%'}}>\n      <View style={{width:'100%'}}>\n        <Text style={{fontSize:20}}>{lang('invite')}</Text>\n        <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n      </View>\n      <TabView tabs={drawerTabs} tabBarPosition={\"top\"}/>\n    </View>\n  </ModalSection>\n}\n\n","import { useQuery } from \"react-query\";\nimport { getExternalMembershipList } from \"../../apis\";\n\nexport default function useExternalMembershipList(keyword?:string){\n  const { data } = useQuery([\"UserMembershipList\", keyword] , async()=>keyword?(await getExternalMembershipList(keyword)):[])\n  return data\n}","import AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useTheme } from '@react-navigation/native';\nimport { useMemo, useEffect, useState } from 'react';\nimport { ColorSchemeName } from 'react-native';\nimport { Appearance, ColorSchemeName as UserColorSchemeName } from 'react-native-appearance';\n\n// The useColorScheme value is always either light or dark, but the built-in\n// type suggests that it can be null. This will not happen in practice, so this\n// makes it a bit easier to work with.\n\nexport function useInitColorScheme(){\n  const [complete, setComplete] = useState(false)\n  useEffect(()=>{\n    if (!complete){\n      AsyncStorage.getItem(\"color\").then(v=>{\n        Appearance.set({colorScheme:(v==null)?'no-preference':(v as any)})\n        setComplete(true)\n      })\n    }\n  }, [complete])\n  return complete\n}\n\nexport function setColorScheme(colorScheme:UserColorSchemeName){\n  AsyncStorage.setItem('color',colorScheme as string).then(()=>Appearance.set({colorScheme}))\n}\n\nexport default function useColorScheme(): NonNullable<ColorSchemeName> {\n  const { dark } = useTheme()\n  const colorScheme = useMemo(()=> dark?'dark':'light', [dark]) as NonNullable<ColorSchemeName>;\n  return colorScheme\n}\n","import React, { useState } from 'react';\nimport { Text, StyleSheet, Pressable, StyleProp, ViewStyle} from 'react-native';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { CustomButtonProps } from '../types';\n\nconst DefaultButton = (props:CustomButtonProps)=>{\n    const [hover, setHover] = useState(false)\n    return <Pressable\n        onPress={()=>props.onPress()}\n        //@ts-ignore\n        onHoverIn={()=>setHover(true)}\n        onHoverOut={()=>setHover(false)}\n        disabled={props.disabled}\n        style={[\n            {\n                paddingVertical:5, \n                paddingHorizontal:16\n            },\n            props.style,\n            (hover || props.disabled)?{backgroundColor:props.color}:{}\n        ]}>\n            {props.children?props.children:\n            <Text selectable={false} style={[{fontSize:14}, props.textStyle]}>{props.title}</Text>}\n        </Pressable>\n}\n\nexport default (props:CustomButtonProps)=>{\n    const theme = useColorScheme()\n    const _props = {\n        color:Colors[theme].buttonColor,\n        ...props,\n        style:[\n            styles.style,\n            {\n                backgroundColor:Colors[theme].buttonBackgroundColor,\n                borderColor:Colors[theme].buttonBorderColor\n            },\n            props.style,\n        ] as StyleProp<ViewStyle>,\n        textStyle:[\n            styles.text, \n            {color:Colors[theme].text},\n            props.textStyle\n        ]\n    }\n    return <DefaultButton {..._props}/>\n}\n\nconst styles = StyleSheet.create({\n    style:{\n        borderRadius:6, \n        borderWidth:1, \n    },\n    text:{\n        textAlign:'center', \n        fontWeight:'600'\n    }\n});\n","import axios, { AxiosRequestConfig } from 'axios';\n// @ts-ignore\nimport {API_URL} from \"@env\"\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nexport const accountURL =  `${API_URL}/account/`\nconst baseURL =  `${API_URL}/messenger/`\nconst defaultOption:AxiosRequestConfig = {\n    baseURL,\n    withCredentials: true,\n    headers: {}\n};\nconst _axios = axios.create(defaultOption);\n\n_axios.interceptors.request.use(\n    config => {\n        return config;\n    },\n    error => {\n        return Promise.reject(error);\n    }\n)\n\n_axios.interceptors.response.use(\n    response => {\n        // if((response.request.responseURL as string).indexOf('/task/login')>=0 && response.data.length != 0){\n        //     // redirect login\n        // }\n        return response;\n    },\n    error => {\n        if (error.response.status === 401) {\n            return getToken().then(async(token)=>{\n                if (token){\n                    const r = await _axios.post(\"/api/v1/user/sso/refresh/\", {token}, {headers:{'Authorization':''}, baseURL: accountURL})\n                    if (r.status == 200 && r.data !== ''){\n                        setToken(r.data)\n                    }\n                }\n            }).finally(()=>{\n                return Promise.reject(error)\n            })\n        }\n        return Promise.reject(error)\n    }\n)\n\nexport const setToken = async (token:string|null)=>{\n    _axios.defaults.headers['Authorization'] = `JWT ${token}`\n    if (token)\n        await AsyncStorage.setItem(\"Authorization\", token)\n    else\n        AsyncStorage.removeItem(\"Authorization\")\n}\nexport const getToken = async ()=>{\n    const token = await AsyncStorage.getItem(\"Authorization\")\n    _axios.defaults.headers['Authorization'] = token?`JWT ${token}`:null\n    return token\n}\n\nexport default _axios\n","import { createIntl, createIntlCache } from \"@formatjs/intl\";\nimport {I18nManager} from \"react-native\";\nimport * as RNLocalize from \"react-native-localize\";\n\nexport const translations = {\n  ko: require(\"./ko.json\"),\n} as const;\n\ntype Translation = keyof typeof translations;\n\n// fallback if no available language fits\nconst fallback = { languageTag: \"en\", isRTL: false };\n\nconst { languageTag, isRTL } =\n  RNLocalize.findBestLanguageTag(Object.keys(translations)) ?? fallback;\n\n// update layout direction\nI18nManager.forceRTL(isRTL);\n\n// console.log(languageTag)\nconst intl = createIntl(\n  {\n    defaultLocale: \"en\",\n    locale: languageTag,\n    messages: translations[languageTag as Translation],\n  },\n  createIntlCache(),\n);\n\nexport default intl","import React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { IntlShape } from \"@formatjs/intl\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport intl, { translations } from \"../lang\";\n\nconst IntlContext = createContext<{locale?:string, setLocale:(locale:string|undefined)=>void}>({locale:'auto', setLocale:()=>{}});\n\nexport const IntlProvider = ({children}:{children:React.ReactNode})=>{\n  const [complete, setComplete] = useState(false)\n  const [locale, setLocale] = useState<string>()\n  useEffect(()=>{\n    AsyncStorage.getItem(\"locale\").then(v=>{\n      setLocale(v || 'auto')\n      setComplete(true)\n    })\n  }, [])\n  return complete?<IntlContext.Provider value={{locale, setLocale}}>\n      {children}\n    </IntlContext.Provider>:<></>\n}\n\n\n\ntype TranslationParams = Parameters<IntlShape<string>[\"formatMessage\"]>[1];\n\nexport default ()=>{\n  const { locale, setLocale } = useContext(IntlContext)\n  return {\n    lang:(key: string, params?: TranslationParams) => {\n      if (locale == 'en' || key.length==0)\n        return key\n      if (locale != undefined && locale !='auto')\n        return translations[locale as 'ko'][key]\n      return intl\n        .formatMessage({ id: key, defaultMessage: key }, params)\n        .toString()\n    },\n    locale,\n    setLocale: (locale:string)=>{AsyncStorage.setItem('locale', locale).then(()=>setLocale(locale))}\n  }\n}\n","import React, { createContext, useContext, useEffect, useReducer, useMemo, Dispatch, useState } from \"react\"\nimport { checkLogin, login, logout } from \"../apis\"\nimport { getNotification, putNotification } from \"../apis/notification\"\nimport { UserMembership } from \"../types\"\n\ntype AuthAction = {type:string, username?:string, password?:string, user?:UserMembership|null}\n\nexport type Auth = {user?:UserMembership|null, groupId?:number}\n\ntype AuthState ={user?:UserMembership|null, request?:{username:string, password:string}|null}\n\nconst AuthContext = createContext<{auth:Auth, error?:string, dispatch:Dispatch<AuthAction>}>({auth:{}, dispatch:()=>{}});\n\nconst authReducer =(initialState:AuthState, action:AuthAction)=>{\n  switch (action.type){\n      case 'LOGIN_REQUEST':\n        return {\n          ...initialState,\n          request:{username:action.username, password:action.password},\n        } as AuthState\n      case 'LOGIN_GUEST':\n        return {\n          ...initialState,\n          request:{username:'guest', password:'guest'},\n        } as AuthState\n      case 'LOGIN_SUCCESS':\n          return{\n              ...initialState,\n              user:action.user,\n              request:undefined\n          }\n      case 'LOGIN_FAILED':\n          return{\n              ...initialState,\n              request:undefined\n          }\n      case 'LOGOUT_REQUEST':\n          return{\n              ...initialState,\n              request:null\n          }\n      case 'LOGOUT_SUCCESS':\n          return {\n            ...initialState,\n            user:null,\n            request:undefined\n          }\n      case 'REFRESH':\n        return {\n          ...initialState,\n          user:undefined\n        }\n      default:\n          throw new Error( `Unhandled action type: ${action.type}`)\n  }\n}\n\n\nexport const AuthProvider = ({children}:{children:React.ReactNode})=>{\n  const [authState, dispatch] = useReducer(authReducer, {} as Auth)\n  const [error, setError] = useState<string>()\n  const auth = useMemo(()=>({\n    user:authState.user,\n    groupId: authState.user?.membership_set.find(g=>g.root_group_id==null)?.group\n  }), [authState])\n  useEffect(()=>{\n    if(authState.user===undefined){\n      checkLogin().then((user)=>{\n        dispatch({type:\"LOGIN_SUCCESS\", user})\n      }).catch((e)=>{\n        console.log(e)\n        dispatch({type:\"LOGOUT_SUCCESS\"})\n      })\n    }\n    else if(authState.user===null && authState.request){\n      login(authState.request.username, authState.request.password).then(user=>{\n        dispatch({type:\"LOGIN_SUCCESS\", user})\n      }).catch((data)=>{\n        dispatch({type:\"LOGIN_FAILED\"})\n        setError(data.response?.data?.message)\n      })\n    }\n    else if(authState.user && authState.request===null){\n      getNotification(authState.user.id).then(noti=>{\n        noti && putNotification({...noti, token:''}).then(()=>{\n          logout().then(()=>dispatch({type:\"LOGOUT_SUCCESS\"}))\n        })\n      })\n    }\n  }, [authState])\n  return <AuthContext.Provider value={{auth, error, dispatch}}>\n    {children}\n  </AuthContext.Provider>\n}\n\nexport default ()=>{\n  const authContext = useContext(AuthContext)\n  return authContext\n}\n","import React, { useState, createContext, useContext, useEffect } from \"react\";\nimport { Modal } from \"react-native\";\nimport useResizeContext from \"./useResizeContext\";\n\ntype ModalProps = any\n\ntype ModalState = {\n  Component:React.ComponentType<ModalProps>,\n  props:any\n  visible:boolean\n}\ntype SetModal = (Component:ModalState[\"Component\"]|null, props:ModalProps|null)=>void\n\nconst ModalsContext = createContext<{setModal: SetModal}>({\n    setModal: () => {}\n});\n\nexport const ModalsProvider = ({children, modals:allModals}:{children:React.ReactNode, modals:React.ComponentType<ModalProps>[]}) => {\n    const [modals, setModals] = useState<ModalState[]>([]);\n    const windowType = useResizeContext();\n    const [animationType, setAnimationType] = useState('none')\n    const setModal:SetModal = (Component, props) => {\n        const newModals = modals.map(m=>{\n            if(Component==null){\n                return {\n                    ...m,\n                    visible:false\n                }\n            }\n            else if(m.Component == Component){\n                return {\n                    Component, \n                    props:props!==null?props:m.props,\n                    visible:props!==null\n                }\n            }\n            return m        \n        })\n        setModals(newModals);\n    }\n    useEffect(()=>{\n        if (modals.filter(v=>v.visible).length == 0)\n            setAnimationType(windowType == 'landscape'?'fade':'slide')\n    }, [windowType])\n    useEffect(()=>{\n        setModals(allModals.map((Component)=>({Component, props:null, visible:false})))\n    }, [allModals])\n    return <ModalsContext.Provider value={{setModal}}>\n        {children}\n        {modals.map((modal, index)=>{\n            const { Component, props, visible } = modal;\n            return <Modal key={index} animationType={animationType as any} visible={visible} transparent>\n                <Component {...props}/>\n            </Modal>\n        })}\n    </ModalsContext.Provider>\n}\n\nexport default ()=>{\n    const modalsContext = useContext(ModalsContext)\n    return modalsContext\n}\n\n","\nimport { User, UserMembership } from '../types';\nimport axios, { getToken, setToken, accountURL as baseURL } from './axios';\n\nexport const login = async(username:string, password:string) => {\n    if(username.endsWith('.guest') && password.length == 0)\n        password = 'guest'\n    const r = await axios.post(\"/api-token-auth/\", {username, password});\n    if(r.status == 200){\n        await setToken(r.data)\n        return await checkLogin()\n    }\n}\n\nexport const logout = async() => {\n    await setToken(null)\n    return await axios.get(\"/api-auth/logout/\")\n}\n\nexport const guestLogin =  async() => {\n    return await login('guest', 'guest')\n}\n\nconst checkLoginToken = async ()=>{\n    const value = (await axios.get(\"/api/v1/users/memberships/?_self=true\"))?.data\n    if (value && value.length){\n        return value[0] as UserMembership\n    }\n    return null\n}\n\nexport const checkLogin = async() => {\n    const token = await getToken()\n    if (token === null)\n        return null\n    try{\n       return await checkLoginToken()\n    }\n    catch(e:any){\n        let error = e\n        if(e.response !== undefined && e.response.status==401){\n            try{\n                return await checkLoginToken()\n            }\n            catch(e2){\n                error = e2\n            }\n        }\n        const isOffline = ((error as any).code == \"ERR_NETWORK\" || (error as any).message && ((error as any).message as string).startsWith(\"Cannot read\"))\n        throw {error, isOffline}\n    }\n}\n\nexport const getUserList = async (group_id:number)=>{\n    return (await axios.get(`/api/v1/users/?group_id=${group_id}`) ).data as User[]\n}\n\nexport const patchUser = async (user:{id:number, name:string})=>{\n    await axios.patch(`/api/v1/user/`, {ids:[user.id], updated: {name:user.name}}, {baseURL})\n}\n\nexport const getUserMembershipList = async (group_id:number)=>{\n    return (await axios.get(`/api/v1/users/memberships/?group_id=${group_id}`) ).data as UserMembership[]\n}\n\nexport const getExternalMembershipList = async (username:string)=>{\n    return (await axios.get(`/api/v1/users/memberships/?username=${username}`) ).data as UserMembership[]\n}","import { Channel, MessengerMember, MessengerContent, EditMessage, MessengerChannel } from '../types';\nimport axios from './axios';\n\nexport const getMessengerChannelList = async (user_id:number)=>{\n    return (await axios.get(`/api/v1/channels/messenger/?type=messenger&messenger_user_id=${user_id}`) ).data as MessengerChannel[]\n}\n\nexport const postChannel = async(channel:Channel)=>{\n    return (await axios.post(`/api/v1/channels/`, channel)).data as Channel\n}\n\nexport const postDirectChannel = async(channel:Channel)=>{\n    return (await axios.post(`/api/v1/channels/direct/`, channel)).data as Channel\n}\n\nexport const putChannel = async(channel:Channel)=>{\n    return (await axios.put(`/api/v1/channels/${channel.id}/`, channel)).data as Channel\n}\n\nexport const deleteChannel = async(channel_id:number)=>{\n    await axios.delete(`/api/v1/channels/${channel_id}/`)\n}\n\nexport const getMessengerMemberList = async(channel_id:number)=>{\n    try{\n        return (await axios.get(`/api/v1/messengermembers/?channel=${channel_id}`) ).data as MessengerMember[]\n    }\n    catch(e){\n        return Promise.resolve(null)\n    }\n}\n\nexport const postBulkMessengerMember = async(data:{channel_id:number, user_ids:number[]})=>{\n    await axios.post(`/api/v1/messengermembers/bulk/`, {channel:data.channel_id, user_ids:data.user_ids})\n}\n\nexport const deleteMessengerMember = async(member_id:number)=>{\n    await axios.delete(`/api/v1/messengermembers/${member_id}/`)\n}\n\nexport const getMessengerContentList = async (channel_id:number, id_lt?:number)=>{\n    const id_lt_param = id_lt?`&id_lt=${id_lt}`:''\n    return (await axios.get(`/api/v1/messengercontents/?limit=30&channel=${channel_id}${id_lt_param}`)).data.results as MessengerContent[]\n}\n\nexport const getTimerMessageContentList = async (channel_id:number, timer_gt:string)=>{\n    return (await axios.get(`/api/v1/messengercontents/?channel=${channel_id}&timer_gt=${timer_gt}`)).data as MessengerContent[]\n}\n\nexport const postMessage = async (message:EditMessage)=>{\n    if (message.file){\n        const formData = new FormData(); // formData 객체를 생성한다.\n        formData.append(\"file\", message.file)\n        Object.entries(message).forEach(value=>{\n            formData.append(value[0], `${value[1]}`)\n        })\n        await axios.post(`/api/v1/messengercontents/messages/`, formData, {headers:{\n            ...(axios.defaults.headers as any), \"Content-Type\": \"multipart/form-data\",\n        }})\n    }\n    else{\n        await axios.post(`/api/v1/messengercontents/messages/`, message)\n    }\n}\n\nexport const deleteMessengerContent = async (content_id:number)=>{\n    await axios.delete(`/api/v1/messengercontents/${content_id}/`)\n}","/**\n * Learn more about deep linking with React Navigation\n * https://reactnavigation.org/docs/deep-linking\n * https://reactnavigation.org/docs/configuring-links\n */\n\nimport { LinkingOptions } from '@react-navigation/native';\nimport * as Linking from 'expo-linking';\nimport {main, login, modal} from '../screens';\n\nconst ROOTPATH = 'tokki-tok'  // github repository name\n\nObject.values(modal).forEach(v=>v.path = ROOTPATH + '/' + v.path)\n\nexport default  {\n  prefixes: [Linking.makeUrl('/')],\n  config: {\n    screens: {\n      Main: {\n        screens:{\n          ...main,\n          ...login,\n          NotFound: '*',\n        },\n        path: ROOTPATH\n      },\n      ...modal\n    },\n  },\n} as LinkingOptions;\n","import { StackScreenProps } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport useLangContext from '../hooks/useLangContext';\n\nexport default function NotFoundScreen({\n  navigation,\n}: StackScreenProps<any, 'NotFound'>) {\n  const { lang } = useLangContext()\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>{lang(\"This screen doesn't exist.\")}</Text>\n      <TouchableOpacity onPress={() => navigation.replace('HomeScreen')} style={styles.link}>\n        <Text style={styles.linkText}>{lang(\"Go to home screen!\")}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","import { useTheme } from '@react-navigation/native';\nimport React, { useState } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Profile from '../components/Profile';\nimport TextButton from '../components/TextButton';\nimport Colors from '../constants/Colors';\nimport useResizeContext from '../hooks/useResizeContext';\nimport TabView from '../components/TabView';\nimport { MessengerChannel, TabViewRecord, User, UserMembership } from '../types';\nimport useModalsContext from '../hooks/useModalsContext';\nimport ChannelEditModal from '../modals/ChannelEditModal';\nimport CommonItem from '../components/CommonItem';\nimport { Text } from '../components/Themed';\nimport useAuthContext, { Auth } from '../hooks/useAuthContext';\nimport { useMessengerChannelSorted } from '../hooks/lists/useMessengerChannelList';\nimport { navigate } from '.'\nimport { avatarFromChannel } from '../components/Avatar';\n\nconst DrawerTabView = (props:{auth:Auth, data:(MessengerChannel & {onPress?:()=>void})[]})=><View style={{flex:1}}>\n    {props.data.map((item, index)=>{\n      const {name} = avatarFromChannel(item, props.auth.user)\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={item.onPress}>\n        <Text style={{marginLeft:20}}>{name}</Text>\n      </CommonItem>\n    })}\n</View>\n\nconst MessengerTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted(auth);\n  return <DrawerTabView auth={auth} data={(channelList || []).map(item=>({...item, onPress:()=>navigate(\"ChatScreen\", {id:item.id})}))}/>\n}\n\nconst drawerTabs:TabViewRecord = {\n  MessengerTab:{\n      title:'messenger',\n      component:MessengerTabView,\n      icon:<></>\n  },\n}\n\nexport default ({user}:{user:UserMembership})=> {\n  const { colors } = useTheme();\n  const windowType = useResizeContext();\n  const [index, setIndex] = useState(0);\n  const { setModal } = useModalsContext()\n  const onAddList = [\n    ()=>setModal(ChannelEditModal, {type:'messenger'}),\n    ()=>setModal(ChannelEditModal, {type:'board'})\n  ]\n  return <View style={windowType=='landscape'?[\n      styles.tabBar,\n      {\n        backgroundColor: colors.card,\n        borderTopColor: colors.border,\n      },\n      // tabBarStyle,\n    ]:{width:0}}\n    pointerEvents={false ? 'none' : 'auto'}\n  >\n    <Profile userId={user.id} username={user.username} name={user.name}/>\n    {windowType=='landscape' && <>\n      <View style={{flexDirection:'row-reverse'}}>\n          <TextButton title='+' textStyle={{fontSize:20}} style={{borderRadius:20}} onPress={onAddList[index]}/>\n      </View>\n      <View accessibilityRole=\"tablist\" style={styles.content}>\n        {Object.keys(drawerTabs).length>1 ? \n          <TabView tabs={drawerTabs} tabBarPosition={\"top\"} onTab={setIndex}/>: \n          <View style={{borderTopWidth:1, flex:1, borderColor:colors.border}}>            \n            {Object.values(drawerTabs).map(drawerTab=>{const Tab = drawerTab.component; return <Tab key={drawerTab.title}/>})}\n          </View>\n        }\n      </View>\n    </>}\n  </View>\n}\n\n{/*<Text style={[styles.label, { color: d.isFocused ? colors.primary : '#222' }]}></Text> */}\n\nconst styles = StyleSheet.create({\n    tabBar: {\n      width:240,\n      elevation: 8,\n      borderRightWidth:1,\n      borderColor:Colors.borderColor\n    },\n    content: {\n      flex: 1,\n      flexDirection: 'row',\n    },\n    tab: {\n        flex: 1,\n        alignItems: 'center',\n    },\n    label: {\n        textAlign: 'center',\n        backgroundColor: 'transparent',\n      },\n  });","import InviteModal from \"./InviteModal\";\nimport ProfileModal from \"./ProfileModal\";\nimport ChannelEditModal from \"./ChannelEditModal\"\nimport GuestLogoutModal from \"./GuestLogoutModal\";\nimport DateTimePickerModal from \"./DateTimePickerModal\"\nimport MessageModal from \"./MessageModal\";\n\nexport default [\n    InviteModal,\n    ProfileModal,\n    ChannelEditModal,\n    GuestLogoutModal,\n    DateTimePickerModal,\n    MessageModal\n]","import { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\nimport React, {useMemo} from 'react';\nimport { View } from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport useResizeContext from '../hooks/useResizeContext';\nimport NotFoundScreen from '../screens/NotFoundScreen';\nimport {main, login, modal} from '../screens';\nimport DrawerNavigator from './DrawerNavigator';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { WebSocketProvider } from '../hooks/useWebsocketContext';\nimport HeaderRight from '../components/HeaderRight'\nimport Colors from '../constants/Colors';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport useFirebaseContext from '../hooks/useFirebaseContext';\nimport useIsMobile from '../hooks/useIsMobile';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { ModalsProvider } from '../hooks/useModalsContext';\nimport modals from '../modals';\nimport useLangContext from '../hooks/useLangContext';\n\nconst Root = createStackNavigator();\n\nexport default function RootNavigator() {\n    const windowType = useResizeContext();\n    return <Root.Navigator\n        mode= 'modal'\n        headerMode= 'screen'\n        screenOptions={{\n            cardStyle:{backgroundColor:\"white\"},\n            animationEnabled: true,\n            cardStyleInterpolator: CardStyleInterpolators.forVerticalIOS,\n        }}\n    >\n        <Root.Screen name=\"Main\" component={MainNavigator} options={{headerShown:false}}/>\n        {Object.entries(modal).map(([key, screen])=><Root.Screen key={key} name={key} component={screen.component} options={{\n            title: screen.title,\n            gestureDirection: windowType == 'landscape'?'vertical-inverted':'vertical'\n        }} />)}\n    </Root.Navigator>\n}\n\nconst Main = createStackNavigator();\n\nfunction headerLeft(navigation:any, route:any, windowType:string, isMobile:boolean){\n    const canGOBackScreen = ['HomeScreen', 'LoginScreen'].findIndex(v=>v == route.name) == -1\n    const goBack = ()=>{\n        if (navigation.canGoBack())\n            navigation.goBack()\n        else if (canGOBackScreen)\n            navigation.replace('HomeScreen')\n    }\n    if (windowType=='portrait' && canGOBackScreen)\n        return <TouchableOpacity onPress={goBack}><Ionicons size={isMobile?20:24} style={{marginHorizontal:isMobile?16:20 }} name=\"arrow-back\"/></TouchableOpacity>\n    return null\n}\n\nconst MainNavigator = ()=>{\n    const windowType = useResizeContext();\n    const isMobile = useIsMobile()\n    const {auth} = useAuthContext()\n    const theme = useColorScheme()\n    const {lang, locale} = useLangContext()\n    const entries = useMemo(()=>{\n        if (auth.user === undefined)\n            return []\n        console.log('current user: ', auth.user)\n        return Object.entries(auth.user === null?login:main)\n    }, [auth, locale])\n    const modalValues = useMemo(()=>{\n        if (auth.user === undefined)\n            return []\n        return auth.user === null?[]:modals\n    }, [auth])\n\n    const {enable:noti} = useFirebaseContext(auth)\n    const headerLeftColor = 'white'\n    return (auth.user!==undefined && noti!=null?<View style={{flexDirection:'row', flex:1}}>\n        <ModalsProvider modals={modalValues}>\n            {auth.user?<DrawerNavigator user={auth.user}/>:undefined}\n            <View style={{flex:1}}>\n                <WebSocketProvider disable={auth.user === null || auth.user === undefined}>\n                        <Main.Navigator\n                            screenOptions={({navigation, route})=>({\n                                headerStyle:{backgroundColor:Colors[theme].header, height:isMobile?50:undefined},\n                                headerTitleStyle:{color:'white'},\n                                headerLeft:()=>headerLeft(navigation, route, windowType, isMobile),\n                                headerRight:()=><HeaderRight/>,\n                                headerLeftContainerStyle:{backgroundColor:headerLeftColor, borderBottomWidth:1, borderColor:headerLeftColor},\n                                cardStyle:{flexShrink:1},\n                                animationEnabled:windowType=='portrait',\n                                cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS\n                            })}\n                        >\n                            {entries.map(([key, screen])=><Main.Screen key={key} name={key} component={screen.component} options={{ title: lang(screen.title) }} />)}\n                            <Main.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\n                        </Main.Navigator>\n                </WebSocketProvider>\n            </View>\n        </ModalsProvider>\n    </View>:<></>);\n}","import React, { useEffect, useState } from 'react'\nimport { Dimensions, Platform, View } from 'react-native'\nimport useIsMobile from '../hooks/useIsMobile'\n\n\nexport default (props:{children:React.ReactNode})=>{\n    const isMobile = useIsMobile()\n    const [height, setHeight] = useState(window.innerHeight + 1)\n    useEffect(()=>{\n        if(isMobile && Platform.OS == 'web'){\n            const onChange = (e:any)=>{\n                setHeight(window.innerHeight + 1)\n            }\n            Dimensions.addEventListener(\"change\",onChange)\n            return () => Dimensions.removeEventListener(\"change\", onChange)\n            \n        }\n    },[ isMobile])\n    return <View style={{height:isMobile&&Platform.OS == 'web'?height:'100%'}}>\n        {props.children}\n    </View>\n\n}\n  ","import React from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport Navigation from './src/navigation';\nimport useCachedResources from './src/hooks/useCachedResources';\nimport { useInitColorScheme } from './src/hooks/useColorScheme';\nimport MobileSafeAreaView from './src/components/MobileSafeAreaView';\nimport { AuthProvider } from './src/hooks/useAuthContext';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { IntlProvider } from './src/hooks/useLangContext';\n\nconst queryClient = new QueryClient();\n\nexport default function App() {\n  const isLoadingComplete = useCachedResources();\n  const isAppearenceComplete = useInitColorScheme()\n  if (!isLoadingComplete || !isAppearenceComplete) {\n    return null;\n  } else {\n    return (\n      <SafeAreaProvider>\n        <MobileSafeAreaView>\n          <AuthProvider>\n            <QueryClientProvider client={queryClient}>\n              <IntlProvider>\n                {/* devtools */}\n                {/* <ReactQueryDevtools initialIsOpen={true} /> */}\n                <Navigation/>\n                <StatusBar />\n              </IntlProvider>\n            </QueryClientProvider>\n          </AuthProvider>\n        </MobileSafeAreaView>\n      </SafeAreaProvider>\n    );\n  }\n}\n","import { Ionicons } from '@expo/vector-icons';\nimport * as Font from 'expo-font';\nimport * as SplashScreen from 'expo-splash-screen';\nimport * as React from 'react';\n\nexport default function useCachedResources() {\n  const [isLoadingComplete, setLoadingComplete] = React.useState(false);\n\n  // Load any resources or data that we need prior to rendering the app\n  React.useEffect(() => {\n    async function loadResourcesAndDataAsync() {\n      try {\n        SplashScreen.preventAutoHideAsync();\n\n        // Load fonts\n        await Font.loadAsync({\n          ...Ionicons.font,\n          'space-mono': require('../assets/fonts/SpaceMono-Regular.ttf'),\n        });\n      } catch (e) {\n        // We might want to provide this error information to an error reporting service\n        console.warn(e);\n      } finally {\n        setLoadingComplete(true);\n        SplashScreen.hideAsync();\n      }\n    }\n\n    loadResourcesAndDataAsync();\n  }, []);\n\n  return isLoadingComplete;\n}\n","import React, { useState, useEffect, createContext, useContext, useMemo } from 'react';\nimport { Dimensions, ScaledSize, useWindowDimensions } from 'react-native';\n//@ts-ignore\nimport useMobileDetect from 'use-mobile-detect-hook';\n\ntype WindowType = 'portrait' | 'landscape'\n\nconst getWindowType = (window:{width:number, height:number})=> window.height >= window.width?'portrait':'landscape' as WindowType;\n\nconst ResizeContextContext = createContext<WindowType>(getWindowType(Dimensions.get('window')));\n\nexport const ResizeContextProvider = ({children}:{children:React.ReactNode})=>{\n  const detectMobile = useMobileDetect();\n  const {width, height} = useWindowDimensions()\n  const [windowType, setWindowType] = useState(getWindowType({width, height}))\n  useEffect(()=>{\n    setWindowType(getWindowType({width, height}))\n  }, [width, height])\n  return <ResizeContextContext.Provider value={detectMobile.isMobile()?'portrait':windowType}>\n    {children}\n  </ResizeContextContext.Provider>\n}\n\nexport default function useResizeContext() {\n  const windowType = useContext(ResizeContextContext)\n  return windowType\n}","var map = {\n\t\"./af\": 451,\n\t\"./af.js\": 451,\n\t\"./ar\": 452,\n\t\"./ar-dz\": 453,\n\t\"./ar-dz.js\": 453,\n\t\"./ar-kw\": 454,\n\t\"./ar-kw.js\": 454,\n\t\"./ar-ly\": 455,\n\t\"./ar-ly.js\": 455,\n\t\"./ar-ma\": 456,\n\t\"./ar-ma.js\": 456,\n\t\"./ar-sa\": 457,\n\t\"./ar-sa.js\": 457,\n\t\"./ar-tn\": 458,\n\t\"./ar-tn.js\": 458,\n\t\"./ar.js\": 452,\n\t\"./az\": 459,\n\t\"./az.js\": 459,\n\t\"./be\": 460,\n\t\"./be.js\": 460,\n\t\"./bg\": 461,\n\t\"./bg.js\": 461,\n\t\"./bm\": 462,\n\t\"./bm.js\": 462,\n\t\"./bn\": 463,\n\t\"./bn-bd\": 464,\n\t\"./bn-bd.js\": 464,\n\t\"./bn.js\": 463,\n\t\"./bo\": 465,\n\t\"./bo.js\": 465,\n\t\"./br\": 466,\n\t\"./br.js\": 466,\n\t\"./bs\": 467,\n\t\"./bs.js\": 467,\n\t\"./ca\": 468,\n\t\"./ca.js\": 468,\n\t\"./cs\": 469,\n\t\"./cs.js\": 469,\n\t\"./cv\": 470,\n\t\"./cv.js\": 470,\n\t\"./cy\": 471,\n\t\"./cy.js\": 471,\n\t\"./da\": 472,\n\t\"./da.js\": 472,\n\t\"./de\": 473,\n\t\"./de-at\": 474,\n\t\"./de-at.js\": 474,\n\t\"./de-ch\": 475,\n\t\"./de-ch.js\": 475,\n\t\"./de.js\": 473,\n\t\"./dv\": 476,\n\t\"./dv.js\": 476,\n\t\"./el\": 477,\n\t\"./el.js\": 477,\n\t\"./en-au\": 478,\n\t\"./en-au.js\": 478,\n\t\"./en-ca\": 479,\n\t\"./en-ca.js\": 479,\n\t\"./en-gb\": 480,\n\t\"./en-gb.js\": 480,\n\t\"./en-ie\": 481,\n\t\"./en-ie.js\": 481,\n\t\"./en-il\": 482,\n\t\"./en-il.js\": 482,\n\t\"./en-in\": 483,\n\t\"./en-in.js\": 483,\n\t\"./en-nz\": 484,\n\t\"./en-nz.js\": 484,\n\t\"./en-sg\": 485,\n\t\"./en-sg.js\": 485,\n\t\"./eo\": 486,\n\t\"./eo.js\": 486,\n\t\"./es\": 487,\n\t\"./es-do\": 488,\n\t\"./es-do.js\": 488,\n\t\"./es-mx\": 489,\n\t\"./es-mx.js\": 489,\n\t\"./es-us\": 490,\n\t\"./es-us.js\": 490,\n\t\"./es.js\": 487,\n\t\"./et\": 491,\n\t\"./et.js\": 491,\n\t\"./eu\": 492,\n\t\"./eu.js\": 492,\n\t\"./fa\": 493,\n\t\"./fa.js\": 493,\n\t\"./fi\": 494,\n\t\"./fi.js\": 494,\n\t\"./fil\": 495,\n\t\"./fil.js\": 495,\n\t\"./fo\": 496,\n\t\"./fo.js\": 496,\n\t\"./fr\": 497,\n\t\"./fr-ca\": 498,\n\t\"./fr-ca.js\": 498,\n\t\"./fr-ch\": 499,\n\t\"./fr-ch.js\": 499,\n\t\"./fr.js\": 497,\n\t\"./fy\": 500,\n\t\"./fy.js\": 500,\n\t\"./ga\": 501,\n\t\"./ga.js\": 501,\n\t\"./gd\": 502,\n\t\"./gd.js\": 502,\n\t\"./gl\": 503,\n\t\"./gl.js\": 503,\n\t\"./gom-deva\": 504,\n\t\"./gom-deva.js\": 504,\n\t\"./gom-latn\": 505,\n\t\"./gom-latn.js\": 505,\n\t\"./gu\": 506,\n\t\"./gu.js\": 506,\n\t\"./he\": 507,\n\t\"./he.js\": 507,\n\t\"./hi\": 508,\n\t\"./hi.js\": 508,\n\t\"./hr\": 509,\n\t\"./hr.js\": 509,\n\t\"./hu\": 510,\n\t\"./hu.js\": 510,\n\t\"./hy-am\": 511,\n\t\"./hy-am.js\": 511,\n\t\"./id\": 512,\n\t\"./id.js\": 512,\n\t\"./is\": 513,\n\t\"./is.js\": 513,\n\t\"./it\": 514,\n\t\"./it-ch\": 515,\n\t\"./it-ch.js\": 515,\n\t\"./it.js\": 514,\n\t\"./ja\": 516,\n\t\"./ja.js\": 516,\n\t\"./jv\": 517,\n\t\"./jv.js\": 517,\n\t\"./ka\": 518,\n\t\"./ka.js\": 518,\n\t\"./kk\": 519,\n\t\"./kk.js\": 519,\n\t\"./km\": 520,\n\t\"./km.js\": 520,\n\t\"./kn\": 521,\n\t\"./kn.js\": 521,\n\t\"./ko\": 522,\n\t\"./ko.js\": 522,\n\t\"./ku\": 523,\n\t\"./ku.js\": 523,\n\t\"./ky\": 524,\n\t\"./ky.js\": 524,\n\t\"./lb\": 525,\n\t\"./lb.js\": 525,\n\t\"./lo\": 526,\n\t\"./lo.js\": 526,\n\t\"./lt\": 527,\n\t\"./lt.js\": 527,\n\t\"./lv\": 528,\n\t\"./lv.js\": 528,\n\t\"./me\": 529,\n\t\"./me.js\": 529,\n\t\"./mi\": 530,\n\t\"./mi.js\": 530,\n\t\"./mk\": 531,\n\t\"./mk.js\": 531,\n\t\"./ml\": 532,\n\t\"./ml.js\": 532,\n\t\"./mn\": 533,\n\t\"./mn.js\": 533,\n\t\"./mr\": 534,\n\t\"./mr.js\": 534,\n\t\"./ms\": 535,\n\t\"./ms-my\": 536,\n\t\"./ms-my.js\": 536,\n\t\"./ms.js\": 535,\n\t\"./mt\": 537,\n\t\"./mt.js\": 537,\n\t\"./my\": 538,\n\t\"./my.js\": 538,\n\t\"./nb\": 539,\n\t\"./nb.js\": 539,\n\t\"./ne\": 540,\n\t\"./ne.js\": 540,\n\t\"./nl\": 541,\n\t\"./nl-be\": 542,\n\t\"./nl-be.js\": 542,\n\t\"./nl.js\": 541,\n\t\"./nn\": 543,\n\t\"./nn.js\": 543,\n\t\"./oc-lnc\": 544,\n\t\"./oc-lnc.js\": 544,\n\t\"./pa-in\": 545,\n\t\"./pa-in.js\": 545,\n\t\"./pl\": 546,\n\t\"./pl.js\": 546,\n\t\"./pt\": 547,\n\t\"./pt-br\": 548,\n\t\"./pt-br.js\": 548,\n\t\"./pt.js\": 547,\n\t\"./ro\": 549,\n\t\"./ro.js\": 549,\n\t\"./ru\": 550,\n\t\"./ru.js\": 550,\n\t\"./sd\": 551,\n\t\"./sd.js\": 551,\n\t\"./se\": 552,\n\t\"./se.js\": 552,\n\t\"./si\": 553,\n\t\"./si.js\": 553,\n\t\"./sk\": 554,\n\t\"./sk.js\": 554,\n\t\"./sl\": 555,\n\t\"./sl.js\": 555,\n\t\"./sq\": 556,\n\t\"./sq.js\": 556,\n\t\"./sr\": 557,\n\t\"./sr-cyrl\": 558,\n\t\"./sr-cyrl.js\": 558,\n\t\"./sr.js\": 557,\n\t\"./ss\": 559,\n\t\"./ss.js\": 559,\n\t\"./sv\": 560,\n\t\"./sv.js\": 560,\n\t\"./sw\": 561,\n\t\"./sw.js\": 561,\n\t\"./ta\": 562,\n\t\"./ta.js\": 562,\n\t\"./te\": 563,\n\t\"./te.js\": 563,\n\t\"./tet\": 564,\n\t\"./tet.js\": 564,\n\t\"./tg\": 565,\n\t\"./tg.js\": 565,\n\t\"./th\": 566,\n\t\"./th.js\": 566,\n\t\"./tk\": 567,\n\t\"./tk.js\": 567,\n\t\"./tl-ph\": 568,\n\t\"./tl-ph.js\": 568,\n\t\"./tlh\": 569,\n\t\"./tlh.js\": 569,\n\t\"./tr\": 570,\n\t\"./tr.js\": 570,\n\t\"./tzl\": 571,\n\t\"./tzl.js\": 571,\n\t\"./tzm\": 572,\n\t\"./tzm-latn\": 573,\n\t\"./tzm-latn.js\": 573,\n\t\"./tzm.js\": 572,\n\t\"./ug-cn\": 574,\n\t\"./ug-cn.js\": 574,\n\t\"./uk\": 575,\n\t\"./uk.js\": 575,\n\t\"./ur\": 576,\n\t\"./ur.js\": 576,\n\t\"./uz\": 577,\n\t\"./uz-latn\": 578,\n\t\"./uz-latn.js\": 578,\n\t\"./uz.js\": 577,\n\t\"./vi\": 579,\n\t\"./vi.js\": 579,\n\t\"./x-pseudo\": 580,\n\t\"./x-pseudo.js\": 580,\n\t\"./yo\": 581,\n\t\"./yo.js\": 581,\n\t\"./zh-cn\": 582,\n\t\"./zh-cn.js\": 582,\n\t\"./zh-hk\": 583,\n\t\"./zh-hk.js\": 583,\n\t\"./zh-mo\": 584,\n\t\"./zh-mo.js\": 584,\n\t\"./zh-tw\": 585,\n\t\"./zh-tw.js\": 585\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 781;","import * as React from 'react';\nimport { Avatar } from 'react-native-paper';\nimport { AvatarProps } from '../../types';\n\nconst normalizeHash = (hash: number, min: number, max: number) => {\n    return Math.floor((hash % (max - min)) + min);\n};\n\nconst stringToHSL = (str: string, initHash?:number) => {\n    let hash = initHash || 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    hash = Math.abs(hash);\n    return `hsl(${normalizeHash(hash, 0, 360)}, ${normalizeHash(hash, 0, 100)}%, ${normalizeHash(hash, 25, 75)}%)`;\n};\n\nexport default (props:AvatarProps) => {\n    const backgroundColor = stringToHSL(props.name, props.userId)\n    return <Avatar.Text style={{backgroundColor}} size={props.size} label={props.name.split(' ').map(v=>v[0]).join().toUpperCase()} />\n};","import React from 'react';\n// import { MaterialIcons } from \"@expo/vector-icons\"\nimport Avatar from '../lib/react-native-paper/Avatar';\nimport { AvatarProps, MessengerChannel, User } from '../types';\n\nexport function avatarFromChannel(item:MessengerChannel, user?:User|null){\n    let avatar;\n    let name = item.name\n    if (item.member_count<3){\n        avatar = (item.member_count==1 || user?.id == item.subowner.id)?item.owner:item.subowner\n        name = name.length>0?name:avatar.name \n    }\n    return {avatar, name}\n}\n\nexport default (props:AvatarProps)=>{\n    // return <MaterialIcons size={38} style={{ marginBottom: -3, marginRight:10 }} name='account-circle'/>\n    return <Avatar {...props}/>\n}\n\n","firebaseConfig = {\n    \"authDomain\": \"virtual-metrics-355712.firebaseapp.com\",\n    \"projectId\": \"virtual-metrics-355712\",\n    \"storageBucket\": \"virtual-metrics-355712.appspot.com\",\n    \"messagingSenderId\": \"76003576924\",\n    \"appId\": \"1:76003576924:web:c8c8a006d07918bbc02a99\",\n    \"measurementId\": \"G-SEL35L4N5R\"\n}\nif (typeof module !== 'undefined') {\n    module.exports = firebaseConfig\n}\n","module.exports = __webpack_public_path__ + \"./fonts/SpaceMono-Regular.ttf\";"],"sourceRoot":""}