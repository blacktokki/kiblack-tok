{"version":3,"file":"static/js/621.703ba64d.chunk.js","mappings":"k5BAOe,SAASA,EAAwBC,GAC9C,IAAMC,GAAcC,EAAAA,EAAAA,kBACbC,GAAmBC,EAAAA,EAAAA,WAAnBD,gBACCE,GAASC,EAAAA,EAAAA,UAAS,wBAAsBC,EAAAA,EAAAA,UAAG,gBAAAC,EAAA,aAAeC,EAAAA,EAAAA,yBAA4B,MAAJT,GAAU,OAANQ,EAAJR,EAAMU,WAAF,EAAJF,EAAYG,GAAG,KAAjGN,KAuBR,OArBAO,EAAAA,EAAAA,YAAU,WACR,GAAqB,MAAlBT,IAC2B,SAAzBA,EAAsB,MACvBF,EAAYY,aAAiC,wBAAwB,SAACC,GACpE,OAAa,MAALA,GAAAA,EAAOC,MAAK,SAAAC,GAAC,OAAEA,EAAEL,IAAIR,EAAsB,KAAM,EAAC,IAAEW,EAAM,CAACX,EAAsB,MAACc,QAAAC,EAAAA,EAAAA,SAAOJ,GAAQ,MAAMK,MAAK,SAACC,EAAGC,GAAC,OAAGD,EAAET,GAAKU,EAAEV,EAAE,GACzI,IAE2B,gBAAzBR,EAAsB,MAAkB,CAC1C,IAAME,EAAwBF,EAAsB,KACpDF,EAAYY,aAAiC,wBAAwB,SAACC,GAAK,OAAIA,GAAS,IAAIQ,KAAI,SAAAN,GACpE,IAADO,EAAzB,OAAIP,EAAEL,IAAMN,EAAKmB,QACfC,EAAAA,EAAA,GAAWT,GAAC,IAAEU,aAAa,CAACC,QAA2B,OAApBJ,EAAClB,EAAKuB,YAAY,SAAE,EAAnBL,EAAqBI,QAASE,QAAQxB,EAAKwB,WAE1Eb,CACT,GAAE,GACJ,CAKJ,GAAG,CAACb,IACGE,CACT,CAEO,SAASyB,EAA0B9B,GACxC,IAAM+B,EAAchC,EAAwBC,GAC5C,OAAkB,MAAX+B,OAAW,EAAXA,EAAaZ,MAAK,SAACC,EAAGC,GAAC,IAAAW,EAAAC,EAAA,QAAkB,OAAdD,EAAAZ,EAAEM,mBAAY,EAAdM,EAAgBH,UAAW,MAAqB,OAAdI,EAAAZ,EAAEK,mBAAY,EAAdO,EAAgBJ,UAAW,IAAI,GAAG,CAAC,GACzG,CACO,SAASK,IACd,IAAMjC,GAAcC,EAAAA,EAAAA,kBAEdiC,GAASC,EAAAA,EAAAA,aAAYC,EAAAA,YAAa,CACtCC,UAAW,kBAAIrC,EAAYsC,kBAAkB,uBAAuB,IAGhEC,GAASJ,EAAAA,EAAAA,aAAYK,EAAAA,WAAY,CACrCH,UAAW,kBAAMrC,EAAYsC,kBAAkB,uBAAuB,IAGlEG,GAASN,EAAAA,EAAAA,aAAYO,EAAAA,kBAAmB,CAC5CL,UAAW,kBAAMrC,EAAYsC,kBAAkB,uBAAuB,IAGxE,MAAO,CAAEJ,OAAOA,EAAOS,YAAaJ,OAAOA,EAAOI,YAAaF,OAAOA,EAAOE,YAC/E,CCrDe,SAASC,EAAuBC,GAE7C,OADiBxC,EAAAA,EAAAA,UAAS,CAAC,sBAAuBwC,IAAWvC,EAAAA,EAAAA,UAAG,yBAAewC,EAAAA,EAAAA,wBAAuBD,EAAW,KAAzGzC,IAEV,CAGO,SAAS2C,IACd,IAAM/C,GAAcC,EAAAA,EAAAA,kBACd+C,GAASb,EAAAA,EAAAA,aAAYc,EAAAA,wBAAyB,CAClDZ,UAAW,WACTrC,EAAYsC,kBAAkB,sBAChC,IAGIY,GAAQf,EAAAA,EAAAA,aAAYgB,EAAAA,sBAAuB,CAC/Cd,UAAW,WACTrC,EAAYsC,kBAAkB,wBAC9BtC,EAAYsC,kBAAkB,sBAChC,IAEF,MAAO,CAACU,OAAOA,EAAOL,YAAaO,MAAMA,EAAMP,YACjD,C,IClBIS,E,WACAC,EAAoB,EAYxB,mBACI,IAAOtD,GAAQuD,EAAAA,EAAAA,WAARvD,KACD+B,EAAchC,EAAwBC,GACtCwD,EAA0BR,KAChCpC,EAAAA,EAAAA,YAAU,WACN,GAAIZ,EAAKU,MACL,GAAI2C,GAActB,EAAY,CAC1B,IAAIpB,EAAK0C,EACLI,EAAW,WAAH,OAAOC,GAAS,OAAQ,CAACC,OAAO,aAAcC,OAAQ,CAACjD,GAAAA,IAAK,EACxE0C,OAAaQ,EACbP,EAAgB,OACqBO,IAAlC9B,EAAYhB,MAAK,SAAAC,GAAC,OAAEA,EAAEL,IAAIA,CAAE,KAC3BmD,QAAQC,IAAI,8BAA8BpD,EAAE,KAC5C6C,EAAwBP,OAAO,CAC3BH,WAAWnC,EACXqD,SAAS,CAAChE,EAAKU,KAAKC,MACrBsD,KAAKR,KAGRK,QAAQC,IAAI,kBACZN,IAER,OAGqB,GAAjBH,IACAA,EAAc,EAG1B,GAAG,CAACtD,EAAM+B,KACVnB,EAAAA,EAAAA,YAAU,WACHZ,EAAKU,MAAuB,GAAf4C,GACZI,GAAS,OAAQ,CAACC,OAAO,cAEjC,GAAG,CAAC3D,EAAKU,MACZ,E,qIChDKwD,EAAuB,OAAbC,EAAAA,QAASC,GAAU,SAACC,GAAcC,SAASC,KAAKF,CAAG,EAAEG,EAAAA,QAAQN,QAE7E,iBAAgBO,GACZ,OAAMC,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOC,EAAOC,eAAeC,SAAA,EACrCC,EAAAA,EAAAA,KAACC,EAAAA,QAAgB,CAACL,MAAOC,EAAOK,cAAeC,QAAS,kBAAIjB,EAAQ,0CAA0C,EAACa,UAC3GC,EAAAA,EAAAA,KAACI,EAAAA,UAAS,CAACC,KAAK,SAASC,KAAM,GAAIC,MAAOC,EAAAA,QAAOf,EAAMgB,OAAOC,eAElEV,EAAAA,EAAAA,KAACC,EAAAA,QAAgB,CAACL,MAAOC,EAAOK,cAAeC,QAAS,kBAAIX,EAAAA,QAAQN,QAAQ,6BAA6B,EAACa,UACtGC,EAAAA,EAAAA,KAACI,EAAAA,UAAS,CAACC,KAAK,OAAOC,KAAM,GAAIC,MAAOC,EAAAA,QAAOf,EAAMgB,OAAOC,gBAGvE,EAED,IAAMb,EAASc,EAAAA,QAAWxD,OAAO,CAC3B2C,eAAgB,CACdc,MAAO,OACPC,cAAe,MACfC,eAAgB,WAChBC,cAAe,GACfC,aAAc,IAEhBd,cAAe,CACbe,WAAY,SACZH,eAAgB,SAChBF,MAAO,GACPM,OAAQ,GACRC,iBAAkB,GAClBC,YAAa,EACbC,YAAa,UACbC,aAAc,MCgDtB,IAAMzB,EAASc,EAAAA,QAAWxD,OAAO,CAC7BoE,gBAAiB,CACfC,KAAM,EACNC,gBAAiB,QAEnBC,aAAc,CACZT,WAAY,SACZU,WAAY,GACZZ,cAAe,GACfU,gBAAiB,WAEnBG,kBAAmB,CACjBhB,MAAO,IACPiB,WAAY,WAEdC,kBAAmB,CACjBC,UAAW,GACXxB,MAAO,UACPyB,SAAU,IAEZC,uBAAwB,CACtB1B,MAAO,OACP2B,WAAY,QAEdC,cAAe,CACbX,KAAM,EACNV,eAAgB,gBAChBa,WAAY,GACZS,qBAAsB,GACtBC,oBAAqB,GACrBZ,gBAAiB,OACjBR,WAAY,UAEdqB,KAAM,CACJ1B,MAAO,OACP2B,SAAU,KAEZC,WAAY,CACVtB,OAAQ,GACRN,MAAM,QAER6B,gBAAgB,CACdC,kBAAkB,SAClBnC,MAAM,MACNyB,SAAS,IAEXW,WAAY,CACVzB,OAAQ,GACR0B,kBAAmB,GACnBC,aAAc,GACdpB,gBAAiB,UACjBH,aAAc,IAEhBwB,OAAQ,CACN7B,WAAY,SACZH,eAAgB,SAChBI,OAAQ,GACRO,gBAAiB,UACjBH,aAAc,IAEhByB,aAAc,CACZxC,MAAO,OACPyB,SAAU,IAEZgB,aAAc,CACZpC,MAAO,OACP2B,SAAU,IACVR,UAAW,IAEbkB,uBAAwB,CACtBpC,cAAe,MACfI,WAAY,UAEdiC,4BAA6B,CAC3B1B,KAAM,EACNZ,MAAO,OACPM,OAAQ,EACRO,gBAAiB,WAEnB0B,4BAA6B,CAC3BhC,iBAAkB,GAClBZ,MAAO,UACPyB,SAAU,IAEZoB,qBAAsB,CACpBvC,cAAe,MACfC,eAAgB,SAChBiB,UAAW,IAEbsB,oBAAqB,CACnBpC,WAAY,SACZH,eAAgB,SAChBF,MAAO,GACPM,OAAQ,GACRC,iBAAkB,GAClBC,YAAa,EACbC,YAAa,UACbC,aAAc,IAEhBgC,kBAAmB,CACjB1C,MAAO,GACPM,OAAQ,GACRW,WAAY,WAEd0B,sBAAuB,CACrB9B,gBAAiB,UACjBJ,YAAa,WAEfmC,kBAAmB,CACjB3C,cAAe,MACfI,WAAY,SACZV,MAAO,UACPyB,SAAU,IAEZyB,kBAAmB,CACjB5C,cAAe,MACf6C,UAAW,SACXnD,MAAO,UACPyB,SAAU,GACV2B,OAAQ,IAEVC,kBAAmB,CACjBrD,MAAO,UACPyB,SAAU,GACVE,WAAY,U,imBC1MlB,iBAAgBzC,GACZ,OAAOO,EAAAA,EAAAA,KAAC6D,EAAAA,QAAYpH,EAAAA,EAAA,GAAKgD,GAAK,IAAEG,MAAO,CAACkE,EAAOlE,MAAOH,EAAMG,SAC/D,EAED,IAAMkE,EAASnD,EAAAA,QAAWxD,OAAO,CAC7ByC,MAAM,CACF0B,aAAa,EACbG,gBAAiB,cACjBL,YAAY,K,+CCHL,SAAS2C,GAAUC,GAAwB,IAAtBC,EAAID,EAAJC,KAC1BC,GAASC,EAAAA,EAAAA,WAATD,KACAE,GAAaC,EAAAA,EAAAA,WAAbD,SACDE,GAAY/F,EAAAA,EAAAA,WAAZ+F,SACDC,EAAO,WACXH,EAASL,GAAY,KACvB,EACMS,EAAW,CACf,aAAe,CACbC,QAAS,sFACTC,MAAO,WACPvE,QAAS,kBAAImE,EAAS,CAACL,KAAK,kBAAkB,IAKlD,OADAU,EAAAA,GAAAA,SAAeJ,EAAM,KACd7E,EAAAA,EAAAA,MAACkF,GAAAA,YAAW,CAAA7E,SAAA,EACjBC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAAA9E,SAAEmE,EAAKM,EAASP,GAAMQ,YAC3B/E,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACgB,MAAM,OAAQC,cAAc,MAAOC,eAAe,YAAYf,SAAA,EAC1EC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAKM,EAASP,GAAMS,OAAQvE,QAASqE,EAASP,GAAM9D,WACzEH,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAW/D,QAAS,kBAAIoE,GAAM,SAG9D,C,+lBCpBA,kBAAgB9E,GACZ,IAAQyE,GAASC,EAAAA,EAAAA,WAATD,KACFzD,GAAQqE,EAAAA,GAAAA,WACdC,GAAyBxG,EAAAA,EAAAA,WAAlBvD,EAAI+J,EAAJ/J,KAAMsJ,EAAQS,EAART,SACLF,GAAaC,EAAAA,EAAAA,WAAbD,SACFY,GAAaC,EAAAA,EAAAA,WACbC,EAAmC,CAAC,CAACR,MAAMR,EAAK,YAAa/D,QAAQ,WAAK,IAAD3E,EACnE,MAAJR,GAAU,OAANQ,EAAJR,EAAMU,OAANF,EAAY2J,SACZf,EAASL,GAAY,CAACE,KAAK,iBAG3BK,EAAS,CAACL,KAAK,kBAEvB,IACMmB,GAAe3F,EAAM4F,MAAM,GAADpJ,QAAAC,EAAAA,EAAAA,SAAKuD,EAAM4F,OAAUH,GAAoBA,GAAoBI,QAAO,SAAAtJ,GAAC,OAAEA,EAAEgJ,YAAYA,QAA8BnG,GAAhB7C,EAAEgJ,UAAuB,IAC5J,OAAMhF,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SACpCqF,EAAY9I,KAAI,SAACN,EAAEuJ,GAAC,OAAGvF,EAAAA,EAAAA,KAACwF,EAAU/I,GAAAA,GAAA,GAAaT,GAAC,IAAEyJ,UAAW,CAAClF,MAAMC,EAAAA,QAAOC,GAAOiF,MAAOnF,MAAM,UAAvDgF,EAAgE,KAEhH,E,4BC3BKI,IAAmBC,EAAAA,EAAAA,eAAuE,CAACzK,qBAAgB0D,EAAWgH,gBAAgB,WAAK,IAEpIC,GAAoB,SAAH9B,GAAwE,IAAnE+B,EAAO/B,EAAP+B,QAAShG,EAAQiE,EAARjE,SAC1C,OAAOgG,GAAQ/F,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,KAAMhG,EAAAA,EAAAA,KAACiG,EAAAA,0BAAyB,CAACC,KAAM,oBAAqBC,QAASR,GAAkBS,eAAa,EAAArG,SAChHA,GAEL,EAEA,oBAEE,OADyBsG,EAAAA,EAAAA,YAAWV,GAErC,E,wCCTD7G,QAAQC,IAAIuH,GAAAA,YAAY,kBAAmB,mBAEpC,IAAMC,GAAkB,CAC9BC,WAAY,CAACF,GAAAA,YAAYG,KAAKC,MAAMJ,GAAAA,aAAa,CAACK,KAAM,kCAG5CC,GAAqB,CACjCC,UAAW,CACVC,qBAAqB,EACrBC,qBAAqB,EACrBC,wBAAwB,IAIpBC,GAAmB,CAACC,OAAM,EAAMC,MAAM,CAACC,UAAU,KAKjDC,GAAiB,SAACC,EAA6B7C,GACpD,IAAM8C,EAAW9C,EAAQpJ,KAAKmM,WACvBC,EAAY,IAAIC,GAAAA,gBAAgBH,GAClCD,IACHxI,QAAQC,IAAI,uBACZuI,EAAGK,gBAAgBF,GAEtB,EAEMG,GAAmB,SAACC,EAAWC,EAA8BC,EAAiBC,GAG7EH,EAAMJ,WAGZK,EAAY,CAAC7D,KAAK,eAAgB8D,SAAAA,EAAU1M,KAAK,CAAC2M,OAAAA,EAAQR,WAAWK,EAAMJ,YAC1E,EAEIQ,GAAa,IAiBbC,GAAW,eAAAlE,GAAAzI,EAAAA,EAAAA,UAAG,UAAM4M,EAA8DL,EAA8BM,EAA2BJ,EAAetM,GAC/J0M,GAAUD,EAAab,GAAGe,UAAWD,GACrC,IAAME,EAjBa,SAACA,GACpB,IAAIC,EAAMD,EAAiBE,IAAIC,MAAM,QAQnC,OAPFF,EAAIG,SAAQ,SAACC,EAAYC,GACpB,cAAcC,KAAKF,GACtBJ,EAAIK,GAAKD,EAAG,+EAAoGV,GACtG,mBAAmBY,KAAKF,KAClCJ,EAAIK,IAAE,YAAgBX,GAExB,IACS,IAAIa,GAAAA,sBAAsB,CAC/B7E,KAAMqE,EAAiBrE,KACvBuE,IAAKD,EAAIQ,KAAK,SAEnB,CAI0BC,OAAmBb,EAAab,GAAGY,YAAatB,WACnEuB,EAAab,GAAG2B,oBAAqBX,GAC3CR,EAAY,CAAC7D,KAAK,OAAQ8D,SAASI,EAAaJ,SAAU1M,KAAK,CAAC2M,OAAAA,EAAQ3H,KAAS,MAAJ3E,OAAI,EAAJA,EAAM2E,KAAMmH,WAAWc,IACrG,IAAC,gBALgBY,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,OAAAtF,EAAAuF,MAAA,KAAAC,UAAA,KCzDJC,GAAW9I,EAAAA,QAAWxD,OAAO,CACzCuM,UAAU,CAAElI,KAAM,GAClBmI,IAAI,CAAEnI,KAAM,EAAGN,OAAO,QACtB0I,gBAAiB,CAACC,SAAS,WAAYC,OAAO,EAAGhJ,eAAe,YAChEiJ,UAAW,CAAElJ,cAAe,MAAOC,eAAgB,gBACnDkJ,MAAO,CAACvI,gBAAgB,QAASlB,MAAM,QAASqC,kBAAkB,KCFnE,kBAAgBnD,GAAmE,IAADwK,EAChFC,EAA2C9O,KAApCD,EAAe+O,EAAf/O,gBACPgP,EF2DyB,SAACrC,GAC3B,IAAMsC,GAAQC,EAAAA,EAAAA,QAAsE,CAAC,GACrFC,GAA4BC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAvCI,EAAMF,EAAA,GAAEG,EAASH,EAAA,GACxBI,GAA6BL,EAAAA,EAAAA,YAAuBM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAA7CE,EAAOD,EAAA,GAAEE,EAASF,EAAA,GACnBG,GAASC,EAAAA,EAAAA,UAAQ,mBAAIH,CAAkB,GAAE,CAACA,IAC1CI,GAAgBC,EAAAA,EAAAA,aAAYC,EAAAA,MAAW,SAAAC,GAAA,IAAEzL,EAAKyL,EAALzL,MAAK,OAAiBkL,GAAQ9K,EAAAA,EAAAA,KAACsL,GAAAA,QAAO,CAAClD,OAAQ0C,EAASlL,MAAOA,EAAO2L,WAAY,CAACrK,OAAO,WAAYlB,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GAAK,IAAK,CAAC8E,IAC1JU,GAAQL,EAAAA,EAAAA,aAAY,WAAD,IAAAM,GAAAlQ,EAAAA,EAAAA,UAAC,UAAMG,EAAoB0M,EAA4BsD,GAE/E,GADA5M,QAAQC,IAAI,UACP+L,QAAkBjM,IAAP6M,EACf,IACC,IAAIC,EAEHA,EADU,UAARD,QACgBE,GAAAA,aAAaC,aAAa5E,IAE5B,WAARyE,QACUE,GAAAA,aAAaE,gBAAgB7E,IAGnCmB,UAAgBwD,GAAAA,aAAaC,aAAa5E,IAAkB8E,OAAM,SAACC,GAAK,OAAGJ,GAAAA,aAAaE,gBAAgB7E,GAAiB,KAEtI8D,EAAUY,GACVM,OAAOC,QAAQ9B,EAAM+B,SAAS7P,KAAI,SAAA8P,GAAW,IAADC,GAAA5B,EAAAA,EAAAA,SAAA2B,EAAA,GAALpQ,GAAFqQ,EAAA,GAAGA,EAAA,IACvCnE,GAAYlM,EAAG8L,EAAa6D,EAAW,QAASjQ,EACjD,GACD,CAAE,MAAOsQ,GACRlN,QAAQwN,MAAMN,EACf,CAEF,IAAC,gBAAAO,EAAAC,EAAAC,GAAA,OAAAhB,EAAAlC,MAAA,KAAAC,UAAA,EAtByB,GAsBvB,CAACsB,IAQJ,MAAO,CACNU,MAAAA,EACAkB,MATYvB,EAAAA,EAAAA,cAAY,WACxBrM,QAAQC,IAAI,QACT+L,IACFA,EAAQ6B,YAAYrQ,KAAI,SAACsQ,GAAS,OAAKA,EAAMF,MAAM,IACnD3B,OAAUlM,GAEZ,GAAG,CAACiM,IAIH+B,mBAAmB,WAAD,IAAAC,GAAAvR,EAAAA,EAAAA,UAAE,UAAMwR,EAAcrR,GACvC,IAAIuI,EAAO8I,EAAS9I,KAIpB,GAHY,cAARA,GACH0G,EAAUoC,EAAS1R,KAAK2R,cAEb,SAAR/I,GAAyC,QAAtB8I,EAAS1R,KAAK2M,OAAe,CAClDlJ,QAAQC,IAAI,WACZ,IAAMkO,EAAiB,IAAIC,GAAAA,kBAAmB3G,IAC9C0G,EAAeE,iBAAkB,gBAAgB,SAACtF,GAAS,OAAKD,GAAiBC,EAAOC,EAAaiF,EAASrC,OAAQ,QAAQ,IAC9HN,EAAM+B,QAAQY,EAASrC,QAAU,CAACpD,GAAG2F,EAAgBlF,SAAUgF,EAASrC,QACxExC,GAAYkC,EAAM+B,QAAQY,EAASrC,QAAS5C,EAAagD,EAAS,QAASpP,EAC7E,CAEA,GAAY,UAARuI,GAA4C,QAAxB8I,EAAS1R,KAAK2M,OAAiB,CACrDlJ,QAAQC,IAAI,YACZ,IAAMkO,EAAiB7C,EAAM+B,QAAQY,EAASrC,QAAQpD,GAChD8F,EAAoB,IAAItE,GAAAA,sBAAsBiE,EAAS1R,KAAKmM,kBAC5DyF,EAAeI,qBAAsBD,EAG7C,CACA,GAAY,gBAARnJ,GAAgD,QAAtB8I,EAAS1R,KAAK2M,OAAe,CAC1D,IAAMiF,EAAiB7C,EAAM+B,QAAQY,EAASrC,QAAQpD,GACtDD,GAAe4F,EAAgBF,EAChC,CACD,IAAC,gBAAAO,EAAAC,GAAA,OAAAT,EAAAvD,MAAA,KAAAC,UAAA,EAzBkB,GA0BnB0B,cAAAA,EACAF,OAAAA,EACAN,OAAAA,EAGF,CEjImE8C,CAD1BtD,EAAfrE,iBACjB2F,EAAKrB,EAALqB,MAAOkB,EAAIvC,EAAJuC,KAAMG,EAAkB1C,EAAlB0C,mBAAoB3B,EAAaf,EAAbe,cAAeF,EAAMb,EAANa,OAavD,OAZApP,EAAAA,EAAAA,YAAU,WACR6D,EAAM/D,MAAQP,GAAmB0R,EAAmB1R,EAAiBsE,EAAM/D,KAC7E,GAAG,CAACP,EAAiBsE,EAAM/D,QAC3BE,EAAAA,EAAAA,YAAU,WAOR,OANG6D,EAAMiM,OAASV,EAChBvL,EAAM/D,MAAQ8P,EAAM/L,EAAM/D,UAAMmD,EAAWY,EAAMiM,MAE9B,OAAbjM,EAAMiM,MAAeV,GAC3B0B,IAEK,WAAK1B,GAAU0B,GAAM,CAC9B,GAAG,CAAC1B,EAAQvL,EAAM/D,KAAM+D,EAAMiM,QAE5BhM,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO6J,GAASC,UAAU3J,SAAA,EAC9BC,EAAAA,EAAAA,KAACkL,EAAa,CAACtL,MAAO6J,GAASE,OAC/BjK,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO6J,GAASG,gBAAgB7J,SAAA,EACpCC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO6J,GAASM,aAEtB/J,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,UAACC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAO6J,GAASO,MAAMjK,SAAY,OAAZkK,EAAExK,EAAM/D,WAAI,EAAVuO,EAAY5J,UAC9EX,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO6J,GAASM,UAAUhK,SAAA,MACdlB,IAAfY,EAAMiM,OAAuBV,IAAUhL,EAAAA,EAAAA,KAACyN,GAAAA,QAAM,CAAC/I,MAAM,QAAQvE,QAAS,kBAAIV,EAAM/D,MAAQ8P,EAAM/L,EAAM/D,KAAK,SAC1FmD,IAAfY,EAAMiM,MAAsBV,IAAUhL,EAAAA,EAAAA,KAACyN,GAAAA,QAAM,CAAC/I,MAAM,OAAOvE,QAASuM,YAK9E,EC9BD,YAAgBjN,GACd,IAAA6K,GAAgCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArCvC,EAAQyC,EAAA,GAAEkD,EAAWlD,EAAA,GAC5BN,EAA2C9O,KAApCD,EAAe+O,EAAf/O,gBACPwS,EHmI0B,SAAC7F,GAC5B,IAAMsC,GAAQC,EAAAA,EAAAA,QAAsE,CAAC,GACrFuD,GAAwBrD,EAAAA,EAAAA,YAAyBsD,GAAApD,EAAAA,EAAAA,SAAAmD,EAAA,GAA1ClS,EAAImS,EAAA,GAAEC,EAAOD,EAAA,GACpBE,GAA6BxD,EAAAA,EAAAA,YAAuByD,GAAAvD,EAAAA,EAAAA,SAAAsD,EAAA,GAA7CjD,EAAOkD,EAAA,GAAEjD,EAASiD,EAAA,GACnB9C,GAAgBC,EAAAA,EAAAA,aAAYC,EAAAA,MAAW,SAACxL,GAAS,OAAGkL,GAAQ9K,EAAAA,EAAAA,KAACsL,GAAAA,QAAO,CAAClD,OAAQ0C,EAASlL,MAAOA,EAAO2L,WAAY,CAACrK,OAAO,WAAYlB,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GAAK,IAAG,CAAC8E,IAC7IE,GAASC,EAAAA,EAAAA,UAAQ,mBAAIH,CAAkB,GAAE,CAACA,IAC1CU,GAAQL,EAAAA,EAAAA,cAAY,SAACpD,GAC1BjJ,QAAQC,IAAI,SACPqL,EAAM+B,QAAQ7E,KACjB8C,EAAM+B,QAAQ7E,GAAK,IAAI4F,GAAAA,kBAAmB3G,IAC1C6D,EAAM+B,QAAQpE,SAAWA,GAEtB+C,GACJhD,EAAY,CAAC7D,KAAK,QAAS8D,SAAAA,EAAU1M,KAAK,CAAC,OAAU,SAEvD,GAAG,CAACyP,IACE4B,EAAO,WACZ5N,QAAQC,IAAI,QACRqL,EAAM+B,QAAQ7E,KAEhByD,OAAUlM,GACVuL,EAAM+B,QAAQ7E,GAAG2G,QACjB7D,EAAM+B,QAAQ7E,QAAKzI,EACnBuL,EAAM+B,QAAQpE,cAAWlJ,EACzBqP,cAAc9D,EAAM+B,QAAQgC,eAE/B,EACA,MAAO,CACN3C,MAAAA,EACAkB,KAAAA,EACAG,mBAAmB,WAAD,IAAAuB,GAAA7S,EAAAA,EAAAA,UAAE,UAAMwR,GAAgB,IAADsB,EAAAC,EAAAC,EAAAC,EACpCvK,EAAO8I,EAAS9I,KACpB,GAAY,SAARA,GAAyC,SAAtB8I,EAAS1R,KAAK2M,QAAmB+E,EAASrC,SAAuB,OAAjB2D,EAAIjE,EAAM+B,cAAO,EAAbkC,EAAetG,UAAS,CAClGjJ,QAAQC,IAAI,mBACZ,IAAMkO,EAAiB7C,EAAM+B,QAAQ7E,GACrCwG,EAAQ,CAACzN,KAAM0M,EAAS1R,KAAKgF,OAC7B4M,EAAeE,iBAAiB,gBAAgB,SAACtF,GAAS,OAAKD,GAAiBC,EAAOC,EAAaiF,EAASrC,OAAQ,OAAO,IAC5HuC,EAAeE,iBAAiB,4BAA4B,SAACnB,GAC5D,GAA2C,aAAvC5B,EAAM+B,QAAQ7E,GAAGmH,mBAAkC,CACtD,IAAIC,GAAe,EACnBtE,EAAM+B,QAAQgC,cAAgBQ,aAAWpT,EAAAA,EAAAA,UAAC,YACzC,IAAMqT,QAAcxE,EAAM+B,QAAQ7E,GAAGuH,SAAS,MAC1CC,EAAc,GACdC,OAAiBlQ,EACrB+P,EAAMlG,SAAQ,SAACsG,GACM,gBAAhBA,EAAO/K,MAA0C,UAAhB+K,EAAOC,OAC3ChD,OAAOiD,KAAKF,GAAQtG,SAAQ,SAACyG,GAC5BL,GAAkBK,EAAQ,KAAKH,EAAOG,GAAS,IAChD,IACAJ,EAAiBC,EAAOI,gBAE1B,IACAtQ,QAAQC,IAAI2P,EAAcK,QACJlQ,GAAlBkQ,EACHL,GAAe,EAEPA,GACRhC,IAED5N,QAAQC,KAAI,IAAIsQ,MAAOC,eAAe7G,MAAM,KAAK,GAAIqG,EACtD,IAAG,IACJ,KACgD,UAAvC1E,EAAM+B,QAAQ7E,GAAGmH,oBACzB/B,GAEF,IAIAO,EAAesC,eAAe,QAAS,CACtCC,UAAW,mBAENtH,GAAY,CAACZ,GAAG8C,EAAM+B,QAAQ7E,GAAIS,SAASgF,EAASrC,QAAS5C,EAAagD,EAAS,OAAQpP,EAClG,CACA,GAAY,UAARuI,GAA0C,SAAtB8I,EAAS1R,KAAK2M,QAAmB+E,EAASrC,SAAuB,OAAjB4D,EAAIlE,EAAM+B,cAAO,EAAbmC,EAAevG,UAAS,CACnGjJ,QAAQC,IAAI,oBACZ,IAAMqO,EAAoB,IAAItE,GAAAA,sBAAsBiE,EAAS1R,KAAKmM,kBAC5D4C,EAAM+B,QAAQ7E,GAAG+F,qBAAsBD,GAC7C,IAAMqC,EAAUrF,EAAM+B,QAAQ7E,GAAGoI,mBACjC3E,EAAU0E,EAAQA,EAAQE,OAAS,IACnC7H,EAAY,CAAC7D,KAAK,MAAO8D,SAASqC,EAAM+B,QAAQpE,SAAU1M,KAAK,CAAC,GACjE,CACA,GAAY,QAAR4I,GAAkB8I,EAASrC,SAAuB,OAAjB6D,EAAInE,EAAM+B,cAAO,EAAboC,EAAexG,UAAS,CAC/DjJ,QAAQC,IAAI,UACZ,IAAMkO,EAAiB7C,EAAM+B,QAAQ7E,GAErC,GADAwG,EAAQ,CAACzN,KAAK0M,EAAS1R,KAAKgF,QACvB4M,EACN,OACCA,EAAeE,iBAAkB,gBAAgB,SAACtF,GAAS,OAAKD,GAAiBC,EAAOC,EAAaiF,EAASrC,OAAQ,OAAO,IAC7H,IAAMpC,EAAmB,IAAIQ,GAAAA,sBAAsBiE,EAAS1R,KAAKmM,kBAC3DyF,EAAeI,qBAAsB/E,GAC3C,IAAM8E,QAA0BH,EAAe2C,aAAchJ,UACvDqG,EAAehE,oBAAqBmE,GAC1CtF,EAAY,CAAC7D,KAAK,SAAU8D,SAASqC,EAAM+B,QAAQpE,SAAU1M,KAAK,CAAC2M,OAAO,OAAQR,WAAWyF,EAAe4C,oBAE5G,IAAMJ,EAAUrF,EAAM+B,QAAQ7E,GAAGoI,mBACjC3E,EAAU0E,EAAQA,EAAQE,OAAS,GACrC,CACY,gBAAR1L,GAAgD,SAAtB8I,EAAS1R,KAAK2M,QAAmB+E,EAASrC,SAAuB,OAAjB8D,EAAIpE,EAAM+B,cAAO,EAAbqC,EAAezG,WAC/FV,GAAe+C,EAAM+B,QAAQ7E,GAAIyF,EACpC,IAAC,gBAAA+C,GAAA,OAAA1B,EAAA7E,MAAA,KAAAC,UAAA,EAtEkB,GAuEnB0B,cAAAA,EACAxP,KAAAA,EACAsP,OAAAA,EAEF,CG5OyE+E,CADhC7F,EAAfrE,iBACjB2F,EAAKmC,EAALnC,MAAOkB,EAAIiB,EAAJjB,KAAMG,EAAkBc,EAAlBd,mBAAoB3B,EAAayC,EAAbzC,cAAeF,EAAM2C,EAAN3C,OAAQtP,EAAIiS,EAAJjS,KAU/D,OATAE,EAAAA,EAAAA,YAAU,WACRT,GAAmB0R,EAAmB1R,EACxC,GAAG,CAACA,KACJS,EAAAA,EAAAA,YAAU,WAIR,OAHG6D,EAAMsI,UACPyD,EAAM/L,EAAMsI,UAEP,kBAAI2E,GAAM,CACnB,GAAG,CAACjN,EAAMsI,YAERrI,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO6J,GAASC,UAAU3J,SAAA,EAC9BC,EAAAA,EAAAA,KAACkL,EAAa,CAACtL,MAAO6J,GAASE,OAC/BjK,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO6J,GAASG,gBAAgB7J,SAAA,EACpCC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO6J,GAASM,aAEtB/J,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SAChCN,EAAMsI,UAAYiD,GACnBhL,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAO6J,GAASO,MAAMjK,UAAM,MAAJrE,OAAI,EAAJA,EAAM2E,OAAQ,gBAC5CX,EAAAA,EAAAA,MAAAsG,EAAAA,SAAA,CAAAjG,SAAA,EACEC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAO,CAACwB,YAAY,GAAGrB,SAAC,mBAC9BC,EAAAA,EAAAA,KAACgQ,EAAAA,QAAS,CAACpQ,MAAO,CAACwB,YAAY,EAAGI,KAAK,GAAIyO,MAAOlI,EAAUmI,aAAcxC,UAG9EhO,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO6J,GAASM,UAAUhK,SAAA,MACVlB,IAAnBY,EAAMsI,WAA2BiD,IAAUhL,EAAAA,EAAAA,KAACyN,GAAAA,QAAM,CAAC/I,MAAM,QAAQvE,QAAS,kBAAIqL,EAAMzD,EAAS,SAC1ElJ,IAAnBY,EAAMsI,UAA0BiD,IAAUhL,EAAAA,EAAAA,KAACyN,GAAAA,QAAM,CAAC/I,MAAM,OAAOvE,QAASuM,YAKlF,ECrBD,IAAMyD,GAAY,SAAC1Q,GAOjB,OAAOO,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAC,CAAC2C,SAAS9C,EAAM2Q,MAAOC,UAAU5Q,EAAM2Q,MAAOhP,YAAY,EAAGC,YAAYb,EAAAA,QAAOa,YAAaI,gBAAgB,OAAQZ,cAAc,MAAOyP,SAAS,QAAyBzR,GAApBY,EAAM8Q,YAA2B9Q,EAAM8Q,YAAc9Q,EAAMsI,SAAU,CAAC7G,OAAO,QAAQ,CAACqB,SAAS,EAAGrB,OAAO,IAAInB,UACxRC,EAAAA,EAAAA,KAACC,EAAAA,iBAAgB,CAACL,MAAO,CAAC4B,KAAK,GAAIgP,eAAgB,CAAChP,KAAK,EAAGV,eAAe,UAAWX,QAAS,kBAAIV,EAAMgR,cAAchR,EAAM8Q,gBAAW1R,EAAUY,EAAMsI,SAAS,EAAChI,SACjKN,EAAMM,YAKX,EAEM2Q,GAAqB,SAAH1M,GAAwD,IAADxI,EAAlDsC,EAAUkG,EAAVlG,WAAYiI,EAAO/B,EAAP+B,QAAS4K,EAAU3M,EAAV2M,WACzC3V,GAAQuD,EAAAA,EAAAA,WAARvD,KACD4V,GAAWC,EAAAA,GAAAA,WACjBvG,GAAkCC,EAAAA,EAAAA,UAAoB,MAAKC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAApDwG,EAAStG,EAAA,GAAEuG,EAAYvG,EAAA,GAC9BI,GAA4BL,EAAAA,EAAAA,UAAmB,IAAGM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAA3CoG,EAAMnG,EAAA,GAAEoG,EAASpG,EAAA,GACxB+C,GAAoCrD,EAAAA,EAAAA,YAAkBsD,GAAApD,EAAAA,EAAAA,SAAAmD,EAAA,GAA/C2C,EAAU1C,EAAA,GAAE4C,EAAa5C,EAAA,GAC1B7I,GAAaC,EAAAA,EAAAA,WACnBiM,EAA6CC,KAArChW,EAAe+V,EAAf/V,gBAAiB0K,EAAeqL,EAAfrL,iBACzBjK,EAAAA,EAAAA,YAAU,WACR,GAAqB,MAAlBT,IAC2B,cAAzBA,EAAsB,MACvB0K,EAAgB,CAAC,KAAO,YAAa,KAAO,CAAC,WAAa/H,KAEhC,mBAAzB3C,EAAsB,MAAiD,kBAAzBA,EAAsB,MACrE8V,EAAU,GAADhV,QAAAC,EAAAA,EAAAA,SAAK8U,GAAM,CAAE7V,EAAwB,UAEpB,wBAAzBA,EAAsB,MAA0B,CACjD,IAAM6R,EAAe7R,EAAwB,OAC/B6V,EAAOjV,MAAK,SAAAC,GAAC,OAAEA,GAAKgR,CAAY,KACrCiE,EAAUD,EAAO1L,QAAO,SAAAtJ,GAAC,OAAEA,GAAKgR,CAAY,IACvD,CAEJ,GAAG,CAAC7R,IACJ,IAAMiV,EAAQG,EAAW,OAAU,IAAMa,KAAKC,IAAI,EAAGD,KAAKE,KAAKF,KAAKG,KAAKP,EAAOrB,OAAS,KAAI,IACvF6B,EAAkB,SAAC9F,GACvBqF,EAAaD,GAAWpF,EAAKA,EAAK,KACpC,EACA,YAA0B7M,IAAnB1D,GACLuE,EAAAA,EAAAA,MAAC+R,GAAAA,KAAU,CAAC7R,MAAO,CACjB,CAAC8R,YAAa3L,EAAa,EAAL,GAAG,EAAK1E,YAAYb,EAAAA,QAAOa,YAAaC,aAAa,IAC/D,aAAZ0D,EAAwB,CAAC2M,WAAW,EAAGrB,SAAS,EAAGpP,OAAO,OAAQ0Q,gBAAgB,EAAG7Q,cAAc,IAAI,CAACsP,UAAU,MAAOzP,MAAM,OAAQiR,kBAAkB,IACzJ9R,SAAA,EACAL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAAC8R,YAAYnB,OAAW1R,EAAU,GAAG,EAAG4C,gBAAgB,QAASqQ,SAAS,OAAQjR,cAAc,MAAOD,MAAM,OAAQM,OAAO,QAAQnB,SAAA,CAC9IiR,EAAO1U,KAAI,SAACyL,EAAUa,GAAC,OAAG5I,EAAAA,EAAAA,KAACmQ,GAAS,CAACC,MAAOA,EAAOG,WAAYA,EAAYE,cAAeA,EAAe1I,SAAUA,EAAShI,UAC3HC,EAAAA,EAAAA,KAAC+R,GAAS,CAAChK,SAAUA,KACX,KAEZ/H,EAAAA,EAAAA,KAACmQ,GAAS,CAACC,MAAOA,EAAOG,WAAYA,EAAYE,cAAeA,EAAe1I,SAAmB,OAAXvM,EAAER,EAAKU,WAAI,EAATF,EAAW6E,KAAKN,UACvGC,EAAAA,EAAAA,KAACgS,GAAQ,CAACtW,KAAMV,EAAKU,KAAMgQ,KAAMoF,UAGrCpR,EAAAA,EAAAA,MAAC+R,GAAAA,KAAU,CAAC7R,MAAO,CACf,CAACiK,SAAS,WAAY5I,WAAW,SAAUH,eAAe,WAAYF,MAAM,OAAOC,cAAc,OACrF,aAAZmE,EAAwB,CAAC8E,OAAO,EAAGnI,WAAW,GAAIZ,cAAc,GAAI6B,kBAAkB,IAAI,CAACnB,gBAAgB,gBAC3G1B,SAAA,EACFC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAO,eAAM9E,MAAO,CAACsB,OAAO,GAAIS,WAAW,GAAIxB,QAAS,kBAAIqR,EAAgB,SAAS,KACjGZ,IAAY5Q,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAO,qBAAO9E,MAAO,CAACsB,OAAO,GAAIS,WAAW,GAAIxB,QAAS,kBAAIqR,EAAgB,UAAU,KACnHxR,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAO,GAAI9E,MAAO,CAACsB,OAAO,GAAIS,WAAW,GAAIxB,QAAS,kBAAIwQ,GAAW,EAAK,EAAC5Q,UACvFC,EAAAA,EAAAA,KAACiS,EAAAA,SAAQ,CAAC3R,KAAM,GAAID,KAAK,aAAaE,MAAO,yBAIrDP,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GACA,EAEF,SAAeoF,EAAAA,MAAW,SAAAC,GAAqD,IAAnDvN,EAAUuN,EAAVvN,WAAYiI,EAAOsF,EAAPtF,QAAS4K,EAAUtF,EAAVsF,WAC/C,OAAO3Q,EAAAA,EAAAA,KAACkS,GAAW,CAACnM,QAASA,EAAQhG,UACnCC,EAAAA,EAAAA,KAAC0Q,GAAkB,CAAC5S,WAAYA,EAAYiI,QAASA,EAAS4K,WAAYA,KAE9E,ICzFe,SAASwB,GAAsBnX,GAE5C,OADiBM,EAAAA,EAAAA,UAAS,CAAC,qBAA0B,MAAJN,OAAI,EAAJA,EAAMoX,UAAQ7W,EAAAA,EAAAA,UAAG,mBAAa,MAAJP,GAAAA,EAAMoX,cAAeC,EAAAA,EAAAA,uBAA0B,MAAJrX,OAAI,EAAJA,EAAMoX,SAAU,EAAE,KAAhI/W,IAEV,CCJe,SAASiX,GAA0BC,GAEhD,OADiBjX,EAAAA,EAAAA,UAAS,CAAC,qBAAsBiX,IAAQhX,EAAAA,EAAAA,UAAG,mBAASgX,QAAeC,EAAAA,EAAAA,2BAA0BD,GAAU,EAAE,KAAlHlX,IAEV,CCAA,kBAAgBoE,GACZ,IAAA6K,GAA0CC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArDmI,EAAajI,EAAA,GAAEkI,EAAgBlI,EAAA,GAChCmI,EAAYlT,EAAMkT,WAAa,GAC/BlS,GAAQqE,EAAAA,GAAAA,WACd,OAAO9E,EAAAA,EAAAA,KAACgQ,EAAAA,QAAS,CAACpQ,MAAO,CAAC,CAClByB,YAAY,UACZW,SAAS,GACTZ,YAAY,EACZE,aAAa,EACbsB,kBAAkB,GAClBgQ,gBAAgB,EAChBnR,gBAAgBjB,EAAAA,QAAOC,GAAOoS,WAC9BtS,MAAMC,EAAAA,QAAOC,GAAOiF,KACpBxE,OAAOzB,EAAMqT,UAAUL,EAAcE,GACtClT,EAAMG,OACTmT,YAAatT,EAAMsT,YACnBC,UAAWvT,EAAMwT,SACjBC,aAAczT,EAAMyT,aACpBC,gBAAiB1T,EAAM0T,gBACvBlD,MAAOxQ,EAAMwQ,MACbC,aAAczQ,EAAM2T,SACpBC,oBAAqB5T,EAAMqT,UAAU,SAAC9G,GAAC,OAAK0G,EAAiBtB,KAAKC,IAAIrF,EAAEsH,YAAYC,YAAYrS,OAAQyR,GAAa,EAAE,OAAC9T,EACxH2U,OAAQ,kBAAgB,MAAZ/T,EAAM+T,YAAM,EAAZ/T,EAAM+T,OAAS/T,EAAMwQ,MAAM,EACvCwD,aAAc,kBAAsB,MAAlBhU,EAAMgU,kBAAY,EAAlBhU,EAAMgU,aAAehU,EAAMwQ,MAAM,EACnD6C,UAAWrT,EAAMqT,WAExB,ECnBc,SAASY,GAASjU,GAC/B,IAAMuF,GAAaC,EAAAA,EAAAA,WACb0O,GAAW1I,EAAAA,EAAAA,UAAQ,iBAAgB,aAAZjG,EAC3B,CAACnE,cAAc,MAAOI,WAAY,SAAUH,eAAe,iBAC3D,CAACD,cAAc,SAAUI,WAAW,aAAoB,GACxD,CAAC+D,IACH,OACEtF,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC,CAACgT,gBAA4B,aAAZ5N,EAAwB,GAAG,EAAGpE,MAAM,QAAS+S,GAAU5T,SAAA,EAClFC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAAa,aAAZoF,EAAwB,CAACxD,KAAK,GAAG,CAACZ,MAAM,QAAQ,CAACgC,kBAAmB,GAAIZ,SAAS,IAAKvC,EAAMgG,WAAW1F,SAAEN,EAAMY,QAC7HL,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAa,aAAZoF,EAAwB,CAACxD,KAAK,GAAG,CAACZ,MAAM,QAAQ,CAACgC,kBAAmB,KAAK7C,UACrFC,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACgB,MAAMnB,EAAMmB,OAAOb,SAC9BN,EAAMM,eAKnB,C,+kBCvBe,SAAS6T,GAAUnU,GAChC,OACEO,EAAAA,EAAAA,KAAC0T,GAAQ,CAACrT,KAAMZ,EAAMY,KAAMO,MAAOnB,EAAMmB,MAAO6E,UAAWhG,EAAMgG,UAAU1F,UACzEC,EAAAA,EAAAA,KAAC6T,GAAepX,GAAA,GAAKgD,KAG3B,C,+kBCJA,IAAMqU,GAAoB,SAACC,EAA+BC,GACtD,OAAQA,EAAO/P,MACX,IAAK,SACH,OAAAxH,GAAAA,GAAA,GACKsX,GAAY,IACfxB,QAASyB,EAAOzB,UAEpB,IAAK,gBACH,OAAA9V,GAAAA,GAAA,GACKsX,GAAY,IACfE,QAAO,IAEX,IAAK,iBACD,OAAAxX,GAAAA,GAAA,GACOsX,GAAY,IACfE,QAAO,EACP1B,QAAS,KAEjB,QACI,MAAM,IAAI2B,MAAM,0BAA2BF,EAAO/P,MAE5D,E,unBCrBF,kBAAgBxE,GACd,IAAQyE,GAASC,EAAAA,EAAAA,WAATD,KACRiQ,EAA0B/I,EAAAA,SAAe3L,EAAM2U,OAAS,GAAEC,GAAA5J,EAAAA,EAAAA,SAAA0J,EAAA,GAAnDC,EAAKC,EAAA,GAAEC,EAAQD,EAAA,GAChB5T,GAAQqE,EAAAA,GAAAA,WACRoH,EAAUD,OAAOC,QAAQzM,EAAM8U,MAC/BC,EAAQ/U,EAAM+U,MACdC,EAAQxI,OAAOyI,OAAMnL,MAAb0C,OAAM,CAAQ,CAAC,GAAChQ,QAAAC,EAAAA,EAAAA,SAAKgQ,EAAQ5P,KAAI,SAAA0H,GAAA,IAAAqH,GAAAZ,EAAAA,EAAAA,SAAAzG,EAAA,GAAEuB,EAAC8F,EAAA,GAAErP,EAACqP,EAAA,UAAAsJ,EAAAA,EAAAA,SAAA,GAAOpP,EAAGvJ,EAAE4Y,KAAI,OACrE,OAAO5U,EAAAA,EAAAA,KAAC6U,GAAAA,QAAO,CACbC,aAAc,SAACrV,GACb,OAAOO,EAAAA,EAAAA,KAAC+U,GAAAA,OAAMtY,GAAAA,GAAA,GACRgD,GAAK,IACTuV,eAAgB,CAAEvT,gBAAiB,WACnC7B,MAAO,CAAE6B,gBAAgBjB,EAAAA,QAAOC,GAAOoS,YACvCoC,YAAazU,EAAAA,QAAOC,GAAOiF,KAC3BwP,cAAe1U,EAAAA,QAAOC,GAAOiF,KAC7ByP,WAAY,SAACC,GAAK,OAAGX,EAAMW,EAAMC,MAAMC,IAAI,EAC3CC,WAAY,SAACH,GAAK,OAAQ,MAALZ,OAAK,EAALA,EAAQtI,EAAQsJ,WAAU,SAAApJ,GAAA,IAAAC,GAAA5B,EAAAA,EAAAA,SAAA2B,EAAA,GAAE7G,EAAC8G,EAAA,GAAGA,EAAA,UAAI9G,GAAK6P,EAAMC,MAAMC,GAAG,IAAE,IAEnF,EACAG,gBAAiB,CAAErB,MAAAA,EAAOsB,OAAQxJ,EAAQ5P,KAAI,SAAAqZ,GAAA,IAAAC,GAAAnL,EAAAA,EAAAA,SAAAkL,EAAA,GAAEpQ,EAACqQ,EAAA,GAAE5Z,EAAC4Z,EAAA,SAAK,CAACN,IAAI/P,EAAGb,MAAMR,EAAKlI,EAAE0I,OAAO,KACrFmR,cAAevB,EACfwB,aAAaC,EAAAA,GAAAA,UAAS9J,OAAOyI,OAAMnL,MAAb0C,OAAM,CAAQ,CAAC,GAAChQ,QAAAC,EAAAA,EAAAA,SAAKgQ,EAAQ5P,KAAI,SAAA0Z,GAAA,IAAAC,GAAAxL,EAAAA,EAAAA,SAAAuL,EAAA,GAAEzQ,EAAC0Q,EAAA,GAAEja,EAACia,EAAA,UAAAtB,EAAAA,EAAAA,SAAA,GAAOpP,EAAGvJ,EAAEka,UAAS,QAClFC,eAAgB1W,EAAM0W,gBAEzB,E,eCnBc,SAASC,GAAW3W,GAEjC,IAAA0U,EAA0B/I,EAAAA,UAAe,GAAMiJ,GAAA5J,EAAAA,EAAAA,SAAA0J,EAAA,GAAxCkC,EAAKhC,EAAA,GAAEiC,EAAQjC,EAAA,GACtB,OACErU,EAAAA,EAAAA,KAACuW,GAAAA,QAAS,CACR3W,MAAO,CAACkE,GAAO0S,eAAgB/W,EAAMgX,oBAAsBJ,EAAO,CAAC5U,gBAAgB,oBAAoB,CAAC,GACxGiV,UAAW,kBAAIJ,GAAS,EAAK,EAC7BnW,QAAS,kBAAiB,MAAbV,EAAMU,aAAO,EAAbV,EAAMU,SAAW,EAC9BwW,WAAY,kBAAIL,GAAS,EAAM,EAACvW,UAK9BC,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACkE,GAAO4F,UAAWjK,EAAM+Q,gBAAgBzQ,UAClDC,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACkE,GAAO8S,SAAUnX,EAAMoX,WAAW9W,UAC5CC,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,CAAAjG,SAAGN,EAAMM,gBAKzB,CAEA,IAAM+D,GAASnD,EAAAA,QAAWxD,OAAO,CAC/BqZ,eAAe,CACb5V,MAAM,OACN2B,SAAS,KACTtB,WAAW,WAEbyI,UAAW,CACPvI,iBAAiB,GACjBM,gBAAgB,eAElBmV,SAAS,CACPhW,MAAO,OACPkW,QAAS,GACTnE,UAAW,GACX1R,WAAY,SACZH,eAAgB,SAChB+Q,kBAAkB,EAClBxQ,YAAYb,EAAAA,QAAOa,YACnBI,gBAAgB,iBC/CtB,kBAAeuC,GAAuE,IAA9D+S,EAAI/S,EAAXgT,OAAa7W,EAAO6D,EAAP7D,QAC1B,OAAOT,EAAAA,EAAAA,MAAC0W,GAAU,CAAeS,UAAW,CAAChW,cAAc,MAAOC,eAAe,cAAeX,QAASA,EAAQJ,SAAA,EAC7GC,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACmC,UAAU,EAAGkV,YAAY,IAAIlX,UAACC,EAAAA,EAAAA,KAACkX,GAAAA,QAAM,CAAC7W,KAAM0W,EAAK1W,KAAM8W,OAAQJ,EAAKpb,GAAI2E,KAAM,QAC5FN,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAIE,WAAW,OAAOnC,SAAEgX,EAAK1W,SAFhC0W,EAAKpb,GAIhC,E,gBCAc,SAASyb,GAAU3X,GAChC,IAAQyE,GAASC,EAAAA,EAAAA,WAATD,KACFc,GAAaC,EAAAA,EAAAA,WACnBqF,GAA4BC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAApC+M,EAAM7M,EAAA,GAAE8M,EAAS9M,EAAA,GACxB,OACExK,EAAAA,EAAAA,KAAC0T,GAAQ,CAACrT,KAAMZ,EAAMY,KAAMO,MAAOnB,EAAMmB,MAAO6E,UAAWhG,EAAMgG,UAAU1F,UACzEL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAA0B,aAAZmE,EAAwB,MAAM,SAAUlE,eAAe,iBAAiBf,SAAA,EAClGC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACkB,eAAe,UAAUf,UACrCC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAEN,EAAMwQ,WAErCvQ,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAAI,SAAA,EACHC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,QAAS/D,QAAS,WAAKoX,GAAAA,QAAUC,UAAU/X,EAAMwQ,OAAOqH,GAAU,EAAK,IAChGD,IAAUrX,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI0B,UAAU,SAAUnD,MAAM,OAAOR,SAAEmE,EAAK,mBAKxF,CCTA,IAAMuT,GAAa,SAAChY,GAClB,IAAA6K,GAAgCC,EAAAA,EAAAA,UAAS9K,EAAMiY,YAAYvL,QAAQwL,IAAIlY,EAAMsX,KAAKpb,KAAI6O,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAA/EsN,EAAQpN,EAAA,GAAEqN,EAAWrN,EAAA,GAC5B,OAAOxK,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAOgY,EAAS,CAACxW,YAAY,EAAGC,YAAY,QAAQ,CAAC,EAAEtB,UAClEC,EAAAA,EAAAA,KAAC8X,GAAU,CAACd,OAAQvX,EAAMsX,KAAM5W,QAAS,WACnCyX,GACFC,GAAY,GACZpY,EAAMiY,YAAYvL,QAAQ4L,OAAOtY,EAAMsX,KAAKpb,MAG5Ckc,GAAY,GACZpY,EAAMiY,YAAYvL,QAAQ6L,IAAIvY,EAAMsX,KAAKpb,IAE7C,KAGJ,EAMMsc,GAAe,SAAHjU,GAA4C,IAADxI,EAAtCG,EAAEqI,EAAFrI,GAAI+b,EAAW1T,EAAX0T,YACjBxT,GAASC,EAAAA,EAAAA,WAATD,KACDlJ,GAAQuD,EAAAA,EAAAA,WAARvD,KACCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACF8T,EAAW/F,GAAsBnX,GACjCmd,EAAata,EAAuBlC,GACpC6C,EAA0BR,IAKhCoa,ELnBa,SAA2BpQ,EAAYqQ,GACpD,IAAAC,GAAgCC,EAAAA,EAAAA,YAAWzE,GAAoB,CAACG,QAAO,EAAO1B,QAAQ,KAAIiG,GAAA/N,EAAAA,EAAAA,SAAA6N,EAAA,GAAnFG,EAAWD,EAAA,GAAElU,EAAQkU,EAAA,GACtBnd,GAAO4P,EAAAA,EAAAA,UAAQ,kBAAIwN,EAAYxE,OAAOjM,EAAO1C,QAAO,SAAAtJ,GAAC,OAAEqc,EAAQrc,EAAGyc,EAAYlG,QAAQ,IAAEvK,CAAM,GAAE,CAACyQ,EAAazQ,IACpH,MAAO,CAACyQ,YAAAA,EAAanU,SAAAA,EAAUjJ,KAAAA,EACjC,CKewDqd,EAJtCzN,EAAAA,EAAAA,UAAQ,WACtB,IAAM0N,EAAY,IAAIC,IAAc,MAAVT,OAAU,EAAVA,EAAY7b,KAAI,SAAAN,GAAC,OAAEA,EAAEN,IAAI,KACnD,OAAe,MAARwc,OAAQ,EAARA,EAAU5S,QAAO,SAAAtJ,GAAC,OAAG2c,EAAUhB,IAAI3b,EAAEL,GAAG,MAAK,EACtD,GAAG,CAACuc,EAAUC,KACgE,SAACnc,EAAGuW,GAAO,OAAIvW,EAAE6c,SAASC,SAASvG,IAAYvW,EAAEqE,KAAKyY,SAASvG,EAAQ,IAA9IlX,EAAI+c,EAAJ/c,KAAe0d,EAAeX,EAAxB9T,SAA0BmU,EAAWL,EAAXK,YAUjClU,EAAO,WACXH,EAAS4U,GAAa,KACxB,EAEA,OADArU,EAAAA,GAAAA,SAAeJ,EAAM,KACd7E,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACqB,WAAW,SAAUO,KAAK,GAAGzB,SAAA,EAChDL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC,MAAS,OAAQ4B,KAAK,GAAGzB,SAAA,EACrCC,EAAAA,EAAAA,KAAC4T,GAAS,CAACvT,KAAS6D,EAAK,YAAW,MAAMA,EAAK,QAAW6O,YAAsB,OAAXvX,EAAER,EAAKU,WAAI,EAATF,EAAW6E,KAAM4P,MAAOwI,EAAYlG,QAASa,SAfzG,SAAC7N,IACT,MAADA,OAAC,EAADA,EAAGoK,QAAO,GACZoJ,EAAgB,CAAC9U,KAAK,kBACtB8U,EAAgB,CAAC9U,KAAK,SAAUsO,QAAQhN,KAGxCwT,EAAgB,CAAC9U,KAAK,kBAE1B,EAO0IrD,MAAO,QAC5IjF,GAAMN,IAAQ2E,EAAAA,EAAAA,KAACiZ,EAAAA,SAAQ,CAACC,sBAAuB,CAAC5I,SAAS,GAAIjV,KAAMA,EAAM8d,WAAY,SAAA9N,GAAA,IAAE0L,EAAI1L,EAAJ0L,KAAI,OAAI/W,EAAAA,EAAAA,KAACyX,GAAU,CAACV,KAAMA,EAAMW,YAAaA,GAAc,QAErJhY,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC,CAACgB,MAAM,OAAQC,cAAc,MAAOiW,QAAQ,IAAM,CAAChW,eAAe,aAAaf,SAAA,EAC3FC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAW/D,QAAS,WAC5C3B,EAAwBP,OAAO,CAC7BH,WAAWnC,EACXqD,UAAQ9C,EAAAA,EAAAA,SAAKwb,EAAYvL,WACxBlN,KAAKsF,EACV,KACAvE,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAW/D,QAASoE,SAGpD,EAIM6U,GAA4B,SAAH3N,GAA4C,IAAD4N,EAAtC1d,EAAE8P,EAAF9P,GAAI+b,EAAWjM,EAAXiM,YAC9BxT,GAASC,EAAAA,EAAAA,WAATD,KACR0G,GAA0BL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAA/BqF,EAAKpF,EAAA,GAAEuI,EAAQvI,EAAA,GACtB+C,GAA8BrD,EAAAA,EAAAA,UAAS,IAAGsD,GAAApD,EAAAA,EAAAA,SAAAmD,EAAA,GAAnC2E,EAAO1E,EAAA,GAAEyL,EAAUzL,EAAA,GACpB0L,GAAalP,EAAAA,EAAAA,UACZrP,GAAQuD,EAAAA,EAAAA,WAARvD,KACCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACF+T,EAAata,EAAuBlC,GACpC6d,EAAqBlH,GAA0BC,GAC/ClX,GAAO4P,EAAAA,EAAAA,UAAQ,WACnB,IAAM0N,EAAY,IAAIC,IAAc,MAAVT,OAAU,EAAVA,EAAY7b,KAAI,SAAAN,GAAC,OAAEA,EAAEN,IAAI,KACnD,OAAyB,MAAlB8d,OAAkB,EAAlBA,EAAoBlU,QAAO,SAAAtJ,GAAC,OAAG2c,EAAUhB,IAAI3b,EAAEL,GAAG,MAAK,EAChE,GAAG,CAAC6d,EAAoBrB,IAClB3Z,EAA0BR,KAChCpC,EAAAA,EAAAA,YAAU,WAIR,OAHA2d,EAAWpN,QAAUsN,YAAW,WAC9BH,EAAWrJ,EACb,GAnBU,KAoBH,WAAKsJ,EAAWpN,SAAWuN,aAAaH,EAAWpN,QAAQ,CACpE,GAAG,CAAC8D,IACJ,IAAM1L,EAAO,WACXH,EAAS4U,GAAa,KACxB,EACMW,EAAara,SAASC,KAAKqa,QAAQ,OAAQ,WACjD,OAAOla,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACqB,WAAW,SAAUO,KAAK,GAAGzB,SAAA,EAClDL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC,MAAS,OAAQ4B,KAAK,EAAGoR,gBAAgB,IAAI7S,SAAA,EACzDC,EAAAA,EAAAA,KAACoX,GAAS,CAAC/W,KAAM6D,EAAK,eAAgBtD,MAAO,MAAOqP,MAAO0J,KAC3D3Z,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACia,eAAgB,GAAI3Y,OAAQ,EAAGN,MAAO,QAASkZ,WAAW,OAAOC,UAAU,4BACzF/Z,EAAAA,EAAAA,KAAC4T,GAAS,CAACvT,KAAM6D,EAAK,YAAa6O,YAAsB,OAAXsG,EAAEre,EAAKU,WAAI,EAAT2d,EAAWR,SAAU5I,MAAOA,EAAOmD,SAAUA,EAAUxS,MAAO,QAC7GjF,GAAMN,IAAQ2E,EAAAA,EAAAA,KAACiZ,EAAAA,SAAQ,CAACC,sBAAuB,CAAC5I,SAAS,GAAIjV,KAAMA,EAAM8d,WAAY,SAAA/M,GAAA,IAAE2K,EAAI3K,EAAJ2K,KAAI,OAAI/W,EAAAA,EAAAA,KAACyX,GAAU,CAACV,KAAMA,EAAMW,YAAaA,GAAc,QAErJhY,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC,CAACgB,MAAM,OAAQC,cAAc,MAAOiW,QAAQ,IAAM,CAAChW,eAAe,aAAaf,SAAA,EAC3FC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAW/D,QAAS,WAC5C3B,EAAwBP,OAAO,CAC7BH,WAAWnC,EACXqD,UAAQ9C,EAAAA,EAAAA,SAAKwb,EAAYvL,WACxBlN,KAAKsF,EACV,KACAvE,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAW/D,QAASoE,SAGlD,EAEe,SAASyU,GAAW3M,GAAoB,IAAlB1Q,EAAE0Q,EAAF1Q,GAC3BuI,GAASC,EAAAA,EAAAA,WAATD,KACFwT,GAAcrN,EAAAA,EAAAA,QAAoB,IAAIuO,KACtCoB,EAA2B,CAC/BC,MAAM,CACJvV,MAAO,QACPwR,UAAW,kBAAIlW,EAAAA,EAAAA,KAACiY,GAAY,CAACtc,GAAIA,EAAI+b,YAAaA,GAAc,EAChE9C,MAAM5U,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,KAERkU,SAAS,CACPxV,MAAO,mBACPwR,UAAW,kBAAIlW,EAAAA,EAAAA,KAACoZ,GAAyB,CAACzd,GAAIA,EAAI+b,YAAaA,GAAc,EAC7E9C,MAAM5U,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,MAGV,OAAOhG,EAAAA,EAAAA,KAACma,GAAAA,QAAY,CAAApa,UAClBL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGZ,MAAM,QAAQb,SAAA,EAClCL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACgB,MAAM,QAAQb,SAAA,EAC1BC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAEmE,EAAK,aAClClE,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACiD,aAAc,GAAI3B,OAAQ,EAAGN,MAAO,QAASkZ,WAAW,OAAOC,UAAU,+BAEzF/Z,EAAAA,EAAAA,KAAC6U,GAAO,CAACN,KAAMyF,EAAY7D,eAAgB,YAGjD,C,0mBC1IA,IAAMiE,GAAW,CAAC,KAAM,MAAM9d,KAAI,SAAA2T,GAAK,MAAG,CAACjG,MAAMiG,EAAOA,MAAAA,EAAM,IACxDoK,IAAQne,EAAAA,EAAAA,SAAIoe,MAAM,IAAIpL,QAAQ5S,KAAI,SAAC2T,EAAOmE,GAAK,OAAIA,EAAQ,GAAGmG,WAAWC,SAAS,EAAG,IAAI,IAAEle,KAAI,SAAA2T,GAAK,MAAG,CAACjG,MAAMiG,EAAOA,MAAAA,EAAM,IAC3HwK,IAAUve,EAAAA,EAAAA,SAAIoe,MAAM,IAAIpL,QAAQ5S,KAAI,SAAC2T,EAAOmE,GAAK,OAAY,EAARA,GAAWmG,WAAWC,SAAS,EAAG,IAAI,IAAEle,KAAI,SAAA2T,GAAK,MAAG,CAACjG,MAAMiG,EAAOA,MAAAA,EAAM,IAG7HyK,GAAe,SAACC,GAKpB,IAJA,IAAIC,EAAYD,EAAKE,QAAQC,QAAQ,SAAS9C,KAAK,EAAG,SAChD+C,EAAUJ,EAAKE,QAAQG,MAAM,SAAShD,IAAI,EAAG,SAC7CiD,EAAQC,OAAQJ,QAAQ,OACxBK,EAAS,GACTP,GAAWG,GAAWH,EAAUK,GACpCE,EAAOC,KAAKR,EAAUS,OAAO,eAC7BT,EAAYA,EAAU5C,IAAI,EAAG,OAE/B,OAAOmD,CACT,EAEMG,GAAe,WACnB,IAAMC,EAAIL,OACJM,EAAaC,SAASF,EAAEF,OAAO,OAAS,EAC9C,OAAOE,EAAEvD,IAAI,EAAEwD,EAAY,SAC7B,EAEME,GAAWtQ,EAAAA,MAAW,kBAAK,sDAAgC,IAC3DuQ,GAAevQ,EAAAA,MAAW,kBAAI,4BAAoC,IAEzD,SAASwQ,GAAmB5X,GAA8E,IAA5E6X,EAAQ7X,EAAR6X,SAAUC,EAAQ9X,EAAR8X,SAC/CC,EAASF,EAASX,KAAMW,GAAUP,KACxCU,GAAyB7X,EAAAA,EAAAA,WAAjBD,EAAI8X,EAAJ9X,KAAM+X,EAAMD,EAANC,OACRxb,GAAQqE,EAAAA,GAAAA,WACdwF,GAAwBC,EAAAA,EAAAA,UAASwR,EAAOV,OAAO,eAAc7Q,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAtDqQ,EAAInQ,EAAA,GAAE0R,EAAO1R,EAAA,GACpBI,GAA8BL,EAAAA,EAAAA,UAASwR,EAAOE,OAAO,MAAMZ,OAAO,MAAKxQ,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAAhEuR,EAAOtR,EAAA,GAAEuR,EAAUvR,EAAA,GAC1B+C,GAAwBrD,EAAAA,EAAAA,UAASwR,EAAOV,OAAO,OAAMxN,GAAApD,EAAAA,EAAAA,SAAAmD,EAAA,GAA9CyO,EAAIxO,EAAA,GAAEyO,EAAOzO,EAAA,GACpBE,GAA4BxD,EAAAA,EAAAA,UAASwR,EAAOV,OAAO,OAAMrN,GAAAvD,EAAAA,EAAAA,SAAAsD,EAAA,GAAlDwO,EAAMvO,EAAA,GAAEwO,EAASxO,EAAA,GACxByO,GAAsClS,EAAAA,EAAAA,UAAmBmQ,GAAeqB,IAAQW,GAAAjS,EAAAA,EAAAA,SAAAgS,EAAA,GAAzEE,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GAC1BtY,GAAaC,EAAAA,EAAAA,WAAbD,SACFG,EAAO,WACXH,EAASwX,GAAqB,KAChC,EAEA,OADAjX,EAAAA,GAAAA,SAAeJ,EAAM,KACd7E,EAAAA,EAAAA,MAACkF,GAAAA,YAAW,CAAA7E,SAAA,EACjBL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACiB,cAAc,MAAOD,MAAM,QAAQb,SAAA,EAC/CC,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGX,cAAc,OAAOd,UACzCC,EAAAA,EAAAA,KAACC,EAAAA,iBAAgB,CAACE,QAASoE,EAAKxE,UAC9BC,EAAAA,EAAAA,KAACiS,EAAAA,SAAQ,CAAC3R,KAAM,GAAID,KAAK,aAAaE,MAAOC,EAAAA,QAAOC,GAAOiF,YAG/D1F,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,GAAGzB,UACpBC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI6a,UAAU,UAAU9c,SAAEmE,EAAK,oBAExDlE,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,SAErBxB,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACiD,aAAc,GAAI3B,OAAQ,EAAGN,MAAO,QAASkZ,WAAW,OAAOC,UAAU,4BACvFra,EAAAA,EAAAA,MAACod,EAAAA,SAAQ,CAACC,UAAU/c,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,IAAMjG,SAAA,EACxBC,EAAAA,EAAAA,KAAC0b,GAAQ,CACPO,OAAQA,EACRrc,WAAOf,EACPqd,QAASA,EACTc,sCAAsC,EACtCC,cAAe,SAACjhB,GAAC,OAAG4gB,EAAelC,GAAeQ,KAAMlf,EAAEkhB,aAAa,EACvEC,YAAW1gB,GAAAA,GAAA,GACNkgB,EAAYS,QAAO,SAACC,EAAGC,GAA0B,OAArBD,EAAEC,GAAG,CAACrK,UAAS,GAAaoK,CAAC,GAAG,CAAC,KAC5D1C,EAAK,CAACA,GAAM,IAAIyC,QAAO,SAACC,EAAGC,GAA0B,OAArBD,EAAEC,GAAG,CAAC1F,UAAS,GAAayF,CAAC,GAAG,CAAC,OAGzE3d,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACiB,cAAc,MAAO+R,gBAAgB,GAAIhS,MAAM,IAAKM,OAAO,IAAInB,SAAA,EAC3EC,EAAAA,EAAAA,KAAC2b,GAAY,CAAC1L,MAAOkM,EAAS/I,SAAUgJ,EAAYmB,OAAQnD,MAC5Dpa,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAC,OAC5BC,EAAAA,EAAAA,KAAC2b,GAAY,CAAC1L,MAAOoM,EAAMjJ,SAAUkJ,EAASiB,OAAQlD,MACtDra,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAC,SAC5BC,EAAAA,EAAAA,KAAC2b,GAAY,CAAC1L,MAAOsM,EAAQnJ,SAAUoJ,EAAWe,OAAQ9C,YAG9D/a,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SAAA,EACjCC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,QAAS/D,QAAS,WAClC,MAAR2b,GAAAA,EAAWZ,KAASP,EAAI,IAAI0B,EAAI,IAAIE,EAAM,IAAIJ,GAAWqB,eACzDjZ,GACF,KACAvE,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAW/D,QAAS,WACpC,MAAR2b,GAAAA,OAAWjd,GACX0F,GACF,SAIN,C,gBCjFe,SAASkZ,GAAgBzZ,GAAuE,IAArErI,EAAEqI,EAAFrI,GAAI+hB,EAAS1Z,EAAT0Z,UAAWzZ,EAAID,EAAJC,KAC/CC,GAASC,EAAAA,EAAAA,WAATD,KACDlJ,GAAQuD,EAAAA,EAAAA,WAARvD,KACCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACFrH,EAAchC,EAAwBC,GACtC2iB,EAAkBzgB,IAClBsB,EAA0BR,IAC1BxB,EAAqB,MAAXO,OAAW,EAAXA,EAAahB,MAAK,SAAAC,GAAC,OAAEA,EAAEL,IAAIA,CAAE,IAC7C2O,GAAwBC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAA7BjK,EAAImK,EAAA,GAAEoT,EAAOpT,EAAA,GACpBI,GAAsCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAA3CiT,EAAWhT,EAAA,GAAEiT,EAAcjT,EAAA,GAC5BtG,EAAO,WACXH,EAASqZ,GAAkB,KAC7B,EAUA,OARA7hB,EAAAA,EAAAA,YAAU,WACR,GAAIY,EAAQ,CACV,IAAYuhB,GAASC,EAAAA,GAAAA,mBAAkBxhB,EAASxB,EAAKU,MAA9C2E,KACPud,EAAQG,GACRD,GAAsB,MAAPthB,OAAO,EAAPA,EAASqhB,cAAe,GACzC,CACF,GAAG,CAAQ,MAAPrhB,OAAO,EAAPA,EAASb,MACbgJ,EAAAA,GAAAA,SAAeJ,EAAM,KACdvE,EAAAA,EAAAA,KAACma,GAAAA,QAAY,CAAApa,UAClBL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACkB,eAAe,gBAAiBU,KAAK,EAAGZ,MAAM,QAAQb,SAAA,EAClEL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACgB,MAAM,QAAQb,SAAA,EAC1BC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAKmE,EAAHvI,EAAQ,eAAqB,eAC1DqE,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAOkE,GAAOma,UAAWnE,WAAW,OAAOC,UAAU,4BAC3D/Z,EAAAA,EAAAA,KAAC4T,GAAS,CAACvT,KAAM6D,EAAK,gBAAiB+L,MAAO5P,EAAM+S,SAAUwK,EAAShd,MAAO,SAC9EZ,EAAAA,EAAAA,KAAC4T,GAAS,CAACvT,KAAM6D,EAAK,eAAgB+L,MAAO4N,EAAazK,SAAU0K,EAAgBhL,WAAS,EAAClS,MAAO,YAEvGlB,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACgB,MAAM,OAAQC,cAAc,OAAOd,SAAA,CAC9C2d,IAAY1d,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACiB,cAAc,MAAOC,eAAe,cAAcf,UAC3EC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,SAAUtE,MAAO,CAACuB,iBAAiB,GAAIsE,UAAW,CAAClF,MAAM,OAAQJ,QAAS,kBAAI3B,EAAwBL,MAAMuf,GAAWze,KAAKsF,EAAK,OAE7J7E,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGX,cAAc,MAAOC,eAAe,YAAYf,SAAA,EACpEC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,QAAS/D,QAAS,WAAK,IAAD3E,EAC9C,GAAO,MAAJR,GAAU,OAANQ,EAAJR,EAAMU,OAANF,EAAYG,IAAMX,EAAKoX,QAAQ,CAAC,IAADiH,EAC1B6E,EAAqB,CAACviB,GAAAA,EAAI0E,KAAAA,EAAMwd,YAAAA,EAAa5Z,KAAAA,EAAMka,MAAU,MAAJnjB,GAAU,OAANqe,EAAJre,EAAMU,WAAF,EAAJ2d,EAAY1d,GAAIse,MAAMjf,EAAKoX,UACzFzW,EAAGgiB,EAAgBngB,OAAO0gB,GAAYP,EAAgBxgB,OAAO+gB,IAAajf,MAAK,SAAAjD,GAAC,OAAE0C,GAAS,OAAQ,CAClGC,OAAiB,aAAV3C,EAAEiI,KAAoB,aAAa,cAC1CrF,OAAO,CAACjD,GAAGK,EAAEL,KACb,GACJ,CACF,KACAqE,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAWtE,MAAO,CAACuB,iBAAiB,GAAIhB,QAASoE,cAKrF,CAEA,IAAMT,GAASnD,EAAAA,QAAWxD,OAAO,CAC/BihB,MAAM,CACJxd,MAAM,MACNC,cAAc,MACdiW,QAAQ,IAEVmH,UAAW,CACTpb,aAAc,GACd3B,OAAQ,EACRN,MAAO,U,YCxELyd,GAAY,SAAC5e,GACf,OAAOC,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAAC6B,gBAAgB,YAAaH,aAAa,GAAIgd,SAAS,SAAU3a,OAAO,GAAG5D,SAAA,EAC5FC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAC6B,gBAAgB,WAAYoI,SAAS,WAAYjJ,MAAoC,KAA1BnB,EAAMpE,KAAKkjB,UAAY,GAAM,IAAKrd,OAAO,WAClHxB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACgT,gBAAgB,EAAGhQ,kBAAkB,EAAG/B,cAAc,OAAOd,SAAA,EACvEC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAAA9E,SAAC,kBACNC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACgD,kBAAkB,GAAG7C,UAACC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAAA9E,SAAEN,EAAMpE,KAAKmjB,kBAGlE,EAGA,kBAAgB/e,GACZ,IAAQgf,GAAWC,EAAAA,GAAAA,WAAXD,OACRnU,GAA4BC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAvCqU,EAAMnU,EAAA,GAAEoU,EAASpU,EAAA,GAClBqU,EAAaJ,EAAOhf,EAAM3B,YAChC,OAAOkC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,MAAOc,WAAW,EAAGiB,oBAA6B,MAAVic,OAAU,EAAVA,EAAYlP,SAAU,GAAG,EAAE,GAAG,GAAG5P,SAC7F,MAAV8e,OAAU,EAAVA,EAAYviB,KAAI,SAACwiB,EAAElW,GAAC,OAAG5I,EAAAA,EAAAA,KAACqe,GAAS,CAAShjB,KAAMyjB,EAAG1K,MAAOxL,EAAGmW,SAAUnW,GAAG+V,EAAQC,UAAWA,GAAtDhW,EAAkE,KAEjH,E,2BCpBKoW,GAAOC,EAAQ,OAGrB,kBAAgBxf,GACf,OAAOO,EAAAA,EAAAA,KAACkf,GAAAA,OAAM,CACPC,iBAJKC,oCAKLC,OAAQ,SAACrT,EAAGsT,GAAyB,MAAb7f,EAAM8f,SAAN9f,EAAM8f,SAAW,EACzCC,eAAgB/f,EAAM2T,SACtBqM,KAAM,CACJC,MAAMV,GAAKU,MACXC,QAASX,GAAKW,QACdC,QAASZ,GAAKY,QACd1e,OAAQ,OACR2e,KAAmB,SAAbpgB,EAAMgB,MAAe,QAAQ,aACnCqf,YAA0B,SAAbrgB,EAAMgB,MAAe,UAAU,OAC5Csf,SAAS,EACTC,UAAU,EACVC,WAAW,EACXC,cAAe,qEACfC,iBAAkB,uBAEpBlQ,MAAOxQ,EAAMwQ,OAEpB,ECpBD,YAAgBxQ,GACf,IAAA6K,GAA0BC,EAAAA,EAAAA,WAAkB,GAAMC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAA3C8V,EAAK5V,EAAA,GAAE6V,EAAQ7V,EAAA,GAKrB,OAJA5O,EAAAA,EAAAA,YAAU,WACJ6D,EAAMwU,QACRoM,GAAS,EACb,GAAG,CAAC5gB,EAAMwU,SACHxU,EAAMwU,QACPvU,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGN,OAAO,QAAQnB,SAAA,EACnCqgB,GAAS3gB,EAAMM,UAClBC,EAAAA,EAAAA,KAACkf,GAAM,CACJze,MAAOhB,EAAMgB,MACbwP,MAAOxQ,EAAMwQ,MACbmD,SAAU3T,EAAM2T,SAChBmM,QAAS,WACHa,IACFC,GAAS,GAAoB,MAAb5gB,EAAM8f,SAAN9f,EAAM8f,UAE1B,QAEJvf,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,CAAAjG,SAAGN,EAAMM,UACd,E,2mBCpBD,kBAAgBN,GACZ,OAAOC,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACgB,MAAM,OAAQM,OAAO,IAAKJ,eAAe,eAAgBG,WAAW,UAAUlB,SAAA,EAC/FC,EAAAA,EAAAA,KAACkX,GAAAA,QAAMza,GAAAA,GAAA,GAAKgD,GAAK,IAAEa,KAAM,OACzBN,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACsC,WAAW,OAAQF,SAAS,IAAIjC,SAAEN,EAAMY,QACtDL,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACsC,WAAW,SAAUF,SAAS,IAAIjC,SAAEN,EAAMoZ,aAE/D,ECMc,SAASyH,GAAYtc,GAAoB,IAADxI,EAAjBG,EAAEqI,EAAFrI,GAC5BuI,GAASC,EAAAA,EAAAA,WAATD,KACFzD,GAAQqE,EAAAA,GAAAA,WACP9J,GAAQuD,EAAAA,EAAAA,WAARvD,KACCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACF8T,EAAW/F,GAAsBnX,GACjCU,EAAe,MAARwc,OAAQ,EAARA,EAAUnc,MAAK,SAAAC,GAAC,OAAEA,EAAEL,IAAIA,CAAE,IACjC4kB,EAASvlB,EAAKU,MAAQA,IAAkB,OAATF,EAAAR,EAAKU,WAAI,EAATF,EAAWG,MAAQ,MAAJD,OAAI,EAAJA,EAAMC,IACpDgiB,EAAkBzgB,IAClBqH,EAAO,WACXH,EAASkc,GAAc,KACzB,EAMA,OALA1kB,EAAAA,EAAAA,YAAU,WACFD,GAAMD,IAASwc,GACnB3T,GACJ,GAAG,CAAC2T,KACJvT,EAAAA,GAAAA,SAAeJ,EAAM,IACd7I,GAAKgE,EAAAA,EAAAA,MAACkF,GAAAA,YAAW,CAAA7E,SAAA,EACtBL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACiB,cAAc,MAAOD,MAAM,QAAQb,SAAA,EAC/CC,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGX,cAAc,OAAOd,UACzCC,EAAAA,EAAAA,KAACC,EAAAA,iBAAgB,CAACE,QAASoE,EAAKxE,UAC9BC,EAAAA,EAAAA,KAACiS,EAAAA,SAAQ,CAAC3R,KAAM,GAAID,KAAK,aAAaE,MAAOC,EAAAA,QAAOC,GAAOiF,YAG/D1F,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,GAAGzB,UACpBC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI6a,UAAU,UAAU9c,SAAEmE,EAAK,gBAExDlE,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,SAErBxB,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACiD,aAAc,GAAI3B,OAAQ,EAAGN,MAAO,QAASkZ,WAAW,OAAOC,UAAU,4BAEvF/Z,EAAAA,EAAAA,KAACwgB,GAAO,CAAC3H,SAAUnd,EAAKmd,SAAUxY,KAAM3E,EAAK2E,KAAM8W,OAAQzb,EAAKC,MAChEqE,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAKqc,EAAO,eAAe,YAAapgB,QAAS,WAAK,IAADkZ,EACxE,GAAO,MAAJre,GAAU,OAANqe,EAAJre,EAAMU,OAAN2d,EAAY1d,IAAMX,EAAKoX,QAAQ,CAAC,IAADqO,EAC1BvC,EAAqB,CAAC7d,KAAK,GAAI4D,KAAK,YAAaka,MAAU,MAAJnjB,GAAU,OAANylB,EAAJzlB,EAAMU,WAAF,EAAJ+kB,EAAY9kB,GAAIse,MAAMjf,EAAKoX,QAASsO,SAASH,OAAO1hB,EAAUnD,EAAKC,IAChIgiB,EAAgBjgB,OAAOwgB,GAAYjf,MAAK,SAAAjD,GAAC,OAAE0C,GAAS,OAAQ,CAACC,OAAO,aAAcC,OAAQ,CAACjD,GAAGK,EAAEL,KAAK,GACvG,CACF,QACaqE,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GACjB,C,koBClDA,IAAM2a,GAAiB1B,EAAQ,OAEzB3J,GAAMqL,GAAeC,kBACrBC,GAAmBC,GAAAA,YAAuBrY,MAAM,IAAInM,KAAI,SAACN,EAAG4M,GAAC,OAAK5M,EAAE+kB,WAAW,GAAKzL,GAAIyL,WAAWnY,IAAI2R,SAAS,IAAIC,SAAS,EAAG,IAAI,IAAEzR,KAAK,IAC3IiY,GAAMC,GAAAA,QAASC,cAAazkB,GAAAA,GAAC,CAAC,EAAGkkB,IAAc,IAAEQ,OAAOL,GAAAA,eAExDM,GAAYH,GAAAA,QAASG,UAAUJ,IAErCI,GAAUC,WAAU,SAACC,GACnB,GAAM,iBAAkBC,QAGnB,GAAgC,YAA5BC,aAAaC,WAA0B,CAC9C,IAAM7kB,EAAc6J,KAAKC,MAAM4a,EAAQjmB,KAAkB,aAAG,GAC5D,IAAImmB,aAAaF,EAAQjmB,KAAK2R,aAAc,CAAE0U,KAASJ,EAAQjmB,KAAKgF,KAAI,KAAKzD,EAAYD,SAC3F,OALEglB,MAAM,qDAMV,IAEA,IAAMC,GAAY,eAAA5d,GAAAzI,EAAAA,EAAAA,UAAG,YAEnB,GAAmB,mBADMimB,aAAaK,qBACR,CAC5B,IAAMC,QAAkCC,UAAUC,cAAcC,SAAY7C,uCAAmDyB,IAC/H/hB,QAAQC,IAAI,gBAAiB+iB,EAA0BI,OACvD,IAAMC,QAAqBf,GAAUgB,SAAS,CAACN,0BAAAA,EAA2BO,SAAUC,GAAAA,uBAAwBvW,OAAKxQ,EAAAA,EAAAA,UAC/G,yBAAe6lB,GAAUgB,SAAS,CAACN,0BAAAA,EAA2BO,SAAUC,GAAAA,sBAAuB,KAMjG,GAJAf,OAAOpU,iBAAiB,gBAAgB,SAACtF,GACvCA,EAAM0a,iBACNT,EAA0BU,YAC5B,IACIL,EACF,OAAOA,CACX,CACA,OAAO,IACT,IAAC,kBAhBiB,OAAAne,EAAAuF,MAAA,KAAAC,UAAA,KAkBZiZ,IAAkB7c,EAAAA,EAAAA,eAAmE,CAAC8c,UAAU,WAAK,IAE9FC,GAAmB,SAAHlX,GAA8E,IAAzE/P,EAAI+P,EAAJ/P,KAAMqE,EAAQ0L,EAAR1L,SAChC6iB,GAAWvY,EAAAA,EAAAA,UACjBC,GAAwCC,EAAAA,EAAAA,YAAiCC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAAlEuY,EAAYrY,EAAA,GAAEsY,EAAetY,EAAA,GAC9BuY,GAAS9X,EAAAA,EAAAA,UAAQ,uBAAmBpM,IAAfgkB,OAAyBhkB,IAAuB,MAAZgkB,IAAAA,EAAcG,MAAiB,GAAE,CAACH,IAwCjG,OAhCAjnB,EAAAA,EAAAA,YAAU,WACR,IAAIqnB,GAAU,EA6Bd,OA5BGvnB,SACuBmD,IAApB+jB,EAASzW,UACXyW,EAASzW,QAAU,KACnByV,KAAe3iB,MAAK,SAACikB,GACnBN,EAASzW,QAAU+W,EACfL,IACFM,EAAAA,GAAAA,iBAAe1mB,GAAAA,GAAC,CAAC,EAAGomB,GAAY,IAAEG,MAAMJ,EAASzW,WAAUlN,MAAK,SAACmkB,GAC5DH,GAAQH,EAAgBM,EAC7B,GAEJ,UAEiBvkB,IAAfgkB,GACFQ,EAAAA,GAAAA,iBAAgB3nB,EAAKC,IAAIsD,MAAK,SAACmkB,GAC1BH,GAAQH,EAAgBM,GAAQ,KACrC,IAEqB,OAAfP,GACNS,EAAAA,GAAAA,kBAAiB,CAAC5nB,KAAKA,EAAKC,GAAIsI,KAAK,MAAO+e,MAAM,OAAO/jB,MAAK,SAACmkB,GAC1DH,GAAQH,EAAgBM,EAC7B,IAEOP,EAAaG,OAASJ,EAASzW,SAAWyW,EAASzW,SAAW0W,EAAaG,QAClFG,EAAAA,GAAAA,iBAAe1mB,GAAAA,GAAC,CAAC,EAAGomB,GAAY,IAAEG,MAAMJ,EAASzW,WAAUlN,MAAK,SAACmkB,GAC5DH,GAAQH,EAAgBM,EAC7B,KAGG,WAAKH,GAAQ,CAAK,CAC3B,GAAG,CAACvnB,EAAMmnB,KACH7iB,EAAAA,EAAAA,KAACyiB,GAAgBc,SAAQ,CAACtT,MAAO,CAAC8S,OAAAA,EAAQL,UAvC/B,SAACK,GACdrnB,GAAQmnB,IACTM,EAAAA,GAAAA,iBAAe1mB,GAAAA,GAAC,CAAC,EAAGomB,GAAY,IAAEG,MAAMD,OAA0BlkB,GAAlB+jB,EAASzW,QAAmB,KAAKyW,EAASzW,QAAS,QAAOlN,MAAK,SAACmkB,GAC9GN,EAAgBM,EAClB,GAEJ,GAiC4DrjB,eAChDlB,GAARkkB,GAA4B,OAAPrnB,IAAgBqE,GAE3C,ECpEA,IAAMyjB,GAAY,SAAC/jB,GACjB,IAAQyE,GAASC,EAAAA,EAAAA,WAATD,KACR,OAAOzE,EAAMgF,SAAQzE,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAOkE,GAAOtB,WAAWzC,UACpDC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAOkE,GAAOrB,gBAAgB1C,SAAEmE,EAAKzE,EAAMgF,cAC3CzE,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GACR,EAEe,SAASyd,GAAiBzf,GAAqB,IAAnBrI,EAAEqI,EAAFrI,GACjCuI,GAASC,EAAAA,EAAAA,WAATD,KACDlJ,GAAQuD,EAAAA,EAAAA,WAARvD,KAGCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACRkG,GAAgCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArCuO,EAAQrO,EAAA,GAAEkZ,EAAWlZ,EAAA,GAC5BI,GAAwBL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAA7BvK,EAAIwK,EAAA,GAAE+S,EAAO/S,EAAA,GACpB+C,GAAgCrD,EAAAA,EAAAA,UAAS,IAAGsD,GAAApD,EAAAA,EAAAA,SAAAmD,EAAA,GAArC+V,EAAQ9V,EAAA,GAAE+V,EAAW/V,EAAA,GAC5BE,GAA0CxD,EAAAA,EAAAA,UAAS,IAAGyD,GAAAvD,EAAAA,EAAAA,SAAAsD,EAAA,GAA/C8V,EAAa7V,EAAA,GAAE8V,EAAgB9V,EAAA,GACtCyO,GAA8BlS,EAAAA,EAAAA,WAAS,GAAMmS,GAAAjS,EAAAA,EAAAA,SAAAgS,EAAA,GAAtCsH,EAAOrH,EAAA,GACdsH,GAD0BtH,EAAA,IACAnS,EAAAA,EAAAA,UAAwB,CAAC,IAAE0Z,GAAAxZ,EAAAA,EAAAA,SAAAuZ,EAAA,GAA9C1X,EAAK2X,EAAA,GAAEC,EAAQD,EAAA,GAChB/L,EAAW/F,GAAsBnX,GACjCwe,EAAqBlH,GAA0BuG,GAC/CsL,EnBnCD,WACL,IAAMlpB,GAAcC,EAAAA,EAAAA,kBACpB6J,GAA2BxG,EAAAA,EAAAA,WAAnBvD,EAAI+J,EAAJ/J,KAAMsJ,EAAQS,EAART,SACR8f,GAAUhnB,EAAAA,EAAAA,aAAYinB,EAAAA,SAAU,CACpC/mB,UAAW,WACTrC,EAAYsC,kBAAkB,qBAChC,IAEI+mB,GAAUlnB,EAAAA,EAAAA,aAAYmnB,EAAAA,UAAW,CACrCjnB,UAAW,SAACjC,EAAMK,GAAQ,IAADF,EACnBE,EAAKC,KAAe,OAAbH,EAAIR,EAAKU,WAAI,EAATF,EAAWG,IACrBD,EAAKmd,UAAYnd,EAAKioB,SACvBrf,EAAS,CAACL,KAAK,gBAAiB4U,SAASnd,EAAKmd,SAAU8K,SAASjoB,EAAKioB,WAGtErf,EAAS,CAACL,KAAK,YAGjBhJ,EAAYsC,kBAAkB,qBAElC,IAEIinB,GAAUpnB,EAAAA,EAAAA,aAAYqnB,EAAAA,WAAY,CACtCnnB,UAAW,SAACjC,EAAMM,GAAM,IAAD0d,EACrBpe,EAAYsC,kBAAkB,sBAC1B5B,IAAe,OAAb0d,EAAIre,EAAKU,WAAI,EAAT2d,EAAW1d,KACnB2I,EAAS,CAACL,KAAK,kBACnB,IAEF,MAAO,CAAC9G,OAAOinB,EAAQxmB,YAAaJ,OAAO8mB,EAAQ1mB,YAAama,OAAOyM,EAAQ5mB,YACjF,CmBKiC8mB,GACzBhpB,EAAe,MAARwc,OAAQ,EAARA,EAAUnc,MAAK,SAAAC,GAAC,OAAEA,EAAEL,IAAIA,CAAE,IACjCgpB,EAAkBjpB,IAAwB,IAAhBA,EAAKyJ,UACrCvJ,EAAAA,EAAAA,YAAU,WACJF,IACFgoB,EAAYhoB,EAAKmd,UACjB+E,EAAQliB,EAAK2E,MAEjB,GAAG,CAAK,MAAJ3E,OAAI,EAAJA,EAAMC,KACV,IAgCM4I,EAAO,WACXH,EAASqf,GAAmB,KAC9B,EACA,OAAOzjB,EAAAA,EAAAA,KAACma,GAAAA,QAAY,CAAApa,UAClBL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACkB,eAAe,gBAAiBU,KAAK,EAAGZ,MAAM,QAAQb,SAAA,EAClEL,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGZ,MAAM,QAAQb,SAAA,EAClCC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAkBmE,EAAhBygB,EAAqB,YAAkB,kBACpE3kB,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAOkE,GAAOma,UAAWnE,WAAW,OAAOC,UAAU,4BAC3Dra,EAAAA,EAAAA,MAACgU,GAAQ,CAACrT,KAAM6D,EAAK,YAAatD,MAAO,MAAMb,SAAA,CAC5C4kB,GAAgB3kB,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAE8Y,KAAiB7Y,EAAAA,EAAAA,KAAC6T,GAAe,CAC3E5D,MAAO4I,EACPzF,SAAU,SAAC1N,GAAI,OAAKge,EAAYhe,EAAK,EACrCwN,aAAc,mBAElBlT,EAAAA,EAAAA,KAACwjB,GAAS,CAAC/e,QAAS6H,EAAMuM,eAE5BnZ,EAAAA,EAAAA,MAACgU,GAAQ,CAACrT,KAAM6D,EAAK,QAAStD,MAAO,MAAMb,SAAA,EACzCC,EAAAA,EAAAA,KAAC6T,GAAe,CACZ5D,MAAO5P,EACP+S,SAAU,SAAC1N,GAAI,OAAKkY,EAAQlY,EAAK,KAErC1F,EAAAA,EAAAA,KAACwjB,GAAS,CAAC/e,QAAS6H,EAAMjM,WAE5BX,EAAAA,EAAAA,MAACgU,GAAQ,CAACrT,KAAM6D,EAAK,YAAatD,MAAO,MAAMb,SAAA,EAC7CC,EAAAA,EAAAA,KAAC6T,GAAe,CACZ5D,MAAO0T,EACPxQ,iBAAe,EACfC,SAAU,SAAC1N,GAAI,OAAKke,EAAYle,EAAK,KAEzC1F,EAAAA,EAAAA,KAACwjB,GAAS,CAAC/e,QAAS6H,EAAMqX,eAE5BjkB,EAAAA,EAAAA,MAACgU,GAAQ,CAACrT,KAAM6D,EAAK,kBAAmBtD,MAAO,MAAMb,SAAA,EACnDC,EAAAA,EAAAA,KAAC6T,GAAe,CACZ5D,MAAO4T,EACP1Q,iBAAe,EACfC,SAAU,SAAC1N,GAAI,OAAKoe,EAAiBpe,EAAK,KAE9C1F,EAAAA,EAAAA,KAACwjB,GAAS,CAAC/e,QAAS6H,EAAMuX,uBAU9BnkB,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAACgB,MAAM,OAAQC,cAAc,OAAOd,SAAA,CAC9CpE,IAAMqE,EAAAA,EAAAA,KAACL,GAAAA,KAAI,CAACC,MAAO,CAACiB,cAAc,MAAOC,eAAe,cAAcf,UACrEC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,kBAAmBtE,MAAO,CAACuB,iBAAiB,GAAIsE,UAAW,CAAClF,MAAM,OAAQJ,QAAS,kBAAIgkB,EAAuBpM,OAAOpc,GAAIsD,KAAKsF,EAAK,OAE/J7E,EAAAA,EAAAA,MAACC,GAAAA,KAAI,CAACC,MAAO,CAAC4B,KAAK,EAAGX,cAAc,MAAOC,eAAe,YAAYf,SAAA,EACpEC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,QAAS/D,QApFzB,WAChB,IAAIykB,EAAyB,CAAC,IACP,MAAlBpL,OAAkB,EAAlBA,EAAoB7J,SAAU,GAAI,IAAMgV,IAAiBC,EAAS/L,SAAW,oCAC9EA,EAASlJ,OAAS,IAAMkJ,EAASlJ,OAAS,MAAIiV,EAAS/L,SAAW,0BAClExY,EAAKsP,OAAS,GAAKtP,EAAKsP,OAAS,MAAIiV,EAASvkB,KAAO,wBACpD,oEAAoEwI,KAAK8a,IAAegB,GAAoC,GAAjBhB,EAAShU,SAAYiV,EAASjB,SAAW,wFACrJA,GAAYE,IAAee,EAASf,cAAgB,kDACpD5X,OAAOiD,KAAK0V,GAAUjV,OAAS,EAC/BuU,EAASU,GAGTjpB,EACFwoB,EAAuB3mB,OAAO,CAC5B7B,GAAAA,EACA0E,KAAAA,EACAwY,SAAS8L,OAAgB9lB,EAAUga,EACnC1T,UAAS,EACTwe,SAASA,EAAShU,OAAO,EAAEgU,OAAS9kB,IACnCI,MAAK,WAAK,IAADzD,GAAEG,IAAa,OAAXH,EAAER,EAAKU,WAAI,EAATF,EAAWG,MAAU,MAAJD,OAAI,EAAJA,EAAMyJ,YAAaZ,GAAM,KAGxD,MAAJvJ,OAAI,EAAJA,EAAMoX,UAAW+R,EAAuBhnB,OAAO,CAC3C0b,SAAAA,EACAxY,KAAAA,EACAsjB,SAAAA,EACAxe,UAAS,EACT0f,SAASd,EACTe,cAAc9pB,EAAKoX,UAEpBnT,KAAKsF,EAEZ,KAsDQvE,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAOR,EAAK,UAAWtE,MAAO,CAACuB,iBAAiB,GAAIhB,QAASoE,cAKrF,CAEA,IAAMT,GAASnD,EAAAA,QAAWxD,OAAO,CAC/BqF,WAAY,CACVtB,OAAQ,GACRN,MAAM,QAER6B,gBAAgB,CACdC,kBAAkB,SAClBnC,MAAM,MACNyB,SAAS,IAEXic,UAAW,CACTpb,aAAc,GACd3B,OAAQ,EACRN,MAAO,UChJLmkB,GAAgB,SAAH/gB,GAAoE,IAA/DU,EAAKV,EAALU,MAAO3E,EAAQiE,EAARjE,SACvBU,GAAQqE,EAAAA,GAAAA,WACRvE,EAAQC,EAAAA,QAAOC,GAAOiF,KAC5B,OAAOhG,EAAAA,EAAAA,MAACslB,GAAAA,QAAa,CAACnO,UAAW,CAAC5V,WAAW,aAAcQ,gBAAuB,SAAPhB,EAAe,cAAc,SAASV,SAAA,EAC/GC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAO,CAACoC,SAAS,GAAIzB,MAAAA,EAAO2B,WAAW,OAAOnC,SAAE2E,IACrD3E,IAEL,EAEA,oBAAoB,IAADvE,EACjBwgB,GAAoC7X,EAAAA,EAAAA,WAA5BD,EAAI8X,EAAJ9X,KAAM+X,EAAMD,EAANC,OAAQgJ,EAASjJ,EAATiJ,UACd7gB,GAAaC,EAAAA,EAAAA,WAAbD,SACDpJ,GAAQuD,EAAAA,EAAAA,WAARvD,KACDyF,GAAQqE,EAAAA,GAAAA,WACRogB,GAAcC,EAAAA,EAAAA,kBACpBC,EFgEF,WACE,IAAAC,GAA4Bhf,EAAAA,EAAAA,YAAWoc,IACvC,MAAO,CAACM,OADKsC,EAANtC,OACSL,UADQ2C,EAAT3C,UAEhB,CEnE0C4C,GAA3BlC,EAAIgC,EAAXrC,OAAuBwC,EAAOH,EAAjB1C,UACdniB,EAAQC,EAAAA,QAAOC,GAAOiF,KAC5B,OAAOhG,EAAAA,EAAAA,MAAAsG,EAAAA,SAAA,CAAAjG,SAAA,EACLC,EAAAA,EAAAA,KAAC+kB,GAAa,CAACrgB,MAAOR,EAAK,2BAA2BnE,UACpDC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SAChC,CAAC,CAACmE,EAAK,OAAO,GAAO,CAACA,EAAK,QAAQ,IAAQ5H,KAAI,SAAA+O,GAAA,IAAAI,GAAAhB,EAAAA,EAAAA,SAAAY,EAAA,GAAE3G,EAAK+G,EAAA,GAAE+Z,EAAC/Z,EAAA,UAAIzL,EAAAA,EAAAA,KAACwF,EAAU,CAC3Dd,MAAOA,GAAS,GAAIe,UAAW,CAACzD,SAAS,GAAIzB,MAAAA,EAAOklB,mBAAmBrC,GAAMoC,EAAE,YAAY,QAAS5lB,MAAO,CAAC0B,aAAa,IAAKnB,QAAS,WAAKolB,EAAQC,EAAE,GAA7J9gB,EAAiK,SAG5K1E,EAAAA,EAAAA,KAAC+kB,GAAa,CAACrgB,MAAOR,EAAK,uBAAuBnE,UAClDC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SAC9B,CAAC,CAACmE,EAAK,QAAS,QAAS,CAAC,qBAAO,MAAO,CAAC,UAAW,OAAO5H,KAAI,SAAA8P,GAAA,IAAAC,GAAA5B,EAAAA,EAAAA,SAAA2B,EAAA,GAAE1H,EAAK2H,EAAA,GAAEqZ,EAACrZ,EAAA,UAAIrM,EAAAA,EAAAA,KAACwF,EAAU,CAC3Ed,MAAOA,GAAS,GAAIe,UAAW,CAACzD,SAAS,GAAIzB,MAAAA,EAAOklB,mBAAmBxJ,GAAQyJ,EAAE,YAAY,QAAS9lB,MAAO,CAAC0B,aAAa,IAAKnB,QAAS,kBAAI8kB,EAAUS,EAAE,GAAhKhhB,EAAmK,SAG9K1E,EAAAA,EAAAA,KAAC+kB,GAAa,CAACrgB,MAAOR,EAAK,mBAAmBnE,UAC5CC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SAChC,CAAC,CAACmE,EAAK,QAAS,iBAAkB,CAACA,EAAK,SAAU,SAAU,CAACA,EAAK,QAAS,SAAS5H,KAAI,SAAAqZ,GAAA,IAAAC,GAAAnL,EAAAA,EAAAA,SAAAkL,EAAA,GAAEjR,EAAKkR,EAAA,GAAE+P,EAAW/P,EAAA,UAAI5V,EAAAA,EAAAA,KAACwF,EAAU,CAC9Gd,MAAOA,EAAOe,UAAW,CAACzD,SAAS,GAAIzB,MAAAA,EAAOklB,mBAAmBP,GAAaS,EAAY,YAAY,QAAS/lB,MAAO,CAAC0B,aAAa,IAAKnB,QAAS,kBACzJylB,EAAAA,GAAAA,gBAAeD,EAAY,GAD3BjhB,EAC8B,UAG9B,OAAVlJ,EAACR,EAAKU,OAALF,EAAW2J,YAAYnF,EAAAA,EAAAA,KAACglB,GAAAA,QAAa,CAACnO,UAAW,CAAC5V,WAAW,aAAcQ,gBAAuB,SAAPhB,EAAe,cAAc,SAASV,UACjIC,EAAAA,EAAAA,KAACwF,EAAU,CAACd,MAAOR,EAAK,sBAAuBuB,UAAW,CAACzD,SAAS,GAAIzB,MAAAA,GAAQX,MAAO,CAACimB,YAAY,EAAGvkB,aAAa,IAAKnB,QAAS,eAAAkZ,EAAA,OAAIjV,EAASqf,GAAmB,CAAC9nB,GAAY,OAAV0d,EAACre,EAAKU,WAAI,EAAT2d,EAAW1d,IAAI,QAG1L,EC1BD,IAAMmqB,GAAgB,WACpB,IAAO9qB,GAAQuD,EAAAA,EAAAA,WAARvD,KACDyF,GAAQqE,EAAAA,GAAAA,WACNV,GAAaC,EAAAA,EAAAA,WAAbD,SACF8T,EAAW/F,GAAsBnX,GACjC+qB,EAAa3a,EAAAA,SACf,kBAAI8M,GAAYA,EAAS5b,KAAI,SAACya,EAAM3C,GAAK,OAAGpU,EAAAA,EAAAA,KAAC8X,GAAU,CAAad,OAAQD,EAAM5W,QAAS,kBAAIiE,EAASkc,GAAc,CAAC3kB,GAAGob,EAAKpb,IAAI,GAAtEyY,EAAyE,GAAC,GAAE,CAAC8D,IAC9I,OAAOlY,EAAAA,EAAAA,KAACgmB,GAAAA,QAAU,CAACpmB,MAAO,CAAC4B,KAAK,EAAGC,gBAAgBjB,EAAAA,QAAOC,GAAOoS,YAAY9S,SACxEgmB,GAEP,EAEME,GAAmB,WACvB,IAAOjrB,GAAQuD,EAAAA,EAAAA,WAARvD,KACD+B,EAAcD,EAA0B9B,GACxCyF,GAAQqE,EAAAA,GAAAA,WAERmW,GAAS,IAAI5L,MAAQmO,cAAc0I,MAAM,EAAG,IAClD,OAAOlmB,EAAAA,EAAAA,KAACgmB,GAAAA,QAAU,CAACpmB,MAAO,CAAC4B,KAAK,EAAGC,gBAAgBjB,EAAAA,QAAOC,GAAOoS,YAAY9S,SAC7D,MAAXhD,OAAW,EAAXA,EAAaT,KAAI,SAACya,EAAM3C,GAAS,IAAD+R,EAAAC,EAAAC,EAAAC,EAC7BC,GAAuBvI,EAAAA,GAAAA,mBAAkBjH,EAAM/b,EAAKU,MAA7C8qB,EAAMD,EAANC,OAAQnmB,EAAIkmB,EAAJlmB,KACTsa,EAAwB,OAApBwL,EAAGpP,EAAKra,mBAAY,EAAjBypB,EAAmBtpB,QAAQqpB,MAAM,EAAE,IAC1CvpB,GAA2B,OAAjBypB,EAAArP,EAAKra,mBAAY,EAAjB0pB,EAAmBK,mBAAoC,OAArBJ,EAAItP,EAAKra,mBAAY,EAAjB2pB,EAAmB1pB,UAAW,GACpF,OAAO+C,EAAAA,EAAAA,MAAC0W,GAAU,CAAaS,UAAW,CAAChW,cAAc,MAAOC,eAAe,iBAAkBX,QAAS,kBAAIzB,GAAS,aAAc,CAAC/C,GAAGob,EAAKpb,IAAI,EAACoE,SAAA,EAC/IL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,MAAO8Q,WAAW,GAAG5R,SAAA,CAC5CymB,GACCxmB,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAEqX,YAAY,IAAIlX,UAC7BC,EAAAA,EAAAA,KAACkX,GAAAA,QAAM,CAAC7W,KAAMmmB,EAAOnmB,KAAMC,KAAM,GAAI6W,OAAQqP,EAAO7qB,QAEtDqE,EAAAA,EAAAA,KAAC0mB,EAAAA,YAAW,CAACpmB,KAAM,GAAIC,MAAOC,EAAAA,QAAOC,GAAOC,UAAWd,MAAO,CAAEiD,cAAe,EAAGoU,YAAY,IAAM5W,KAAK,WAC3GX,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAAI,SAAA,EACDL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,OAAOd,SAAA,EAC/BC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,IAAIjC,SAAEM,KAC7BL,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI2kB,QAAS,GAAKd,YAAY,GAAG9lB,SAAEgX,EAAK6P,mBAEnE5mB,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI2kB,QAAS,IAAK5mB,SAAEpD,EAAQkqB,WAAW,KAAM,cAG5EnnB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAAAI,SAAA,EACDC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI2kB,QAAS,GAAK9J,UAAU,SAAS9c,SAAE4a,GAAMM,EAAuB,OAAlBqL,EAACvP,EAAKra,mBAAY,EAAjB4pB,EAAmBzpB,QAAQqpB,MAAM,GAAG,IAAIvL,KAClH3a,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACoC,SAAS,GAAI6a,UAAU,SAAS9c,SAAEgX,EAAK+P,aAAa/P,EAAK+P,aAAa,WAjBpE1S,EAoB5B,KAEN,EAGM2S,GAAgB,WACpB,IAAMtmB,GAAQqE,EAAAA,GAAAA,WACd,OAAO9E,EAAAA,EAAAA,KAACgmB,GAAAA,QAAU,CAACpmB,MAAO,CAAC4B,KAAK,EAAGC,gBAAgBjB,EAAAA,QAAOC,GAAOoS,YAAY9S,UAC3EC,EAAAA,EAAAA,KAACgnB,GAAc,KAEnB,EAEMC,GAAgB,SAACxmB,GACrB,IAAMF,EAAQC,EAAAA,QAAOC,GAAOC,UAC5B,MAAO,CACLwmB,OAAO,CACHxiB,MAAM,SACNwR,UAAU4P,GACVlR,MAAK5U,EAAAA,EAAAA,KAACmnB,EAAAA,uBAAsB,CAAC7mB,KAAM,GAAIC,MAAOA,EAAOX,MAAO,CAAEiD,cAAe,GAAKxC,KAAK,aAE3F+mB,OAAO,CACH1iB,MAAM,OACNwR,UAAU+P,GACVrR,MAAK5U,EAAAA,EAAAA,KAACiS,EAAAA,SAAQ,CAAC3R,KAAM,GAAIC,MAAOA,EAAOX,MAAO,CAAEiD,cAAe,GAAKxC,KAAK,aAO7EgnB,QAAQ,CACJ3iB,MAAM,SACNwR,UAAU6Q,GACVnS,MAAK5U,EAAAA,EAAAA,KAACsnB,EAAAA,gBAAe,CAAChnB,KAAM,GAAIC,MAAOA,EAAOX,MAAO,CAAEiD,cAAe,GAAKxC,KAAK,aAGxF,ECpGO,IAAMknB,GAAO,CAChBC,WAAW,CACP9iB,MAAM,OACNwR,UDoGO,SAAmBlS,GAAsD,IAADyjB,EAAnDC,EAAU1jB,EAAV0jB,WAAYrS,EAAKrR,EAALqR,MAC9C2G,GAAyB7X,EAAAA,EAAAA,WAAjBD,EAAI8X,EAAJ9X,KAAM+X,EAAMD,EAANC,OACRjX,GAAaC,EAAAA,EAAAA,WACbxE,GAAQqE,EAAAA,GAAAA,WACNV,GAAaC,EAAAA,EAAAA,WAAbD,SACDpJ,GAAQuD,EAAAA,EAAAA,WAARvD,KACPsP,GAA0BC,EAAAA,EAAAA,UAAuB,aAAdvF,GAA0BwF,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArDqd,EAAInd,EAAA,GAAEod,EAAOpd,EAAA,GACfjK,EAAQC,EAAAA,QAAOC,GAAOiF,KACtBmiB,EAAU,CACd,CAACnjB,MAAMR,EAAK,UAAW4jB,YAAY,kBAAI9nB,EAAAA,EAAAA,KAAC+nB,GAAW,CAAC1iB,MAAO,CAAC,CAACX,MAAMR,EAAK,UAAW/D,QAAQ,eAAA3E,EAAA,OAAI4I,EAASqf,GAA4B,OAATjoB,EAAAR,EAAKU,OAALF,EAAW2J,SAAS,CAACxJ,GAAGX,EAAKU,KAAKC,IAAI,CAAC,EAAE,KAAK,GACzK,CAAC+I,MAAMR,EAAK,QAAS4jB,YAAY,kBAAI9nB,EAAAA,EAAAA,KAAC+nB,GAAW,CAAC1iB,MAAO,CAAC,CAACX,MAAMR,EAAK,UAAW/D,QAAQ,kBAAIiE,EAASqZ,GAAkB,CAACxZ,KAAK,aAAa,KAAK,GAEhJ,CAACS,MAAMR,EAAK,UAAW4jB,YAAY,kBAAI9nB,EAAAA,EAAAA,KAAC+nB,GAAW,GAAE,IAavD,OAVAC,EAAAA,EAAAA,kBAAgB,WAAO,IAADC,EACd7T,EAA6B,GAAhB,MAALiB,GAAa,OAAR4S,EAAL5S,EAAOzW,aAAF,EAALqpB,EAAeC,KAC7BR,EAAWS,WAAyB,YAAdnjB,EAAyB6iB,EAAQzT,GAAO,CAC5D1P,MAAOR,EAAK,QACZ4jB,YAAa,kBAAI9nB,EAAAA,EAAAA,KAAC+nB,GAAW,GAAE,GAEnC,GAAG,CAACL,EAAYrS,EAAOrQ,EAAYiX,KACnCrgB,EAAAA,EAAAA,YAAU,WACRgsB,EAAsB,aAAd5iB,EACV,GAAG,CAACA,IACG2iB,GACLjoB,EAAAA,EAAAA,MAACsmB,GAAAA,QAAU,CAAC9M,sBAAuB,CAAC1X,KAAK,EAAGP,WAAW,UAAUlB,SAAA,EAC/DL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAAC0Q,SAAS,EAAG1P,MAAM,MAAOmB,UAAU,IAAIhC,SAAA,EACnDC,EAAAA,EAAAA,KAACooB,GAAAA,QAAU,CAACxoB,MAAO,CAACoC,SAAS,GAAIzB,MAAAA,GAAOR,SAAC,eACzCC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAC6B,gBAAgBjB,EAAAA,QAAOa,YAAaH,OAAO,EAAGN,MAAM,WAElEZ,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACsB,OAAO,OACrBlB,EAAAA,EAAAA,KAACglB,GAAAA,QAAa,CAACnO,UAAW,CAAC5V,WAAW,aAAcQ,gBAAuB,SAAPhB,EAAe,cAAc,SAASV,UACxGC,EAAAA,EAAAA,KAACwF,EAAU,CAACd,MAAOR,EAAK,cAAeuB,UAAW,CAACzD,SAAS,GAAIzB,MAAAA,GAAQX,MAAO,CAACimB,YAAY,EAAGvkB,aAAa,IAAKnB,QAAS,kBAAIiE,EAASqZ,GAAkB,CAACxZ,KAAK,aAAa,OAE9KjE,EAAAA,EAAAA,KAACgnB,GAAc,QAEjBhnB,EAAAA,EAAAA,KAACqoB,EAAc,CAAC5nB,MAAOA,QAEzBT,EAAAA,EAAAA,KAAC6U,GAAO,CAACN,KAAM0S,GAAcxmB,GAAQ0V,eAAe,SAAS/B,MAAOqH,UAAqB,OAAZgM,EAAApS,EAAMzW,aAAM,EAAZ6oB,EAAoB,MAAK,GAAIjT,MAAO,SAACJ,GAASsT,EAAWY,UAAU,CAACJ,IAAI9T,GAAO,GAChK,EC3IQlO,KAAK,QAETqiB,WAAW,CACP7jB,MAAM,OACNwR,UC8BO,SAAmBlS,GAAsD,IAADikB,EAAAO,EAAnDd,EAAU1jB,EAAV0jB,WAAYrS,EAAKrR,EAALqR,MAC9C2G,GAAyB7X,EAAAA,EAAAA,WAAjBD,EAAI8X,EAAJ9X,KAAM+X,EAAMD,EAANC,OACRrL,GAAWC,EAAAA,GAAAA,WACX/S,EAAkB,MAALuX,GAAa,OAAR4S,EAAL5S,EAAOzW,aAAF,EAALqpB,EAAetsB,GAC5B8sB,GAAWpe,EAAAA,EAAAA,QAAkB,MAC5BrP,GAAQuD,EAAAA,EAAAA,WAARvD,KACCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACF5H,EAAuC,OAAhCgsB,EAAGztB,EAAwBC,SAAK,EAA7BwtB,EAA+BzsB,MAAK,SAAAC,GAAC,OAAEA,EAAEL,IAAI8f,SAAS3d,EAAW,IAC3E4qB,EAAgBlsB,GAAQwhB,EAAAA,GAAAA,mBAAkBxhB,EAASxB,EAAKU,WAAMmD,EAC9DsZ,EAAata,EAAuBC,GACpC4f,GAAYzS,EAAAA,EAAAA,UAAQ,eAAA0d,EAAA,OAAc,MAAVxQ,GAA4C,OAAlCwQ,EAAVxQ,EAAYpc,MAAK,SAAAC,GAAC,IAAAR,EAAA,OAAEQ,EAAEN,OAAiB,OAAbF,EAAIR,EAAKU,WAAI,EAATF,EAAWG,GAAE,UAAjC,EAAVgtB,EAA8ChtB,EAAE,GAAE,CAACX,EAAMmd,IACjFnT,GAAaC,EAAAA,EAAAA,WACnBqF,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAA/B2F,EAAKzF,EAAA,GAAE4I,EAAQ5I,EAAA,GACtBI,GAAsCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAA3Cge,EAAW/d,EAAA,GAAEge,EAAche,EAAA,GAClC+C,GAA0BrD,EAAAA,EAAAA,YAAkBsD,GAAApD,EAAAA,EAAAA,SAAAmD,EAAA,GAArCkb,EAAKjb,EAAA,GAAEkb,EAAQlb,EAAA,GACtBE,GAAkCxD,EAAAA,EAAAA,UAAuB,MAAKyD,GAAAvD,EAAAA,EAAAA,SAAAsD,EAAA,GAAvDib,EAAShb,EAAA,GAAEib,EAAYjb,EAAA,GAC9ByO,GAAkClS,EAAAA,EAAAA,WAAkB,GAAMmS,GAAAjS,EAAAA,EAAAA,SAAAgS,EAAA,GAAnD3L,EAAS4L,EAAA,GAAE3L,EAAY2L,EAAA,GAC9BsH,IAAkCzZ,EAAAA,EAAAA,WAAkB,GAAM0Z,IAAAxZ,EAAAA,EAAAA,SAAAuZ,GAAA,GAAnDkF,GAASjF,GAAA,GAAEkF,GAAYlF,GAAA,GAC9BmF,IAAgC7e,EAAAA,EAAAA,WAAkB,GAAM8e,IAAA5e,EAAAA,EAAAA,SAAA2e,GAAA,GAAjDE,GAAQD,GAAA,GAAEE,GAAWF,GAAA,GAC5BG,IAAqCjf,EAAAA,EAAAA,YAA8Ckf,IAAAhf,EAAAA,EAAAA,SAAA+e,GAAA,GAA5EE,GAAYD,GAAA,GAAEE,GAAYF,GAAA,GAC3BG,IAAa3e,EAAAA,EAAAA,UAAQ,kBAAIie,GAAU,EAAEjZ,EAAMxH,MAAM,MAAMkH,MAAM,GAAE,CAACM,EAAOiZ,KAEvEzoB,IAAQqE,EAAAA,GAAAA,WACR+kB,GAAY,WAChB,GAAI5Z,EAAMN,OAAO,EAAE,CACJ,IAAD0J,EAGRoH,EAHJ,GAAG6I,GACDQ,GAAgB3sB,OAAO,CAACX,QAAQsB,EAAYpC,KAAc,OAAV2d,EAACre,EAAKU,WAAI,EAAT2d,EAAW1d,GAAIgB,QAAQ,GAAImsB,MAAAA,EAAOxJ,OAAQ,CAAC5a,MAAMuL,EAAOtT,QAAQisB,UAGjHkB,GAAgB3sB,OAAO,CAACX,QAAQsB,EAAYpC,KAAc,OAAV+kB,EAACzlB,EAAKU,WAAI,EAAT+kB,EAAW9kB,GAAIgB,QAAQsT,EAAO6Y,MAAAA,IAEjFC,OAASlqB,GACTsqB,IAAa,GACb/V,EAAS,IACT6V,GAAa,GACVK,KACDT,EAAe,IACfU,IAAY,GAEhB,CACF,GACA3tB,EAAAA,EAAAA,YAAU,WACL8tB,KACDH,IAAY,GACZnW,EAASnD,EAAMhU,OAAOgU,EAAMN,OAAO,EAAE,KAAK,GAAI+Z,GAAazZ,QAC3D4Y,EAAeD,EAAY3sB,OAAO,OAAQytB,GAAad,cACvDe,QAAa9qB,GACb0qB,IAAY,GAEhB,GAAG,CAACG,GAAczZ,EAAO2Y,IACzB,IAAMkB,IAAkBC,EAAAA,EAAAA,gCAExB/B,EAAAA,EAAAA,kBAAgB,WACdN,EAAWS,WAAW,CACpBL,YAAa,kBAAK9nB,EAAAA,EAAAA,KAAC+nB,GAAW,CAAC1iB,MAAO,CACpC,CAACX,MAAMR,EAAK,UAAW/D,QAAQ,kBAAIiE,EAAS4U,GAAa,CAACrd,GAAGmC,GAAY,GACzE,CAAC4G,MAAMR,EAAK,WAAY/D,QAAQ,kBAAIiE,EAASqZ,GAAkB,CAAC9hB,GAAGmC,EAAYmG,KAAK,YAAayZ,UAAAA,GAAW,KAC1G,EACJhZ,MAAoB,MAAbgkB,OAAa,EAAbA,EAAeroB,KACtB2pB,cAA0B,YAAZhlB,GAA0BskB,KAE5C,GAAG,CAAC5B,EAAYrS,EAAOqI,EAAWzB,EAAQjX,EAAYskB,KAEtD,IAAM/kB,GAAO,WACRmjB,EAAWuC,YACVvC,EAAWwC,SAEXxC,EAAWhpB,SAAS,aAAc,CAACwpB,IAAI,GAE7C,EA+BA,OArBAtsB,EAAAA,EAAAA,YAAU,WACRwI,EAAS,KAAM,MACVtG,GACHyG,IACJ,GAAG,CAAC8Q,KACJzZ,EAAAA,EAAAA,YAAU,YACS,OAAbuc,QAAkCtZ,GAAZsZ,QAAoEtZ,GAA3CsZ,EAAWpc,MAAK,SAAAC,GAAC,IAAAmuB,EAAA,OAAEnuB,EAAEN,OAAe,OAAXyuB,EAAEnvB,EAAKU,WAAI,EAATyuB,EAAWxuB,GAAE,MACzF4I,IACJ,GAAG,CAAC4T,KACJvc,EAAAA,EAAAA,YAAU,WACLotB,IAC8B,MAA9BP,EAAStc,QAAgBie,OAAzB3B,EAAStc,QAAgBie,QAC1BnB,GAAa,GAEjB,GAAG,CAACD,KACJptB,EAAAA,EAAAA,YAAU,WACR,GAAe,MAAXotB,IAAoBpY,EAAS,CAC/B,IAAMyZ,EAAU5Q,YAAW,kBAAIwP,GAAa,EAAK,GAAE,KACnD,OAAO,kBAAIvP,aAAa2Q,EAAQ,CAClC,CACF,KACO3qB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAClB,CAAC4B,KAAK,EAAGP,WAAW,UACR,aAAZ+D,EAAwB,CAACnE,cAAc,cAAeypB,SAAS,KAAK,CAACzpB,cAAc,WACnFd,SAAA,EACAC,EAAAA,EAAAA,KAACuqB,GAAgB,CAACzsB,WAAYA,EAAY6S,WAAY,SAAC6Z,GAAC,OAAGzZ,GAAcyZ,EAAE,EAAEzkB,SAAU+K,KACvFpR,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACkR,EAAU,CAACa,WAAW,GAAG,CAACnQ,KAAK,GAAgB,aAAZwD,EAAwB,CAACslB,SAAS,IAAKppB,OAAO,QAAQ,CAACN,MAAM,SAASb,SAAA,EACrHC,EAAAA,EAAAA,KAACyqB,GAAAA,QAAQ,CAAC3sB,WAAYA,EAAY9C,KAAMA,EAAM0vB,SAAO,EAACf,aAAcA,MACpEjqB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACiK,SAAS,WAAYhJ,cAAc,OAAOd,SAAA,EACtDC,EAAAA,EAAAA,KAAC2qB,GAAU,CAAC7sB,WAAYA,KACxBkC,EAAAA,EAAAA,KAAC4qB,GAAAA,QAAS,CAAC9sB,WAAYA,QAEzB4B,EAAAA,EAAAA,MAAC+R,GAAAA,KAAU,CAAC7R,MAAO,CAAC,CAACkK,OAAO,EAAGlJ,MAAM,OAAQe,WAAW,GAAIZ,cAAc,GAAI6B,kBAAkB,IAAK0mB,GAAS,CAACpoB,OAAmB,aAAZ8D,EAAwB,MAAM,QAAQ,CAAC,GAAGjF,SAAA,EAC9JL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACqB,WAAW,SAAUL,MAAM,OAAOC,cAAc,OAAOd,SAAA,EACnEC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAO,GAAI9E,MAAO,CAACsB,OAAO,OAAQS,WAAW,EAAGS,qBAAqB,EAAGyoB,wBAAwB,EAAG/pB,eAAe,UAAWX,QAAS,WAAKmpB,GAASC,IAAY,GAAOJ,IAAcD,GAAU,EAAEnpB,UAC7MC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACkrB,KAAK,GAAG/qB,UACpBC,EAAAA,EAAAA,KAAC+qB,EAAAA,OAAM,CAAC1qB,KAAMipB,IAAYJ,GAAU,QAAQ,OAAQ5oB,KAAM,GAAIC,MAAOC,EAAAA,QAAOC,IAAOiF,WAGtFojB,IAAS9oB,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACjE,MAAO,CAACsB,OAAO,OAAQS,WAAW,EAAGL,aAAa,GAAIoD,MAAK,UAAMsmB,EAAAA,GAAAA,aAAYlC,GAAU3oB,QAAS,WAAKiE,EAASwX,GAAqB,CAACC,SAASiN,EAAOhN,SAAS,SAACD,GAAe,OAAGkN,EAASlN,EAAS,IAAGsN,IAAa,EAAM,KAChPnpB,EAAAA,EAAAA,KAACgQ,EAAAA,UAAS,CACNib,IAAKxC,EACLxY,MAAOA,EACPC,aAAckD,EACd8X,WArDO,SAAClf,GAClB,IAAK4E,EAAS,CACZ,IAAM/I,EAAQmE,EACPnE,EAAMsjB,UAA0B,UAAdtjB,EAAMyN,MAC3BuU,KACAhiB,EAAM0a,iBAEZ,CACF,EA8CY3iB,MAAO,CAAC4B,KAAK,EAAGJ,YAAY,EAAGuR,UAAU,GAAItR,YAAYb,EAAAA,QAAOa,YAAaI,gBAAgBjB,EAAAA,QAAOC,IAAOoS,WAAYtS,MAAMC,EAAAA,QAAOC,IAAOiF,KAAMkN,gBAAgB,EAAGhQ,kBAAkB,GACtLwoB,QAAS,kBAAIjC,IAAa,EAAM,EAChCrW,WAAS,EACTuY,cAAezB,MACnB5pB,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACjE,MAAO,CAACsB,OAAO,OAAQS,WAAW,EAAGU,oBAAoB,EAAGipB,uBAAuB,EAAGxqB,eAAe,UAAW4D,MAAO,eAAMvE,QAAS0pB,SAEtJ7pB,EAAAA,EAAAA,KAACkf,GAAM,CAACze,MAAOA,GAAOwT,OAAQqV,GAAUrZ,MAAO2Y,EAAaxV,SAAUyV,EAAgBtJ,QAAS,kBAAI4J,IAAa,EAAM,IACrHD,KAAaxpB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAO,CAACqB,WAAW,SAAUL,MAAM,OAAQC,cAAc,MAAOc,WAAW,GAAIZ,cAAc,GAAGhB,SAAA,EAClHC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACjE,MAAO,CAACsB,OAAO,GAAIM,KAAK,EAAGV,eAAe,SAAUmW,YAAY,IAAKvS,MAAK,kBAAUR,EAAK,QAAW/D,QAAS,kBApJ5H,IAAIorB,SAAwB,SAACC,EAASC,GAC3C,GAAmB,OAAftsB,EAAAA,QAASC,GAAY,CACvB,IAAIssB,EAAQC,SAASC,cAAc,SACnCF,EAAMznB,KAAO,OACbynB,EAAMG,SAAW,SAAA7f,GACfwf,EAASxf,EAAEhE,OAAe8jB,MAAM,GAClC,EACAJ,EAAMK,QAAUN,EAChBC,EAAMM,QAAUP,EAChBC,EAAMO,OACR,MAEET,OAAQ3sB,EACZ,IAuIoJI,MAAK,SAAA6f,GAAI,IAADoN,EAACpC,GAAgB3sB,OAAO,CAACX,QAAQsB,EAAYpC,KAAc,OAAVwwB,EAAClxB,EAAKU,WAAI,EAATwwB,EAAWvwB,GAAIgB,QAAQ,GAAIwvB,KAAKrN,IAAIqK,IAAa,EAAM,GAAE,KAC/PnpB,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACjE,MAAO,CAACsB,OAAO,GAAIM,KAAK,EAAGV,eAAe,SAAUmW,YAAY,IAAKvS,MAAK,kBAAUR,EAAK,UAAa/D,QAAS,WAAKopB,IAAaD,IAAWA,IAAYH,IAAa,EAAM,KACzLnpB,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACjE,MAAO,CAACsB,OAAO,GAAIM,KAAK,EAAGV,eAAe,SAAUmW,YAAY,IAAKvS,MAAK,YAASR,EAAK,SAAY/D,QAAS,WAAKiE,EAASwX,GAAqB,CAACC,SAASiN,EAAOhN,SAAS,SAACD,GAAe,OAAGkN,EAASlN,EAAS,IAAGsN,IAAa,EAAM,KACnPnpB,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACjE,MAAO,CAACsB,OAAO,GAAIM,KAAK,EAAGV,eAAe,UAAW4D,MAAK,kBAAUR,EAAK,cAAiB/D,QAAS,WAAK4Q,GAAcD,GAAWqY,IAAa,EAAM,EAAGlW,SAAUnC,eAKzL,EDzKQ5K,KAAK,SASAkmB,GAAQ,CACjBC,YAAY,CACRnmB,KAAM,QACNxB,MAAO,UACPwR,UhCjBO,SAAoBlS,GAEC,IADlC0jB,EAAU1jB,EAAV0jB,WAEQxjB,GAFSF,EAALqR,OAEKlR,EAAAA,EAAAA,WAATD,MACRoG,GAAgCC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArCuO,EAAQrO,EAAA,GAAEkZ,EAAWlZ,EAAA,GAC5BI,GAAgCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,SAAAG,EAAA,GAArC+Y,EAAQ9Y,EAAA,GAAE+Y,EAAW/Y,EAAA,GAC5B9F,GAA0BxG,EAAAA,EAAAA,WAAnB+N,EAAKvH,EAALuH,MAAOhI,EAAQS,EAART,SACRgoB,EAAS,WAAH,OAAOhoB,EAAS,CAACL,KAAK,gBAAiB4U,SAAAA,EAAU8K,SAAAA,GAAU,EAOvE,OANA/nB,EAAAA,EAAAA,YAAU,WACR8rB,EAAWS,WAAW,CACpBL,iBAAajpB,GAEjB,GAAG,CAAC6oB,KAEIhoB,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOC,EAAO0B,gBAAgBxB,SAAA,EAC1CL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOC,EAAOsC,cAAcpC,SAAA,EAChCL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOC,EAAOyC,KAAKvC,SAAA,CACtBuM,IAAStM,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAOC,EAAO2C,WAAWzC,UACvCC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAOC,EAAO4C,gBAAgB1C,SAAEmE,EAAKoI,QAE7CtM,EAAAA,EAAAA,KAACgQ,EAAAA,QAAS,CACRpQ,MAAOC,EAAO8C,WACdsN,MAAO4I,EACP9F,YAAa7O,EAAK,YAClBgM,aAAc,SAACxK,GAAI,OAAKge,EAAYhe,EAAK,EACzC6mB,eAAgB,OAChBrZ,aAAc,gBACdsZ,gBAAiBF,KAEnBtsB,EAAAA,EAAAA,KAACgQ,EAAAA,QAAS,CACRpQ,MAAOC,EAAO8C,WACdsN,MAAO0T,EACP5Q,YAAa7O,EAAK,YAClBiP,iBAAe,EACfjD,aAAc,SAACxK,GAAI,OAAKke,EAAYle,EAAK,EACzC8mB,gBAAiBF,KAEnBtsB,EAAAA,EAAAA,KAACC,EAAAA,QAAgB,CAACE,QAASmsB,EAAOvsB,UAChCC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAOC,EAAOiD,OAAO/C,UACzBC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAOC,EAAOkD,aAAahD,SAAEmE,EAAK,kBAG5ClE,EAAAA,EAAAA,KAACC,EAAAA,QAAgB,CAACE,QAAS,kBAAMmE,EAAS,CAACL,KAAK,eAAe,EAAClE,UAC9DC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAOC,EAAO4D,kBAAkB1D,SACnCmE,EAAK,4BAIZxE,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOC,EAAOmD,aAAajD,SAAA,EAC/BL,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOC,EAAOoD,uBAAuBlD,SAAA,EACzCC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAOC,EAAOqD,+BACpBlD,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAOC,EAAOsD,4BAA4BpD,SAAE,OAClDC,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAOC,EAAOqD,kCAEtBlD,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAOC,EAAOuD,8BAYxBpD,EAAAA,EAAAA,KAACqoB,EAAc,CAAC5nB,MAAM,YAE1B,GgCjDIgsB,WAAW,CACP/nB,MAAM,GACNwR,UE7BO,SAAmBlS,GAA+C,IAA7C0jB,EAAU1jB,EAAV0jB,WACzBpjB,GAAY/F,EAAAA,EAAAA,WAAZ+F,SAKT,OAJE0jB,EAAAA,EAAAA,kBAAgB,WACZN,EAAWS,WAAW,CAACL,iBAAajpB,IACpCyF,EAAS,CAACL,KAAK,eACnB,GAAG,KACEjE,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GACT,EFuBQE,KAAK,SAIAwmB,GAAQ,CAMrB,E,2lBGnCA,IAAMC,GAAW,YAEjB1gB,OAAOsR,OAAOmP,IAAOhkB,SAAQ,SAAA1M,GAAC,OAAEA,EAAEkK,KAAOymB,GAAW,IAAM3wB,EAAEkK,IAAI,IAEhE,UACE0mB,SAAU,CAACptB,GAAAA,QAAgB,MAC3BqtB,OAAQ,CACNC,QAAOrwB,GAAA,CACLswB,KAAM,CACJD,QAAOrwB,GAAAA,GAAAA,GAAA,GACF8qB,IACA6E,IAAK,IACRY,SAAU,MAEZ9mB,KAAMymB,KAELD,MCpBM,SAASO,GAAcjpB,GAEC,IADrC0jB,EAAU1jB,EAAV0jB,WAEQxjB,GAASC,EAAAA,EAAAA,WAATD,KACAlJ,GAASuD,EAAAA,EAAAA,WAATvD,KACR,OACE0E,EAAAA,EAAAA,MAACC,EAAAA,QAAI,CAACC,MAAOkE,GAAO4F,UAAU3J,SAAA,EAC5BC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAOkE,GAAOY,MAAM3E,SAAEmE,EAAK,iCACjClE,EAAAA,EAAAA,KAACC,EAAAA,QAAgB,CAACE,QAAS,kBAAMunB,EAAW9N,QAAQ5e,EAAKU,KAAK,aAAa,cAAc,EAAEkE,MAAOkE,GAAOopB,KAAKntB,UAC5GC,EAAAA,EAAAA,KAAC6E,EAAAA,QAAI,CAACjF,MAAOkE,GAAOqpB,SAASptB,SAAEmE,EAAK,4BAI5C,CAEA,IAAMJ,GAASnD,EAAAA,QAAWxD,OAAO,CAC/BuM,UAAW,CACTlI,KAAM,EACNC,gBAAiB,OACjBR,WAAY,SACZH,eAAgB,SAChBgW,QAAS,IAEXpS,MAAO,CACL1C,SAAU,GACVE,WAAY,QAEdgrB,KAAM,CACJnrB,UAAW,GACX6Q,gBAAiB,IAEnBua,SAAU,CACRnrB,SAAU,GACVzB,MAAO,a,YCfLulB,GAAgB,WACpB,IAAO9qB,GAAQuD,EAAAA,EAAAA,WAARvD,KACCoJ,GAAaC,EAAAA,EAAAA,WAAbD,SACF8T,EAAW/F,GAAsBnX,GACvC,OAAOgF,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAC4B,KAAK,GAAGzB,SAClB,MAARmY,OAAQ,EAARA,EAAU5b,KAAI,SAACya,EAAM3C,GACpB,OAAOpU,EAAAA,EAAAA,KAACoW,GAAU,CAAa5F,eAAgB,CAACrP,iBAAiB,GAAI0V,UAAW,CAAC5V,WAAW,cAAed,QAAS,kBAAIiE,EAASkc,GAAc,CAAC3kB,GAAGob,EAAKpb,IAAI,EAACoE,UAC3JC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACwtB,WAAW,IAAIrtB,SAAEgX,EAAK1W,QADd+T,EAG1B,KAEJ,EAEM6R,GAAmB,WACvB,IAAOjrB,GAAQuD,EAAAA,EAAAA,WAARvD,KACD+B,EAAcD,EAA0B9B,GAC9C,OAAOgF,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAC4B,KAAK,GAAGzB,SACf,MAAXhD,OAAW,EAAXA,EAAaT,KAAI,SAACya,EAAM3C,GACvB,IAAO/T,GAAQ2d,EAAAA,GAAAA,mBAAkBjH,EAAM/b,EAAKU,MAArC2E,KACP,OAAOL,EAAAA,EAAAA,KAACoW,GAAU,CAAa5F,eAAgB,CAACrP,iBAAiB,GAAI0V,UAAW,CAAC5V,WAAW,cAAed,QAAS,kBAAIzB,GAAS,aAAc,CAAC/C,GAAGob,EAAKpb,IAAI,EAACoE,UAC3JC,EAAAA,EAAAA,KAAC6E,GAAAA,KAAI,CAACjF,MAAO,CAACwtB,WAAW,IAAIrtB,SAAEM,KADT+T,EAG1B,KAEJ,EAiBA,kBAAepQ,GAAwB,IAAtBhJ,EAAIgJ,EAAJhJ,KACPqyB,GAAWC,EAAAA,GAAAA,WAAXD,OACF5sB,GAAQqE,EAAAA,GAAAA,WACRE,GAAaC,EAAAA,EAAAA,WACblI,EAAcD,EAA0B9B,GAC9CsP,GAA0BC,EAAAA,EAAAA,YAAkBC,GAAAC,EAAAA,EAAAA,SAAAH,EAAA,GAArC8J,EAAK5J,EAAA,GAAE8J,EAAQ9J,EAAA,GACdpG,GAAaC,EAAAA,EAAAA,WAAbD,SAEFmpB,EAAY,CAChB,eAAA/xB,EAAA,OAAI4I,EAASqf,GAA4B,OAATjoB,EAAAR,EAAKU,OAALF,EAAW2J,SAAS,CAACxJ,GAAGX,EAAKU,KAAKC,IAAI,CAAC,EAAE,EACzE,kBAAIyI,EAASqZ,GAAkB,CAACxZ,KAAK,aAAa,GAE9C+V,EA5Bc,SAACvZ,GACrB,IAAMF,EAAQC,EAAAA,QAAOC,GAAOC,UAC5B,MAAO,CACL8sB,UAAU,CACR9oB,MAAM,SACNwR,UAAU4P,GACVlR,MAAK5U,EAAAA,EAAAA,KAACmnB,EAAAA,uBAAsB,CAAC7mB,KAAM,GAAIC,MAAOA,EAAOX,MAAO,CAAEiD,cAAe,GAAKxC,KAAK,aAEzFotB,QAAQ,CACJ/oB,MAAM,OACNwR,UAAU+P,GACVrR,MAAK5U,EAAAA,EAAAA,KAACiS,EAAAA,SAAQ,CAAC3R,KAAM,GAAIC,MAAOA,EAAOX,MAAO,CAAEiD,cAAe,GAAKxC,KAAK,aAGjF,CAcqBqtB,CAAcjtB,GAOjC,OALA7E,EAAAA,EAAAA,YAAU,gBACGiD,IAARuV,GAAqBrX,GACtBuX,EAASvX,EAAY4S,OAAO,EAAE,EAAE,EAEpC,GAAG,CAAC5S,KACGiD,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAmB,aAAZoF,EAAwB,CACxClB,GAAO6pB,OACP,CACElsB,gBAAiBjB,EAAAA,QAAOC,GAAOoS,WAC/B+a,eAAgBP,EAAOQ,SAGzB,CAACjtB,MAAM,GACTktB,cAAgC,OAAO/tB,SAE1B,aAAZiF,GAA2BhK,EAAKU,WAAgBmD,IAARuV,IAAqB1U,EAAAA,EAAAA,MAAAsG,EAAAA,SAAA,CAAAjG,SAAA,EAC5DC,EAAAA,EAAAA,KAACwgB,GAAO,CAACrJ,OAAQnc,EAAKU,KAAKC,GAAIkd,SAAU7d,EAAKU,KAAKmd,SAAUxY,KAAMrF,EAAKU,KAAK2E,QAC7EL,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,eAAed,UACvCC,EAAAA,EAAAA,KAACwF,EAAU,CAACd,MAAM,IAAIe,UAAW,CAACzD,SAAS,IAAKpC,MAAO,CAAC0B,aAAa,IAAKnB,QAASotB,EAAUnZ,QAEjGpU,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACouB,kBAAkB,UAAUnuB,MAAOkE,GAAOnH,QAAQoD,SACrDkM,OAAOiD,KAAK8K,GAAYrK,OAAO,GAC9B3P,EAAAA,EAAAA,KAAC6U,GAAO,CAACN,KAAMyF,EAAY7D,eAAgB,MAAO3B,MAAOF,EAAUF,MAAOA,KAC1EpU,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACouB,eAAe,EAAGxsB,KAAK,EAAGH,YAAYgsB,EAAOQ,QAAQ9tB,SAChEkM,OAAOsR,OAAOvD,GAAY1d,KAAI,SAAA2xB,GAAY,IAAMC,EAAMD,EAAU/X,UAAW,OAAOlW,EAAAA,EAAAA,KAACkuB,EAAG,GAAMD,EAAUvpB,MAAQ,YAM1H,EAID,IAAMZ,GAASnD,EAAAA,QAAWxD,OAAO,CAC7BwwB,OAAQ,CACN/sB,MAAM,IACNutB,UAAW,EACXC,iBAAiB,EACjB/sB,YAAYb,EAAAA,QAAOa,aAErB1E,QAAS,CACP6E,KAAM,EACNX,cAAe,OAEjBqnB,IAAK,CACD1mB,KAAM,EACNP,WAAY,UAEhB+I,MAAO,CACH6S,UAAW,SACXpb,gBAAiB,iBC1HzB,UACIuX,GACAsH,GACA7C,GACA1Z,GACA6X,G,SACAyS,QACA5K,ICOJ,IAAMsJ,IAAOuB,EAAAA,EAAAA,WAmBb,oBACI,IAAMtpB,GAAaC,EAAAA,EAAAA,WACb2L,GAAWC,EAAAA,GAAAA,WACV7V,GAAQuD,EAAAA,EAAAA,WAARvD,KACDyF,GAAQqE,EAAAA,GAAAA,WACdkX,GAAuB7X,EAAAA,EAAAA,WAAhBD,EAAI8X,EAAJ9X,KAAM+X,EAAMD,EAANC,OACP/P,GAAUjB,EAAAA,EAAAA,UAAQ,WACpB,YAAkBpM,IAAd7D,EAAKU,KACE,IACXoD,QAAQC,IAAI,iBAAkB/D,EAAKU,MAC5BuQ,OAAOC,QAAsB,OAAdlR,EAAKU,KAAc0wB,GAAM7E,IACnD,GAAG,CAACvsB,EAAMihB,IACJsS,GAActjB,EAAAA,EAAAA,UAAQ,WACxB,YAAkBpM,IAAd7D,EAAKU,MAEY,OAAdV,EAAKU,KADD,GACkB8yB,EACjC,GAAG,CAACxzB,IACEyzB,EAAyB,SAAPhuB,EAAe,CAAC,EAAE,CAACgB,gBAAgB,WAC3D,YAAoB5C,IAAZ7D,EAAKU,MAAiBsE,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAACiB,cAAc,MAAOW,KAAK,GAAGzB,UACrEC,EAAAA,EAAAA,KAAC0uB,GAAAA,sBAAqB,CAAA3uB,UAClBL,EAAAA,EAAAA,MAACivB,EAAAA,eAAc,CAACH,OAAQD,EAAYxuB,SAAA,CAC/B/E,EAAKU,MAAKsE,EAAAA,EAAAA,KAAC4uB,GAAM,CAAC5zB,KAAMA,SAAQ6D,GACjCmB,EAAAA,EAAAA,KAACL,EAAAA,QAAI,CAACC,MAAO,CAAC,CAAC4B,KAAK,GAAIitB,GAAiB1uB,UACrCC,EAAAA,EAAAA,KAAC8F,EAAAA,kBAAiB,CAACC,QAAuB,OAAd/K,EAAKU,WAA+BmD,IAAd7D,EAAKU,KAAmBqE,UACtEC,EAAAA,EAAAA,KAAC2iB,GAAgB,CAACjnB,KAAMV,EAAKU,KAAKqE,UAC9BL,EAAAA,EAAAA,MAACqtB,GAAK8B,UAAS,CACXC,cAAe,SAAA9qB,GAAA,IAAE0jB,EAAU1jB,EAAV0jB,WAAYrS,EAAKrR,EAALqR,MAAK,MAAK,CACnC0Z,YAAY,CAACttB,gBAAgBjB,EAAAA,QAAOC,GAAOuuB,OAAQ9tB,OAAO0P,EAAS,QAAG/R,GACtEowB,iBAAiB,CAAC1uB,MAAMC,EAAAA,QAAOC,GAAOiF,MACtCwpB,WAAW,kBA9C/C,SAAoBxH,EAAgBrS,EAAWrQ,EAAmBvE,EAAsBmQ,GACpF,IAAMue,GAAkF,GAAhE,CAAC,aAAc,eAAe3Z,WAAU,SAAAxZ,GAAC,OAAEA,GAAKqZ,EAAMhV,IAAI,IAC5E6pB,EAAS,WACPxC,EAAWuC,YACXvC,EAAWwC,SACNiF,GACLzH,EAAW9N,QAAQ,aAC3B,EACA,MAAgB,YAAZ5U,GAA0BmqB,GACnBnvB,EAAAA,EAAAA,KAACC,EAAAA,iBAAgB,CAACE,QAAS+pB,EAAQjX,UAAWrC,EAAS7Q,UAC1DC,EAAAA,EAAAA,KAAC6D,EAAAA,QAAY,CAACa,MAAO,GAAInE,MAAOqQ,EAASpQ,EAAAA,QAAOC,GAAO2uB,sBAAsB5uB,EAAAA,QAAOC,GAAO4uB,WAAYlvB,QAAS+pB,EAAQjX,SAAUrC,EAAUhR,MAAO,CAACgB,MAAM,GAAIM,OAAO,GAAIyC,OAAO,GAAIiP,gBAAgB,EAAGhQ,kBAAkB,GAAG7C,UACxNC,EAAAA,EAAAA,KAACiS,EAAAA,SAAQ,CAAC3R,KAAM,GAAIC,MAAOC,EAAAA,QAAOC,GAAOC,UAAWL,KAAK,mBAG9D,IACX,CA+BmD6uB,CAAWxH,EAAYrS,EAAOrQ,EAAYvE,EAAOmQ,EAAS,EACzEkX,YAAY,kBAAI9nB,EAAAA,EAAAA,KAAC+nB,GAAW,GAAE,EAC9BuH,yBAAyB,CAAC7tB,gBAAgBjB,EAAAA,QAAOC,GAAOuuB,OAAQnd,kBAAkB,EAAGxQ,YAAYb,EAAAA,QAAOC,GAAO8uB,mBAC/GC,UAAU,CAAC,CAAC7d,WAAW,GAAI8c,GAC3BgB,iBAA6B,YAAZzqB,EACjB0qB,sBAAuBC,EAAuBC,iBACjD,EAAE7vB,SAAA,CAEFmM,EAAQ5P,KAAI,SAAA+O,GAAA,IAAAI,GAAAhB,EAAAA,EAAAA,SAAAY,EAAA,GAAEiK,EAAG7J,EAAA,GAAE9M,EAAM8M,EAAA,UAAIzL,EAAAA,EAAAA,KAAC+sB,GAAK8C,OAAM,CAAWxvB,KAAMiV,EAAKY,UAAWvX,EAAOuX,UAAW2R,QAAS,CAAEnjB,MAAOR,EAAKvF,EAAO+F,SAA3E4Q,EAAuF,KACvItV,EAAAA,EAAAA,KAAC+sB,GAAK8C,OAAM,CAACxvB,KAAK,WAAW6V,UAAW+W,GAAgBpF,QAAS,CAAEnjB,MAAO,4BAO9F1E,EAAAA,EAAAA,KAAAgG,EAAAA,SAAA,GACX,GCpED8pB,EAAAA,EAAAA,iBAEA,IAQIC,GAREC,GAAgB5kB,EAAAA,YAEf,SAAS1M,GAAS2B,EAAazB,GAAc,IAADqxB,EAAAC,EAC7CtxB,IACmB,OAArBqxB,EAAAD,GAAc7jB,UAAd8jB,EAAuBvxB,SAAS2B,EAAMzB,IACnB,OAArBsxB,EAAAF,GAAc7jB,UAAd+jB,EAAuBxxB,SAAS2B,EAClC,CAGA,IAAI,IAAD8vB,GAAAC,GACDL,GAAyB,OAAVI,GAAG/Q,UAAiB,OAAVgR,GAAPD,GAASE,eAAF,EAAPD,GAA8B,QAClD,CACA,MAAMpkB,IACJ+jB,QAAkBlxB,CACpB,CAEe,SAASyxB,KACtB,IAAMC,GAAqBC,EAAAA,EAAAA,WACrBC,GAAkB3rB,EAAAA,EAAAA,kBAClB6gB,EAAgC,iBAAlB8K,EAAkCF,EAAmBE,EACzE,OAAOzwB,EAAAA,EAAAA,KAAC0wB,EAAAA,QAAmB,CACzBzF,IAAK+E,GACLW,cAAe,CAACC,UAAW,SAAC/I,EAASxS,GAAW,MAAM,WAAY,GAClEwb,QAASd,QAAgBlxB,EAAUiyB,GACnCrwB,MAAuB,SAAhBklB,EAAyBoL,EAAAA,QAAYC,EAAAA,QAAajxB,UACrDC,EAAAA,EAAAA,KAACixB,EAAAA,sBAAqB,CAAAlxB,UACpBC,EAAAA,EAAAA,KAACkxB,GAAa,OAGxB,CAKA,IAAMC,IAAO7C,EAAAA,EAAAA,WAEb,SAAS4C,KACL,IAAMlsB,GAAaC,EAAAA,EAAAA,WAEnB,OADAmsB,KACO1xB,EAAAA,EAAAA,MAACyxB,GAAKtC,UAAS,CAClBnjB,KAAM,QACN2lB,WAAY,SACZvC,cAAe,CACXU,UAAU,CAAC/tB,gBAAgB,SAC3BguB,kBAAkB,EAClBC,sBAAuBC,EAAuB2B,gBAChDvxB,SAAA,EAEFC,EAAAA,EAAAA,KAACmxB,GAAKtB,OAAM,CAACxvB,KAAK,OAAO6V,UAAWqb,GAAe1J,QAAS,CAACmC,aAAY,KACxE/d,OAAOC,QAAQwgB,IAAOpwB,KAAI,SAAA0H,GAAA,IAAAqH,GAAAZ,EAAAA,EAAAA,SAAAzG,EAAA,GAAEsR,EAAGjK,EAAA,GAAE1M,EAAM0M,EAAA,UAAIrL,EAAAA,EAAAA,KAACmxB,GAAKtB,OAAM,CAAWxvB,KAAMiV,EAAKY,UAAWvX,EAAOuX,UAAW2R,QAAS,CAChHnjB,MAAO/F,EAAO+F,MACd8sB,iBAAgC,aAAdxsB,EAA0B,oBAAoB,aAFNsQ,EAGzD,MAEb,E1ClEmC,SAACoQ,GAChC,QAAQ7mB,IAAL6mB,GAAkBA,EAAE+L,SAASC,SAAS,YAAY,CACjD,IAAI9yB,EAAS8mB,EAAEiM,OAAOzL,MAAM,GAAGzd,MAAM,KAAKnD,QAAO,SAAAtJ,GAAC,OAAEA,EAAE41B,WAAW,MAAM,IACnEhzB,EAAO+Q,OAAO,IACdtR,EAAaod,SAAS7c,EAAO,GAAG6J,MAAM,KAAK,KAC/C8Y,OAAOsQ,QAAQC,aAAa,KAAM,GAAIpM,EAAEnmB,KAAKkJ,MAAM,WAAW,GAElE,CACJ,C0C4DAspB,CAAoBxQ,OAAOjiB,UAE3B,IAAM0yB,GAA2B,CAAC,iBAAkB,mBAE9CC,GAAanzB,QAAQozB,KAE3BpzB,QAAQozB,KAAO,SAACztB,GACZ,IAAIytB,GAAO,GACPztB,aAAmBwH,QAGd+lB,GAAgBG,MAAK,SAAApzB,GAAG,OAAE0F,EAAQqU,SAAS/Z,EAAI,OAFtDmzB,GAAO,GAKLA,GACFD,GAAWxtB,EAKjB,C,YCjGA2tB,aAAe,CACXzS,QAAS,yCACTC,QAAS,+HACTF,MAAO,SAACJ,GACR,GAGA+S,EAAOC,QAAUF,Y,YCPrBzR,eAAiB,CACb,WAAc,yCACd,UAAa,yBACb,cAAiB,qCACjB,kBAAqB,cACrB,MAAS,2CACT,cAAiB,gBAGjB0R,EAAOC,QAAU3R,c","sources":["src/hooks/lists/useMessengerChannelList.ts","src/hooks/lists/useMessengerMemberList.ts","src/hooks/useInvitee.ts","src/components/ContractFooter.tsx","src/screens/main/LoginScreen.tsx","src/components/TextButton.tsx","src/modals/AlertModal.tsx","src/components/HeaderRight.tsx","src/lib/react-native-webrtc/useWebsocketContext.tsx","src/lib/react-native-webrtc/webrtc/p2p.tsx","src/lib/react-native-webrtc/webrtc/index.ts","src/lib/react-native-webrtc/LocalCam.tsx","src/lib/react-native-webrtc/RemoteCam.tsx","src/screens/main/ChatScreen/VideoCallSection.tsx","src/hooks/lists/useUserMembershipList.ts","src/hooks/lists/useExternalMembershipList.ts","src/components/CommonTextInput.tsx","src/components/RowField.tsx","src/components/TextField.tsx","src/hooks/useLocalSearch.ts","src/components/TabView.tsx","src/components/CommonItem.tsx","src/components/MemberItem.tsx","src/components/CopyField.tsx","src/modals/InviteModal.tsx","src/modals/DateTimePickerModal.tsx","src/modals/ChannelEditModal.tsx","src/screens/main/ChatScreen/UploadTags.tsx","src/lib/tinymce/Editor.tsx","src/components/Editor.tsx","src/components/Profile.tsx","src/modals/ProfileModal.tsx","src/hooks/useFirebaseContext.tsx","src/modals/RegistrationModal.tsx","src/screens/main/HomeScreen/ConfigSections.tsx","src/screens/main/HomeScreen/index.tsx","src/screens/index.ts","src/screens/main/ChatScreen/index.tsx","src/screens/main/DemoScreen.tsx","src/navigation/LinkingConfiguration.ts","src/screens/NotFoundScreen.tsx","src/navigation/Drawer.tsx","src/modals/index.ts","src/navigation/MainNavigator.tsx","src/navigation/index.tsx","web/editor-config.js","web/firebase-config.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { getMessengerChannelList, postChannel, postDirectChannel, putChannel } from \"../../services\";\r\nimport { MessengerChannel, MessengerContent } from \"../../types\";\r\nimport { Auth } from \"../useAuthContext\";\r\nimport useWebsocketContext from \"../useWebsocketContext\";\r\n\r\nexport default function useMessengerChannelList(auth?:Auth){\r\n  const queryClient = useQueryClient()\r\n  const {lastJsonMessage} = useWebsocketContext()\r\n  const { data } = useQuery(\"MessengerChannelList\" , async()=>await getMessengerChannelList(auth?.user?.id))\r\n\r\n  useEffect(()=>{\r\n    if(lastJsonMessage !=null){\r\n      if(lastJsonMessage['type']=='enter'){\r\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>{\r\n          return (_data?.find(v=>v.id==lastJsonMessage['data']['id'])?_data:[lastJsonMessage['data'] , ...(_data|| [])]).sort((a, b)=>a.id - b.id)\r\n        })\r\n      }\r\n      if (lastJsonMessage['type']=='next_message'){\r\n        const data:MessengerContent = lastJsonMessage['data']\r\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>(_data || []).map(v=>{\r\n          if (v.id == data.channel){\r\n            return {...v, last_message:{content:data.message_set[0]?.content, created:data.created}}\r\n          }\r\n          return v\r\n        }))\r\n      }\r\n      // if(lastJsonMessage['type']=='leave'){\r\n      //   queryClient.setQueryData<Channel[]>(\"MessengerChannelList\", (_data)=>_data?.filter(v=>v.id!=lastJsonMessage['data']['channel_id']) || [])\r\n      // }\r\n    }\r\n  }, [lastJsonMessage])\r\n  return data\r\n}\r\n\r\nexport function useMessengerChannelSorted(auth?:Auth){\r\n  const channelList = useMessengerChannelList(auth);\r\n  return channelList?.sort((a, b)=>(a.last_message?.created || '') < (b.last_message?.created || '')?1:-1)\r\n}\r\nexport function useMessengerChannelMutation(){\r\n  const queryClient = useQueryClient()\r\n\r\n  const create = useMutation(postChannel, {\r\n    onSuccess: ()=>queryClient.invalidateQueries(\"MessengerChannelList\")\r\n  });\r\n\r\n  const update = useMutation(putChannel, {\r\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\r\n  })\r\n\r\n  const direct = useMutation(postDirectChannel, {\r\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\r\n  })\r\n\r\n  return { create:create.mutateAsync, update:update.mutateAsync, direct:direct.mutateAsync}\r\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { postBulkMessengerMember, deleteMessengerMember, getMessengerMemberList } from \"../../services\";\r\n\r\nexport default function useMessengerMemberList(channel_id:number){\r\n  const { data } = useQuery([\"MessengerMemberList\", channel_id] , async()=>await getMessengerMemberList(channel_id))\r\n  return data\r\n}\r\n\r\n\r\nexport function useMessengerMemberMutation(){\r\n  const queryClient = useQueryClient()\r\n  const invite = useMutation(postBulkMessengerMember, {\r\n    onSuccess: ()=>{\r\n      queryClient.invalidateQueries(\"MessengerMemberList\")\r\n    }\r\n  })\r\n\r\n  const leave = useMutation(deleteMessengerMember, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(\"MessengerChannelList\")\r\n      queryClient.invalidateQueries(\"MessengerMemberList\")\r\n    }\r\n  })\r\n  return {invite:invite.mutateAsync, leave:leave.mutateAsync}\r\n}","import { useEffect } from \"react\"\r\nimport { navigate } from \"../navigation\"\r\nimport useMessengerChannelList from \"./lists/useMessengerChannelList\"\r\nimport { useMessengerMemberMutation } from \"./lists/useMessengerMemberList\"\r\nimport useAuthContext from \"./useAuthContext\"\r\n\r\nlet invitee_id:number|undefined\r\nlet invitee_state:0|1|2=0\r\n\r\nexport const replaceInviteeState = (l:Location)=>{\r\n    if(l !==undefined && l.pathname.endsWith('/invitee')){\r\n        var params = l.search.slice(1).split('&').filter(v=>v.startsWith('id='))\r\n        if (params.length>0)\r\n            invitee_id = parseInt(params[0].split('=')[1])\r\n        window.history.replaceState(null, '', l.href.split('invitee')[0]\r\n        );\r\n    }\r\n}\r\n\r\nexport default ()=>{\r\n    const {auth} = useAuthContext()\r\n    const channelList = useMessengerChannelList(auth)\r\n    const messengerMemberMutation = useMessengerMemberMutation()\r\n    useEffect(()=>{\r\n        if (auth.user){\r\n            if (invitee_id && channelList){\r\n                var id = invitee_id;\r\n                var redirect = ()=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id}})\r\n                invitee_id = undefined;\r\n                invitee_state = 1;\r\n                if(channelList.find(v=>v.id==id) === undefined){\r\n                    console.log(`invite processing (channel:${id})`)\r\n                    messengerMemberMutation.invite({\r\n                        channel_id:id,\r\n                        user_ids:[auth.user.id]\r\n                    }).then(redirect)\r\n                }\r\n                else{\r\n                    console.log('already invite')\r\n                    redirect()\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            if (invitee_state == 1){\r\n                invitee_state=2\r\n            }\r\n        }\r\n    }, [auth, channelList])\r\n    useEffect(()=>{\r\n        if(auth.user && invitee_state==2){\r\n            navigate(\"Main\", {screen:\"HomeScreen\"})\r\n        }\r\n    }, [auth.user])\r\n}","import React from 'react'\r\nimport { View, StyleSheet, Linking, Platform, TouchableOpacity  } from 'react-native'\r\nimport { } from 'react-native-gesture-handler'\r\nimport { AntDesign } from '../lib/@expo/vector-icons'; \r\nimport Colors from '../constants/Colors';\r\n\r\nconst openURL = Platform.OS=='web'?(url:string)=>{location.href=url}:Linking.openURL\r\n\r\nexport default (props:{theme:'light'|'dark'})=>{\r\n    return<View style={Styles.footer_buttons}>\r\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>openURL(\"https://github.com/blacktokki/tokki-tok\")}>\r\n            <AntDesign name=\"github\" size={24} color={Colors[props.theme].iconColor} />\r\n        </TouchableOpacity>\r\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>Linking.openURL(\"mailto:ydh051541@naver.com\")}>\r\n            <AntDesign name=\"mail\" size={24} color={Colors[props.theme].iconColor} />\r\n        </TouchableOpacity>\r\n    </View>\r\n}\r\n\r\nconst Styles = StyleSheet.create({\r\n      footer_buttons: {\r\n        width: '100%',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        paddingBottom: 20,\r\n        paddingRight: 20,\r\n      },\r\n      footer_button: {\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: 38,\r\n        height: 38,\r\n        marginHorizontal: 12,\r\n        borderWidth: 1,\r\n        borderColor: '#E7E7E7',\r\n        borderRadius: 60,\r\n      },\r\n})","import React, {useEffect, useState} from 'react';\r\nimport {\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View,\r\n  StyleSheet,\r\n} from 'react-native';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport useAuthContext from '../../hooks/useAuthContext';\r\nimport useLangContext from '../../hooks/useLangContext';\r\nimport ContractFooter from '../../components/ContractFooter';\r\n\r\nexport default function LoginScreen({\r\n  navigation, route\r\n}: StackScreenProps<any, 'Login'>) {\r\n  const { lang } = useLangContext()\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const {error, dispatch} = useAuthContext()\r\n  const _login = ()=>dispatch({type:'LOGIN_REQUEST', username, password})\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerRight: undefined\r\n    });\r\n  }, [navigation]);\r\n\r\n  return (<View style={Styles.login_container}>\r\n    <View style={Styles.login_wrapper}>\r\n      <View style={Styles.form}>\r\n        {error && <View style={Styles.form_error}>\r\n          <Text style={Styles.form_error_text}>{lang(error)}</Text>\r\n        </View>}\r\n        <TextInput\r\n          style={Styles.form_input}\r\n          value={username}\r\n          placeholder={lang('Username')}\r\n          onChangeText={(text) => setUsername(text)}\r\n          autoCapitalize={'none'}\r\n          keyboardType={'email-address'}\r\n          onSubmitEditing={_login}\r\n        />\r\n        <TextInput\r\n          style={Styles.form_input}\r\n          value={password}\r\n          placeholder={lang('Password')}\r\n          secureTextEntry\r\n          onChangeText={(text) => setPassword(text)}\r\n          onSubmitEditing={_login}\r\n        />\r\n        <TouchableOpacity onPress={_login}>\r\n          <View style={Styles.button}>\r\n            <Text style={Styles.button_label}>{lang('Sign in')}</Text>\r\n          </View>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => dispatch({type:\"LOGIN_GUEST\"})}>\r\n          <Text style={Styles.guest_footer_text}>\r\n            {lang(\"Sign in as guest\")}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={Styles.login_social}>\r\n        <View style={Styles.login_social_separator}>\r\n          <View style={Styles.login_social_separator_line} />\r\n          <Text style={Styles.login_social_separator_text}>{'*'}</Text>\r\n          <View style={Styles.login_social_separator_line} />\r\n        </View>\r\n        <View style={Styles.login_social_buttons}>\r\n        </View>\r\n      </View>\r\n      {/* <>\r\n        <TouchableOpacity onPress={() => navigate(\"RegistrationScreen\")}>\r\n          <Text style={Styles.login_footer_text}>\r\n            {\"Don't have an account? \"}\r\n            <Text style={Styles.login_footer_link}>{'Sign up'}</Text>\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </> */}\r\n    </View>\r\n    <ContractFooter theme='light'/>\r\n  </View>);\r\n};\r\n\r\nconst Styles = StyleSheet.create({\r\n    login_container: {\r\n      flex: 1,\r\n      backgroundColor: '#FFF',\r\n    },\r\n    login_header: {\r\n      alignItems: 'center',\r\n      paddingTop: 30,\r\n      paddingBottom: 50,\r\n      backgroundColor: '#208AEC',\r\n    },\r\n    login_header_logo: {\r\n      width: 220,\r\n      resizeMode: 'contain',\r\n    },\r\n    login_header_text: {\r\n      marginTop: 15,\r\n      color: '#f0f0f0',\r\n      fontSize: 16,\r\n    },\r\n    login_header_text_bold: {\r\n      color: '#fff',\r\n      fontWeight: 'bold',\r\n    },\r\n    login_wrapper: {\r\n      flex: 1,\r\n      justifyContent: 'space-between',\r\n      paddingTop: 40,\r\n      borderTopRightRadius: 12,\r\n      borderTopLeftRadius: 12,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n    },\r\n    form: {\r\n      width: '100%',\r\n      maxWidth: 320,\r\n    },\r\n    form_error: {\r\n      height: 22,\r\n      width:'100%',\r\n    },\r\n    form_error_text:{\r\n      textAlignVertical:'center',\r\n      color:'red',\r\n      fontSize:13,\r\n    },\r\n    form_input: {\r\n      height: 44,\r\n      paddingHorizontal: 20,\r\n      marginBottom: 20,\r\n      backgroundColor: '#EDF0F7',\r\n      borderRadius: 50,\r\n    },\r\n    button: {\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      height: 44,\r\n      backgroundColor: '#0065A4',\r\n      borderRadius: 50,\r\n    },\r\n    button_label: {\r\n      color: '#fff',\r\n      fontSize: 16,\r\n    },\r\n    login_social: {\r\n      width: '100%',\r\n      maxWidth: 280,\r\n      marginTop: 20,\r\n    },\r\n    login_social_separator: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n    },\r\n    login_social_separator_line: {\r\n      flex: 1,\r\n      width: '100%',\r\n      height: 1,\r\n      backgroundColor: '#E0E0E0',\r\n    },\r\n    login_social_separator_text: {\r\n      marginHorizontal: 10,\r\n      color: '#808080',\r\n      fontSize: 16,\r\n    },\r\n    login_social_buttons: {\r\n      flexDirection: 'row',\r\n      justifyContent: 'center',\r\n      marginTop: 20,\r\n    },\r\n    login_social_button: {\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      width: 60,\r\n      height: 60,\r\n      marginHorizontal: 12,\r\n      borderWidth: 1,\r\n      borderColor: '#E7E7E7',\r\n      borderRadius: 60,\r\n    },\r\n    login_social_icon: {\r\n      width: 38,\r\n      height: 38,\r\n      resizeMode: 'contain',\r\n    },\r\n    login_social_facebook: {\r\n      backgroundColor: '#4267B2',\r\n      borderColor: '#4267B2',\r\n    },\r\n    login_footer_text: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      color: '#808080',\r\n      fontSize: 14,\r\n    },\r\n    guest_footer_text: {\r\n      flexDirection: 'row',\r\n      alignSelf: 'center',\r\n      color: '#808080',\r\n      fontSize: 15,\r\n      margin: 15\r\n    },\r\n    login_footer_link: {\r\n      color: '#208AEC',\r\n      fontSize: 15,\r\n      fontWeight: 'bold',\r\n    },\r\n  });\r\n  ","import React, { useState } from 'react';\r\nimport { StyleSheet} from 'react-native';\r\nimport { CustomButtonProps } from '../types';\r\nimport CommonButton from './CommonButton';\r\n\r\nexport default (props:CustomButtonProps)=>{\r\n    return <CommonButton {...props} style={[styles.style, props.style]}/>\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    style:{\r\n        borderRadius:6, \r\n        backgroundColor: 'transparent',\r\n        borderWidth:0\r\n    },\r\n});\r\n","import React from 'react';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\n\r\nexport default function AlertModal({type}:{type:string}) {\r\n  const { lang } = useLangContext()\r\n  const { setModal } = useModalsContext()\r\n  const {dispatch} = useAuthContext()\r\n  const back = ()=>{\r\n    setModal(AlertModal, null)\r\n  }\r\n  const messages = {\r\n    \"GUEST_LOGOUT\":{\r\n      message: 'Guest users cannot reconnect after logging out. Please create an account or log in.',\r\n      title: 'sign out',\r\n      onPress: ()=>dispatch({type:\"LOGOUT_REQUEST\"})\r\n    }\r\n  } as Record<string, {message:string, title:string, onPress:()=>void}>\r\n\r\n  useModalEffect(back, [])\r\n  return <BottomSheet>\r\n    <Text>{lang(messages[type].message)}</Text>\r\n    <View style={{width:'100%', flexDirection:'row', justifyContent:'flex-end'}}>\r\n      <CommonButton title={lang(messages[type].title)} onPress={messages[type].onPress}/>\r\n      <CommonButton title={lang('cancel')} onPress={()=>back()}/>\r\n    </View>\r\n  </BottomSheet>\r\n}\r\n","import React from 'react'\r\nimport TextButton from \"./TextButton\"\r\nimport useAuthContext from \"../hooks/useAuthContext\"\r\nimport useResizeContext from '../hooks/useResizeContext'\r\nimport { View } from 'react-native'\r\nimport useModalsContext from '../hooks/useModalsContext'\r\nimport AlertModal from '../modals/AlertModal'\r\nimport useLangContext from '../hooks/useLangContext'\r\nimport useColorScheme from '../hooks/useColorScheme'\r\nimport Colors from '../constants/Colors'\r\n\r\ntype ButtonProps = {title:string, onPress:()=>void, windowType?:'landscape'|'portrait'}\r\n\r\nexport default (props:{extra?:ButtonProps[]})=>{\r\n    const { lang } = useLangContext()\r\n    const theme = useColorScheme()\r\n    const {auth, dispatch} = useAuthContext()\r\n    const { setModal } = useModalsContext()\r\n    const windowType = useResizeContext()\r\n    const defaultButtonProps:ButtonProps[] = [{title:lang('sign out'), onPress:()=>{\r\n        if (auth?.user?.is_guest){\r\n            setModal(AlertModal, {type:\"GUEST_LOGOUT\"})\r\n        }\r\n        else{\r\n            dispatch({type:\"LOGOUT_REQUEST\"})\r\n        }\r\n    }}]\r\n    const buttonProps = (props.extra?[...props.extra, ...defaultButtonProps]:defaultButtonProps).filter(v=>v.windowType==windowType || v.windowType == undefined)\r\n    return<View style={{flexDirection:'row'}}>\r\n        {buttonProps.map((v,k)=><TextButton key={k} {...v} textStyle={{color:Colors[theme].text}} color='#gray'/>)}\r\n    </View>\r\n}\r\n  ","import React, { createContext, useContext } from \"react\"\r\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\";\r\nimport { WebSocketInternalProvider } from \"../../hooks/useWebsocketContext\";\r\n\r\nconst WebSocketContext = createContext<{lastJsonMessage:any, sendJsonMessage:SendJsonMessage }>({lastJsonMessage:undefined, sendJsonMessage:()=>{}});\r\n\r\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\r\n  return disable?<></>:<WebSocketInternalProvider path={'messenger/ws/rtc/'} Context={WebSocketContext} useBackground>\r\n    {children}\r\n  </WebSocketInternalProvider>\r\n}\r\n\r\nexport default ()=>{\r\n  const webSocketContext = useContext(WebSocketContext)\r\n  return webSocketContext\r\n}\r\n\r\n","import React, { useCallback, useRef, useState, useMemo } from \"react\";\r\n//@ts-ignore\r\nimport { RTCView, mediaDevices, RTCPeerConnection, MediaStream, RTCSessionDescription, RTCIceCandidate } from \"react-native-webrtc-web-shim\";\r\nimport {TURN_SERVER} from \"../../../constants/Envs\"\r\n\r\n\r\nconsole.log(TURN_SERVER?\"use turn server\": \"use stun server\")\r\n\r\nexport const peerConstraints = {\r\n\ticeServers: [TURN_SERVER?JSON.parse(TURN_SERVER):{urls: 'stun:stun.l.google.com:19302'}]\r\n};\r\n\r\nexport const sessionConstraints = {\r\n\tmandatory: {\r\n\t\tOfferToReceiveAudio: true,\r\n\t\tOfferToReceiveVideo: true,\r\n\t\tVoiceActivityDetection: true\r\n\t}\r\n};\r\n\r\nconst mediaConstraints = {audio:true, video:{framerate:30}}\r\n\r\n//@ts-ignore\r\nexport {MediaStream, RTCPeerConnection, RTCSessionDescription} from \"react-native-webrtc-web-shim\";\r\n\r\nconst onICEcandidate = (pc:typeof RTCPeerConnection, message:any)=>{\r\n\tconst _message = message.data.rtcMessage\r\n\t\tconst candidate = new RTCIceCandidate(_message);\r\n\t\tif (pc) {\r\n\t\t\tconsole.log(\"ICE candidate Added\");\r\n\t\t\tpc.addIceCandidate(candidate);\r\n\t\t}\r\n}\r\n\r\nconst sendICEcandidate = (event:any, sendMessage:(data:any)=>void, receiver:string, target:string) => {\r\n\t// When you find a null candidate then there are no more candidates.\r\n\t// Gathering of candidates has finished.\r\n\tif ( !event.candidate ) { return; };\r\n\t// Send the event.candidate onto the person you're calling.\r\n\t// Keeping to Trickle ICE Standards, you should send the candidates immediately.\r\n\tsendMessage({type:'ICEcandidate', receiver, data:{target, rtcMessage:event.candidate}})\r\n  }\r\n\r\nconst BAND_WIDTH = 8000\r\n\r\nconst optimizeSdp = (offerDescription:RTCSessionDescription)=>{\r\n\tvar arr = offerDescription.sdp.split('\\r\\n');\r\n\tarr.forEach((str:string, i:number) => {\r\n\t\tif (/^a=fmtp:\\d*/.test(str)) {\r\n\t\t\tarr[i] = str + `;x-google-max-bitrate=${BAND_WIDTH};x-google-min-bitrate=${BAND_WIDTH};x-google-start-bitrate=${BAND_WIDTH}`;\r\n\t\t} else if (/^a=mid:(0|video)/.test(str)) { // if with audio then 0=>1\r\n\t\t\tarr[i] += `\\r\\nb=AS:${BAND_WIDTH}`;\r\n\t\t}\r\n\t});\r\n  \treturn new RTCSessionDescription({\r\n    \ttype: offerDescription.type,\r\n    \tsdp: arr.join('\\r\\n'),\r\n  \t})\r\n}\r\n\r\nconst createOffer = async(pcRefCurrent:{pc?:typeof RTCPeerConnection, receiver:string}, sendMessage:(data:any)=>void, stream:typeof MediaStream, target:string, user?:{name:string})=>{\r\n\tstream && pcRefCurrent.pc.addStream( stream );\r\n\tconst offerDescription = optimizeSdp((await pcRefCurrent.pc.createOffer( sessionConstraints )));\r\n\tawait pcRefCurrent.pc.setLocalDescription( offerDescription );\r\n\tsendMessage({type:'call', receiver:pcRefCurrent.receiver, data:{target, name:user?.name, rtcMessage:offerDescription}})\r\n}\r\n\r\nexport const useLocalCam = (sendMessage:(data:any)=>void)=>{\r\n\tconst pcRef = useRef<Record<number,{pc:typeof RTCPeerConnection, receiver:string}>>({})\r\n\tconst [sender, setSender] = useState<string>()\r\n\tconst [_stream, setStream] = useState<MediaStream>()\r\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\r\n\tconst CustomRTCView = useCallback(React.memo(({style}:{style:any})=>(_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>)) , [_stream])\r\n\tconst start = useCallback(async(user:{name:string}, stream?:typeof MediaStream, mode?:'camera'|'display')=>{\r\n\t\tconsole.log(\"start\");\r\n\t\tif (!_stream || mode!==undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tlet newStream:typeof MediaStream;\r\n\t\t\t\tif(mode == 'camera'){\r\n\t\t\t\t\tnewStream = await mediaDevices.getUserMedia(mediaConstraints)\r\n\t\t\t\t}\r\n\t\t\t\telse if (mode == 'display'){\r\n\t\t\t\t\tnewStream = await mediaDevices.getDisplayMedia(mediaConstraints)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tnewStream = stream || await mediaDevices.getUserMedia(mediaConstraints).catch((e:any)=>mediaDevices.getDisplayMedia(mediaConstraints));\r\n\t\t\t\t}\r\n\t\t\t\tsetStream(newStream)\r\n\t\t\t\tObject.entries(pcRef.current).map(([k, v])=>{\r\n\t\t\t\t\tcreateOffer(v, sendMessage, newStream, 'guest', user)\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [_stream])\r\n\tconst stop = useCallback(()=>{\r\n\t\tconsole.log(\"stop\");\r\n\t\tif(_stream){\r\n\t\t\t_stream.getTracks().map((track:any) => track.stop());\r\n\t\t\tsetStream(undefined)\r\n\t\t}\r\n\t}, [_stream])\r\n\treturn {\r\n\t\tstart,\r\n\t\tstop,\r\n\t\twebsocketOnMessage: async(response:any, user:{name:string})=>{\r\n\t\t\tlet type = response.type;\r\n\t\t\tif (type == 'connection'){\r\n\t\t\t\tsetSender(response.data.channel_name)\r\n\t\t\t}\r\n\t\t\tif (type == 'start' && response.data.target=='host'){\r\n\t\t\t  console.log('1 start')\r\n\t\t\t  const peerConnection = new RTCPeerConnection( peerConstraints );\r\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'guest'));\r\n\t\t\t  pcRef.current[response.sender] = {pc:peerConnection, receiver: response.sender}\r\n\t\t\t  createOffer(pcRef.current[response.sender], sendMessage, _stream, 'guest', user)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type == \"answer\" && response.data.target == 'host'){\r\n\t\t\t  console.log('3 answer')\r\n\t\t\t  const peerConnection = pcRef.current[response.sender].pc\r\n\t\t\t  const answerDescription = new RTCSessionDescription(response.data.rtcMessage);\r\n\t\t\t  await peerConnection.setRemoteDescription( answerDescription );\r\n\t\t\t  // const streams = pcRef.current.pc.getRemoteStreams()\r\n\t\t\t  // setMirrorStream(streams[streams.length - 1])\r\n\t\t\t}\r\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='host'){\r\n\t\t\t\tconst peerConnection = pcRef.current[response.sender].pc\r\n\t\t\t\tonICEcandidate(peerConnection, response)\r\n\t\t\t}\r\n\t\t},\r\n\t\tCustomRTCView,\r\n\t\tisPlay,\r\n\t\tsender,\r\n\t\t// renderMirrorView,\r\n\t}\r\n}\r\n\r\nexport const useRemoteCam = (sendMessage:(data:any)=>void)=>{\r\n\tconst pcRef = useRef<{pc?:RTCPeerConnection, receiver?:string, statsInterval?:any}>({})\r\n\tconst [user, setUser] = useState<{name:string}>()\r\n\tconst [_stream, setStream] = useState<MediaStream>()\r\n\tconst CustomRTCView = useCallback(React.memo((style:any)=>_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>), [_stream])\r\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\r\n\tconst start = useCallback((receiver:string)=>{\r\n\t\tconsole.log(\"start\");\r\n\t\tif (!pcRef.current.pc) {\r\n\t\t  pcRef.current.pc = new RTCPeerConnection( peerConstraints );\r\n\t\t  pcRef.current.receiver = receiver\r\n\t\t}\r\n\t\tif (!_stream){\r\n\t\t\tsendMessage({type:'start', receiver, data:{'target': 'host'}})\r\n\t\t}\r\n\t}, [_stream])\r\n\tconst stop = () => {\r\n\t\tconsole.log(\"stop\");\r\n\t\tif (pcRef.current.pc) {\r\n\t\t  // peerConnection._unregisterEvents();\r\n\t\t  setStream(undefined)\r\n\t\t  pcRef.current.pc.close();\r\n\t\t  pcRef.current.pc = undefined\r\n\t\t  pcRef.current.receiver = undefined\r\n\t\t  clearInterval(pcRef.current.statsInterval)\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tstart,\r\n\t\tstop,\r\n\t\twebsocketOnMessage: async(response:any)=>{\r\n\t\t\tlet type = response.type;\r\n\t\t\tif (type == 'start' && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\r\n\t\t\t\tconsole.log('(remote)1 start')\r\n\t\t\t\tconst peerConnection = pcRef.current.pc\r\n\t\t\t\tsetUser({name: response.data.name})\r\n\t\t\t\tpeerConnection.addEventListener('icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\r\n\t\t\t\tpeerConnection.addEventListener('iceconnectionstatechange', (e:any)=>{\r\n\t\t\t\t\tif (pcRef.current.pc.iceConnectionState == 'connected'){\r\n\t\t\t\t\t\tlet activeStream = false\r\n\t\t\t\t\t\tpcRef.current.statsInterval = setInterval(async()=>{\r\n\t\t\t\t\t\t\tconst stats = await pcRef.current.pc.getStats(null)\r\n\t\t\t\t\t\t\tlet statsOutput = \"\";\r\n\t\t\t\t\t\t\tlet framePerSecond = undefined\r\n\t\t\t\t\t\t\tstats.forEach((report:any) => {\r\n\t\t\t\t\t\t\t\tif (report.type === \"inbound-rtp\" && report.kind === \"video\") {\r\n\t\t\t\t\t\t\t\t\tObject.keys(report).forEach((statName) => {\r\n\t\t\t\t\t\t\t\t\t\tstatsOutput += `${statName}: ${report[statName]}\\n`;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tframePerSecond = report.framesPerSecond\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log(activeStream, framePerSecond)\r\n\t\t\t\t\t\t\tif (framePerSecond != undefined){\r\n\t\t\t\t\t\t\t\tactiveStream = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (activeStream){\r\n\t\t\t\t\t\t\t\tstop()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(new Date().toTimeString().split(' ')[0], statsOutput)\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (pcRef.current.pc.iceConnectionState == 'failed'){\r\n\t\t\t\t\t\tstop()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// peerConnection.addTransceiver('audio', {\r\n\t\t\t\t// \tdirection: 'recvonly'\r\n\t\t\t\t// });\r\n\t\t\t\tpeerConnection.addTransceiver('video', {\r\n\t\t\t\t\tdirection: 'recvonly'\r\n\t\t\t\t});\r\n\t\t\t\tawait createOffer({pc:pcRef.current.pc, receiver:response.sender}, sendMessage, _stream, 'host', user)\r\n\t\t\t}  \r\n\t\t\tif (type == \"answer\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\r\n\t\t\t\tconsole.log('(remote)3 answer')\r\n\t\t\t\tconst answerDescription = new RTCSessionDescription(response.data.rtcMessage);\r\n\t\t\t\tawait pcRef.current.pc.setRemoteDescription( answerDescription );\r\n\t\t\t\tconst streams = pcRef.current.pc.getRemoteStreams()\r\n\t\t\t\tsetStream(streams[streams.length - 1])\r\n\t\t\t\tsendMessage({type:'end', receiver:pcRef.current.receiver, data:{}})\r\n\t\t\t}\r\n\t\t\tif (type == \"call\" && response.sender == pcRef.current?.receiver){\r\n\t\t\t  console.log('2 call')\r\n\t\t\t  const peerConnection = pcRef.current.pc\r\n\t\t\t  setUser({name:response.data.name})\r\n\t\t\t  if (!peerConnection)\r\n\t\t\t\treturn\r\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\r\n\t\t\t  const offerDescription = new RTCSessionDescription(response.data.rtcMessage);\r\n\t\t\t  await peerConnection.setRemoteDescription( offerDescription );\r\n\t\t\t  const answerDescription = await peerConnection.createAnswer( sessionConstraints );\r\n\t\t\t  await peerConnection.setLocalDescription( answerDescription );\r\n\t\t\t  sendMessage({type:'answer', receiver:pcRef.current.receiver, data:{target:'host', rtcMessage:peerConnection.localDescription}})\r\n\t\t\t  // Here is a good place to process candidates.\r\n\t\t\t  const streams = pcRef.current.pc.getRemoteStreams()\r\n\t\t\t  setStream(streams[streams.length - 1])\r\n\t\t\t}\r\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver)\r\n\t\t\t  onICEcandidate(pcRef.current.pc, response)\r\n\t\t},\r\n\t\tCustomRTCView,\r\n\t\tuser,\r\n\t\tisPlay\r\n\t}\r\n}","import {StyleSheet} from \"react-native\";\r\nexport {useLocalCam, useRemoteCam} from \"./p2p\"\r\n\r\nexport const camStyle = StyleSheet.create({\r\n\tcontainer:{ flex: 1},\r\n\tcam:{ flex: 1, height:'100%'},\r\n\tbottonContainer: {position:\"absolute\", bottom:0, justifyContent:'flex-end'},\r\n\tbuttonBar: { flexDirection: \"row\", justifyContent: \"space-around\" },\r\n\tlabel: {backgroundColor:'#0008', color:'white', paddingHorizontal:5},\r\n})","import React, { useEffect } from \"react\";\r\nimport {Button, View, Text} from \"react-native\";\r\nimport useWebsocketContext from \"./useWebsocketContext\";\r\nimport { useLocalCam, camStyle} from \"./webrtc\";\r\n\r\n\r\nexport default (props:{user?:{name:string}|null, mode?:'camera'|'display'|null})=>{\r\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\r\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay} = useLocalCam(sendJsonMessage)\r\n  useEffect(()=>{\r\n    props.user && lastJsonMessage && websocketOnMessage(lastJsonMessage, props.user)\r\n  }, [lastJsonMessage, props.user])\r\n  useEffect(()=>{\r\n    if(props.mode && !isPlay){\r\n      props.user && start(props.user, undefined, props.mode)\r\n    }\r\n    else if(props.mode===null && isPlay){\r\n      stop()\r\n    }\r\n    return ()=>{isPlay && stop()}\r\n  }, [isPlay, props.user, props.mode])\r\n  return (\r\n    <View style={camStyle.container}>\r\n      <CustomRTCView style={camStyle.cam}/>\r\n      <View style={camStyle.bottonContainer}>\r\n        <View style={camStyle.buttonBar}>  \r\n        </View>\r\n        <View style={{flexDirection:'row'}}><Text style={camStyle.label}>{props.user?.name}</Text></View>\r\n        <View style={camStyle.buttonBar}>\r\n          {props.mode === undefined && !isPlay && <Button title=\"Start\" onPress={()=>props.user && start(props.user)} />}\r\n          {props.mode === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import React, { useState, useEffect, } from \"react\";\r\nimport {Button,Text, TextInput, View} from \"react-native\";\r\nimport useWebsocketContext from \"./useWebsocketContext\";\r\nimport { useRemoteCam, camStyle} from \"./webrtc\";\r\n\r\nexport default (props:{receiver?:string})=>{\r\n  const [receiver, setReceiver] = useState('')\r\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\r\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay, user} = useRemoteCam(sendJsonMessage)\r\n  useEffect(()=>{\r\n    lastJsonMessage && websocketOnMessage(lastJsonMessage)\r\n  }, [lastJsonMessage])\r\n  useEffect(()=>{\r\n    if(props.receiver){\r\n      start(props.receiver)\r\n    }\r\n    return ()=>stop()\r\n  }, [props.receiver])\r\n  return (\r\n    <View style={camStyle.container}>\r\n      <CustomRTCView style={camStyle.cam}/>\r\n      <View style={camStyle.bottonContainer}>\r\n        <View style={camStyle.buttonBar}>\r\n        </View>\r\n        <View style={{flexDirection:'row'}}>{\r\n          (props.receiver || isPlay)?\r\n          <Text style={camStyle.label}>{user?.name || 'loading...'}</Text>:\r\n          <>\r\n            <Text style={{borderWidth:1}}>Receiver:&nbsp;</Text>\r\n            <TextInput style={{borderWidth:1, flex:1}} value={receiver} onChangeText={setReceiver}/>\r\n          </> \r\n        }</View>\r\n        <View style={camStyle.buttonBar}>\r\n          {props.receiver === undefined && !isPlay && <Button title=\"Start\" onPress={()=>start(receiver)} />}\r\n          {props.receiver === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport { StyleSheet, View } from 'react-native';\r\nimport { View as ThemedView } from '../../../components/Themed' \r\nimport Colors from '../../../constants/Colors';\r\nimport {default as useRtcContext, WebSocketProvider as RtcProvider} from \"../../../lib/react-native-webrtc/useWebsocketContext\";\r\nimport LocalCam from '../../../lib/react-native-webrtc/LocalCam';\r\nimport RemoteCam from '../../../lib/react-native-webrtc/RemoteCam';\r\nimport useResizeContext from '../../../hooks/useResizeContext';\r\nimport useAuthContext from '../../../hooks/useAuthContext';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport CommonButton from '../../../components/CommonButton';\r\nimport { Ionicons } from '../../../lib/@expo/vector-icons';\r\nimport useIsMobile from '../../../hooks/useIsMobile';\r\n\r\ntype VideoType = 'camera'|'display'|null\r\ntype VideoCallProps = {channel_id:number, setDisable:(disable:boolean)=>void, disable?:boolean}\r\n\r\n\r\nconst VideoView = (props:{\r\n  scale:string,\r\n  focusGuest?:string,\r\n  setFocusGuest:(focusGuest?:string)=>void\r\n  receiver?:string\r\n  children:React.ReactNode\r\n})=>{\r\n  return <View style={[{maxWidth:props.scale, maxHeight:props.scale, borderWidth:1, borderColor:Colors.borderColor, backgroundColor:'gray', flexDirection:'row', flexGrow:1}, (props.focusGuest == undefined || props.focusGuest == props.receiver)?{height:'100%'}:{maxWidth:0, height:0}]}>\r\n    <TouchableOpacity style={{flex:1}} containerStyle={{flex:1, justifyContent:'center'}} onPress={()=>props.setFocusGuest(props.focusGuest?undefined:props.receiver)}>\r\n    {props.children}\r\n    </TouchableOpacity>\r\n  </View>\r\n    \r\n  \r\n}\r\n\r\nconst VideoCallContainer = ({channel_id, disable, setDisable}:VideoCallProps)=>{\r\n  const {auth} = useAuthContext()\r\n  const isMobile = useIsMobile()\r\n  const [videoMode, setVideoMode] = useState<VideoType>(null)\r\n  const [guests, setGuests] = useState<string[]>([])\r\n  const [focusGuest, setFocusGuest] = useState<string>()\r\n  const windowType = useResizeContext()\r\n  const { lastJsonMessage, sendJsonMessage } = useRtcContext()\r\n  useEffect(()=>{\r\n    if(lastJsonMessage !=null){\r\n      if(lastJsonMessage['type']=='connection'){\r\n        sendJsonMessage({'type':'broadcast', 'data':{'channel_id':channel_id}})\r\n      }\r\n      if(lastJsonMessage['type']=='broadcast_guest' || lastJsonMessage['type']=='broadcast_host'){\r\n        setGuests([...guests, lastJsonMessage['sender']])\r\n      }\r\n      if(lastJsonMessage['type']=='broadcast_disconnect'){\r\n        const channel_name = lastJsonMessage['sender']\r\n        const exist = guests.find(v=>v == channel_name)\r\n        exist && setGuests(guests.filter(v=>v != channel_name))\r\n      }\r\n    }\r\n  }, [lastJsonMessage])\r\n  const scale = focusGuest?'100%':`${100 / Math.max(2, Math.ceil(Math.sqrt(guests.length + 1)))}%`\r\n  const toggleVideoMode = (mode:VideoType)=>{\r\n    setVideoMode(videoMode!=mode?mode:null)\r\n  }\r\n  return lastJsonMessage !==undefined ?\r\n    <ThemedView style={[\r\n      {aspectRatio:!disable?16/9:0, borderColor:Colors.borderColor, borderRadius:10},\r\n      windowType=='landscape'?{flexShrink:1, flexGrow:0, height:'100%', borderLeftWidth:1, paddingBottom:65}:{maxHeight:'36%', width:'100%', borderBottomWidth:1}\r\n    ]}>\r\n      <View style={{aspectRatio:focusGuest?undefined:16/9, backgroundColor:'white', flexWrap:'wrap', flexDirection:'row', width:'100%', height:'100%'}}>\r\n        {guests.map((receiver, i)=><VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={receiver}>\r\n          <RemoteCam receiver={receiver}/>\r\n        </VideoView>\r\n        )}\r\n        <VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={auth.user?.name}>\r\n          <LocalCam user={auth.user} mode={videoMode}/>\r\n        </VideoView>\r\n      </View>\r\n      <ThemedView style={[\r\n          {position:'absolute', alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\r\n          windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\r\n        ]}>\r\n        <CommonButton title={'⏺️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('camera')}/>\r\n        {!isMobile && <CommonButton title={'🖥️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('display')}/>}\r\n        <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>setDisable(true)}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={'deepskyblue'}/>\r\n        </CommonButton>\r\n      </ThemedView>\r\n    </ThemedView>:\r\n  <></>\r\n  }\r\n  \r\nexport default React.memo(({channel_id, disable, setDisable}:VideoCallProps)=>{\r\n  return <RtcProvider disable={disable}>\r\n    <VideoCallContainer channel_id={channel_id} disable={disable} setDisable={setDisable}/>\r\n  </RtcProvider>\r\n})\r\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { deleteUser, getUserMembershipList, patchUser, postUser } from \"../../services\";\r\nimport useAuthContext, { Auth } from \"../useAuthContext\";\r\n\r\nexport default function useUserMembershipList(auth?:Auth){\r\n  const { data } = useQuery([\"UserMembershipList\", auth?.groupId] , async()=>auth?.groupId?(await getUserMembershipList(auth?.groupId)):[])\r\n  return data\r\n}\r\n\r\nexport function useUserMembershipMutation(){\r\n  const queryClient = useQueryClient()\r\n  const { auth, dispatch } = useAuthContext()\r\n  const _create = useMutation(postUser, {\r\n    onSuccess: ()=>{\r\n      queryClient.invalidateQueries(\"UserMembershipList\")\r\n    }\r\n  })\r\n  const _update = useMutation(patchUser, {\r\n    onSuccess: (data, user)=>{\r\n      if (user.id == auth.user?.id)\r\n        if(user.username && user.password){\r\n          dispatch({type:'LOGIN_REQUEST', username:user.username, password:user.password})\r\n        }\r\n        else{\r\n          dispatch({type:\"REFRESH\"})\r\n        }\r\n      else{\r\n        queryClient.invalidateQueries(\"UserMembershipList\")\r\n      }\r\n    }\r\n  })\r\n  const _delete = useMutation(deleteUser, {\r\n    onSuccess: (data, id)=>{\r\n      queryClient.invalidateQueries(\"UserMembershipList\")\r\n      if (id == auth.user?.id)\r\n        dispatch({type:\"LOGOUT_REQUEST\"})\r\n    }\r\n  })\r\n  return {create:_create.mutateAsync, update:_update.mutateAsync, delete:_delete.mutateAsync}\r\n}","import { useQuery } from \"react-query\";\r\nimport { getExternalMembershipList } from \"../../services\";\r\n\r\nexport default function useExternalMembershipList(keyword?:string){\r\n  const { data } = useQuery([\"UserMembershipList\", keyword] , async()=>keyword?(await getExternalMembershipList(keyword)):[])\r\n  return data\r\n}","import React, { useState } from 'react';\r\nimport { TextInput } from 'react-native';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { CustomTextInputProps } from '../types';\r\n\r\nexport default (props:CustomTextInputProps)=>{\r\n    const [contentHeight, setContentHeight] = useState<number>()\r\n    const minHeight = props.minHeight || 30\r\n    const theme = useColorScheme()\r\n    return <TextInput style={[{\r\n            borderColor:'#d0d7de', \r\n            fontSize:16, \r\n            borderWidth:1, \r\n            borderRadius:6, \r\n            paddingHorizontal:10, \r\n            paddingVertical:3, \r\n            backgroundColor:Colors[theme].background,\r\n            color:Colors[theme].text,\r\n            height:props.multiline?contentHeight:minHeight,\r\n        }, props.style]}\r\n        placeholder={props.placeholder}\r\n        editable={!props.disabled} \r\n        keyboardType={props.keyboardType}\r\n        secureTextEntry={props.secureTextEntry}\r\n        value={props.value}\r\n        onChangeText={props.setValue}\r\n        onContentSizeChange={props.multiline?(e) => setContentHeight(Math.max(e.nativeEvent.contentSize.height, minHeight) + 2):undefined}\r\n        onBlur={()=>props.onBlur?.(props.value)}\r\n        onEndEditing={()=>props.onEndEditing?.(props.value)}\r\n        multiline={props.multiline}\r\n    />\r\n}","import React, { useMemo } from 'react';\r\n\r\nimport { TextProps, StyleProp } from 'react-native';\r\nimport {View, Text } from './Themed'\r\nimport useResizeContext from '../hooks/useResizeContext';\r\n\r\ntype Props = {\r\n  name: string,\r\n  width?:any,\r\n  children: React.ReactNode\r\n  textStyle?: StyleProp<TextProps>\r\n}\r\n\r\nexport default function RowField(props:Props) {\r\n  const windowType = useResizeContext()\r\n  const rowStyle = useMemo(()=>windowType=='landscape'?\r\n    {flexDirection:'row', alignItems: 'center', justifyContent:'space-between'}:\r\n    {flexDirection:'column', alignItems:'flex-start'} as any\r\n  , [windowType])\r\n  return (\r\n    <View style={[{paddingVertical:windowType=='landscape'?15:5, width:'100%'}, rowStyle]}>\r\n        <Text style={[windowType=='landscape'?{flex:1}:{width:'100%'},{paddingHorizontal: 15, fontSize:16}, props.textStyle]}>{props.name}</Text>\r\n        <View style={[windowType=='landscape'?{flex:6}:{width:'100%'},{paddingHorizontal: 15}]}>\r\n          <View style={{width:props.width}}>\r\n            {props.children}\r\n          </View>\r\n        </View>\r\n    </View>\r\n  )\r\n}","import React from 'react';\r\nimport { StyleProp, TextStyle } from 'react-native';\r\nimport { CustomTextInputProps } from '../types';\r\nimport CommonTextInput from './CommonTextInput';\r\nimport RowField from './RowField';\r\n\r\nexport default function TextField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\r\n  return (\r\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\r\n      <CommonTextInput {...props} />\r\n   </RowField>\r\n  )\r\n}","import { useMemo, useReducer } from \"react\"\r\n\r\ntype LocalSearchAction = {type:string, keyword?:string}\r\n\r\ntype LocalSearchState ={active:boolean, keyword:string}\r\n\r\n\r\n\r\nconst localSearchReducer =(initialState:LocalSearchState, action:LocalSearchAction)=>{\r\n    switch (action.type){\r\n        case 'SEARCH':\r\n          return {\r\n            ...initialState,\r\n            keyword: action.keyword\r\n          } as LocalSearchState\r\n        case 'ENABLE_SEARCH':\r\n          return {\r\n            ...initialState,\r\n            active:true,\r\n          }\r\n        case 'DISABLE_SEARCH':\r\n            return{\r\n                ...initialState,\r\n                active:false,\r\n                keyword: ''\r\n            }\r\n        default:\r\n            throw new Error( `Unhandled action type: ${action.type}`)\r\n    }\r\n  }\r\n\r\n\r\nexport default function useLocalSearch<T>(target:T[], compare:(value:T, keyword:string)=>boolean) {\r\n  const [searchState, dispatch] = useReducer(localSearchReducer, {active:false, keyword:''})\r\n  const data = useMemo(()=>searchState.active?target.filter(v=>compare(v, searchState.keyword)):target, [searchState, target])\r\n  return {searchState, dispatch, data}\r\n}","import React from 'react';\r\nimport { TabView, SceneMap,NavigationState, SceneRendererProps, TabBar } from 'react-native-tab-view';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { TabViewRecord } from '../types';\r\n\r\n\r\nexport default (props:{tabs:TabViewRecord, tabBarPosition:\"top\"|\"bottom\", index?:number, onTab?:(index:number)=>void})=>{\r\n  const { lang } = useLangContext()\r\n  const [index, setIndex] = React.useState(props.index || 0);\r\n  const theme = useColorScheme()\r\n  const entries = Object.entries(props.tabs)\r\n  const onTab = props.onTab\r\n  const icons = Object.assign({}, ...entries.map(([k, v])=>({[k]:v.icon})))\r\n  return <TabView\r\n    renderTabBar={(props:SceneRendererProps & {navigationState: NavigationState<any>})=>{\r\n      return <TabBar\r\n        {...props}\r\n        indicatorStyle={{ backgroundColor: \"#2196F3\" }}\r\n        style={{ backgroundColor:Colors[theme].background }}\r\n        activeColor={Colors[theme].text}\r\n        inactiveColor={Colors[theme].text}\r\n        renderIcon={(scene)=>icons[scene.route.key]}\r\n        onTabPress={(scene)=>onTab?.(entries.findIndex(([k, v])=>k == scene.route.key))}\r\n      />\r\n    }}\r\n    navigationState={{ index, routes: entries.map(([k, v])=>({key:k, title:lang(v.title)}))}}\r\n    onIndexChange={setIndex}\r\n    renderScene={SceneMap(Object.assign({}, ...entries.map(([k, v])=>({[k]:v.component}))))}\r\n    tabBarPosition={props.tabBarPosition}\r\n  />\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { View } from './Themed';\r\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle, Pressable } from 'react-native';\r\nimport Colors from '../constants/Colors';\r\n\r\nexport type ItemParamList = {\r\n    outerContainerStyle?:StyleProp<TextStyle>\r\n    containerStyle?:StyleProp<ViewStyle>\r\n    bodyStyle?:StyleProp<ViewStyle>\r\n    children?: React.ReactNode\r\n    onPress?: ()=>void\r\n}\r\n\r\nexport default function CommonItem(props:ItemParamList){\r\n  // const [hover, setHover] = React.useState(false)\r\n  const [press, setPress] = React.useState(false)\r\n  return (\r\n    <Pressable\r\n      style={[styles.outerContainer ,props.outerContainerStyle, (press)?{backgroundColor:'rgb(242,242,242)'}:{}]}\r\n      onPressIn={()=>setPress(true)}\r\n      onPress={()=>props.onPress?.()}\r\n      onPressOut={()=>setPress(false)}\r\n      //  //@ts-ignore\r\n      //  onHoverIn={()=>setHover(true)}\r\n      //  onHoverOut={()=>setHover(false)}\r\n    >\r\n        <View style={[styles.container ,props.containerStyle]}>\r\n            <View style={[styles.bodyView, props.bodyStyle]}>\r\n                <>{props.children}</>\r\n            </View>\r\n      </View>\r\n    </Pressable>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  outerContainer:{\r\n    width:'100%',\r\n    maxWidth:1080,\r\n    alignItems:'stretch',\r\n  },  \r\n  container: {\r\n      marginHorizontal:20,\r\n      backgroundColor:'transparent'\r\n    },\r\n    bodyView:{\r\n      width: '100%',\r\n      padding: 10,\r\n      minHeight: 40,\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      borderBottomWidth:1,\r\n      borderColor:Colors.borderColor,\r\n      backgroundColor:'transparent'\r\n    }\r\n  });\r\n  ","import React from \"react\"\r\nimport CommonItem from \"./CommonItem\"\r\nimport { UserMembership } from \"../types\"\r\nimport Avatar from \"./Avatar\"\r\nimport { Text, View } from \"./Themed\"\r\n\r\nexport default ({member:item, onPress}:{member:UserMembership, onPress?:()=>void})=> {\r\n    return <CommonItem key={item.id} bodyStyle={{flexDirection:'row', justifyContent:'flex-start'}} onPress={onPress}>\r\n        <View style={{marginTop:4, marginRight:12}}><Avatar name={item.name} userId={item.id} size={44}/></View>\r\n        <Text style={{fontSize:20, fontWeight:'400'}}>{item.name}</Text>\r\n    </CommonItem>\r\n}","\r\nimport React, {useState} from 'react';\r\nimport { StyleProp, TextStyle, View } from 'react-native';\r\nimport Clipboard from '@react-native-clipboard/clipboard';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { CustomTextInputProps } from '../types';\r\nimport CommonButton from './CommonButton';\r\nimport RowField from './RowField';\r\nimport { Text } from './Themed';\r\nimport useResizeContext from '../hooks/useResizeContext';\r\n\r\nexport default function CopyField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\r\n  const { lang } = useLangContext()\r\n  const windowType = useResizeContext()\r\n  const [copied, setCopied] = useState(false)\r\n  return (\r\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\r\n      <View style={{flexDirection:windowType=='landscape'?'row':'column', justifyContent:'space-between'}}>\r\n        <View style={{justifyContent:'center'}}>\r\n          <Text style={{fontSize:16}}>{props.value}</Text>\r\n        </View>\r\n        <View>\r\n          <CommonButton title={lang('copy')} onPress={()=>{Clipboard.setString(props.value);setCopied(true)}}/>\r\n          {copied && <Text style={{fontSize:12, alignSelf:'center', color:'red'}}>{lang(\"copied\")}</Text>}\r\n        </View>\r\n      </View>\r\n   </RowField>\r\n  )\r\n}","import React, {useRef,MutableRefObject, useMemo, useState, useEffect } from 'react';\r\nimport { View, Text } from '../components/Themed';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\r\nimport { TabViewRecord, UserMembership } from '../types';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useMessengerMemberList, { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport useExternalMembershipList from '../hooks/lists/useExternalMembershipList';\r\nimport TextField from '../components/TextField';\r\nimport useLocalSearch from '../hooks/useLocalSearch';\r\nimport TabView from '../components/TabView';\r\nimport { FlatList } from 'react-native-gesture-handler';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport MemberItem from '../components/MemberItem';\r\nimport ModalSection from '../components/ModalSection';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\nimport CopyField from '../components/CopyField';\r\n\r\nconst InviteItem = (props:{item:UserMembership, selectedRef:MutableRefObject<Set<number>>})=>{\r\n  const [selected, setSelected] = useState(props.selectedRef.current.has(props.item.id))\r\n  return <View style={selected?{borderWidth:1, borderColor:'blue'}:{}}>\r\n    <MemberItem member={props.item} onPress={()=>{\r\n      if (selected){\r\n        setSelected(false)\r\n        props.selectedRef.current.delete(props.item.id)\r\n      }\r\n      else{\r\n        setSelected(true)\r\n        props.selectedRef.current.add(props.item.id)\r\n      }\r\n    }}/>\r\n  </View>\r\n\r\n}\r\ntype InviteTabViewProps = {\r\n  id:number,\r\n  selectedRef:MutableRefObject<Set<number>>\r\n}\r\n\r\nconst GroupTabView = ({id, selectedRef}:InviteTabViewProps)=>{\r\n  const { lang } = useLangContext()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  const memberList = useMessengerMemberList(id)\r\n  const messengerMemberMutation = useMessengerMemberMutation()\r\n  const rawData = useMemo(()=>{\r\n    const memberSet = new Set(memberList?.map(v=>v.user))\r\n    return userList?.filter(v=>!memberSet.has(v.id)) || []\r\n  }, [userList, memberList])\r\n  const {data, dispatch:dispatchKeyword, searchState} = useLocalSearch(rawData, (v, keyword)=>(v.username.includes(keyword) || v.name.includes(keyword)))\r\n  const search = (k:string)=>{\r\n    if (k?.length>0){\r\n      dispatchKeyword({type:'ENABLE_SEARCH'})\r\n      dispatchKeyword({type:'SEARCH', keyword:k})\r\n    }\r\n    else{\r\n      dispatchKeyword({type:'DISABLE_SEARCH'})\r\n    }\r\n  }\r\n  const back = ()=>{\r\n    setModal(InviteModal, null)\r\n  }\r\n  useModalEffect(back, [])\r\n  return <View style={{alignItems:'center', flex:1}}>\r\n    <View style={{'width': '100%', flex:1}}>\r\n      <TextField name={`${lang('Username')} & ${lang('Name')}`} placeholder={auth.user?.name} value={searchState.keyword} setValue={search} width={'80%'}/>\r\n      {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\r\n    </View>\r\n    <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\r\n      <CommonButton title={lang('invite')} onPress={()=>{\r\n        messengerMemberMutation.invite({\r\n          channel_id:id,\r\n          user_ids:[...selectedRef.current]\r\n        }).then(back)\r\n      }}/>\r\n      <CommonButton title={lang('cancel')} onPress={back}/>\r\n    </View>\r\n  </View>\r\n}\r\n\r\nconst DELAY = 500\r\n\r\nconst ExternalMembershipTabView = ({id, selectedRef}:InviteTabViewProps)=>{\r\n  const { lang } = useLangContext()\r\n  const [value, setValue] = useState('')\r\n  const [keyword, setKeyword] = useState('')\r\n  const timeoutRef = useRef<NodeJS.Timeout>()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const memberList = useMessengerMemberList(id)\r\n  const externalMemberList = useExternalMembershipList(keyword)\r\n  const data = useMemo(()=>{\r\n    const memberSet = new Set(memberList?.map(v=>v.user))\r\n    return externalMemberList?.filter(v=>!memberSet.has(v.id)) || []\r\n  }, [externalMemberList, memberList])\r\n  const messengerMemberMutation = useMessengerMemberMutation()\r\n  useEffect(()=>{\r\n    timeoutRef.current = setTimeout(()=>{\r\n      setKeyword(value)\r\n    }, DELAY)\r\n    return ()=>{timeoutRef.current && clearTimeout(timeoutRef.current)}\r\n  }, [value])\r\n  const back = ()=>{\r\n    setModal(InviteModal, null)\r\n  }\r\n  const inviteLink = location.href.replace('chat', 'invitee')\r\n  return <View style={{alignItems:'center', flex:1}}>\r\n  <View style={{'width': '100%', flex:1, paddingVertical:10}}>\r\n    <CopyField name={lang('invite link')} width={'80%'} value={inviteLink}/>\r\n    <View style={{marginVertical: 10, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n    <TextField name={lang('Username')} placeholder={auth.user?.username} value={value} setValue={setValue} width={'80%'}/>\r\n    {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\r\n  </View>\r\n  <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\r\n    <CommonButton title={lang('invite')} onPress={()=>{\r\n      messengerMemberMutation.invite({\r\n        channel_id:id,\r\n        user_ids:[...selectedRef.current]\r\n      }).then(back)\r\n    }}/>\r\n    <CommonButton title={lang('cancel')} onPress={back}/>\r\n  </View>\r\n</View>\r\n}\r\n\r\nexport default function InviteModal({id}:{id:number}) {\r\n  const { lang } = useLangContext()\r\n  const selectedRef = useRef<Set<number>>(new Set())\r\n  const drawerTabs:TabViewRecord = {\r\n    group:{\r\n      title: 'Group',\r\n      component: ()=><GroupTabView id={id} selectedRef={selectedRef}/>,\r\n      icon: <></>\r\n    },\r\n    external:{\r\n      title: 'External members',\r\n      component: ()=><ExternalMembershipTabView id={id} selectedRef={selectedRef}/>,\r\n      icon: <></>\r\n    }\r\n  }\r\n  return <ModalSection>\r\n    <View style={{flex:1, width:'100%'}}>\r\n      <View style={{width:'100%'}}>\r\n        <Text style={{fontSize:20}}>{lang('invite')}</Text>\r\n        <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n      </View>\r\n      <TabView tabs={drawerTabs} tabBarPosition={\"top\"}/>\r\n    </View>\r\n  </ModalSection>\r\n}\r\n\r\n","import React, { Suspense, useState } from 'react';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport dayjs from 'dayjs';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nconst dayTypes = ['AM', 'PM'].map(value=>({label:value, value}))\r\nconst hours = [...Array(12).keys()].map((value, index)=>(index + 1).toString().padStart(2, '0')).map(value=>({label:value, value}))\r\nconst minutes = [...Array(12).keys()].map((value, index)=>(index * 5).toString().padStart(2, '0')).map(value=>({label:value, value}))\r\n\r\n\r\nconst getDisableDays=(date:dayjs.Dayjs)=>{\r\n  let startDate = date.clone().startOf('month').add(-1, 'month')\r\n  const endDate = date.clone().endOf('month').add(1, 'month')\r\n  const today = dayjs().startOf('day')\r\n  const result = []\r\n  while(startDate<=endDate && startDate<today){\r\n    result.push(startDate.format('YYYY-MM-DD'))\r\n    startDate = startDate.add(1, 'day')\r\n  }\r\n  return result\r\n}\r\n\r\nconst defaultDayjs = ()=>{\r\n  const m = dayjs()\r\n  const restMinute = parseInt(m.format('mm')) % 5\r\n  return m.add(5-restMinute, 'minute')\r\n}\r\n\r\nconst Calendar = React.lazy(()=> import('../components/Calendar'))\r\nconst CommonPicker = React.lazy(()=>import('../components/CommonPicker'))\r\n\r\nexport default function DateTimePickerModal({datetime, callback}:{datetime?:string, callback:(datetime?:string)=>void}) {\r\n  const _dayjs = datetime?dayjs(datetime):defaultDayjs()\r\n  const { lang, locale } = useLangContext()\r\n  const theme = useColorScheme()\r\n  const [date, setDate] = useState(_dayjs.format('YYYY-MM-DD'));\r\n  const [dayType, setDayType] = useState(_dayjs.locale('en').format('A'))\r\n  const [hour, setHour] = useState(_dayjs.format('hh'))\r\n  const [minute, setMinute] = useState(_dayjs.format('mm'))\r\n  const [disableDays, setDisableDays] = useState<string[]>(getDisableDays(_dayjs))\r\n  const { setModal } = useModalsContext()\r\n  const back = ()=>{\r\n    setModal(DateTimePickerModal, null)\r\n  }\r\n  useModalEffect(back, [])\r\n  return <BottomSheet>\r\n    <View style={{flexDirection:'row', width:'100%'}}>\r\n      <View style={{flex:1, flexDirection:'row'}}>\r\n        <TouchableOpacity onPress={back}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={{flex:1}}>\r\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Date & Time')}</Text>\r\n      </View>\r\n      <View style={{flex:1}}/>\r\n    </View>\r\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n    <Suspense fallback={<></>}>\r\n      <Calendar\r\n        locale={locale}\r\n        style={undefined} \r\n        setDate={setDate}\r\n        disableAllTouchEventsForDisabledDays={true}\r\n        onMonthChange={(v)=>setDisableDays(getDisableDays(dayjs(v.dateString)))}\r\n        markedDates={{\r\n          ...disableDays.reduce((p, c)=>{p[c]={disabled:true};return p}, {} as Record<string, any>),\r\n          ...(date?[date]:[]).reduce((p, c)=>{p[c]={selected:true};return p}, {} as Record<string, any>)\r\n        }}\r\n      />\r\n      <View style={{flexDirection:'row', paddingVertical:10, width:400, height:50}}>\r\n        <CommonPicker value={dayType} setValue={setDayType} values={dayTypes}/>\r\n        <Text style={{fontSize:20}}> </Text>\r\n        <CommonPicker value={hour} setValue={setHour} values={hours}/>\r\n        <Text style={{fontSize:20}}> : </Text>\r\n        <CommonPicker value={minute} setValue={setMinute} values={minutes}/>\r\n      </View>\r\n    </Suspense>\r\n    <View style={{flexDirection:'row'}}>\r\n      <CommonButton title={lang('save')} onPress={()=>{\r\n        callback?.(dayjs(`${date} ${hour}:${minute} ${dayType}`).toISOString())\r\n        back()\r\n      }}/>\r\n      <CommonButton title={lang('cancel')} onPress={()=>{\r\n        callback?.(undefined)\r\n        back()\r\n      }}/>\r\n      \r\n    </View>\r\n  </BottomSheet>\r\n}\r\n","import React, {useState, useEffect } from 'react';\r\nimport { StyleSheet } from 'react-native';\r\nimport { View, Text } from '../components/Themed';\r\nimport CommonButton from '../components/CommonButton';\r\n// import useBoardChannelList, { useBoardChannelMutation } from '../hooks/lists/useBoardChannelList';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport { navigate } from '../navigation';\r\nimport { Channel } from '../types';\r\nimport useMessengerChannelList, { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\r\nimport TextField from '../components/TextField';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport ModalSection from '../components/ModalSection';\r\nimport { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\r\nimport { avatarFromChannel } from '../components/Avatar';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nexport default function ChannelEditModal({id, member_id, type}: {id?:number, member_id?:number, type:string}) {\r\n  const { lang } = useLangContext()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const channelList = useMessengerChannelList(auth)\r\n  const channelMutation = useMessengerChannelMutation()\r\n  const messengerMemberMutation = useMessengerMemberMutation()\r\n  const channel = channelList?.find(v=>v.id==id)\r\n  const [name, setName] = useState('')\r\n  const [description, setDescription] = useState('')\r\n  const back = ()=>{\r\n    setModal(ChannelEditModal, null)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if (channel){\r\n      const {name:_name} = avatarFromChannel(channel, auth.user)\r\n      setName(_name)\r\n      setDescription(channel?.description || '')\r\n    }\r\n  }, [channel?.id])\r\n  useModalEffect(back, [])\r\n  return <ModalSection>\r\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\r\n      <View style={{width:'100%'}}>\r\n        <Text style={{fontSize:20}}>{id?lang('Chat Setting'):lang('New chat')}</Text>\r\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n        <TextField name={lang('Channel Name')} value={name} setValue={setName} width={'60%'}/>\r\n        <TextField name={lang('Description')} value={description} setValue={setDescription} multiline width={'60%'}/>\r\n      </View>\r\n      <View style={{width:'100%', flexDirection:'row'}}>\r\n        {member_id &&<View style={{flexDirection:'row', justifyContent:'flex-start'}}>\r\n          <CommonButton title={lang('leave')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>messengerMemberMutation.leave(member_id).then(back)}/>\r\n        </View>}\r\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\r\n          <CommonButton title={lang('save')} onPress={()=>{\r\n            if(auth?.user?.id && auth.groupId){\r\n              const newChannel:Channel = {id, name, description, type, owner:auth?.user?.id, group:auth.groupId};\r\n              (id?channelMutation.update(newChannel):channelMutation.create(newChannel)).then(v=>navigate(\"Main\", {\r\n                screen:v.type == 'messenger'?'ChatScreen':'BoardScreen',\r\n                params:{id:v.id}\r\n              }))\r\n            }\r\n          }}/>\r\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  </ModalSection>\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  field:{\r\n    width:'50%',\r\n    flexDirection:'row',\r\n    padding:10,\r\n  },\r\n  separator: {\r\n    marginBottom: 20,\r\n    height: 1,\r\n    width: '100%',\r\n  },\r\n})","import React, {useState} from \"react\"\r\nimport {View, TouchableOpacity} from 'react-native'\r\nimport { Text } from \"../../../components/Themed\";\r\nimport useUploadContext from \"../../../hooks/useUploadContext\";\r\n\r\nconst UploadTag = (props:{data:{filename:string, progress?:number}, index:number, isExpand:boolean, setExpand:(index?:number)=>void})=>{\r\n    return <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\r\n        <View style={{backgroundColor:'darkgray', position:'absolute', width:`${(props.data.progress || 0)*100}%`, height:'100%'}}/>\r\n        <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\r\n            <Text>📤</Text>\r\n            <View style={{paddingHorizontal:5}}><Text>{props.data.filename}</Text></View>\r\n        </View>\r\n    </View>\r\n}\r\n\r\n\r\nexport default (props:{channel_id:number})=>{\r\n    const { upload } = useUploadContext()\r\n    const [expand, setExpand] = useState<number>()\r\n    const uploadData = upload[props.channel_id]\r\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:(uploadData?.length || 0)>0?20:0}}>\r\n        {uploadData?.map((f,i)=><UploadTag key={i} data={f} index={i} isExpand={i==expand} setExpand={setExpand}/>)}\r\n    </View>\r\n}","import React from 'react';\r\nimport { Editor } from '@tinymce/tinymce-react';\r\nimport { EditorProps } from '../../types';\r\nconst INIT = require('../../../web/editor-config')\r\nconst PATH = process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'\r\n\r\nexport default (props:EditorProps) => {\r\n\treturn <Editor\r\n        tinymceScriptSrc={PATH}\r\n        onInit={(e, editor) => {props.onReady?.()}}\r\n        onEditorChange={props.setValue}\r\n        init={{\r\n          setup:INIT.setup,\r\n          plugins: INIT.plugins,\r\n          toolbar: INIT.toolbar,\r\n          height: '100%',\r\n          skin: props.theme=='light'?'oxide':'oxide-dark',\r\n          content_css: props.theme=='light'?'default':'dark',\r\n          menubar: false,\r\n          branding: false,\r\n          statusbar: false,\r\n          block_formats: '제목1=h2;제목2=h3;제목3=h4;본문=p;',\r\n          fontsize_formats: '11pt 14pt 18pt 24pt',\r\n        }}\r\n        value={props.value}\r\n    />\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { View } from 'react-native';\r\nimport Editor from '../lib/tinymce/Editor';\r\n// import Editor from '../lib/tinymce/EditorView';\r\nimport { EditorProps } from '../types';\r\n\r\nexport default (props:EditorProps & {active:boolean, children?:React.ReactNode}) => {\r\n\tconst [ready, setReady] = useState<boolean>(false)\r\n  useEffect(()=>{\r\n    if(!props.active)\r\n      setReady(false)\r\n  }, [props.active])\r\n  return props.active?(\r\n        <View style={{flex:1, height:'100%'}}>\r\n        {!ready && props.children}\r\n    \t  <Editor\r\n          theme={props.theme}\r\n          value={props.value}\r\n          setValue={props.setValue}\r\n          onReady={()=>{\r\n            if(!ready){\r\n              setReady(true); props.onReady?.()\r\n            }\r\n          }}/>\r\n      </View>\r\n    ):<>{props.children}</>;\r\n};\r\n","import React from 'react';\r\nimport {View} from 'react-native'\r\nimport {Text} from './Themed';\r\nimport { ProfileProps } from '../types';\r\nimport Avatar from './Avatar';\r\n\r\nexport default (props:ProfileProps)=>{\r\n    return <View style={{width:'100%', height:135, justifyContent:'space-evenly', alignItems:'center'}}>\r\n        <Avatar {...props} size={75}/>\r\n        <Text style={{fontWeight:'bold', fontSize:15}}>{props.name}</Text>\r\n        <Text style={{fontWeight:'normal', fontSize:14}}>{props.username}</Text>\r\n    </View>\r\n}","import React, { useEffect } from 'react';\r\nimport Profile from '../components/Profile';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\r\nimport { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\r\nimport CommonButton from '../components/CommonButton';\r\nimport { Channel } from '../types';\r\nimport { navigate } from '../navigation';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nexport default function ProfileModal({id}:{id:number}) {\r\n  const { lang } = useLangContext()\r\n  const theme = useColorScheme()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  const user = userList?.find(v=>v.id==id)\r\n  const isSelf = auth.user && user && (auth.user?.id==user?.id)\r\n  const channelMutation = useMessengerChannelMutation()\r\n  const back = ()=>{\r\n    setModal(ProfileModal, null)\r\n  }\r\n  useEffect(()=>{\r\n    if (!(id && user) && userList)\r\n      back()\r\n  }, [userList])\r\n  useModalEffect(back, [])\r\n  return user?<BottomSheet>\r\n    <View style={{flexDirection:'row', width:'100%'}}>\r\n      <View style={{flex:1, flexDirection:'row'}}>\r\n        <TouchableOpacity onPress={back}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={{flex:1}}>\r\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('profile')}</Text>\r\n      </View>\r\n      <View style={{flex:1}}/>\r\n    </View>\r\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n    \r\n    <Profile username={user.username} name={user.name} userId={user.id} />\r\n    <CommonButton title={lang(isSelf?'Chat with me':'1:1 Chat')} onPress={()=>{\r\n      if(auth?.user?.id && auth.groupId){\r\n        const newChannel:Channel = {name:\"\", type:'messenger', owner:auth?.user?.id, group:auth.groupId, subowner:isSelf?undefined:user.id};\r\n        channelMutation.direct(newChannel).then(v=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id:v.id}}))\r\n      }\r\n    }}/>\r\n  </BottomSheet>:<></>\r\n}\r\n","import React, { useState,  useEffect, createContext, useMemo, useRef, useContext } from \"react\"\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/messaging\";\r\nimport {FCM_PUBLIC_VAPID_KEY, FCM_API_KEY} from \"../constants/Envs\"\r\nimport { Notification as NotificationType, UserMembership } from \"../types\";\r\nimport { getNotification, postNotification, putNotification } from \"../services/notification\";\r\n\r\nconst firebaseConfig = require(\"../../web/firebase-config.js\")\r\n// Initialize Firebase\r\nconst key = firebaseConfig.messagingSenderId\r\nconst apiKeyEncrypted = (FCM_API_KEY as string).split('').map((v, i)=> (v.charCodeAt(0) ^ key.charCodeAt(i)).toString(16).padStart(2, '0')).join('')\r\nconst app = firebase.initializeApp({...firebaseConfig, apiKey:FCM_API_KEY});\r\n// const analytics = getAnalytics(app);\r\nconst messaging = firebase.messaging(app);\r\n\r\nmessaging.onMessage((payload) => {\r\n  if (!(\"Notification\" in window)) {\r\n    alert(\"This browser does not support desktop notification\");\r\n  }\r\n  else if (Notification.permission === \"granted\") {\r\n    const message_set = JSON.parse(payload.data['message_set'])[0]\r\n    new Notification(payload.data.channel_name, { body: `${payload.data.name}: ${message_set.content}` });\r\n  }\r\n});\r\n\r\nconst requestToken = async()=>{\r\n  const permission = await Notification.requestPermission();\r\n  if (permission === 'granted') {\r\n    const serviceWorkerRegistration = await navigator.serviceWorker.register(`${process.env.PUBLIC_URL}/firebase-messaging-sw.js?${apiKeyEncrypted}`)\r\n    console.log('[SW]: SCOPE: ', serviceWorkerRegistration.scope);\r\n    const currentToken = await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY }).catch(\r\n      async()=>await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY })\r\n    )\r\n    window.addEventListener('beforeunload', (event:any) => {\r\n      event.preventDefault();\r\n      serviceWorkerRegistration.unregister()\r\n    });\r\n    if (currentToken)\r\n      return currentToken\r\n  }\r\n  return null\r\n}\r\n\r\nconst FirebaseContext = createContext<{enable?:boolean, setEnable:(enable:boolean)=>void}>({setEnable:()=>{}});\r\n\r\nexport const FirebaseProvider = ({user, children}:{user?:UserMembership|null, children:React.ReactNode})=>{\r\n  const tokenRef = useRef<string|null>()\r\n  const [notification, setNotification] = useState<NotificationType|null>()\r\n  const enable = useMemo(()=>notification===undefined?undefined:(notification?.token?true:false), [notification])\r\n  const setEnable = (enable:boolean)=>{\r\n    if(user && notification){\r\n      putNotification({...notification, token:enable?(tokenRef.current==undefined?null:tokenRef.current):null}).then((noti)=>{\r\n        setNotification(noti)\r\n      })\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    let isMount = true;\r\n    if(user){\r\n      if (tokenRef.current ===undefined){\r\n        tokenRef.current = null\r\n        requestToken().then((t)=>{\r\n          tokenRef.current = t\r\n          if (notification){\r\n            putNotification({...notification, token:tokenRef.current}).then((noti)=>{\r\n              if(isMount)setNotification(noti)\r\n            })\r\n          }\r\n        });\r\n      }\r\n      if (notification===undefined){\r\n        getNotification(user.id).then((noti)=>{\r\n          if(isMount)setNotification(noti || null)\r\n        })\r\n      }\r\n      else if(notification===null){\r\n        postNotification({user:user.id, type:'WEB', token:null}).then((noti)=>{\r\n          if(isMount)setNotification(noti)\r\n        })\r\n      }\r\n      else if (notification.token && tokenRef.current && tokenRef.current != notification.token){\r\n        putNotification({...notification, token:tokenRef.current}).then((noti)=>{\r\n          if(isMount)setNotification(noti)\r\n        })\r\n      }\r\n    }\r\n    return ()=>{isMount=false}\r\n  }, [user, notification])\r\n  return <FirebaseContext.Provider value={{enable, setEnable}}>\r\n    {(enable!=undefined || user===null) && children}\r\n  </FirebaseContext.Provider>\r\n}\r\n\r\nexport default ()=>{\r\n  const {enable, setEnable} = useContext(FirebaseContext)\r\n  return {enable, setEnable}\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { StyleSheet, TextInput } from \"react-native\";\r\nimport useLangContext from \"../hooks/useLangContext\";\r\nimport useUserMembershipList, { useUserMembershipMutation } from \"../hooks/lists/useUserMembershipList\";\r\nimport useAuthContext from \"../hooks/useAuthContext\";\r\nimport ModalSection from \"../components/ModalSection\";\r\nimport useModalsContext from \"../hooks/useModalsContext\";\r\nimport { View, Text } from \"../components/Themed\";\r\nimport RowField from \"../components/RowField\";\r\nimport CommonButton from \"../components/CommonButton\";\r\nimport CommonTextInput from \"../components/CommonTextInput\";\r\nimport useExternalMembershipList from \"../hooks/lists/useExternalMembershipList\";\r\n// import TextButton from \"../components/TextButton\";\r\n// import Colors from \"../constants/Colors\";\r\n// import useColorScheme from \"../hooks/useColorScheme\";\r\n\r\ntype ErrorMessages = {\r\n    username?:string,\r\n    name?:string,\r\n    password?:string,\r\n    checkPassword?:string\r\n}\r\n\r\nconst ErrorView = (props:{message?:string})=>{\r\n  const { lang } = useLangContext()\r\n  return props.message?<View style={styles.form_error}>\r\n  <Text style={styles.form_error_text}>{lang(props.message)}</Text>\r\n</View>:<></>\r\n}\r\n\r\nexport default function RegistrationModal({id}:{id?:number}) {\r\n  const { lang } = useLangContext()\r\n  const {auth} = useAuthContext()\r\n  // const theme = useColorScheme()\r\n  // const color = Colors[theme].text\r\n  const { setModal } = useModalsContext()\r\n  const [username, setUsername] = useState(\"\");\r\n  const [name, setName] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\");\r\n  const [checkPassword, setCheckPassword] = useState(\"\")\r\n  const [isStaff, setIsStaff] = useState(false)\r\n  const [error, setError] = useState<ErrorMessages>({})\r\n  const userList = useUserMembershipList(auth)\r\n  const externalMemberList = useExternalMembershipList(username)\r\n  const userMembershipMutation = useUserMembershipMutation()\r\n  const user = userList?.find(v=>v.id==id)\r\n  const usernameDisable = user && user.is_guest===false\r\n  useEffect(()=>{\r\n    if (user){\r\n      setUsername(user.username)\r\n      setName(user.name)\r\n    }\r\n  }, [user?.id])\r\n  const _register = ()=>{\r\n    let newError:ErrorMessages = {};\r\n    if ((externalMemberList?.length || 0) >0 && !usernameDisable) newError.username = \"The username is already in use.\"\r\n    if (username.length < 10 || username.length > 64) newError.username = \"Set 10-64 characters.\"\r\n    if (name.length < 1 || name.length > 64) newError.name = \"Set 1-64 characters.\"\r\n    if (!/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{10,64}$/.test(password) && !(usernameDisable && password.length==0)) newError.password = \"Set 10-64 characters with a combination of letters/numbers/valid special characters.\"\r\n    if (password != checkPassword) newError.checkPassword = \"Incorrect between password and check password.\"\r\n    if (Object.keys(newError).length > 0){\r\n        setError(newError)\r\n        return\r\n    }\r\n    if (id){\r\n      userMembershipMutation.update({\r\n        id,\r\n        name,\r\n        username:usernameDisable?undefined:username,\r\n        is_guest:false,\r\n        password:password.length>0?password:undefined,\r\n      }).then(()=>{(id!=auth.user?.id || user?.is_guest) && back()})\r\n    }\r\n    else{\r\n      auth?.groupId && userMembershipMutation.create({\r\n          username,\r\n          name,\r\n          password,\r\n          is_guest:false,\r\n          is_staff:isStaff,\r\n          inviteGroupId:auth.groupId,\r\n\r\n      }).then(back)\r\n    }\r\n  }\r\n  const back = ()=>{\r\n    setModal(RegistrationModal, null)\r\n  }\r\n  return <ModalSection>\r\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\r\n      <View style={{flex:1, width:'100%'}}>\r\n        <Text style={{fontSize:20}}>{usernameDisable?lang('Edit User'):lang('Create User')}</Text>\r\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n        <RowField name={lang('Username')} width={'60%'}>\r\n          {usernameDisable?<Text style={{fontSize:16}}>{username}</Text>:<CommonTextInput\r\n              value={username}\r\n              setValue={(text) => setUsername(text)}\r\n              keyboardType={'email-address'}\r\n          />}\r\n          <ErrorView message={error.username}/>\r\n        </RowField>\r\n        <RowField name={lang('Name')} width={'60%'}>\r\n          <CommonTextInput\r\n              value={name}\r\n              setValue={(text) => setName(text)}\r\n          />\r\n          <ErrorView message={error.name}/>\r\n        </RowField>\r\n        <RowField name={lang('Password')} width={'60%'}>\r\n          <CommonTextInput\r\n              value={password}\r\n              secureTextEntry\r\n              setValue={(text) => setPassword(text)}\r\n          />\r\n          <ErrorView message={error.password}/>\r\n        </RowField>\r\n        <RowField name={lang('Check Password')} width={'60%'}>\r\n          <CommonTextInput\r\n              value={checkPassword}\r\n              secureTextEntry\r\n              setValue={(text) => setCheckPassword(text)}\r\n          />\r\n          <ErrorView message={error.checkPassword}/>\r\n        </RowField>\r\n        {/* <RowField name={lang('Manager Permission')} width={'60%'}>\r\n          <View style={{flexDirection:'row'}}>\r\n            {[[lang('Yes'), true], [lang('No'), false]].map(([title, value])=><TextButton \r\n              key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:isStaff==value?'underline':'none'}} style={{borderRadius:20}} onPress={(\r\n              )=>setIsStaff(value)}/>)}\r\n          </View>\r\n        </RowField> */}\r\n      </View>\r\n      <View style={{width:'100%', flexDirection:'row'}}>\r\n        {id && <View style={{flexDirection:'row', justifyContent:'flex-start'}}>\r\n          <CommonButton title={lang('delete account')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>userMembershipMutation.delete(id).then(back)}/>\r\n        </View>}\r\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\r\n          <CommonButton title={lang('save')} onPress={_register}/>\r\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  </ModalSection>\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  form_error: {\r\n    height: 22,\r\n    width:'100%',\r\n  },\r\n  form_error_text:{\r\n    textAlignVertical:'center',\r\n    color:'red',\r\n    fontSize:13,\r\n  },\r\n  separator: {\r\n    marginBottom: 20,\r\n    height: 1,\r\n    width: '100%',\r\n  },\r\n});","import React from \"react\"\r\nimport CommonSection from \"../../../components/CommonSection\"\r\nimport Colors from \"../../../constants/Colors\"\r\nimport useColorScheme, { setColorScheme } from \"../../../hooks/useColorScheme\"\r\nimport { StyleSheet, Text, View} from 'react-native';\r\nimport useLangContext from \"../../../hooks/useLangContext\";\r\nimport { useColorScheme as useConfigColorScheme} from 'react-native-appearance';\r\nimport useFirebaseContext from \"../../../hooks/useFirebaseContext\";\r\nimport TextButton from \"../../../components/TextButton\";\r\nimport useModalsContext from \"../../../hooks/useModalsContext\";\r\nimport RegistrationModal from \"../../../modals/RegistrationModal\";\r\nimport useAuthContext from \"../../../hooks/useAuthContext\";\r\n\r\n\r\nconst ConfigSection = ({title, children}:{title:string, children?: React.ReactNode})=>{\r\n  const theme = useColorScheme()\r\n  const color = Colors[theme].text\r\n  return <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\r\n    <Text style={{fontSize:20, color, fontWeight:'600'}}>{title}</Text>\r\n    {children}\r\n  </CommonSection>\r\n}\r\n\r\nexport default ()=>{\r\n  const { lang, locale, setLocale } = useLangContext()\r\n  const { setModal } = useModalsContext()\r\n  const {auth} = useAuthContext()\r\n  const theme = useColorScheme()\r\n  const configTheme = useConfigColorScheme()\r\n  const {enable:noti, setEnable:setNoti} = useFirebaseContext()\r\n  const color = Colors[theme].text\r\n  return <>\r\n    <ConfigSection title={lang('* Notification Settings')}>\r\n      <View style={{flexDirection:'row'}}>\r\n        {[[lang('On'), true], [lang('Off'), false]].map(([title, n])=><TextButton\r\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:noti==n?'underline':'none'}} style={{borderRadius:20}} onPress={()=>{setNoti(n)}}/>)}\r\n      </View>\r\n    </ConfigSection>\r\n    <ConfigSection title={lang('* Language Settings')}>\r\n    <View style={{flexDirection:'row'}}>\r\n        {[[lang('Auto'), 'auto'], ['한국어', 'ko'], ['English', 'en']].map(([title, l])=><TextButton \r\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:locale==l?'underline':'none'}} style={{borderRadius:20}} onPress={()=>setLocale(l)}/>)}\r\n      </View>\r\n    </ConfigSection>\r\n    <ConfigSection title={lang('* Skin Settings')}>\r\n      <View style={{flexDirection:'row'}}>\r\n        {[[lang('Auto'), 'no-preference'], [lang('Light'), 'light'], [lang('Dark'), 'dark']].map(([title, colorScheme])=><TextButton \r\n          key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:configTheme==colorScheme?'underline':'none'}} style={{borderRadius:20}} onPress={(\r\n            )=>setColorScheme(colorScheme)}/>)}\r\n      </View>\r\n    </ConfigSection>\r\n    {!auth.user?.is_guest && <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\r\n      <TextButton title={lang('> Account Settings')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(RegistrationModal, {id:auth.user?.id})}/>\r\n    </CommonSection>}\r\n  </>\r\n}","import React, {useState, useEffect, useLayoutEffect, useMemo} from 'react';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport { StyleSheet, View, ScrollView} from 'react-native';\r\nimport { Text as StyledText } from 'react-native-paper';\r\nimport { Text } from '../../../components/Themed'\r\nimport useResizeContext from '../../../hooks/useResizeContext';\r\nimport TabView from '../../../components/TabView';\r\nimport HeaderRight from '../../../components/HeaderRight';\r\nimport TextButton from '../../../components/TextButton';\r\nimport Colors from '../../../constants/Colors';\r\nimport useColorScheme  from '../../../hooks/useColorScheme';\r\nimport useModalsContext from '../../../hooks/useModalsContext';\r\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\r\nimport useLangContext from '../../../hooks/useLangContext';\r\nimport ContractFooter from '../../../components/ContractFooter';\r\nimport { TabViewRecord } from '../../../types';\r\nimport useAuthContext from '../../../hooks/useAuthContext';\r\nimport useUserMembershipList from '../../../hooks/lists/useUserMembershipList';\r\nimport { FontAwesome, Ionicons, MaterialCommunityIcons, SimpleLineIcons } from '../../../lib/@expo/vector-icons';\r\nimport { useMessengerChannelSorted } from '../../../hooks/lists/useMessengerChannelList';\r\nimport CommonItem from '../../../components/CommonItem';\r\nimport MemberItem from '../../../components/MemberItem';\r\nimport ProfileModal from '../../../modals/ProfileModal';\r\nimport { navigate } from '../../../navigation';\r\nimport CommonSection from '../../../components/CommonSection';\r\nimport ConfigSections from './ConfigSections';\r\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\r\nimport RegistrationModal from '../../../modals/RegistrationModal';\r\n\r\nconst MemberTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const theme = useColorScheme()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  const memberItem = React.useMemo(\r\n      ()=>userList && userList.map((item, index)=><MemberItem key={index} member={item} onPress={()=>setModal(ProfileModal, {id:item.id})}/>), [userList])\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      {memberItem}\r\n  </ScrollView>\r\n}\r\n\r\nconst MessengerTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const channelList = useMessengerChannelSorted(auth)\r\n  const theme = useColorScheme()\r\n\r\n  const today = (new Date()).toISOString().slice(0, 10)\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      {channelList?.map((item, index)=>{\r\n          const {avatar, name} = avatarFromChannel(item, auth.user)\r\n          const date = item.last_message?.created.slice(0,10)\r\n          const content = item.last_message?.preview_content || item.last_message?.content || ''\r\n          return <CommonItem key={index} bodyStyle={{flexDirection:'row', justifyContent:'space-between'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\r\n              <View style={{flexDirection:'row', flexShrink:1}}>\r\n                  {avatar?\r\n                    <View style={{ marginRight:20}}>\r\n                      <Avatar name={avatar.name} size={44} userId={avatar.id}/>\r\n                    </View>:\r\n                    <FontAwesome size={40} color={Colors[theme].iconColor} style={{ marginBottom: -3, marginRight:20 }} name='users'/>}\r\n                  <View>\r\n                      <View style={{flexDirection:'row'}}>\r\n                          <Text style={{fontSize:18}}>{name}</Text>\r\n                          <Text style={{fontSize:18, opacity: 0.4, paddingLeft:5}}>{item.member_count}</Text>\r\n                      </View>\r\n                      <Text style={{fontSize:16, opacity: 0.4}}>{content.replaceAll('\\n', ' ')}</Text>\r\n                  </View>\r\n              </View>\r\n              <View>\r\n                  <Text style={{fontSize:14, opacity: 0.4, textAlign:'right'}}>{date==today?item.last_message?.created.slice(11,16):date}</Text>\r\n                  <Text style={{fontSize:14, textAlign:'right'}}>{item.unread_count?item.unread_count:' '}</Text>\r\n              </View>\r\n          </CommonItem>\r\n      })}\r\n  </ScrollView>\r\n}\r\n\r\n\r\nconst ConfigTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n    <ConfigSections/>\r\n  </ScrollView>\r\n}\r\n\r\nconst getBottomTabs = (theme:'light'|'dark')=>{\r\n  const color = Colors[theme].iconColor\r\n  return {\r\n    OneTab:{\r\n        title:'member',\r\n        component:MemberTabView,\r\n        icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\r\n    },\r\n    TwoTab:{\r\n        title:'chat',\r\n        component:MessengerTabView,\r\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\r\n    },\r\n    // ThreeTab:{\r\n    //     title:'board',\r\n    //     component:()=><></>,\r\n    //     icon:<></>\r\n    // },\r\n    FourTab:{\r\n        title:'config',\r\n        component:ConfigTabView,\r\n        icon:<SimpleLineIcons size={30} color={color} style={{ marginBottom: -3 }} name='options'/>\r\n    }\r\n  } as TabViewRecord\r\n}\r\n\r\n\r\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\r\n  const { lang, locale } = useLangContext()\r\n  const windowType = useResizeContext();\r\n  const theme = useColorScheme()\r\n  const { setModal } = useModalsContext()\r\n  const {auth} = useAuthContext()\r\n  const [ home, setHome ] = useState(windowType == 'landscape')\r\n  const color = Colors[theme].text\r\n  const options = [\r\n    {title:lang('member'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(RegistrationModal, auth.user?.is_guest?{id:auth.user.id}:{})}]}/>},\r\n    {title:lang('chat'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(ChannelEditModal, {type:'messenger'})}]}/>},\r\n    // {title:'board', headerRight:()=><HeaderRight extra={[{title:'create', onPress:()=>setModal(ChannelEditModal, props:{type:'board'}}) }]}/>},\r\n    {title:lang('config'), headerRight:()=><HeaderRight/>}\r\n  ]\r\n  \r\n  useLayoutEffect(() => {\r\n    const index = route?.params?.tab | 0\r\n    navigation.setOptions(windowType == 'portrait'?options[index]:{\r\n      title: lang('home'),\r\n      headerRight: ()=><HeaderRight/>\r\n    });\r\n  }, [navigation, route, windowType, locale]);\r\n  useEffect(()=>{\r\n    setHome(windowType == 'landscape')\r\n  }, [windowType])\r\n  return home?\r\n    <ScrollView contentContainerStyle={{flex:1, alignItems:'center'}}>\r\n      <View style={{flexGrow:1, width:'80%', marginTop:72}}>\r\n        <StyledText style={{fontSize:32, color}}>Tokki Tok</StyledText>\r\n        <View style={{backgroundColor:Colors.borderColor, height:1, width:'100%'}}/>\r\n        {/* <Text style={{fontSize:20, color:'gray'}}>Welcome! This is a messenger for teams.</Text>*/}\r\n        <View style={{height:24}}/>\r\n        <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\r\n          <TextButton title={lang('+ New chat')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(ChannelEditModal, {type:'messenger'})}/>\r\n        </CommonSection>\r\n        <ConfigSections/>\r\n      </View>\r\n      <ContractFooter theme={theme}/>\r\n    </ScrollView>:\r\n    <TabView tabs={getBottomTabs(theme)} tabBarPosition=\"bottom\" index={parseInt(route.params?.['tab'] || 0)} onTab={(index)=>{navigation.setParams({tab:index})}}/>\r\n}\r\n\r\n","import LoginScreen from \"./main/LoginScreen\";\r\nimport ChatScreen from \"./main/ChatScreen\";\r\nimport HomeScreen from \"./main/HomeScreen\";\r\n// import BoardScreen from \"../lib/blacktokki-board/BoardScreen\";\r\n// import BoardEditScreen from \"../lib/blacktokki-board/BoardEditScreen\";\r\nimport { Screens } from \"../types\";\r\nimport DemoScreen from \"./main/DemoScreen\";\r\n\r\nexport const main = {\r\n    HomeScreen:{\r\n        title:'home',\r\n        component:HomeScreen,\r\n        path:'home',\r\n    },\r\n    ChatScreen:{\r\n        title:'chat',\r\n        component:ChatScreen,\r\n        path:'chat'\r\n    },\r\n    // BoardScreen:{\r\n    //     title:'board',\r\n    //     component:BoardScreen,\r\n    //     path:'board'\r\n    // },\r\n} as Screens\r\n\r\nexport const login = {\r\n    LoginScreen:{\r\n        path: 'login',\r\n        title: 'Sign in',\r\n        component:LoginScreen\r\n    },\r\n    DemoScreen:{\r\n        title:'',\r\n        component:DemoScreen,\r\n        path:'demo'\r\n    }\r\n} as Screens\r\n\r\nexport const modal = {\r\n    // BoardEditScreen:{\r\n    //     title:'board',\r\n    //     component:BoardEditScreen,\r\n    //     path:'modal/board'\r\n    // },\r\n} as Screens","import React, { useEffect, useLayoutEffect, useMemo, useRef, useState} from 'react';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport { Platform, View } from 'react-native';\r\nimport { TextInput } from 'react-native-gesture-handler';\r\nimport CommonButton from '../../../components/CommonButton';\r\nimport { useMessengerContentMutation } from '../../../hooks/lists/useMessengerContentList';\r\nimport useAuthContext from '../../../hooks/useAuthContext';\r\nimport HeaderRight from '../../../components/HeaderRight';\r\nimport useMessengerMemberList from '../../../hooks/lists/useMessengerMemberList';\r\nimport Colors from '../../../constants/Colors';\r\nimport useColorScheme from '../../../hooks/useColorScheme';\r\nimport { View as ThemedView } from '../../../components/Themed' \r\nimport useMessengerChannelList from '../../../hooks/lists/useMessengerChannelList';\r\nimport useIsMobile from '../../../hooks/useIsMobile';\r\nimport { avatarFromChannel } from '../../../components/Avatar';\r\nimport VideoCallSection from './VideoCallSection';\r\nimport useResizeContext from '../../../hooks/useResizeContext';\r\nimport useModalsContext from '../../../hooks/useModalsContext';\r\nimport InviteModal from '../../../modals/InviteModal';\r\nimport DateTimePickerModal from '../../../modals/DateTimePickerModal'\r\nimport useLangContext from '../../../hooks/useLangContext';\r\nimport { Entypo } from '../../../lib/@expo/vector-icons';\r\nimport TimerTags, { timerFormat } from './TimerTags';\r\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\r\nimport UploadTags from './UploadTags';\r\nimport Messages from './Messages';\r\nimport Editor from '../../../components/Editor';\r\n\r\n\r\nfunction uploadFile(){\r\n  return new Promise<Blob|undefined>((resolve, reject)=>{\r\n    if (Platform.OS == 'web'){\r\n      var input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.onchange = e => { \r\n        resolve((e.target as any).files[0])\r\n      }\r\n      input.onabort = reject\r\n      input.onerror = reject\r\n      input.click();\r\n    }\r\n    else\r\n      resolve(undefined)\r\n  })\r\n}\r\n\r\nexport default function ChatScreen({navigation, route}: StackScreenProps<any, 'Chat'>) {\r\n  const { lang, locale } = useLangContext()\r\n  const isMobile = useIsMobile()\r\n  const channel_id = route?.params?.id\r\n  const inputRef = useRef<TextInput>(null)\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const channel = useMessengerChannelList(auth)?.find(v=>v.id==parseInt(channel_id))\r\n  const channelAvatar = channel?avatarFromChannel(channel, auth.user):undefined\r\n  const memberList = useMessengerMemberList(channel_id)\r\n  const member_id = useMemo(()=>memberList?.find(v=>v.user == auth.user?.id)?.id, [auth, memberList])\r\n  const windowType = useResizeContext()\r\n  const [value, setValue] = useState('')\r\n  const [editorValue, setEditorValue] = useState('')\r\n  const [timer, setTimer] = useState<string>()\r\n  const [autoFocus, setAutoFocus] = useState<boolean|null>(null)\r\n  const [videoMode, setVideoMode] = useState<boolean>(false)\r\n  const [bottomTab, setBottomTab] = useState<boolean>(false)\r\n  const [isEditor, setIsEditor] = useState<boolean>(false)\r\n  const [messageEvent, sendToScreen] = useState<{value:string, editorValue:string}>()\r\n  const valueLines = useMemo(()=>bottomTab?1:value.split(\"\\n\").length, [value, bottomTab])\r\n\r\n  const theme = useColorScheme()\r\n  const postValue = ()=>{\r\n    if (value.length>0){\r\n      if(isEditor){\r\n        contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', timer, editor: {title:value, content:editorValue}})\r\n      }\r\n      else{\r\n        contentMutation.create({channel:channel_id, user:auth.user?.id, content:value, timer})\r\n      }\r\n      setTimer(undefined)\r\n      setBottomTab(false)\r\n      setValue('')\r\n      setAutoFocus(true)\r\n      if(isEditor){\r\n        setEditorValue('')\r\n        setIsEditor(false)\r\n      }\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    if(messageEvent){\r\n      setIsEditor(false)\r\n      setValue(value.concat(value.length>0?\"\\n\":\"\", messageEvent.value))\r\n      setEditorValue(editorValue.concat(\"\\r\\n\", messageEvent.editorValue))\r\n      sendToScreen(undefined)\r\n      setIsEditor(true)\r\n    }\r\n  }, [messageEvent, value, editorValue])\r\n  const contentMutation = useMessengerContentMutation()\r\n\r\n  useLayoutEffect(() => {\r\n    navigation.setOptions({\r\n      headerRight: ()=> <HeaderRight extra={[\r\n        {title:lang('invite'), onPress:()=>setModal(InviteModal, {id:channel_id})},\r\n        {title:lang('setting'), onPress:()=>setModal(ChannelEditModal, {id:channel_id, type:'messenger', member_id})}\r\n      ]}/>,\r\n      title: channelAvatar?.name,\r\n      headerShown:!(windowType=='portrait' && isEditor)\r\n    });\r\n  }, [navigation, route, member_id, locale, windowType, isEditor]);\r\n\r\n  const back = ()=>{\r\n    if(navigation.canGoBack())\r\n        navigation.goBack()\r\n      else{\r\n        navigation.navigate('HomeScreen', {tab:2})\r\n      }\r\n  }\r\n  const onKeyPress = (e:any) => {\r\n    if (!isMobile){\r\n      const event = e as KeyboardEvent;\r\n        if (!event.shiftKey && event.key === \"Enter\"){\r\n          postValue()\r\n          event.preventDefault()\r\n      }\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    setModal(null, null)\r\n    if (!channel_id)\r\n      back()\r\n  }, [route])\r\n  useEffect(()=>{\r\n    if (memberList===null || (memberList!=undefined && memberList.find(v=>v.user==auth.user?.id)==undefined))\r\n      back()\r\n  }, [memberList])\r\n  useEffect(()=>{\r\n    if(autoFocus){\r\n      (inputRef.current as any).focus?.()\r\n      setAutoFocus(false)\r\n    }\r\n  }, [autoFocus])\r\n  useEffect(()=>{\r\n    if (autoFocus==null && !isMobile){\r\n      const timeout = setTimeout(()=>setAutoFocus(true), 500)\r\n      return ()=>clearTimeout(timeout)\r\n    }\r\n  })\r\n  return <View style={[\r\n    {flex:1, alignItems:'center'},\r\n    windowType=='landscape'?{flexDirection:'row-reverse', minWidth:480}:{flexDirection:'column'}\r\n  ]}>\r\n    <VideoCallSection channel_id={channel_id} setDisable={(d)=>setVideoMode(!d)} disable={!videoMode}/>\r\n    <View style={[videoMode?{flexShrink:1}:{flex:1}, windowType=='landscape'?{minWidth:320, height:'100%'}:{width:'100%'}]}>\r\n      <Messages channel_id={channel_id} auth={auth} reverse sendToScreen={sendToScreen}/>\r\n      <View style={{position:'absolute', flexDirection:'row'}}>\r\n        <UploadTags channel_id={channel_id}/>\r\n        <TimerTags channel_id={channel_id}/>\r\n      </View>\r\n      <ThemedView style={[{bottom:0, width:'100%', paddingTop:15, paddingBottom:10, paddingHorizontal:19}, isEditor?{height:windowType=='landscape'?'50%':'100%'}:{}]}>\r\n        <View style={{alignItems:'center', width:'100%',flexDirection:'row'}}>\r\n          <CommonButton title={''} style={{height:'100%', paddingTop:8, borderTopRightRadius:0, borderBottomRightRadius:0, justifyContent:'center'}} onPress={()=>{isEditor?setIsEditor(false):setBottomTab(!bottomTab)}}>\r\n            <View style={{top:-2}}>\r\n              <Entypo name={isEditor || bottomTab?\"cross\":\"plus\"} size={24} color={Colors[theme].text}/>\r\n            </View>\r\n          </CommonButton>\r\n          {timer && <CommonButton style={{height:'100%', paddingTop:8, borderRadius:0}} title={`⌚${timerFormat(timer)}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>}\r\n          <TextInput\r\n              ref={inputRef}\r\n              value={value} \r\n              onChangeText={setValue}\r\n              onKeyPress={onKeyPress}\r\n              style={{flex:1, borderWidth:1, minHeight:41, borderColor:Colors.borderColor, backgroundColor:Colors[theme].background, color:Colors[theme].text, paddingVertical:1, paddingHorizontal:3}}\r\n              onFocus={()=>setBottomTab(false)}\r\n              multiline \r\n              numberOfLines={valueLines}/>\r\n          <CommonButton style={{height:'100%', paddingTop:8, borderTopLeftRadius:0, borderBottomLeftRadius:0, justifyContent:'center'}} title={'💬'} onPress={postValue}/>\r\n        </View>\r\n        <Editor theme={theme} active={isEditor} value={editorValue} setValue={setEditorValue} onReady={()=>setBottomTab(false)}/>\r\n        {bottomTab && <View style={{alignItems:'center', width:'100%', flexDirection:'row', paddingTop:15, paddingBottom:5}}>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`📤\\n ${lang('File')}`} onPress={()=>uploadFile().then(f=>{contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', file:f});setBottomTab(false)})}/>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`✏️\\n ${lang('Editor')}`} onPress={()=>{setIsEditor(!isEditor); isEditor && setBottomTab(false)}}/>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`⌚\\n ${lang('Timer')}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center'}} title={`📹\\n ${lang('Video Call')}`} onPress={()=>{setVideoMode(!videoMode);setBottomTab(false)}} disabled={videoMode}/>\r\n        </View>}\r\n      </ThemedView>\r\n    </View>\r\n  </View>\r\n}","import React, { useLayoutEffect } from 'react';\r\n\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport useAuthContext from '../../hooks/useAuthContext';\r\n\r\nexport default function DemoScreen({navigation}: StackScreenProps<any, 'Demo'>) {\r\n    const {dispatch} = useAuthContext()\r\n    useLayoutEffect(() => {\r\n        navigation.setOptions({headerRight: undefined});\r\n        dispatch({type:\"LOGIN_GUEST\"})\r\n    }, []);\r\n  return <></>\r\n};","/**\r\n * Learn more about deep linking with React Navigation\r\n * https://reactnavigation.org/docs/deep-linking\r\n * https://reactnavigation.org/docs/configuring-links\r\n */\r\n\r\nimport { LinkingOptions } from '@react-navigation/native';\r\nimport * as Linking from 'expo-linking';\r\nimport {main, login, modal} from '../screens';\r\n\r\nconst ROOTPATH = 'tokki-tok'  // github repository name\r\n\r\nObject.values(modal).forEach(v=>v.path = ROOTPATH + '/' + v.path)\r\n\r\nexport default  {\r\n  prefixes: [Linking.makeUrl('/')],\r\n  config: {\r\n    screens: {\r\n      Main: {\r\n        screens:{\r\n          ...main,\r\n          ...login,\r\n          NotFound: '*',\r\n        },\r\n        path: ROOTPATH\r\n      },\r\n      ...modal\r\n    },\r\n  },\r\n} as LinkingOptions;\r\n","import { StackScreenProps } from '@react-navigation/stack';\r\nimport * as React from 'react';\r\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport useLangContext from '../hooks/useLangContext';\r\n\r\nexport default function NotFoundScreen({\r\n  navigation,\r\n}: StackScreenProps<any, 'NotFound'>) {\r\n  const { lang } = useLangContext()\r\n  const { auth } = useAuthContext()\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>{lang(\"This screen doesn't exist.\")}</Text>\r\n      <TouchableOpacity onPress={() => navigation.replace(auth.user?'HomeScreen':'LoginScreen')} style={styles.link}>\r\n        <Text style={styles.linkText}>{lang(\"Go to home screen!\")}</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  link: {\r\n    marginTop: 15,\r\n    paddingVertical: 15,\r\n  },\r\n  linkText: {\r\n    fontSize: 14,\r\n    color: '#2e78b7',\r\n  },\r\n});\r\n","import { useTheme } from '@react-navigation/native';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\nimport Profile from '../components/Profile';\r\nimport TextButton from '../components/TextButton';\r\nimport Colors from '../constants/Colors';\r\nimport useResizeContext from '../hooks/useResizeContext';\r\nimport TabView from '../components/TabView';\r\nimport { TabViewRecord, UserMembership } from '../types';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport ChannelEditModal from '../modals/ChannelEditModal';\r\nimport CommonItem from '../components/CommonItem';\r\nimport { Text } from '../components/Themed';\r\nimport useAuthContext, { Auth } from '../hooks/useAuthContext';\r\nimport { useMessengerChannelSorted } from '../hooks/lists/useMessengerChannelList';\r\nimport { navigate } from '.'\r\nimport { avatarFromChannel } from '../components/Avatar';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { Ionicons, MaterialCommunityIcons } from '../lib/@expo/vector-icons';\r\nimport RegistrationModal from '../modals/RegistrationModal';\r\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\r\nimport ProfileModal from '../modals/ProfileModal';\r\n\r\n\r\nconst MemberTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  return <View style={{flex:1}}>\r\n    {userList?.map((item, index)=>{\r\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>setModal(ProfileModal, {id:item.id})}>\r\n        <Text style={{marginLeft:20}}>{item.name}</Text>\r\n      </CommonItem>\r\n    })}\r\n  </View>\r\n}\r\n\r\nconst MessengerTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const channelList = useMessengerChannelSorted(auth);\r\n  return <View style={{flex:1}}>\r\n    {channelList?.map((item, index)=>{\r\n      const {name} = avatarFromChannel(item, auth.user)\r\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\r\n        <Text style={{marginLeft:20}}>{name}</Text>\r\n      </CommonItem>\r\n    })}\r\n  </View>\r\n}\r\nconst getDrawerTabs = (theme:'light'|'dark')=>{\r\n  const color = Colors[theme].iconColor\r\n  return {\r\n    MemberTab:{\r\n      title:'member',\r\n      component:MemberTabView,\r\n      icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\r\n    },\r\n    ChatTab:{\r\n        title:'chat',\r\n        component:MessengerTabView,\r\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\r\n    },\r\n  } as TabViewRecord\r\n}\r\n\r\nexport default ({auth}:{auth:Auth})=> {\r\n  const { colors } = useTheme();\r\n  const theme = useColorScheme();\r\n  const windowType = useResizeContext();\r\n  const channelList = useMessengerChannelSorted(auth);\r\n  const [index, setIndex] = useState<number>();\r\n  const { setModal } = useModalsContext()\r\n  \r\n  const onAddList = [\r\n    ()=>setModal(RegistrationModal, auth.user?.is_guest?{id:auth.user.id}:{}),\r\n    ()=>setModal(ChannelEditModal, {type:'messenger'}),\r\n  ]\r\n  const drawerTabs = getDrawerTabs(theme)\r\n\r\n  useEffect(()=>{\r\n    if(index===undefined && channelList){\r\n      setIndex(channelList.length>0?1:0)\r\n    }\r\n  }, [channelList])\r\n  return <View style={windowType=='landscape'?[\r\n      styles.tabBar,\r\n      {\r\n        backgroundColor: Colors[theme].background,\r\n        borderTopColor: colors.border,\r\n      },\r\n      // tabBarStyle,\r\n    ]:{width:0}}\r\n    pointerEvents={false ? 'none' : 'auto'}\r\n  >\r\n    {windowType=='landscape' && auth.user && index!==undefined && <>\r\n      <Profile userId={auth.user.id} username={auth.user.username} name={auth.user.name}/>\r\n      <View style={{flexDirection:'row-reverse'}}>\r\n          <TextButton title='+' textStyle={{fontSize:20}} style={{borderRadius:20}} onPress={onAddList[index]}/>\r\n      </View>\r\n      <View accessibilityRole=\"tablist\" style={styles.content}>\r\n        {Object.keys(drawerTabs).length>1 ? \r\n          <TabView tabs={drawerTabs} tabBarPosition={\"top\"} onTab={setIndex} index={index}/>: \r\n          <View style={{borderTopWidth:1, flex:1, borderColor:colors.border}}>            \r\n            {Object.values(drawerTabs).map(drawerTab=>{const Tab = drawerTab.component; return <Tab key={drawerTab.title}/>})}\r\n          </View>\r\n        }\r\n      </View>\r\n    </>}\r\n  </View>\r\n}\r\n\r\n{/*<Text style={[styles.label, { color: d.isFocused ? colors.primary : '#222' }]}></Text> */}\r\n\r\nconst styles = StyleSheet.create({\r\n    tabBar: {\r\n      width:240,\r\n      elevation: 8,\r\n      borderRightWidth:1,\r\n      borderColor:Colors.borderColor\r\n    },\r\n    content: {\r\n      flex: 1,\r\n      flexDirection: 'row',\r\n    },\r\n    tab: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n    },\r\n    label: {\r\n        textAlign: 'center',\r\n        backgroundColor: 'transparent',\r\n      },\r\n  });","import InviteModal from \"./InviteModal\";\r\nimport ProfileModal from \"./ProfileModal\";\r\nimport ChannelEditModal from \"./ChannelEditModal\"\r\nimport AlertModal from \"./AlertModal\";\r\nimport DateTimePickerModal from \"./DateTimePickerModal\"\r\nimport MessageModal from \"./MessageModal\";\r\nimport RegistrationModal from \"./RegistrationModal\";\r\n\r\nexport default [\r\n    InviteModal,\r\n    ProfileModal,\r\n    ChannelEditModal,\r\n    AlertModal,\r\n    DateTimePickerModal,\r\n    MessageModal,\r\n    RegistrationModal\r\n]","import { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\r\nimport React, {useMemo} from 'react';\r\nimport { View } from 'react-native';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport useResizeContext from '../hooks/useResizeContext';\r\nimport NotFoundScreen from '../screens/NotFoundScreen';\r\nimport {main, login} from '../screens';\r\nimport Drawer from './Drawer';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport { WebSocketProvider } from '../hooks/useWebsocketContext';\r\nimport HeaderRight from '../components/HeaderRight'\r\nimport Colors from '../constants/Colors';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport { FirebaseProvider } from '../hooks/useFirebaseContext';\r\nimport useIsMobile from '../hooks/useIsMobile';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { ModalsProvider } from '../hooks/useModalsContext';\r\nimport modals from '../modals';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport CommonButton from '../components/CommonButton';\r\nimport { UploadContextProvider } from '../hooks/useUploadContext';\r\n\r\nconst Main = createStackNavigator();\r\n\r\nfunction headerLeft(navigation:any, route:any, windowType:string, theme:'light'|'dark', isMobile:boolean){\r\n    const canGOBackScreen = ['HomeScreen', 'LoginScreen'].findIndex(v=>v == route.name) == -1\r\n    const goBack = ()=>{\r\n        if (navigation.canGoBack())\r\n            navigation.goBack()\r\n        else if (canGOBackScreen)\r\n            navigation.replace('HomeScreen')\r\n    }\r\n    if (windowType=='portrait' && canGOBackScreen)\r\n        return <TouchableOpacity onPress={goBack} disabled={!isMobile}>\r\n            <CommonButton title={''} color={isMobile?Colors[theme].buttonBackgroundColor:Colors[theme].hoverColor} onPress={goBack} disabled={isMobile} style={{width:32, height:32, margin:16, paddingVertical:1, paddingHorizontal:4}}>\r\n                <Ionicons size={24} color={Colors[theme].iconColor} name=\"arrow-back\"/>\r\n            </CommonButton>\r\n        </TouchableOpacity>\r\n    return null\r\n}\r\n\r\nexport default ()=>{\r\n    const windowType = useResizeContext();\r\n    const isMobile = useIsMobile()\r\n    const {auth} = useAuthContext()\r\n    const theme = useColorScheme()\r\n    const {lang, locale} = useLangContext()\r\n    const entries = useMemo(()=>{\r\n        if (auth.user === undefined)\r\n            return []\r\n        console.log('current user: ', auth.user)\r\n        return Object.entries(auth.user === null?login:main)\r\n    }, [auth, locale])\r\n    const modalValues = useMemo(()=>{\r\n        if (auth.user === undefined)\r\n            return []\r\n        return auth.user === null?[]:modals\r\n    }, [auth])\r\n    const backgroundStyle = theme=='light'?{}:{backgroundColor:'#010409'}\r\n    return (auth.user!==undefined?<View style={{flexDirection:'row', flex:1}}>\r\n        <UploadContextProvider>\r\n            <ModalsProvider modals={modalValues}>\r\n                {auth.user?<Drawer auth={auth}/>:undefined}\r\n                <View style={[{flex:1}, backgroundStyle]}>\r\n                    <WebSocketProvider disable={auth.user === null || auth.user === undefined}>\r\n                        <FirebaseProvider user={auth.user}>\r\n                            <Main.Navigator\r\n                                screenOptions={({navigation, route})=>({\r\n                                    headerStyle:{backgroundColor:Colors[theme].header, height:isMobile?50:undefined},\r\n                                    headerTitleStyle:{color:Colors[theme].text},\r\n                                    headerLeft:()=>headerLeft(navigation, route, windowType, theme, isMobile),\r\n                                    headerRight:()=><HeaderRight/>,\r\n                                    headerLeftContainerStyle:{backgroundColor:Colors[theme].header, borderBottomWidth:1, borderColor:Colors[theme].headerBottomColor},\r\n                                    cardStyle:[{flexShrink:1}, backgroundStyle],\r\n                                    animationEnabled:windowType=='portrait',\r\n                                    cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS\r\n                                })}\r\n                            >\r\n                                {entries.map(([key, screen])=><Main.Screen key={key} name={key} component={screen.component} options={{ title: lang(screen.title) }} />)}\r\n                                <Main.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\r\n                            </Main.Navigator>\r\n                        </FirebaseProvider>\r\n                    </WebSocketProvider>\r\n                </View>\r\n            </ModalsProvider>\r\n        </UploadContextProvider>\r\n    </View>:<></>);\r\n}","/**\r\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\r\n * https://reactnavigation.org/docs/getting-started\r\n *\r\n */\r\nimport * as React from 'react';\r\nimport { useColorScheme as useDefaultColorScheme } from 'react-native';\r\nimport { useColorScheme as useColorScheme } from 'react-native-appearance';\r\nimport { enableScreens } from 'react-native-screens';\r\nimport { NavigationContainer, DefaultTheme, DarkTheme, NavigationContainerRef } from '@react-navigation/native';\r\nimport { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\r\n\r\nimport useResizeContext, { ResizeContextProvider } from '../hooks/useResizeContext';\r\nimport useInvitee, { replaceInviteeState } from '../hooks/useInvitee';\r\nimport { modal } from '../screens';\r\nimport LinkingConfiguration from './LinkingConfiguration';\r\nimport MainNavigator from './MainNavigator';\r\n\r\n\r\nenableScreens();\r\n\r\nconst navigationRef = React.createRef<NavigationContainerRef>();\r\n\r\nexport function navigate(name:string, params?:any) {\r\n  if (params)\r\n    navigationRef.current?.navigate(name, params);\r\n  navigationRef.current?.navigate(name);\r\n}\r\n\r\nlet electronVersion:string|undefined;\r\ntry{\r\n  electronVersion = process?.versions?.['electron']\r\n}\r\ncatch(e){\r\n  electronVersion = undefined\r\n}\r\n\r\nexport default function Navigation() {\r\n  const defaultColorScheme = useDefaultColorScheme()\r\n  const userColorScheme = useColorScheme()\r\n  const colorScheme = userColorScheme =='no-preference'?defaultColorScheme:userColorScheme\r\n  return <NavigationContainer\r\n    ref={navigationRef}\r\n    documentTitle={{formatter: (options, route) => {return `TOKKI TOK`}}}\r\n    linking={electronVersion?undefined:LinkingConfiguration}\r\n    theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\r\n        <ResizeContextProvider>\r\n          <RootNavigator />\r\n        </ResizeContextProvider>\r\n  </NavigationContainer>\r\n}\r\n\r\n\r\n// A root stack navigator is often used for displaying modals on top of all other content\r\n// Read more here: https://reactnavigation.org/docs/modal\r\nconst Root = createStackNavigator();\r\n\r\nfunction RootNavigator() {\r\n    const windowType = useResizeContext();\r\n    useInvitee()\r\n    return <Root.Navigator\r\n        mode= 'modal'\r\n        headerMode= 'screen'\r\n        screenOptions={{\r\n            cardStyle:{backgroundColor:\"white\"},\r\n            animationEnabled: true,\r\n            cardStyleInterpolator: CardStyleInterpolators.forVerticalIOS,\r\n        }}\r\n    >\r\n        <Root.Screen name=\"Main\" component={MainNavigator} options={{headerShown:false}}/>\r\n        {Object.entries(modal).map(([key, screen])=><Root.Screen key={key} name={key} component={screen.component} options={{\r\n            title: screen.title,\r\n            gestureDirection: windowType == 'landscape'?'vertical-inverted':'vertical'\r\n        }} />)}\r\n    </Root.Navigator>\r\n}\r\n\r\nreplaceInviteeState(window.location)\r\n\r\nconst IGNORE_WERNINGS:string[] = ['setNativeProps', 'useNativeDriver'];\r\n\r\nconst warnLogger = console.warn\r\n\r\nconsole.warn = (message: string|Object) => {\r\n    var warn = true;\r\n    if (message instanceof Object){\r\n      warn = false;\r\n    }\r\n    else if (IGNORE_WERNINGS.some(log=>message.includes(log))){\r\n      warn = false\r\n    };\r\n    if (warn){\r\n      warnLogger(message);\r\n    }\r\n    else{\r\n        // console.log(message)\r\n    }\r\n};\r\n","editorConfig = {\r\n    plugins: 'image link charmap advlist lists paste', //autoresize textcolor imagetools,\r\n    toolbar: 'fontsizeselect | bold italic underline strikethrough | undo redo | alignleft aligncenter alignright | bullist numlist | link', // charmap removeformat\r\n    setup: (editor)=>{\r\n    }\r\n}\r\nif (typeof module !== 'undefined') {\r\n    module.exports = editorConfig\r\n}\r\n","firebaseConfig = {\n    \"authDomain\": \"virtual-metrics-355712.firebaseapp.com\",\n    \"projectId\": \"virtual-metrics-355712\",\n    \"storageBucket\": \"virtual-metrics-355712.appspot.com\",\n    \"messagingSenderId\": \"76003576924\",\n    \"appId\": \"1:76003576924:web:c8c8a006d07918bbc02a99\",\n    \"measurementId\": \"G-SEL35L4N5R\"\n}\nif (typeof module !== 'undefined') {\n    module.exports = firebaseConfig\n}\n"],"names":["useMessengerChannelList","auth","queryClient","useQueryClient","lastJsonMessage","useWebsocketContext","data","useQuery","_asyncToGenerator","_auth$user","getMessengerChannelList","user","id","useEffect","setQueryData","_data","find","v","concat","_toConsumableArray","sort","a","b","map","_data2$message_set$","channel","_objectSpread","last_message","content","message_set","created","useMessengerChannelSorted","channelList","_a$last_message","_b$last_message","useMessengerChannelMutation","create","useMutation","postChannel","onSuccess","invalidateQueries","update","putChannel","direct","postDirectChannel","mutateAsync","useMessengerMemberList","channel_id","getMessengerMemberList","useMessengerMemberMutation","invite","postBulkMessengerMember","leave","deleteMessengerMember","invitee_id","invitee_state","useAuthContext","messengerMemberMutation","redirect","navigate","screen","params","undefined","console","log","user_ids","then","openURL","Platform","OS","url","location","href","Linking","props","_jsxs","View","style","Styles","footer_buttons","children","_jsx","TouchableOpacity","footer_button","onPress","AntDesign","name","size","color","Colors","theme","iconColor","StyleSheet","width","flexDirection","justifyContent","paddingBottom","paddingRight","alignItems","height","marginHorizontal","borderWidth","borderColor","borderRadius","login_container","flex","backgroundColor","login_header","paddingTop","login_header_logo","resizeMode","login_header_text","marginTop","fontSize","login_header_text_bold","fontWeight","login_wrapper","borderTopRightRadius","borderTopLeftRadius","form","maxWidth","form_error","form_error_text","textAlignVertical","form_input","paddingHorizontal","marginBottom","button","button_label","login_social","login_social_separator","login_social_separator_line","login_social_separator_text","login_social_buttons","login_social_button","login_social_icon","login_social_facebook","login_footer_text","guest_footer_text","alignSelf","margin","login_footer_link","CommonButton","styles","AlertModal","_ref","type","lang","useLangContext","setModal","useModalsContext","dispatch","back","messages","message","title","useModalEffect","BottomSheet","Text","useColorScheme","_useAuthContext","windowType","useResizeContext","defaultButtonProps","is_guest","buttonProps","extra","filter","k","TextButton","textStyle","text","WebSocketContext","createContext","sendJsonMessage","WebSocketProvider","disable","_Fragment","WebSocketInternalProvider","path","Context","useBackground","useContext","TURN_SERVER","peerConstraints","iceServers","JSON","parse","urls","sessionConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","VoiceActivityDetection","mediaConstraints","audio","video","framerate","onICEcandidate","pc","_message","rtcMessage","candidate","RTCIceCandidate","addIceCandidate","sendICEcandidate","event","sendMessage","receiver","target","BAND_WIDTH","createOffer","pcRefCurrent","stream","addStream","offerDescription","arr","sdp","split","forEach","str","i","test","RTCSessionDescription","join","optimizeSdp","setLocalDescription","_x","_x2","_x3","_x4","_x5","apply","arguments","camStyle","container","cam","bottonContainer","position","bottom","buttonBar","label","_props$user","_useWebsocketContext","_useLocalCam","pcRef","useRef","_useState","useState","_useState2","_slicedToArray","sender","setSender","_useState3","_useState4","_stream","setStream","isPlay","useMemo","CustomRTCView","useCallback","React","_ref2","RTCView","videoProps","start","_ref3","mode","newStream","mediaDevices","getUserMedia","getDisplayMedia","catch","e","Object","entries","current","_ref4","_ref5","error","_x6","_x7","_x8","stop","getTracks","track","websocketOnMessage","_websocketOnMessage","response","channel_name","peerConnection","RTCPeerConnection","addEventListener","answerDescription","setRemoteDescription","_x9","_x10","useLocalCam","Button","setReceiver","_useRemoteCam","_useState5","_useState6","setUser","_useState7","_useState8","close","clearInterval","statsInterval","_websocketOnMessage2","_pcRef$current","_pcRef$current2","_pcRef$current3","_pcRef$current4","iceConnectionState","activeStream","setInterval","stats","getStats","statsOutput","framePerSecond","report","kind","keys","statName","framesPerSecond","Date","toTimeString","addTransceiver","direction","streams","getRemoteStreams","length","createAnswer","localDescription","_x11","useRemoteCam","TextInput","value","onChangeText","VideoView","scale","maxHeight","flexGrow","focusGuest","containerStyle","setFocusGuest","VideoCallContainer","setDisable","isMobile","useIsMobile","videoMode","setVideoMode","guests","setGuests","_useRtcContext","useRtcContext","Math","max","ceil","sqrt","toggleVideoMode","ThemedView","aspectRatio","flexShrink","borderLeftWidth","borderBottomWidth","flexWrap","RemoteCam","LocalCam","Ionicons","RtcProvider","useUserMembershipList","groupId","getUserMembershipList","useExternalMembershipList","keyword","getExternalMembershipList","contentHeight","setContentHeight","minHeight","paddingVertical","background","multiline","placeholder","editable","disabled","keyboardType","secureTextEntry","setValue","onContentSizeChange","nativeEvent","contentSize","onBlur","onEndEditing","RowField","rowStyle","TextField","CommonTextInput","localSearchReducer","initialState","action","active","Error","_React$useState","index","_React$useState2","setIndex","tabs","onTab","icons","assign","_defineProperty","icon","TabView","renderTabBar","TabBar","indicatorStyle","activeColor","inactiveColor","renderIcon","scene","route","key","onTabPress","findIndex","navigationState","routes","_ref6","_ref7","onIndexChange","renderScene","SceneMap","_ref8","_ref9","component","tabBarPosition","CommonItem","press","setPress","Pressable","outerContainer","outerContainerStyle","onPressIn","onPressOut","bodyView","bodyStyle","padding","item","member","marginRight","Avatar","userId","CopyField","copied","setCopied","Clipboard","setString","InviteItem","selectedRef","has","selected","setSelected","MemberItem","delete","add","GroupTabView","userList","memberList","_useLocalSearch","compare","_useReducer","useReducer","_useReducer2","searchState","useLocalSearch","memberSet","Set","username","includes","dispatchKeyword","InviteModal","FlatList","contentContainerStyle","renderItem","ExternalMembershipTabView","_auth$user2","setKeyword","timeoutRef","externalMemberList","setTimeout","clearTimeout","inviteLink","replace","marginVertical","lightColor","darkColor","drawerTabs","group","external","ModalSection","dayTypes","hours","Array","toString","padStart","minutes","getDisableDays","date","startDate","clone","startOf","endDate","endOf","today","dayjs","result","push","format","defaultDayjs","m","restMinute","parseInt","Calendar","CommonPicker","DateTimePickerModal","datetime","callback","_dayjs","_useLangContext","locale","setDate","dayType","setDayType","hour","setHour","minute","setMinute","_useState9","_useState10","disableDays","setDisableDays","textAlign","Suspense","fallback","disableAllTouchEventsForDisabledDays","onMonthChange","dateString","markedDates","reduce","p","c","values","toISOString","ChannelEditModal","member_id","channelMutation","setName","description","setDescription","_name","avatarFromChannel","separator","newChannel","owner","field","UploadTag","overflow","progress","filename","upload","useUploadContext","expand","setExpand","uploadData","f","isExpand","INIT","require","Editor","tinymceScriptSrc","process","onInit","editor","onReady","onEditorChange","init","setup","plugins","toolbar","skin","content_css","menubar","branding","statusbar","block_formats","fontsize_formats","ready","setReady","ProfileModal","isSelf","Profile","_auth$user3","subowner","firebaseConfig","messagingSenderId","apiKeyEncrypted","FCM_API_KEY","charCodeAt","app","firebase","initializeApp","apiKey","messaging","onMessage","payload","window","Notification","permission","body","alert","requestToken","requestPermission","serviceWorkerRegistration","navigator","serviceWorker","register","scope","currentToken","getToken","vapidKey","FCM_PUBLIC_VAPID_KEY","preventDefault","unregister","FirebaseContext","setEnable","FirebaseProvider","tokenRef","notification","setNotification","enable","token","isMount","t","putNotification","noti","getNotification","postNotification","Provider","ErrorView","RegistrationModal","setUsername","password","setPassword","checkPassword","setCheckPassword","isStaff","_useState11","_useState12","setError","userMembershipMutation","_create","postUser","_update","patchUser","_delete","deleteUser","useUserMembershipMutation","usernameDisable","newError","is_staff","inviteGroupId","ConfigSection","CommonSection","setLocale","configTheme","useConfigColorScheme","_useFirebaseContext","_useContext","useFirebaseContext","setNoti","n","textDecorationLine","l","colorScheme","setColorScheme","paddingLeft","MemberTabView","memberItem","ScrollView","MessengerTabView","slice","_item$last_message","_item$last_message2","_item$last_message3","_item$last_message4","_avatarFromChannel","avatar","preview_content","FontAwesome","opacity","member_count","replaceAll","unread_count","ConfigTabView","ConfigSections","getBottomTabs","OneTab","MaterialCommunityIcons","TwoTab","FourTab","SimpleLineIcons","main","HomeScreen","_route$params2","navigation","home","setHome","options","headerRight","HeaderRight","useLayoutEffect","_route$params","tab","setOptions","StyledText","ContractFooter","setParams","ChatScreen","_useMessengerChannelL","inputRef","channelAvatar","_memberList$find","editorValue","setEditorValue","timer","setTimer","autoFocus","setAutoFocus","bottomTab","setBottomTab","_useState13","_useState14","isEditor","setIsEditor","_useState15","_useState16","messageEvent","sendToScreen","valueLines","postValue","contentMutation","useMessengerContentMutation","headerShown","canGoBack","goBack","_auth$user4","focus","timeout","minWidth","VideoCallSection","d","Messages","reverse","UploadTags","TimerTags","borderBottomRightRadius","top","Entypo","timerFormat","ref","onKeyPress","shiftKey","onFocus","numberOfLines","borderBottomLeftRadius","Promise","resolve","reject","input","document","createElement","onchange","files","onabort","onerror","click","_auth$user5","file","login","LoginScreen","_login","autoCapitalize","onSubmitEditing","DemoScreen","modal","ROOTPATH","prefixes","config","screens","Main","NotFound","NotFoundScreen","link","linkText","marginLeft","colors","useTheme","onAddList","MemberTab","ChatTab","getDrawerTabs","tabBar","borderTopColor","border","pointerEvents","accessibilityRole","borderTopWidth","drawerTab","Tab","elevation","borderRightWidth","MessageModal","createStackNavigator","modalValues","modals","backgroundStyle","UploadContextProvider","ModalsProvider","Drawer","Navigator","screenOptions","headerStyle","header","headerTitleStyle","headerLeft","canGOBackScreen","buttonBackgroundColor","hoverColor","headerLeftContainerStyle","headerBottomColor","cardStyle","animationEnabled","cardStyleInterpolator","CardStyleInterpolators","forHorizontalIOS","Screen","enableScreens","electronVersion","navigationRef","_navigationRef$curren","_navigationRef$curren2","_process","_process$versions","versions","Navigation","defaultColorScheme","useDefaultColorScheme","userColorScheme","NavigationContainer","documentTitle","formatter","linking","LinkingConfiguration","DarkTheme","DefaultTheme","ResizeContextProvider","RootNavigator","Root","useInvitee","headerMode","forVerticalIOS","MainNavigator","gestureDirection","pathname","endsWith","search","startsWith","history","replaceState","replaceInviteeState","IGNORE_WERNINGS","warnLogger","warn","some","editorConfig","module","exports"],"sourceRoot":""}