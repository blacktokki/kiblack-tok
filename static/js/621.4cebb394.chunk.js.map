{"version":3,"file":"static/js/621.4cebb394.chunk.js","mappings":"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","sources":["src/hooks/lists/useMessengerChannelList.ts","src/hooks/lists/useMessengerMemberList.ts","src/hooks/useInvitee.ts","src/components/ContractFooter.tsx","src/screens/main/LoginScreen.tsx","src/components/TextButton.tsx","src/modals/AlertModal.tsx","src/components/HeaderRight.tsx","src/lib/react-native-webrtc/useWebsocketContext.tsx","src/lib/react-native-webrtc/webrtc/p2p.tsx","src/lib/react-native-webrtc/webrtc/index.ts","src/lib/react-native-webrtc/LocalCam.tsx","src/lib/react-native-webrtc/RemoteCam.tsx","src/screens/main/ChatScreen/VideoCallSection.tsx","src/hooks/lists/useUserMembershipList.ts","src/hooks/lists/useExternalMembershipList.ts","src/components/CommonTextInput.tsx","src/components/RowField.tsx","src/components/TextField.tsx","src/hooks/useLocalSearch.ts","src/components/TabView.tsx","src/components/CommonItem.tsx","src/components/MemberItem.tsx","src/components/CopyField.tsx","src/modals/InviteModal.tsx","src/modals/DateTimePickerModal.tsx","src/modals/ChannelEditModal.tsx","src/screens/main/ChatScreen/UploadTags.tsx","src/lib/tinymce/Editor.tsx","src/components/Editor.tsx","src/components/Profile.tsx","src/modals/ProfileModal.tsx","src/hooks/useFirebaseContext.tsx","src/modals/RegistrationModal.tsx","src/screens/main/HomeScreen/ConfigSections.tsx","src/screens/main/HomeScreen/index.tsx","src/screens/index.ts","src/screens/main/ChatScreen/index.tsx","src/screens/main/DemoScreen.tsx","src/navigation/LinkingConfiguration.ts","src/screens/NotFoundScreen.tsx","src/navigation/Drawer.tsx","src/modals/index.ts","src/navigation/MainNavigator.tsx","src/navigation/index.tsx","web/editor-config.js","web/firebase-config.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { getMessengerChannelList, postChannel, postDirectChannel, putChannel } from \"../../services\";\nimport { MessengerChannel, MessengerContent } from \"../../types\";\nimport { Auth } from \"../useAuthContext\";\nimport useWebsocketContext from \"../useWebsocketContext\";\n\nexport default function useMessengerChannelList(auth?:Auth){\n  const queryClient = useQueryClient()\n  const {lastJsonMessage} = useWebsocketContext()\n  const { data } = useQuery(\"MessengerChannelList\" , async()=>await getMessengerChannelList(auth?.user?.id))\n\n  useEffect(()=>{\n    if(lastJsonMessage !=null){\n      if(lastJsonMessage['type']=='enter'){\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>{\n          return (_data?.find(v=>v.id==lastJsonMessage['data']['id'])?_data:[lastJsonMessage['data'] , ...(_data|| [])]).sort((a, b)=>a.id - b.id)\n        })\n      }\n      if (lastJsonMessage['type']=='next_message'){\n        const data:MessengerContent = lastJsonMessage['data']\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>(_data || []).map(v=>{\n          if (v.id == data.channel){\n            return {...v, last_message:{content:data.message_set[0]?.content, created:data.created}}\n          }\n          return v\n        }))\n      }\n      // if(lastJsonMessage['type']=='leave'){\n      //   queryClient.setQueryData<Channel[]>(\"MessengerChannelList\", (_data)=>_data?.filter(v=>v.id!=lastJsonMessage['data']['channel_id']) || [])\n      // }\n    }\n  }, [lastJsonMessage])\n  return data\n}\n\nexport function useMessengerChannelSorted(auth?:Auth){\n  const channelList = useMessengerChannelList(auth);\n  return channelList?.sort((a, b)=>(a.last_message?.created || '') < (b.last_message?.created || '')?1:-1)\n}\nexport function useMessengerChannelMutation(){\n  const queryClient = useQueryClient()\n\n  const create = useMutation(postChannel, {\n    onSuccess: ()=>queryClient.invalidateQueries(\"MessengerChannelList\")\n  });\n\n  const update = useMutation(putChannel, {\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\n  })\n\n  const direct = useMutation(postDirectChannel, {\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\n  })\n\n  return { create:create.mutateAsync, update:update.mutateAsync, direct:direct.mutateAsync}\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { postBulkMessengerMember, deleteMessengerMember, getMessengerMemberList } from \"../../services\";\n\nexport default function useMessengerMemberList(channel_id:number){\n  const { data } = useQuery([\"MessengerMemberList\", channel_id] , async()=>await getMessengerMemberList(channel_id))\n  return data\n}\n\n\nexport function useMessengerMemberMutation(){\n  const queryClient = useQueryClient()\n  const invite = useMutation(postBulkMessengerMember, {\n    onSuccess: ()=>{\n      queryClient.invalidateQueries(\"MessengerMemberList\")\n    }\n  })\n\n  const leave = useMutation(deleteMessengerMember, {\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"MessengerChannelList\")\n      queryClient.invalidateQueries(\"MessengerMemberList\")\n    }\n  })\n  return {invite:invite.mutateAsync, leave:leave.mutateAsync}\n}","import { useEffect } from \"react\"\nimport { navigate } from \"../navigation\"\nimport useMessengerChannelList from \"./lists/useMessengerChannelList\"\nimport { useMessengerMemberMutation } from \"./lists/useMessengerMemberList\"\nimport useAuthContext from \"./useAuthContext\"\n\nlet invitee_id:number|undefined\nlet invitee_state:0|1|2=0\n\nexport const replaceInviteeState = (l:Location)=>{\n    if(l !==undefined && l.pathname.endsWith('/invitee')){\n        var params = l.search.slice(1).split('&').filter(v=>v.startsWith('id='))\n        if (params.length>0)\n            invitee_id = parseInt(params[0].split('=')[1])\n        window.history.replaceState(null, '', l.href.split('invitee')[0]\n        );\n    }\n}\n\nexport default ()=>{\n    const {auth} = useAuthContext()\n    const channelList = useMessengerChannelList(auth)\n    const messengerMemberMutation = useMessengerMemberMutation()\n    useEffect(()=>{\n        if (auth.user){\n            if (invitee_id && channelList){\n                var id = invitee_id;\n                var redirect = ()=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id}})\n                invitee_id = undefined;\n                invitee_state = 1;\n                if(channelList.find(v=>v.id==id) === undefined){\n                    console.log(`invite processing (channel:${id})`)\n                    messengerMemberMutation.invite({\n                        channel_id:id,\n                        user_ids:[auth.user.id]\n                    }).then(redirect)\n                }\n                else{\n                    console.log('already invite')\n                    redirect()\n                }\n            }\n        }\n        else{\n            if (invitee_state == 1){\n                invitee_state=2\n            }\n        }\n    }, [auth, channelList])\n    useEffect(()=>{\n        if(auth.user && invitee_state==2){\n            navigate(\"Main\", {screen:\"HomeScreen\"})\n        }\n    }, [auth.user])\n}","import React from 'react'\nimport { View, StyleSheet, Linking, Platform, TouchableOpacity  } from 'react-native'\nimport { } from 'react-native-gesture-handler'\nimport { AntDesign } from '../lib/@expo/vector-icons'; \nimport Colors from '../constants/Colors';\n\nconst openURL = Platform.OS=='web'?(url:string)=>{location.href=url}:Linking.openURL\n\nexport default (props:{theme:'light'|'dark'})=>{\n    return<View style={Styles.footer_buttons}>\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>openURL(\"https://github.com/blacktokki/tokki-tok\")}>\n            <AntDesign name=\"github\" size={24} color={Colors[props.theme].iconColor} />\n        </TouchableOpacity>\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>Linking.openURL(\"mailto:ydh051541@naver.com\")}>\n            <AntDesign name=\"mail\" size={24} color={Colors[props.theme].iconColor} />\n        </TouchableOpacity>\n    </View>\n}\n\nconst Styles = StyleSheet.create({\n      footer_buttons: {\n        width: '100%',\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        paddingBottom: 20,\n        paddingRight: 20,\n      },\n      footer_button: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: 38,\n        height: 38,\n        marginHorizontal: 12,\n        borderWidth: 1,\n        borderColor: '#E7E7E7',\n        borderRadius: 60,\n      },\n})","import React, {useEffect, useState} from 'react';\nimport {\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n  StyleSheet,\n} from 'react-native';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useAuthContext from '../../hooks/useAuthContext';\nimport useLangContext from '../../hooks/useLangContext';\nimport ContractFooter from '../../components/ContractFooter';\n\nexport default function LoginScreen({\n  navigation, route\n}: StackScreenProps<any, 'Login'>) {\n  const { lang } = useLangContext()\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const {error, dispatch} = useAuthContext()\n  const _login = ()=>dispatch({type:'LOGIN_REQUEST', username, password})\n  useEffect(() => {\n    navigation.setOptions({\n      headerRight: undefined\n    });\n  }, [navigation]);\n\n  return (<View style={Styles.login_container}>\n    <View style={Styles.login_wrapper}>\n      <View style={Styles.form}>\n        {error && <View style={Styles.form_error}>\n          <Text style={Styles.form_error_text}>{lang(error)}</Text>\n        </View>}\n        <TextInput\n          style={Styles.form_input}\n          value={username}\n          placeholder={lang('Username')}\n          onChangeText={(text) => setUsername(text)}\n          autoCapitalize={'none'}\n          keyboardType={'email-address'}\n          onSubmitEditing={_login}\n        />\n        <TextInput\n          style={Styles.form_input}\n          value={password}\n          placeholder={lang('Password')}\n          secureTextEntry\n          onChangeText={(text) => setPassword(text)}\n          onSubmitEditing={_login}\n        />\n        <TouchableOpacity onPress={_login}>\n          <View style={Styles.button}>\n            <Text style={Styles.button_label}>{lang('Sign in')}</Text>\n          </View>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => dispatch({type:\"LOGIN_GUEST\"})}>\n          <Text style={Styles.guest_footer_text}>\n            {lang(\"Sign in as guest\")}\n          </Text>\n        </TouchableOpacity>\n      </View>\n      <View style={Styles.login_social}>\n        <View style={Styles.login_social_separator}>\n          <View style={Styles.login_social_separator_line} />\n          <Text style={Styles.login_social_separator_text}>{'*'}</Text>\n          <View style={Styles.login_social_separator_line} />\n        </View>\n        <View style={Styles.login_social_buttons}>\n        </View>\n      </View>\n      {/* <>\n        <TouchableOpacity onPress={() => navigate(\"RegistrationScreen\")}>\n          <Text style={Styles.login_footer_text}>\n            {\"Don't have an account? \"}\n            <Text style={Styles.login_footer_link}>{'Sign up'}</Text>\n          </Text>\n        </TouchableOpacity>\n      </> */}\n    </View>\n    <ContractFooter theme='light'/>\n  </View>);\n};\n\nconst Styles = StyleSheet.create({\n    login_container: {\n      flex: 1,\n      backgroundColor: '#FFF',\n    },\n    login_header: {\n      alignItems: 'center',\n      paddingTop: 30,\n      paddingBottom: 50,\n      backgroundColor: '#208AEC',\n    },\n    login_header_logo: {\n      width: 220,\n      resizeMode: 'contain',\n    },\n    login_header_text: {\n      marginTop: 15,\n      color: '#f0f0f0',\n      fontSize: 16,\n    },\n    login_header_text_bold: {\n      color: '#fff',\n      fontWeight: 'bold',\n    },\n    login_wrapper: {\n      flex: 1,\n      justifyContent: 'space-between',\n      paddingTop: 40,\n      borderTopRightRadius: 12,\n      borderTopLeftRadius: 12,\n      backgroundColor: '#fff',\n      alignItems: 'center',\n    },\n    form: {\n      width: '100%',\n      maxWidth: 320,\n    },\n    form_error: {\n      height: 22,\n      width:'100%',\n    },\n    form_error_text:{\n      textAlignVertical:'center',\n      color:'red',\n      fontSize:13,\n    },\n    form_input: {\n      height: 44,\n      paddingHorizontal: 20,\n      marginBottom: 20,\n      backgroundColor: '#EDF0F7',\n      borderRadius: 50,\n    },\n    button: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: 44,\n      backgroundColor: '#0065A4',\n      borderRadius: 50,\n    },\n    button_label: {\n      color: '#fff',\n      fontSize: 16,\n    },\n    login_social: {\n      width: '100%',\n      maxWidth: 280,\n      marginTop: 20,\n    },\n    login_social_separator: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    login_social_separator_line: {\n      flex: 1,\n      width: '100%',\n      height: 1,\n      backgroundColor: '#E0E0E0',\n    },\n    login_social_separator_text: {\n      marginHorizontal: 10,\n      color: '#808080',\n      fontSize: 16,\n    },\n    login_social_buttons: {\n      flexDirection: 'row',\n      justifyContent: 'center',\n      marginTop: 20,\n    },\n    login_social_button: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: 60,\n      height: 60,\n      marginHorizontal: 12,\n      borderWidth: 1,\n      borderColor: '#E7E7E7',\n      borderRadius: 60,\n    },\n    login_social_icon: {\n      width: 38,\n      height: 38,\n      resizeMode: 'contain',\n    },\n    login_social_facebook: {\n      backgroundColor: '#4267B2',\n      borderColor: '#4267B2',\n    },\n    login_footer_text: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      color: '#808080',\n      fontSize: 14,\n    },\n    guest_footer_text: {\n      flexDirection: 'row',\n      alignSelf: 'center',\n      color: '#808080',\n      fontSize: 15,\n      margin: 15\n    },\n    login_footer_link: {\n      color: '#208AEC',\n      fontSize: 15,\n      fontWeight: 'bold',\n    },\n  });\n  ","import React, { useState } from 'react';\nimport { StyleSheet} from 'react-native';\nimport { CustomButtonProps } from '../types';\nimport CommonButton from './CommonButton';\n\nexport default (props:CustomButtonProps)=>{\n    return <CommonButton {...props} style={[styles.style, props.style]}/>\n}\n\nconst styles = StyleSheet.create({\n    style:{\n        borderRadius:6, \n        backgroundColor: 'transparent',\n        borderWidth:0\n    },\n});\n","import React from 'react';\nimport useAuthContext from '../hooks/useAuthContext';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { BottomSheet } from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\n\n\nexport default function AlertModal({type}:{type:string}) {\n  const { lang } = useLangContext()\n  const { setModal } = useModalsContext()\n  const {dispatch} = useAuthContext()\n  const back = ()=>{\n    setModal(AlertModal, null)\n  }\n  const messages = {\n    \"GUEST_LOGOUT\":{\n      message: 'Guest users cannot reconnect after logging out. Please create an account or log in.',\n      title: 'sign out',\n      onPress: ()=>dispatch({type:\"LOGOUT_REQUEST\"})\n    }\n  } as Record<string, {message:string, title:string, onPress:()=>void}>\n\n  useModalEffect(back, [])\n  return <BottomSheet>\n    <Text>{lang(messages[type].message)}</Text>\n    <View style={{width:'100%', flexDirection:'row', justifyContent:'flex-end'}}>\n      <CommonButton title={lang(messages[type].title)} onPress={messages[type].onPress}/>\n      <CommonButton title={lang('cancel')} onPress={()=>back()}/>\n    </View>\n  </BottomSheet>\n}\n","import React from 'react'\nimport TextButton from \"./TextButton\"\nimport useAuthContext from \"../hooks/useAuthContext\"\nimport useResizeContext from '../hooks/useResizeContext'\nimport { View } from 'react-native'\nimport useModalsContext from '../hooks/useModalsContext'\nimport AlertModal from '../modals/AlertModal'\nimport useLangContext from '../hooks/useLangContext'\nimport useColorScheme from '../hooks/useColorScheme'\nimport Colors from '../constants/Colors'\n\ntype ButtonProps = {title:string, onPress:()=>void, windowType?:'landscape'|'portrait'}\n\nexport default (props:{extra?:ButtonProps[]})=>{\n    const { lang } = useLangContext()\n    const theme = useColorScheme()\n    const {auth, dispatch} = useAuthContext()\n    const { setModal } = useModalsContext()\n    const windowType = useResizeContext()\n    const defaultButtonProps:ButtonProps[] = [{title:lang('sign out'), onPress:()=>{\n        if (auth?.user?.is_guest){\n            setModal(AlertModal, {type:\"GUEST_LOGOUT\"})\n        }\n        else{\n            dispatch({type:\"LOGOUT_REQUEST\"})\n        }\n    }}]\n    const buttonProps = (props.extra?[...props.extra, ...defaultButtonProps]:defaultButtonProps).filter(v=>v.windowType==windowType || v.windowType == undefined)\n    return<View style={{flexDirection:'row'}}>\n        {buttonProps.map((v,k)=><TextButton key={k} {...v} textStyle={{color:Colors[theme].text}} color='#gray'/>)}\n    </View>\n}\n  ","import React, { createContext, useContext } from \"react\"\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\";\nimport { WebSocketInternalProvider } from \"../../hooks/useWebsocketContext\";\n\nconst WebSocketContext = createContext<{lastJsonMessage:any, sendJsonMessage:SendJsonMessage }>({lastJsonMessage:undefined, sendJsonMessage:()=>{}});\n\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\n  return disable?<></>:<WebSocketInternalProvider path={'messenger/ws/rtc/'} Context={WebSocketContext} useBackground>\n    {children}\n  </WebSocketInternalProvider>\n}\n\nexport default ()=>{\n  const webSocketContext = useContext(WebSocketContext)\n  return webSocketContext\n}\n\n","import React, { useCallback, useRef, useState, useMemo } from \"react\";\n//@ts-ignore\nimport { RTCView, mediaDevices, RTCPeerConnection, MediaStream, RTCSessionDescription, RTCIceCandidate } from \"react-native-webrtc-web-shim\";\nimport {TURN_SERVER} from \"../../../constants/Envs\"\n\n\nconsole.log(TURN_SERVER?\"use turn server\": \"use stun server\")\n\nexport const peerConstraints = {\n\ticeServers: [TURN_SERVER?JSON.parse(TURN_SERVER):{urls: 'stun:stun.l.google.com:19302'}]\n};\n\nexport const sessionConstraints = {\n\tmandatory: {\n\t\tOfferToReceiveAudio: true,\n\t\tOfferToReceiveVideo: true,\n\t\tVoiceActivityDetection: true\n\t}\n};\n\nconst mediaConstraints = {audio:true, video:{framerate:30}}\n\n//@ts-ignore\nexport {MediaStream, RTCPeerConnection, RTCSessionDescription} from \"react-native-webrtc-web-shim\";\n\nconst onICEcandidate = (pc:typeof RTCPeerConnection, message:any)=>{\n\tconst _message = message.data.rtcMessage\n\t\tconst candidate = new RTCIceCandidate(_message);\n\t\tif (pc) {\n\t\t\tconsole.log(\"ICE candidate Added\");\n\t\t\tpc.addIceCandidate(candidate);\n\t\t}\n}\n\nconst sendICEcandidate = (event:any, sendMessage:(data:any)=>void, receiver:string, target:string) => {\n\t// When you find a null candidate then there are no more candidates.\n\t// Gathering of candidates has finished.\n\tif ( !event.candidate ) { return; };\n\t// Send the event.candidate onto the person you're calling.\n\t// Keeping to Trickle ICE Standards, you should send the candidates immediately.\n\tsendMessage({type:'ICEcandidate', receiver, data:{target, rtcMessage:event.candidate}})\n  }\n\nconst BAND_WIDTH = 8000\n\nconst optimizeSdp = (offerDescription:RTCSessionDescription)=>{\n\tvar arr = offerDescription.sdp.split('\\r\\n');\n\tarr.forEach((str:string, i:number) => {\n\t\tif (/^a=fmtp:\\d*/.test(str)) {\n\t\t\tarr[i] = str + `;x-google-max-bitrate=${BAND_WIDTH};x-google-min-bitrate=${BAND_WIDTH};x-google-start-bitrate=${BAND_WIDTH}`;\n\t\t} else if (/^a=mid:(0|video)/.test(str)) { // if with audio then 0=>1\n\t\t\tarr[i] += `\\r\\nb=AS:${BAND_WIDTH}`;\n\t\t}\n\t});\n  \treturn new RTCSessionDescription({\n    \ttype: offerDescription.type,\n    \tsdp: arr.join('\\r\\n'),\n  \t})\n}\n\nconst createOffer = async(pcRefCurrent:{pc?:typeof RTCPeerConnection, receiver:string}, sendMessage:(data:any)=>void, stream:typeof MediaStream, target:string, user?:{name:string})=>{\n\tstream && pcRefCurrent.pc.addStream( stream );\n\tconst offerDescription = optimizeSdp((await pcRefCurrent.pc.createOffer( sessionConstraints )));\n\tawait pcRefCurrent.pc.setLocalDescription( offerDescription );\n\tsendMessage({type:'call', receiver:pcRefCurrent.receiver, data:{target, name:user?.name, rtcMessage:offerDescription}})\n}\n\nexport const useLocalCam = (sendMessage:(data:any)=>void)=>{\n\tconst pcRef = useRef<Record<number,{pc:typeof RTCPeerConnection, receiver:string}>>({})\n\tconst [sender, setSender] = useState<string>()\n\tconst [_stream, setStream] = useState<MediaStream>()\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\n\tconst CustomRTCView = useCallback(React.memo(({style}:{style:any})=>(_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>)) , [_stream])\n\tconst start = useCallback(async(user:{name:string}, stream?:typeof MediaStream, mode?:'camera'|'display')=>{\n\t\tconsole.log(\"start\");\n\t\tif (!_stream || mode!==undefined) {\n\t\t\ttry {\n\t\t\t\tlet newStream:typeof MediaStream;\n\t\t\t\tif(mode == 'camera'){\n\t\t\t\t\tnewStream = await mediaDevices.getUserMedia(mediaConstraints)\n\t\t\t\t}\n\t\t\t\telse if (mode == 'display'){\n\t\t\t\t\tnewStream = await mediaDevices.getDisplayMedia(mediaConstraints)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewStream = stream || await mediaDevices.getUserMedia(mediaConstraints).catch((e:any)=>mediaDevices.getDisplayMedia(mediaConstraints));\n\t\t\t\t}\n\t\t\t\tsetStream(newStream)\n\t\t\t\tObject.entries(pcRef.current).map(([k, v])=>{\n\t\t\t\t\tcreateOffer(v, sendMessage, newStream, 'guest', user)\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}, [_stream])\n\tconst stop = useCallback(()=>{\n\t\tconsole.log(\"stop\");\n\t\tif(_stream){\n\t\t\t_stream.getTracks().map((track:any) => track.stop());\n\t\t\tsetStream(undefined)\n\t\t}\n\t}, [_stream])\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\twebsocketOnMessage: async(response:any, user:{name:string})=>{\n\t\t\tlet type = response.type;\n\t\t\tif (type == 'connection'){\n\t\t\t\tsetSender(response.data.channel_name)\n\t\t\t}\n\t\t\tif (type == 'start' && response.data.target=='host'){\n\t\t\t  console.log('1 start')\n\t\t\t  const peerConnection = new RTCPeerConnection( peerConstraints );\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'guest'));\n\t\t\t  pcRef.current[response.sender] = {pc:peerConnection, receiver: response.sender}\n\t\t\t  createOffer(pcRef.current[response.sender], sendMessage, _stream, 'guest', user)\n\t\t\t}\n\t\t\t\n\t\t\tif (type == \"answer\" && response.data.target == 'host'){\n\t\t\t  console.log('3 answer')\n\t\t\t  const peerConnection = pcRef.current[response.sender].pc\n\t\t\t  const answerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t  await peerConnection.setRemoteDescription( answerDescription );\n\t\t\t  // const streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t  // setMirrorStream(streams[streams.length - 1])\n\t\t\t}\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='host'){\n\t\t\t\tconst peerConnection = pcRef.current[response.sender].pc\n\t\t\t\tonICEcandidate(peerConnection, response)\n\t\t\t}\n\t\t},\n\t\tCustomRTCView,\n\t\tisPlay,\n\t\tsender,\n\t\t// renderMirrorView,\n\t}\n}\n\nexport const useRemoteCam = (sendMessage:(data:any)=>void)=>{\n\tconst pcRef = useRef<{pc?:RTCPeerConnection, receiver?:string, statsInterval?:any}>({})\n\tconst [user, setUser] = useState<{name:string}>()\n\tconst [_stream, setStream] = useState<MediaStream>()\n\tconst CustomRTCView = useCallback(React.memo((style:any)=>_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>), [_stream])\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\n\tconst start = useCallback((receiver:string)=>{\n\t\tconsole.log(\"start\");\n\t\tif (!pcRef.current.pc) {\n\t\t  pcRef.current.pc = new RTCPeerConnection( peerConstraints );\n\t\t  pcRef.current.receiver = receiver\n\t\t}\n\t\tif (!_stream){\n\t\t\tsendMessage({type:'start', receiver, data:{'target': 'host'}})\n\t\t}\n\t}, [_stream])\n\tconst stop = () => {\n\t\tconsole.log(\"stop\");\n\t\tif (pcRef.current.pc) {\n\t\t  // peerConnection._unregisterEvents();\n\t\t  setStream(undefined)\n\t\t  pcRef.current.pc.close();\n\t\t  pcRef.current.pc = undefined\n\t\t  pcRef.current.receiver = undefined\n\t\t  clearInterval(pcRef.current.statsInterval)\n\t\t}\n\t}\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\twebsocketOnMessage: async(response:any)=>{\n\t\t\tlet type = response.type;\n\t\t\tif (type == 'start' && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\n\t\t\t\tconsole.log('(remote)1 start')\n\t\t\t\tconst peerConnection = pcRef.current.pc\n\t\t\t\tsetUser({name: response.data.name})\n\t\t\t\tpeerConnection.addEventListener('icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\n\t\t\t\tpeerConnection.addEventListener('iceconnectionstatechange', (e:any)=>{\n\t\t\t\t\tif (pcRef.current.pc.iceConnectionState == 'connected'){\n\t\t\t\t\t\tlet activeStream = false\n\t\t\t\t\t\tpcRef.current.statsInterval = setInterval(async()=>{\n\t\t\t\t\t\t\tconst stats = await pcRef.current.pc.getStats(null)\n\t\t\t\t\t\t\tlet statsOutput = \"\";\n\t\t\t\t\t\t\tlet framePerSecond = undefined\n\t\t\t\t\t\t\tstats.forEach((report:any) => {\n\t\t\t\t\t\t\t\tif (report.type === \"inbound-rtp\" && report.kind === \"video\") {\n\t\t\t\t\t\t\t\t\tObject.keys(report).forEach((statName) => {\n\t\t\t\t\t\t\t\t\t\tstatsOutput += `${statName}: ${report[statName]}\\n`;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tframePerSecond = report.framesPerSecond\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(activeStream, framePerSecond)\n\t\t\t\t\t\t\tif (framePerSecond != undefined){\n\t\t\t\t\t\t\t\tactiveStream = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (activeStream){\n\t\t\t\t\t\t\t\tstop()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(new Date().toTimeString().split(' ')[0], statsOutput)\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t\telse if (pcRef.current.pc.iceConnectionState == 'failed'){\n\t\t\t\t\t\tstop()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// peerConnection.addTransceiver('audio', {\n\t\t\t\t// \tdirection: 'recvonly'\n\t\t\t\t// });\n\t\t\t\tpeerConnection.addTransceiver('video', {\n\t\t\t\t\tdirection: 'recvonly'\n\t\t\t\t});\n\t\t\t\tawait createOffer({pc:pcRef.current.pc, receiver:response.sender}, sendMessage, _stream, 'host', user)\n\t\t\t}  \n\t\t\tif (type == \"answer\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\n\t\t\t\tconsole.log('(remote)3 answer')\n\t\t\t\tconst answerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t\tawait pcRef.current.pc.setRemoteDescription( answerDescription );\n\t\t\t\tconst streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t\tsetStream(streams[streams.length - 1])\n\t\t\t\tsendMessage({type:'end', receiver:pcRef.current.receiver, data:{}})\n\t\t\t}\n\t\t\tif (type == \"call\" && response.sender == pcRef.current?.receiver){\n\t\t\t  console.log('2 call')\n\t\t\t  const peerConnection = pcRef.current.pc\n\t\t\t  setUser({name:response.data.name})\n\t\t\t  if (!peerConnection)\n\t\t\t\treturn\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\n\t\t\t  const offerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t  await peerConnection.setRemoteDescription( offerDescription );\n\t\t\t  const answerDescription = await peerConnection.createAnswer( sessionConstraints );\n\t\t\t  await peerConnection.setLocalDescription( answerDescription );\n\t\t\t  sendMessage({type:'answer', receiver:pcRef.current.receiver, data:{target:'host', rtcMessage:peerConnection.localDescription}})\n\t\t\t  // Here is a good place to process candidates.\n\t\t\t  const streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t  setStream(streams[streams.length - 1])\n\t\t\t}\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver)\n\t\t\t  onICEcandidate(pcRef.current.pc, response)\n\t\t},\n\t\tCustomRTCView,\n\t\tuser,\n\t\tisPlay\n\t}\n}","import {StyleSheet} from \"react-native\";\nexport {useLocalCam, useRemoteCam} from \"./p2p\"\n\nexport const camStyle = StyleSheet.create({\n\tcontainer:{ flex: 1},\n\tcam:{ flex: 1, height:'100%'},\n\tbottonContainer: {position:\"absolute\", bottom:0, justifyContent:'flex-end'},\n\tbuttonBar: { flexDirection: \"row\", justifyContent: \"space-around\" },\n\tlabel: {backgroundColor:'#0008', color:'white', paddingHorizontal:5},\n})","import React, { useEffect } from \"react\";\nimport {Button, View, Text} from \"react-native\";\nimport useWebsocketContext from \"./useWebsocketContext\";\nimport { useLocalCam, camStyle} from \"./webrtc\";\n\n\nexport default (props:{user?:{name:string}|null, mode?:'camera'|'display'|null})=>{\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay} = useLocalCam(sendJsonMessage)\n  useEffect(()=>{\n    props.user && lastJsonMessage && websocketOnMessage(lastJsonMessage, props.user)\n  }, [lastJsonMessage, props.user])\n  useEffect(()=>{\n    if(props.mode && !isPlay){\n      props.user && start(props.user, undefined, props.mode)\n    }\n    else if(props.mode===null && isPlay){\n      stop()\n    }\n    return ()=>{isPlay && stop()}\n  }, [isPlay, props.user, props.mode])\n  return (\n    <View style={camStyle.container}>\n      <CustomRTCView style={camStyle.cam}/>\n      <View style={camStyle.bottonContainer}>\n        <View style={camStyle.buttonBar}>  \n        </View>\n        <View style={{flexDirection:'row'}}><Text style={camStyle.label}>{props.user?.name}</Text></View>\n        <View style={camStyle.buttonBar}>\n          {props.mode === undefined && !isPlay && <Button title=\"Start\" onPress={()=>props.user && start(props.user)} />}\n          {props.mode === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\n        </View>\n      </View>\n    </View>\n  );\n}\n","import React, { useState, useEffect, } from \"react\";\nimport {Button,Text, TextInput, View} from \"react-native\";\nimport useWebsocketContext from \"./useWebsocketContext\";\nimport { useRemoteCam, camStyle} from \"./webrtc\";\n\nexport default (props:{receiver?:string})=>{\n  const [receiver, setReceiver] = useState('')\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay, user} = useRemoteCam(sendJsonMessage)\n  useEffect(()=>{\n    lastJsonMessage && websocketOnMessage(lastJsonMessage)\n  }, [lastJsonMessage])\n  useEffect(()=>{\n    if(props.receiver){\n      start(props.receiver)\n    }\n    return ()=>stop()\n  }, [props.receiver])\n  return (\n    <View style={camStyle.container}>\n      <CustomRTCView style={camStyle.cam}/>\n      <View style={camStyle.bottonContainer}>\n        <View style={camStyle.buttonBar}>\n        </View>\n        <View style={{flexDirection:'row'}}>{\n          (props.receiver || isPlay)?\n          <Text style={camStyle.label}>{user?.name || 'loading...'}</Text>:\n          <>\n            <Text style={{borderWidth:1}}>Receiver:&nbsp;</Text>\n            <TextInput style={{borderWidth:1, flex:1}} value={receiver} onChangeText={setReceiver}/>\n          </> \n        }</View>\n        <View style={camStyle.buttonBar}>\n          {props.receiver === undefined && !isPlay && <Button title=\"Start\" onPress={()=>start(receiver)} />}\n          {props.receiver === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\n        </View>\n      </View>\n    </View>\n  );\n}\n\n","import React, {useEffect, useState} from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport { View as ThemedView } from '../../../components/Themed' \nimport Colors from '../../../constants/Colors';\nimport {default as useRtcContext, WebSocketProvider as RtcProvider} from \"../../../lib/react-native-webrtc/useWebsocketContext\";\nimport LocalCam from '../../../lib/react-native-webrtc/LocalCam';\nimport RemoteCam from '../../../lib/react-native-webrtc/RemoteCam';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport CommonButton from '../../../components/CommonButton';\nimport { Ionicons } from '../../../lib/@expo/vector-icons';\nimport useIsMobile from '../../../hooks/useIsMobile';\n\ntype VideoType = 'camera'|'display'|null\ntype VideoCallProps = {channel_id:number, setDisable:(disable:boolean)=>void, disable?:boolean}\n\n\nconst VideoView = (props:{\n  scale:string,\n  focusGuest?:string,\n  setFocusGuest:(focusGuest?:string)=>void\n  receiver?:string\n  children:React.ReactNode\n})=>{\n  return <View style={[{maxWidth:props.scale, maxHeight:props.scale, borderWidth:1, borderColor:Colors.borderColor, backgroundColor:'gray', flexDirection:'row', flexGrow:1}, (props.focusGuest == undefined || props.focusGuest == props.receiver)?{height:'100%'}:{maxWidth:0, height:0}]}>\n    <TouchableOpacity style={{flex:1}} containerStyle={{flex:1, justifyContent:'center'}} onPress={()=>props.setFocusGuest(props.focusGuest?undefined:props.receiver)}>\n    {props.children}\n    </TouchableOpacity>\n  </View>\n    \n  \n}\n\nconst VideoCallContainer = ({channel_id, disable, setDisable}:VideoCallProps)=>{\n  const {auth} = useAuthContext()\n  const isMobile = useIsMobile()\n  const [videoMode, setVideoMode] = useState<VideoType>(null)\n  const [guests, setGuests] = useState<string[]>([])\n  const [focusGuest, setFocusGuest] = useState<string>()\n  const windowType = useResizeContext()\n  const { lastJsonMessage, sendJsonMessage } = useRtcContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null){\n      if(lastJsonMessage['type']=='connection'){\n        sendJsonMessage({'type':'broadcast', 'data':{'channel_id':channel_id}})\n      }\n      if(lastJsonMessage['type']=='broadcast_guest' || lastJsonMessage['type']=='broadcast_host'){\n        setGuests([...guests, lastJsonMessage['sender']])\n      }\n      if(lastJsonMessage['type']=='broadcast_disconnect'){\n        const channel_name = lastJsonMessage['sender']\n        const exist = guests.find(v=>v == channel_name)\n        exist && setGuests(guests.filter(v=>v != channel_name))\n      }\n    }\n  }, [lastJsonMessage])\n  const scale = focusGuest?'100%':`${100 / Math.max(2, Math.ceil(Math.sqrt(guests.length + 1)))}%`\n  const toggleVideoMode = (mode:VideoType)=>{\n    setVideoMode(videoMode!=mode?mode:null)\n  }\n  return lastJsonMessage !==undefined ?\n    <ThemedView style={[\n      {aspectRatio:!disable?16/9:0, borderColor:Colors.borderColor, borderRadius:10},\n      windowType=='landscape'?{flexShrink:1, flexGrow:0, height:'100%', borderLeftWidth:1, paddingBottom:65}:{maxHeight:'36%', width:'100%', borderBottomWidth:1}\n    ]}>\n      <View style={{aspectRatio:focusGuest?undefined:16/9, backgroundColor:'white', flexWrap:'wrap', flexDirection:'row', width:'100%', height:'100%'}}>\n        {guests.map((receiver, i)=><VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={receiver}>\n          <RemoteCam receiver={receiver}/>\n        </VideoView>\n        )}\n        <VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={auth.user?.name}>\n          <LocalCam user={auth.user} mode={videoMode}/>\n        </VideoView>\n      </View>\n      <ThemedView style={[\n          {position:'absolute', alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\n          windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\n        ]}>\n        <CommonButton title={'⏺️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('camera')}/>\n        {!isMobile && <CommonButton title={'🖥️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('display')}/>}\n        <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>setDisable(true)}>\n          <Ionicons size={20} name=\"arrow-back\" color={'deepskyblue'}/>\n        </CommonButton>\n      </ThemedView>\n    </ThemedView>:\n  <></>\n  }\n  \nexport default React.memo(({channel_id, disable, setDisable}:VideoCallProps)=>{\n  return <RtcProvider disable={disable}>\n    <VideoCallContainer channel_id={channel_id} disable={disable} setDisable={setDisable}/>\n  </RtcProvider>\n})\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { deleteUser, getUserMembershipList, patchUser, postUser } from \"../../services\";\nimport useAuthContext, { Auth } from \"../useAuthContext\";\n\nexport default function useUserMembershipList(auth?:Auth){\n  const { data } = useQuery([\"UserMembershipList\", auth?.groupId] , async()=>auth?.groupId?(await getUserMembershipList(auth?.groupId)):[])\n  return data\n}\n\nexport function useUserMembershipMutation(){\n  const queryClient = useQueryClient()\n  const { auth, dispatch } = useAuthContext()\n  const _create = useMutation(postUser, {\n    onSuccess: ()=>{\n      queryClient.invalidateQueries(\"UserMembershipList\")\n    }\n  })\n  const _update = useMutation(patchUser, {\n    onSuccess: (data, user)=>{\n      if (user.id == auth.user?.id)\n        if(user.username && user.password){\n          dispatch({type:'LOGIN_REQUEST', username:user.username, password:user.password})\n        }\n        else{\n          dispatch({type:\"REFRESH\"})\n        }\n      else{\n        queryClient.invalidateQueries(\"UserMembershipList\")\n      }\n    }\n  })\n  const _delete = useMutation(deleteUser, {\n    onSuccess: (data, id)=>{\n      queryClient.invalidateQueries(\"UserMembershipList\")\n      if (id == auth.user?.id)\n        dispatch({type:\"LOGOUT_REQUEST\"})\n    }\n  })\n  return {create:_create.mutateAsync, update:_update.mutateAsync, delete:_delete.mutateAsync}\n}","import { useQuery } from \"react-query\";\nimport { getExternalMembershipList } from \"../../services\";\n\nexport default function useExternalMembershipList(keyword?:string){\n  const { data } = useQuery([\"UserMembershipList\", keyword] , async()=>keyword?(await getExternalMembershipList(keyword)):[])\n  return data\n}","import React, { useState } from 'react';\nimport { TextInput } from 'react-native';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { CustomTextInputProps } from '../types';\n\nexport default (props:CustomTextInputProps)=>{\n    const [contentHeight, setContentHeight] = useState<number>()\n    const minHeight = props.minHeight || 30\n    const theme = useColorScheme()\n    return <TextInput style={[{\n            borderColor:'#d0d7de', \n            fontSize:16, \n            borderWidth:1, \n            borderRadius:6, \n            paddingHorizontal:10, \n            paddingVertical:3, \n            backgroundColor:Colors[theme].background,\n            color:Colors[theme].text,\n            height:props.multiline?contentHeight:minHeight,\n        }, props.style]}\n        placeholder={props.placeholder}\n        editable={!props.disabled} \n        keyboardType={props.keyboardType}\n        secureTextEntry={props.secureTextEntry}\n        value={props.value}\n        onChangeText={props.setValue}\n        onContentSizeChange={props.multiline?(e) => setContentHeight(Math.max(e.nativeEvent.contentSize.height, minHeight) + 2):undefined}\n        onBlur={()=>props.onBlur?.(props.value)}\n        onEndEditing={()=>props.onEndEditing?.(props.value)}\n        multiline={props.multiline}\n    />\n}","import React, { useMemo } from 'react';\n\nimport { TextProps, StyleProp } from 'react-native';\nimport {View, Text } from './Themed'\nimport useResizeContext from '../hooks/useResizeContext';\n\ntype Props = {\n  name: string,\n  width?:any,\n  children: React.ReactNode\n  textStyle?: StyleProp<TextProps>\n}\n\nexport default function RowField(props:Props) {\n  const windowType = useResizeContext()\n  const rowStyle = useMemo(()=>windowType=='landscape'?\n    {flexDirection:'row', alignItems: 'center', justifyContent:'space-between'}:\n    {flexDirection:'column', alignItems:'flex-start'} as any\n  , [windowType])\n  return (\n    <View style={[{paddingVertical:windowType=='landscape'?15:5, width:'100%'}, rowStyle]}>\n        <Text style={[windowType=='landscape'?{flex:1}:{width:'100%'},{paddingHorizontal: 15, fontSize:16}, props.textStyle]}>{props.name}</Text>\n        <View style={[windowType=='landscape'?{flex:6}:{width:'100%'},{paddingHorizontal: 15}]}>\n          <View style={{width:props.width}}>\n            {props.children}\n          </View>\n        </View>\n    </View>\n  )\n}","import React from 'react';\nimport { StyleProp, TextStyle } from 'react-native';\nimport { CustomTextInputProps } from '../types';\nimport CommonTextInput from './CommonTextInput';\nimport RowField from './RowField';\n\nexport default function TextField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\n  return (\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\n      <CommonTextInput {...props} />\n   </RowField>\n  )\n}","import { useMemo, useReducer } from \"react\"\n\ntype LocalSearchAction = {type:string, keyword?:string}\n\ntype LocalSearchState ={active:boolean, keyword:string}\n\n\n\nconst localSearchReducer =(initialState:LocalSearchState, action:LocalSearchAction)=>{\n    switch (action.type){\n        case 'SEARCH':\n          return {\n            ...initialState,\n            keyword: action.keyword\n          } as LocalSearchState\n        case 'ENABLE_SEARCH':\n          return {\n            ...initialState,\n            active:true,\n          }\n        case 'DISABLE_SEARCH':\n            return{\n                ...initialState,\n                active:false,\n                keyword: ''\n            }\n        default:\n            throw new Error( `Unhandled action type: ${action.type}`)\n    }\n  }\n\n\nexport default function useLocalSearch<T>(target:T[], compare:(value:T, keyword:string)=>boolean) {\n  const [searchState, dispatch] = useReducer(localSearchReducer, {active:false, keyword:''})\n  const data = useMemo(()=>searchState.active?target.filter(v=>compare(v, searchState.keyword)):target, [searchState, target])\n  return {searchState, dispatch, data}\n}","import React from 'react';\nimport { TabView, SceneMap,NavigationState, SceneRendererProps, TabBar } from 'react-native-tab-view';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport useLangContext from '../hooks/useLangContext';\nimport { TabViewRecord } from '../types';\n\n\nexport default (props:{tabs:TabViewRecord, tabBarPosition:\"top\"|\"bottom\", index?:number, onTab?:(index:number)=>void})=>{\n  const { lang } = useLangContext()\n  const [index, setIndex] = React.useState(props.index || 0);\n  const theme = useColorScheme()\n  const entries = Object.entries(props.tabs)\n  const onTab = props.onTab\n  const icons = Object.assign({}, ...entries.map(([k, v])=>({[k]:v.icon})))\n  return <TabView\n    renderTabBar={(props:SceneRendererProps & {navigationState: NavigationState<any>})=>{\n      return <TabBar\n        {...props}\n        indicatorStyle={{ backgroundColor: \"#2196F3\" }}\n        style={{ backgroundColor:Colors[theme].background }}\n        activeColor={Colors[theme].text}\n        inactiveColor={Colors[theme].text}\n        renderIcon={(scene)=>icons[scene.route.key]}\n        onTabPress={(scene)=>onTab?.(entries.findIndex(([k, v])=>k == scene.route.key))}\n      />\n    }}\n    navigationState={{ index, routes: entries.map(([k, v])=>({key:k, title:lang(v.title)}))}}\n    onIndexChange={setIndex}\n    renderScene={SceneMap(Object.assign({}, ...entries.map(([k, v])=>({[k]:v.component}))))}\n    tabBarPosition={props.tabBarPosition}\n  />\n}\n\n","import * as React from 'react';\nimport { View } from './Themed';\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle, Pressable } from 'react-native';\nimport Colors from '../constants/Colors';\n\nexport type ItemParamList = {\n    outerContainerStyle?:StyleProp<TextStyle>\n    containerStyle?:StyleProp<ViewStyle>\n    bodyStyle?:StyleProp<ViewStyle>\n    children?: React.ReactNode\n    onPress?: ()=>void\n}\n\nexport default function CommonItem(props:ItemParamList){\n  // const [hover, setHover] = React.useState(false)\n  const [press, setPress] = React.useState(false)\n  return (\n    <Pressable\n      style={[styles.outerContainer ,props.outerContainerStyle, (press)?{backgroundColor:'rgb(242,242,242)'}:{}]}\n      onPressIn={()=>setPress(true)}\n      onPress={()=>props.onPress?.()}\n      onPressOut={()=>setPress(false)}\n      //  //@ts-ignore\n      //  onHoverIn={()=>setHover(true)}\n      //  onHoverOut={()=>setHover(false)}\n    >\n        <View style={[styles.container ,props.containerStyle]}>\n            <View style={[styles.bodyView, props.bodyStyle]}>\n                <>{props.children}</>\n            </View>\n      </View>\n    </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({\n  outerContainer:{\n    width:'100%',\n    maxWidth:1080,\n    alignItems:'stretch',\n  },  \n  container: {\n      marginHorizontal:20,\n      backgroundColor:'transparent'\n    },\n    bodyView:{\n      width: '100%',\n      padding: 10,\n      minHeight: 40,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderBottomWidth:1,\n      borderColor:Colors.borderColor,\n      backgroundColor:'transparent'\n    }\n  });\n  ","import React from \"react\"\nimport CommonItem from \"./CommonItem\"\nimport { UserMembership } from \"../types\"\nimport Avatar from \"./Avatar\"\nimport { Text, View } from \"./Themed\"\n\nexport default ({member:item, onPress}:{member:UserMembership, onPress?:()=>void})=> {\n    return <CommonItem key={item.id} bodyStyle={{flexDirection:'row', justifyContent:'flex-start'}} onPress={onPress}>\n        <View style={{marginTop:4, marginRight:12}}><Avatar name={item.name} userId={item.id} size={44}/></View>\n        <Text style={{fontSize:20, fontWeight:'400'}}>{item.name}</Text>\n    </CommonItem>\n}","\nimport React, {useState} from 'react';\nimport { StyleProp, TextStyle, View } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\nimport useLangContext from '../hooks/useLangContext';\nimport { CustomTextInputProps } from '../types';\nimport CommonButton from './CommonButton';\nimport RowField from './RowField';\nimport { Text } from './Themed';\nimport useResizeContext from '../hooks/useResizeContext';\n\nexport default function CopyField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\n  const { lang } = useLangContext()\n  const windowType = useResizeContext()\n  const [copied, setCopied] = useState(false)\n  return (\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\n      <View style={{flexDirection:windowType=='landscape'?'row':'column', justifyContent:'space-between'}}>\n        <View style={{justifyContent:'center'}}>\n          <Text style={{fontSize:16}}>{props.value}</Text>\n        </View>\n        <View>\n          <CommonButton title={lang('copy')} onPress={()=>{Clipboard.setString(props.value);setCopied(true)}}/>\n          {copied && <Text style={{fontSize:12, alignSelf:'center', color:'red'}}>{lang(\"copied\")}</Text>}\n        </View>\n      </View>\n   </RowField>\n  )\n}","import React, {useRef,MutableRefObject, useMemo, useState, useEffect } from 'react';\nimport Clipboard from '@react-native-clipboard/clipboard/dist';\nimport { View, Text } from '../components/Themed';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport { TabViewRecord, UserMembership } from '../types';\nimport CommonButton from '../components/CommonButton';\nimport useMessengerMemberList, { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\nimport useModalsContext from '../hooks/useModalsContext';\nimport useExternalMembershipList from '../hooks/lists/useExternalMembershipList';\nimport TextField from '../components/TextField';\nimport useLocalSearch from '../hooks/useLocalSearch';\nimport TabView from '../components/TabView';\nimport { FlatList, TouchableOpacity } from 'react-native-gesture-handler';\nimport useLangContext from '../hooks/useLangContext';\nimport MemberItem from '../components/MemberItem';\nimport ModalSection from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\nimport CopyField from '../components/CopyField';\n\nconst InviteItem = (props:{item:UserMembership, selectedRef:MutableRefObject<Set<number>>})=>{\n  const [selected, setSelected] = useState(props.selectedRef.current.has(props.item.id))\n  return <View style={selected?{borderWidth:1, borderColor:'blue'}:{}}>\n    <MemberItem member={props.item} onPress={()=>{\n      if (selected){\n        setSelected(false)\n        props.selectedRef.current.delete(props.item.id)\n      }\n      else{\n        setSelected(true)\n        props.selectedRef.current.add(props.item.id)\n      }\n    }}/>\n  </View>\n\n}\ntype InviteTabViewProps = {\n  id:number,\n  selectedRef:MutableRefObject<Set<number>>\n}\n\nconst GroupTabView = ({id, selectedRef}:InviteTabViewProps)=>{\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const memberList = useMessengerMemberList(id)\n  const messengerMemberMutation = useMessengerMemberMutation()\n  const rawData = useMemo(()=>{\n    const memberSet = new Set(memberList?.map(v=>v.user))\n    return userList?.filter(v=>!memberSet.has(v.id)) || []\n  }, [userList, memberList])\n  const {data, dispatch:dispatchKeyword, searchState} = useLocalSearch(rawData, (v, keyword)=>(v.username.includes(keyword) || v.name.includes(keyword)))\n  const search = (k:string)=>{\n    if (k?.length>0){\n      dispatchKeyword({type:'ENABLE_SEARCH'})\n      dispatchKeyword({type:'SEARCH', keyword:k})\n    }\n    else{\n      dispatchKeyword({type:'DISABLE_SEARCH'})\n    }\n  }\n  const back = ()=>{\n    setModal(InviteModal, null)\n  }\n  useModalEffect(back, [])\n  return <View style={{alignItems:'center', flex:1}}>\n    <View style={{'width': '100%', flex:1}}>\n      <TextField name={`${lang('Username')} & ${lang('Name')}`} placeholder={auth.user?.name} value={searchState.keyword} setValue={search} width={'80%'}/>\n      {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\n    </View>\n    <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\n      <CommonButton title={lang('invite')} onPress={()=>{\n        messengerMemberMutation.invite({\n          channel_id:id,\n          user_ids:[...selectedRef.current]\n        }).then(back)\n      }}/>\n      <CommonButton title={lang('cancel')} onPress={back}/>\n    </View>\n  </View>\n}\n\nconst DELAY = 500\n\nconst ExternalMembershipTabView = ({id, selectedRef}:InviteTabViewProps)=>{\n  const { lang } = useLangContext()\n  const [value, setValue] = useState('')\n  const [keyword, setKeyword] = useState('')\n  const [copied, setCopied] = useState(false)\n  const timeoutRef = useRef<NodeJS.Timeout>()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const memberList = useMessengerMemberList(id)\n  const externalMemberList = useExternalMembershipList(keyword)\n  const data = useMemo(()=>{\n    const memberSet = new Set(memberList?.map(v=>v.user))\n    return externalMemberList?.filter(v=>!memberSet.has(v.id)) || []\n  }, [externalMemberList, memberList])\n  const messengerMemberMutation = useMessengerMemberMutation()\n  useEffect(()=>{\n    timeoutRef.current = setTimeout(()=>{\n      setKeyword(value)\n    }, DELAY)\n    return ()=>{timeoutRef.current && clearTimeout(timeoutRef.current)}\n  }, [value])\n  const back = ()=>{\n    setModal(InviteModal, null)\n  }\n  const inviteLink = location.href.replace('chat', 'invitee')\n  return <View style={{alignItems:'center', flex:1}}>\n  <View style={{'width': '100%', flex:1, paddingVertical:10}}>\n    <CopyField name={lang('invite link')} width={'80%'} value={inviteLink}/>\n    <View style={{marginVertical: 10, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    <TextField name={lang('Username')} placeholder={auth.user?.username} value={value} setValue={setValue} width={'80%'}/>\n    {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\n  </View>\n  <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\n    <CommonButton title={lang('invite')} onPress={()=>{\n      messengerMemberMutation.invite({\n        channel_id:id,\n        user_ids:[...selectedRef.current]\n      }).then(back)\n    }}/>\n    <CommonButton title={lang('cancel')} onPress={back}/>\n  </View>\n</View>\n}\n\nexport default function InviteModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const selectedRef = useRef<Set<number>>(new Set())\n  const drawerTabs:TabViewRecord = {\n    group:{\n      title: 'Group',\n      component: ()=><GroupTabView id={id} selectedRef={selectedRef}/>,\n      icon: <></>\n    },\n    external:{\n      title: 'External members',\n      component: ()=><ExternalMembershipTabView id={id} selectedRef={selectedRef}/>,\n      icon: <></>\n    }\n  }\n  return <ModalSection>\n    <View style={{flex:1, width:'100%'}}>\n      <View style={{width:'100%'}}>\n        <Text style={{fontSize:20}}>{lang('invite')}</Text>\n        <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n      </View>\n      <TabView tabs={drawerTabs} tabBarPosition={\"top\"}/>\n    </View>\n  </ModalSection>\n}\n\n","import React, { Suspense, useState } from 'react';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\nimport dayjs from 'dayjs';\nimport useModalEffect from '../hooks/useModalEffect';\n\nconst dayTypes = ['AM', 'PM'].map(value=>({label:value, value}))\nconst hours = [...Array(12).keys()].map((value, index)=>(index + 1).toString().padStart(2, '0')).map(value=>({label:value, value}))\nconst minutes = [...Array(12).keys()].map((value, index)=>(index * 5).toString().padStart(2, '0')).map(value=>({label:value, value}))\n\n\nconst getDisableDays=(date:dayjs.Dayjs)=>{\n  let startDate = date.clone().startOf('month').add(-1, 'month')\n  const endDate = date.clone().endOf('month').add(1, 'month')\n  const today = dayjs().startOf('day')\n  const result = []\n  while(startDate<=endDate && startDate<today){\n    result.push(startDate.format('YYYY-MM-DD'))\n    startDate = startDate.add(1, 'day')\n  }\n  return result\n}\n\nconst defaultDayjs = ()=>{\n  const m = dayjs()\n  const restMinute = parseInt(m.format('mm')) % 5\n  return m.add(5-restMinute, 'minute')\n}\n\nconst Calendar = React.lazy(()=> import('../components/Calendar'))\nconst CommonPicker = React.lazy(()=>import('../components/CommonPicker'))\n\nexport default function DateTimePickerModal({datetime, callback}:{datetime?:string, callback:(datetime?:string)=>void}) {\n  const _dayjs = datetime?dayjs(datetime):defaultDayjs()\n  const { lang, locale } = useLangContext()\n  const theme = useColorScheme()\n  const [date, setDate] = useState(_dayjs.format('YYYY-MM-DD'));\n  const [dayType, setDayType] = useState(_dayjs.locale('en').format('A'))\n  const [hour, setHour] = useState(_dayjs.format('hh'))\n  const [minute, setMinute] = useState(_dayjs.format('mm'))\n  const [disableDays, setDisableDays] = useState<string[]>(getDisableDays(_dayjs))\n  const { setModal } = useModalsContext()\n  const back = ()=>{\n    setModal(DateTimePickerModal, null)\n  }\n  useModalEffect(back, [])\n  return <BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Date & Time')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    <Suspense fallback={<></>}>\n      <Calendar\n        locale={locale}\n        style={undefined} \n        setDate={setDate}\n        disableAllTouchEventsForDisabledDays={true}\n        onMonthChange={(v)=>setDisableDays(getDisableDays(dayjs(v.dateString)))}\n        markedDates={{\n          ...disableDays.reduce((p, c)=>{p[c]={disabled:true};return p}, {} as Record<string, any>),\n          ...(date?[date]:[]).reduce((p, c)=>{p[c]={selected:true};return p}, {} as Record<string, any>)\n        }}\n      />\n      <View style={{flexDirection:'row', paddingVertical:10, width:400, height:50}}>\n        <CommonPicker value={dayType} setValue={setDayType} values={dayTypes}/>\n        <Text style={{fontSize:20}}> </Text>\n        <CommonPicker value={hour} setValue={setHour} values={hours}/>\n        <Text style={{fontSize:20}}> : </Text>\n        <CommonPicker value={minute} setValue={setMinute} values={minutes}/>\n      </View>\n    </Suspense>\n    <View style={{flexDirection:'row'}}>\n      <CommonButton title={lang('save')} onPress={()=>{\n        callback?.(dayjs(`${date} ${hour}:${minute} ${dayType}`).toISOString())\n        back()\n      }}/>\n      <CommonButton title={lang('cancel')} onPress={()=>{\n        callback?.(undefined)\n        back()\n      }}/>\n      \n    </View>\n  </BottomSheet>\n}\n","import React, {useState, useEffect } from 'react';\nimport { StyleSheet } from 'react-native';\nimport { View, Text } from '../components/Themed';\nimport CommonButton from '../components/CommonButton';\n// import useBoardChannelList, { useBoardChannelMutation } from '../hooks/lists/useBoardChannelList';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { navigate } from '../navigation';\nimport { Channel } from '../types';\nimport useMessengerChannelList, { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\nimport TextField from '../components/TextField';\nimport useModalsContext from '../hooks/useModalsContext';\nimport useLangContext from '../hooks/useLangContext';\nimport ModalSection from '../components/ModalSection';\nimport { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\nimport { avatarFromChannel } from '../components/Avatar';\nimport useModalEffect from '../hooks/useModalEffect';\n\nexport default function ChannelEditModal({id, member_id, type}: {id?:number, member_id?:number, type:string}) {\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const channelList = useMessengerChannelList(auth)\n  const channelMutation = useMessengerChannelMutation()\n  const messengerMemberMutation = useMessengerMemberMutation()\n  const channel = channelList?.find(v=>v.id==id)\n  const [name, setName] = useState('')\n  const [description, setDescription] = useState('')\n  const back = ()=>{\n    setModal(ChannelEditModal, null)\n  }\n\n  useEffect(()=>{\n    if (channel){\n      const {name:_name} = avatarFromChannel(channel, auth.user)\n      setName(_name)\n      setDescription(channel?.description || '')\n    }\n  }, [channel?.id])\n  useModalEffect(back, [])\n  return <ModalSection>\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\n      <View style={{width:'100%'}}>\n        <Text style={{fontSize:20}}>{id?lang('Chat Setting'):lang('New chat')}</Text>\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n        <TextField name={lang('Channel Name')} value={name} setValue={setName} width={'60%'}/>\n        <TextField name={lang('Description')} value={description} setValue={setDescription} multiline width={'60%'}/>\n      </View>\n      <View style={{width:'100%', flexDirection:'row'}}>\n        {member_id &&<View style={{flexDirection:'row', justifyContent:'flex-start'}}>\n          <CommonButton title={lang('leave')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>messengerMemberMutation.leave(member_id).then(back)}/>\n        </View>}\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\n          <CommonButton title={lang('save')} onPress={()=>{\n            if(auth?.user?.id && auth.groupId){\n              const newChannel:Channel = {id, name, description, type, owner:auth?.user?.id, group:auth.groupId};\n              (id?channelMutation.update(newChannel):channelMutation.create(newChannel)).then(v=>navigate(\"Main\", {\n                screen:v.type == 'messenger'?'ChatScreen':'BoardScreen',\n                params:{id:v.id}\n              }))\n            }\n          }}/>\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\n        </View>\n      </View>\n    </View>\n  </ModalSection>\n}\n\nconst styles = StyleSheet.create({\n  field:{\n    width:'50%',\n    flexDirection:'row',\n    padding:10,\n  },\n  separator: {\n    marginBottom: 20,\n    height: 1,\n    width: '100%',\n  },\n})","import React, {useState} from \"react\"\nimport {View, TouchableOpacity} from 'react-native'\nimport { Text } from \"../../../components/Themed\";\nimport useUploadContext from \"../../../hooks/useUploadContext\";\n\nconst UploadTag = (props:{data:{filename:string, progress?:number}, index:number, isExpand:boolean, setExpand:(index?:number)=>void})=>{\n    return <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\n        <View style={{backgroundColor:'darkgray', position:'absolute', width:`${(props.data.progress || 0)*100}%`, height:'100%'}}/>\n        <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\n            <Text>📤</Text>\n            <View style={{paddingHorizontal:5}}><Text>{props.data.filename}</Text></View>\n        </View>\n    </View>\n}\n\n\nexport default (props:{channel_id:number})=>{\n    const { upload } = useUploadContext()\n    const [expand, setExpand] = useState<number>()\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:20}}>\n        {upload[props.channel_id]?.map((f,i)=><UploadTag key={i} data={f} index={i} isExpand={i==expand} setExpand={setExpand}/>)}\n    </View>\n}","import React from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\nimport { EditorProps } from '../../types';\nconst INIT = require('../../../web/editor-config')\nconst PATH = process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'\n\nexport default (props:EditorProps) => {\n\treturn <Editor\n        tinymceScriptSrc={PATH}\n        onInit={(e, editor) => {props.onReady?.()}}\n        onEditorChange={props.setValue}\n        init={{\n          plugins: INIT.plugins,\n          toolbar: INIT.toolbar,\n          min_height: 320,\n          menubar: false,\n          branding: false,\n          statusbar: false,\n          block_formats: '제목1=h2;제목2=h3;제목3=h4;본문=p;',\n          fontsize_formats: '11pt 14pt 18pt 24pt',\n        }}\n        value={props.value}\n    />\n};\n","import React, { useState, useEffect } from 'react';\nimport { View } from 'react-native';\nimport Editor from '../lib/tinymce/Editor';\n// import Editor from '../lib/tinymce/EditorView';\nimport { EditorProps } from '../types';\n\nexport default (props:EditorProps & {active:boolean, children?:React.ReactNode}) => {\n\tconst [ready, setReady] = useState<boolean>(false)\n  useEffect(()=>{\n    if(!props.active)\n      setReady(false)\n  }, [props.active])\n  return props.active?(\n        <View style={{flex:1}}>\n        {!ready && props.children}\n    \t  <Editor\n          value={props.value}\n          setValue={props.setValue}\n          onReady={()=>{\n            if(!ready){\n              setReady(true); props.onReady?.()\n            }\n          }}/>\n      </View>\n    ):<>{props.children}</>;\n};\n","import React from 'react';\nimport {View} from 'react-native'\nimport {Text} from './Themed';\nimport { ProfileProps } from '../types';\nimport Avatar from './Avatar';\n\nexport default (props:ProfileProps)=>{\n    return <View style={{width:'100%', height:135, justifyContent:'space-evenly', alignItems:'center'}}>\n        <Avatar {...props} size={75}/>\n        <Text style={{fontWeight:'bold', fontSize:15}}>{props.name}</Text>\n        <Text style={{fontWeight:'normal', fontSize:14}}>{props.username}</Text>\n    </View>\n}","import React, { useEffect } from 'react';\nimport Profile from '../components/Profile';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\nimport CommonButton from '../components/CommonButton';\nimport { Channel } from '../types';\nimport { navigate } from '../navigation';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\n\nexport default function ProfileModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const theme = useColorScheme()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const user = userList?.find(v=>v.id==id)\n  const isSelf = auth.user && user && (auth.user?.id==user?.id)\n  const channelMutation = useMessengerChannelMutation()\n  const back = ()=>{\n    setModal(ProfileModal, null)\n  }\n  useEffect(()=>{\n    if (!(id && user) && userList)\n      back()\n  }, [userList])\n  useModalEffect(back, [])\n  return user?<BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('profile')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    \n    <Profile username={user.username} name={user.name} userId={user.id} />\n    <CommonButton title={lang(isSelf?'Chat with me':'1:1 Chat')} onPress={()=>{\n      if(auth?.user?.id && auth.groupId){\n        const newChannel:Channel = {name:\"\", type:'messenger', owner:auth?.user?.id, group:auth.groupId, subowner:isSelf?undefined:user.id};\n        channelMutation.direct(newChannel).then(v=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id:v.id}}))\n      }\n    }}/>\n  </BottomSheet>:<></>\n}\n","import React, { useState,  useEffect, createContext, useMemo, useRef, useContext } from \"react\"\nimport firebase from \"firebase/app\";\nimport \"firebase/messaging\";\nimport {FCM_PUBLIC_VAPID_KEY, FCM_API_KEY} from \"../constants/Envs\"\nimport { Notification as NotificationType, UserMembership } from \"../types\";\nimport { getNotification, postNotification, putNotification } from \"../services/notification\";\n\nconst firebaseConfig = require(\"../../web/firebase-config.js\")\n// Initialize Firebase\nconst key = firebaseConfig.messagingSenderId\nconst apiKeyEncrypted = (FCM_API_KEY as string).split('').map((v, i)=> (v.charCodeAt(0) ^ key.charCodeAt(i)).toString(16).padStart(2, '0')).join('')\nconst app = firebase.initializeApp({...firebaseConfig, apiKey:FCM_API_KEY});\n// const analytics = getAnalytics(app);\nconst messaging = firebase.messaging(app);\n\nmessaging.onMessage((payload) => {\n  if (!(\"Notification\" in window)) {\n    alert(\"This browser does not support desktop notification\");\n  }\n  else if (Notification.permission === \"granted\") {\n    const message_set = JSON.parse(payload.data['message_set'])[0]\n    new Notification(payload.data.channel_name, { body: `${payload.data.name}: ${message_set.content}` });\n  }\n});\n\nconst requestToken = async()=>{\n  const permission = await Notification.requestPermission();\n  if (permission === 'granted') {\n    const serviceWorkerRegistration = await navigator.serviceWorker.register(`${process.env.PUBLIC_URL}/firebase-messaging-sw.js?${apiKeyEncrypted}`)\n    console.log('[SW]: SCOPE: ', serviceWorkerRegistration.scope);\n    const currentToken = await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY }).catch(\n      async()=>await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY })\n    )\n    window.addEventListener('beforeunload', (event:any) => {\n      event.preventDefault();\n      serviceWorkerRegistration.unregister()\n    });\n    if (currentToken)\n      return currentToken\n  }\n  return null\n}\n\nconst FirebaseContext = createContext<{enable?:boolean, setEnable:(enable:boolean)=>void}>({setEnable:()=>{}});\n\nexport const FirebaseProvider = ({user, children}:{user?:UserMembership|null, children:React.ReactNode})=>{\n  const tokenRef = useRef<string|null>()\n  const [notification, setNotification] = useState<NotificationType|null>()\n  const enable = useMemo(()=>notification===undefined?undefined:(notification?.token?true:false), [notification])\n  const setEnable = (enable:boolean)=>{\n    if(user && notification){\n      putNotification({...notification, token:enable?(tokenRef.current==undefined?null:tokenRef.current):null}).then((noti)=>{\n        setNotification(noti)\n      })\n    }\n  }\n  useEffect(()=>{\n    let isMount = true;\n    if(user){\n      if (tokenRef.current ===undefined){\n        tokenRef.current = null\n        requestToken().then((t)=>{\n          tokenRef.current = t\n          if (notification){\n            putNotification({...notification, token:tokenRef.current}).then((noti)=>{\n              if(isMount)setNotification(noti)\n            })\n          }\n        });\n      }\n      if (notification===undefined){\n        getNotification(user.id).then((noti)=>{\n          if(isMount)setNotification(noti || null)\n        })\n      }\n      else if(notification===null){\n        postNotification({user:user.id, type:'WEB', token:null}).then((noti)=>{\n          if(isMount)setNotification(noti)\n        })\n      }\n      else if (notification.token && tokenRef.current && tokenRef.current != notification.token){\n        putNotification({...notification, token:tokenRef.current}).then((noti)=>{\n          if(isMount)setNotification(noti)\n        })\n      }\n    }\n    return ()=>{isMount=false}\n  }, [user, notification])\n  return <FirebaseContext.Provider value={{enable, setEnable}}>\n    {(enable!=undefined || user===null) && children}\n  </FirebaseContext.Provider>\n}\n\nexport default ()=>{\n  const {enable, setEnable} = useContext(FirebaseContext)\n  return {enable, setEnable}\n}\n","import React, { useState, useEffect } from \"react\";\nimport { StyleSheet, TextInput } from \"react-native\";\nimport useLangContext from \"../hooks/useLangContext\";\nimport useUserMembershipList, { useUserMembershipMutation } from \"../hooks/lists/useUserMembershipList\";\nimport useAuthContext from \"../hooks/useAuthContext\";\nimport ModalSection from \"../components/ModalSection\";\nimport useModalsContext from \"../hooks/useModalsContext\";\nimport { View, Text } from \"../components/Themed\";\nimport RowField from \"../components/RowField\";\nimport CommonButton from \"../components/CommonButton\";\nimport CommonTextInput from \"../components/CommonTextInput\";\nimport useExternalMembershipList from \"../hooks/lists/useExternalMembershipList\";\n// import TextButton from \"../components/TextButton\";\n// import Colors from \"../constants/Colors\";\n// import useColorScheme from \"../hooks/useColorScheme\";\n\ntype ErrorMessages = {\n    username?:string,\n    name?:string,\n    password?:string,\n    checkPassword?:string\n}\n\nconst ErrorView = (props:{message?:string})=>{\n  const { lang } = useLangContext()\n  return props.message?<View style={styles.form_error}>\n  <Text style={styles.form_error_text}>{lang(props.message)}</Text>\n</View>:<></>\n}\n\nexport default function RegistrationModal({id}:{id?:number}) {\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  // const theme = useColorScheme()\n  // const color = Colors[theme].text\n  const { setModal } = useModalsContext()\n  const [username, setUsername] = useState(\"\");\n  const [name, setName] = useState(\"\")\n  const [password, setPassword] = useState(\"\");\n  const [checkPassword, setCheckPassword] = useState(\"\")\n  const [isStaff, setIsStaff] = useState(false)\n  const [error, setError] = useState<ErrorMessages>({})\n  const userList = useUserMembershipList(auth)\n  const externalMemberList = useExternalMembershipList(username)\n  const userMembershipMutation = useUserMembershipMutation()\n  const user = userList?.find(v=>v.id==id)\n  const usernameDisable = user && user.is_guest===false\n  useEffect(()=>{\n    if (user){\n      setUsername(user.username)\n      setName(user.name)\n    }\n  }, [user?.id])\n  const _register = ()=>{\n    let newError:ErrorMessages = {};\n    if ((externalMemberList?.length || 0) >0 && !usernameDisable) newError.username = \"The username is already in use.\"\n    if (username.length < 10 || username.length > 64) newError.username = \"Set 10-64 characters.\"\n    if (name.length < 1 || name.length > 64) newError.name = \"Set 1-64 characters.\"\n    if (!/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{10,64}$/.test(password) && !(usernameDisable && password.length==0)) newError.password = \"Set 10-64 characters with a combination of letters/numbers/valid special characters.\"\n    if (password != checkPassword) newError.checkPassword = \"Incorrect between password and check password.\"\n    if (Object.keys(newError).length > 0){\n        setError(newError)\n        return\n    }\n    if (id){\n      userMembershipMutation.update({\n        id,\n        name,\n        username:usernameDisable?undefined:username,\n        is_guest:false,\n        password:password.length>0?password:undefined,\n      }).then(()=>{(id!=auth.user?.id || user?.is_guest) && back()})\n    }\n    else{\n      auth?.groupId && userMembershipMutation.create({\n          username,\n          name,\n          password,\n          is_guest:false,\n          is_staff:isStaff,\n          inviteGroupId:auth.groupId,\n\n      }).then(back)\n    }\n  }\n  const back = ()=>{\n    setModal(RegistrationModal, null)\n  }\n  return <ModalSection>\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\n      <View style={{flex:1, width:'100%'}}>\n        <Text style={{fontSize:20}}>{usernameDisable?lang('Edit User'):lang('Create User')}</Text>\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n        <RowField name={lang('Username')} width={'60%'}>\n          {usernameDisable?<Text style={{fontSize:16}}>{username}</Text>:<CommonTextInput\n              value={username}\n              setValue={(text) => setUsername(text)}\n              keyboardType={'email-address'}\n          />}\n          <ErrorView message={error.username}/>\n        </RowField>\n        <RowField name={lang('Name')} width={'60%'}>\n          <CommonTextInput\n              value={name}\n              setValue={(text) => setName(text)}\n          />\n          <ErrorView message={error.name}/>\n        </RowField>\n        <RowField name={lang('Password')} width={'60%'}>\n          <CommonTextInput\n              value={password}\n              secureTextEntry\n              setValue={(text) => setPassword(text)}\n          />\n          <ErrorView message={error.password}/>\n        </RowField>\n        <RowField name={lang('Check Password')} width={'60%'}>\n          <CommonTextInput\n              value={checkPassword}\n              secureTextEntry\n              setValue={(text) => setCheckPassword(text)}\n          />\n          <ErrorView message={error.checkPassword}/>\n        </RowField>\n        {/* <RowField name={lang('Manager Permission')} width={'60%'}>\n          <View style={{flexDirection:'row'}}>\n            {[[lang('Yes'), true], [lang('No'), false]].map(([title, value])=><TextButton \n              key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:isStaff==value?'underline':'none'}} style={{borderRadius:20}} onPress={(\n              )=>setIsStaff(value)}/>)}\n          </View>\n        </RowField> */}\n      </View>\n      <View style={{width:'100%', flexDirection:'row'}}>\n        {id && <View style={{flexDirection:'row', justifyContent:'flex-start'}}>\n          <CommonButton title={lang('delete account')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>userMembershipMutation.delete(id).then(back)}/>\n        </View>}\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\n          <CommonButton title={lang('save')} onPress={_register}/>\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\n        </View>\n      </View>\n    </View>\n  </ModalSection>\n};\n\nconst styles = StyleSheet.create({\n  form_error: {\n    height: 22,\n    width:'100%',\n  },\n  form_error_text:{\n    textAlignVertical:'center',\n    color:'red',\n    fontSize:13,\n  },\n  separator: {\n    marginBottom: 20,\n    height: 1,\n    width: '100%',\n  },\n});","import React from \"react\"\nimport CommonSection from \"../../../components/CommonSection\"\nimport Colors from \"../../../constants/Colors\"\nimport useColorScheme, { setColorScheme } from \"../../../hooks/useColorScheme\"\nimport { StyleSheet, Text, View} from 'react-native';\nimport useLangContext from \"../../../hooks/useLangContext\";\nimport { useColorScheme as useConfigColorScheme} from 'react-native-appearance';\nimport useFirebaseContext from \"../../../hooks/useFirebaseContext\";\nimport TextButton from \"../../../components/TextButton\";\nimport useModalsContext from \"../../../hooks/useModalsContext\";\nimport RegistrationModal from \"../../../modals/RegistrationModal\";\nimport useAuthContext from \"../../../hooks/useAuthContext\";\n\n\nconst ConfigSection = ({title, children}:{title:string, children?: React.ReactNode})=>{\n  const theme = useColorScheme()\n  const color = Colors[theme].text\n  return <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\n    <Text style={{fontSize:20, color, fontWeight:'600'}}>{title}</Text>\n    {children}\n  </CommonSection>\n}\n\nexport default ()=>{\n  const { lang, locale, setLocale } = useLangContext()\n  const { setModal } = useModalsContext()\n  const {auth} = useAuthContext()\n  const theme = useColorScheme()\n  const configTheme = useConfigColorScheme()\n  const {enable:noti, setEnable:setNoti} = useFirebaseContext()\n  const color = Colors[theme].text\n  return <>\n    <ConfigSection title={lang('* Notification Settings')}>\n      <View style={{flexDirection:'row'}}>\n        {[[lang('On'), true], [lang('Off'), false]].map(([title, n])=><TextButton\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:noti==n?'underline':'none'}} style={{borderRadius:20}} onPress={()=>{setNoti(n)}}/>)}\n      </View>\n    </ConfigSection>\n    <ConfigSection title={lang('* Language Settings')}>\n    <View style={{flexDirection:'row'}}>\n        {[[lang('Auto'), 'auto'], ['한국어', 'ko'], ['English', 'en']].map(([title, l])=><TextButton \n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:locale==l?'underline':'none'}} style={{borderRadius:20}} onPress={()=>setLocale(l)}/>)}\n      </View>\n    </ConfigSection>\n    <ConfigSection title={lang('* Skin Settings')}>\n      <View style={{flexDirection:'row'}}>\n        {[[lang('Auto'), 'no-preference'], [lang('Light'), 'light'], [lang('Dark'), 'dark']].map(([title, colorScheme])=><TextButton \n          key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:configTheme==colorScheme?'underline':'none'}} style={{borderRadius:20}} onPress={(\n            )=>setColorScheme(colorScheme)}/>)}\n      </View>\n    </ConfigSection>\n    {!auth.user?.is_guest && <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\n      <TextButton title={lang('> Account Settings')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(RegistrationModal, {id:auth.user?.id})}/>\n    </CommonSection>}\n  </>\n}","import React, {useState, useEffect, useLayoutEffect, useMemo} from 'react';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport { StyleSheet, View, ScrollView} from 'react-native';\nimport { Text as StyledText } from 'react-native-paper';\nimport { Text } from '../../../components/Themed'\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport TabView from '../../../components/TabView';\nimport HeaderRight from '../../../components/HeaderRight';\nimport TextButton from '../../../components/TextButton';\nimport Colors from '../../../constants/Colors';\nimport useColorScheme  from '../../../hooks/useColorScheme';\nimport useModalsContext from '../../../hooks/useModalsContext';\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\nimport useLangContext from '../../../hooks/useLangContext';\nimport ContractFooter from '../../../components/ContractFooter';\nimport { TabViewRecord } from '../../../types';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport useUserMembershipList from '../../../hooks/lists/useUserMembershipList';\nimport { FontAwesome, Ionicons, MaterialCommunityIcons, SimpleLineIcons } from '../../../lib/@expo/vector-icons';\nimport { useMessengerChannelSorted } from '../../../hooks/lists/useMessengerChannelList';\nimport CommonItem from '../../../components/CommonItem';\nimport MemberItem from '../../../components/MemberItem';\nimport ProfileModal from '../../../modals/ProfileModal';\nimport { navigate } from '../../../navigation';\nimport CommonSection from '../../../components/CommonSection';\nimport ConfigSections from './ConfigSections';\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\nimport RegistrationModal from '../../../modals/RegistrationModal';\n\nconst MemberTabView = ()=>{\n  const {auth} = useAuthContext()\n  const theme = useColorScheme()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const memberItem = React.useMemo(\n      ()=>userList && userList.map((item, index)=><MemberItem key={index} member={item} onPress={()=>setModal(ProfileModal, {id:item.id})}/>), [userList])\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n      {memberItem}\n  </ScrollView>\n}\n\nconst MessengerTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted(auth)\n  const theme = useColorScheme()\n\n  const today = (new Date()).toISOString().slice(0, 10)\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n      {channelList?.map((item, index)=>{\n          const {avatar, name} = avatarFromChannel(item, auth.user)\n          const date = item.last_message?.created.slice(0,10)\n          const content = item.last_message?.preview_content || item.last_message?.content || ''\n          return <CommonItem key={index} bodyStyle={{flexDirection:'row', justifyContent:'space-between'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\n              <View style={{flexDirection:'row', flexShrink:1}}>\n                  {avatar?\n                    <View style={{ marginRight:20}}>\n                      <Avatar name={avatar.name} size={44} userId={avatar.id}/>\n                    </View>:\n                    <FontAwesome size={40} color={Colors[theme].iconColor} style={{ marginBottom: -3, marginRight:20 }} name='users'/>}\n                  <View>\n                      <View style={{flexDirection:'row'}}>\n                          <Text style={{fontSize:18}}>{name}</Text>\n                          <Text style={{fontSize:18, opacity: 0.4, paddingLeft:5}}>{item.member_count}</Text>\n                      </View>\n                      <Text style={{fontSize:16, opacity: 0.4}}>{content.replaceAll('\\n', ' ')}</Text>\n                  </View>\n              </View>\n              <View>\n                  <Text style={{fontSize:14, opacity: 0.4, textAlign:'right'}}>{date==today?item.last_message?.created.slice(11,16):date}</Text>\n                  <Text style={{fontSize:14, textAlign:'right'}}>{item.unread_count?item.unread_count:' '}</Text>\n              </View>\n          </CommonItem>\n      })}\n  </ScrollView>\n}\n\n\nconst ConfigTabView = ()=>{\n  const theme = useColorScheme()\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n    <ConfigSections/>\n  </ScrollView>\n}\n\nconst getBottomTabs = (theme:'light'|'dark')=>{\n  const color = Colors[theme].iconColor\n  return {\n    OneTab:{\n        title:'member',\n        component:MemberTabView,\n        icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\n    },\n    TwoTab:{\n        title:'chat',\n        component:MessengerTabView,\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\n    },\n    // ThreeTab:{\n    //     title:'board',\n    //     component:()=><></>,\n    //     icon:<></>\n    // },\n    FourTab:{\n        title:'config',\n        component:ConfigTabView,\n        icon:<SimpleLineIcons size={30} color={color} style={{ marginBottom: -3 }} name='options'/>\n    }\n  } as TabViewRecord\n}\n\n\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\n  const { lang, locale } = useLangContext()\n  const windowType = useResizeContext();\n  const theme = useColorScheme()\n  const { setModal } = useModalsContext()\n  const {auth} = useAuthContext()\n  const [ home, setHome ] = useState(windowType == 'landscape')\n  const color = Colors[theme].text\n  const options = [\n    {title:lang('member'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(RegistrationModal, auth.user?.is_guest?{id:auth.user.id}:{})}]}/>},\n    {title:lang('chat'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(ChannelEditModal, {type:'messenger'})}]}/>},\n    // {title:'board', headerRight:()=><HeaderRight extra={[{title:'create', onPress:()=>setModal(ChannelEditModal, props:{type:'board'}}) }]}/>},\n    {title:lang('config'), headerRight:()=><HeaderRight/>}\n  ]\n  \n  useLayoutEffect(() => {\n    const index = route?.params?.tab | 0\n    navigation.setOptions(windowType == 'portrait'?options[index]:{\n      title: lang('home'),\n      headerRight: ()=><HeaderRight/>\n    });\n  }, [navigation, route, windowType, locale]);\n  useEffect(()=>{\n    setHome(windowType == 'landscape')\n  }, [windowType])\n  return home?\n    <ScrollView contentContainerStyle={{flex:1, alignItems:'center'}}>\n      <View style={{flexGrow:1, width:'80%', marginTop:72}}>\n        <StyledText style={{fontSize:32, color}}>Tokki Tok</StyledText>\n        <View style={{backgroundColor:Colors.borderColor, height:1, width:'100%'}}/>\n        {/* <Text style={{fontSize:20, color:'gray'}}>Welcome! This is a messenger for teams.</Text>*/}\n        <View style={{height:24}}/>\n        <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\n          <TextButton title={lang('+ New chat')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(ChannelEditModal, {type:'messenger'})}/>\n        </CommonSection>\n        <ConfigSections/>\n      </View>\n      <ContractFooter theme={theme}/>\n    </ScrollView>:\n    <TabView tabs={getBottomTabs(theme)} tabBarPosition=\"bottom\" index={parseInt(route.params?.['tab'] || 0)} onTab={(index)=>{navigation.setParams({tab:index})}}/>\n}\n\n","import LoginScreen from \"./main/LoginScreen\";\nimport ChatScreen from \"./main/ChatScreen\";\nimport HomeScreen from \"./main/HomeScreen\";\n// import BoardScreen from \"../lib/blacktokki-board/BoardScreen\";\n// import BoardEditScreen from \"../lib/blacktokki-board/BoardEditScreen\";\nimport { Screens } from \"../types\";\nimport DemoScreen from \"./main/DemoScreen\";\n\nexport const main = {\n    HomeScreen:{\n        title:'home',\n        component:HomeScreen,\n        path:'home',\n    },\n    ChatScreen:{\n        title:'chat',\n        component:ChatScreen,\n        path:'chat'\n    },\n    // BoardScreen:{\n    //     title:'board',\n    //     component:BoardScreen,\n    //     path:'board'\n    // },\n} as Screens\n\nexport const login = {\n    LoginScreen:{\n        path: 'login',\n        title: 'Sign in',\n        component:LoginScreen\n    },\n    DemoScreen:{\n        title:'',\n        component:DemoScreen,\n        path:'demo'\n    }\n} as Screens\n\nexport const modal = {\n    // BoardEditScreen:{\n    //     title:'board',\n    //     component:BoardEditScreen,\n    //     path:'modal/board'\n    // },\n} as Screens","import React, { useEffect, useLayoutEffect, useMemo, useRef, useState} from 'react';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport { Platform, View } from 'react-native';\nimport { TextInput } from 'react-native-gesture-handler';\nimport CommonButton from '../../../components/CommonButton';\nimport { useMessengerContentMutation } from '../../../hooks/lists/useMessengerContentList';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport HeaderRight from '../../../components/HeaderRight';\nimport useMessengerMemberList from '../../../hooks/lists/useMessengerMemberList';\nimport Colors from '../../../constants/Colors';\nimport useColorScheme from '../../../hooks/useColorScheme';\nimport { View as ThemedView } from '../../../components/Themed' \nimport useMessengerChannelList from '../../../hooks/lists/useMessengerChannelList';\nimport useIsMobile from '../../../hooks/useIsMobile';\nimport { avatarFromChannel } from '../../../components/Avatar';\nimport VideoCallSection from './VideoCallSection';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport useModalsContext from '../../../hooks/useModalsContext';\nimport InviteModal from '../../../modals/InviteModal';\nimport DateTimePickerModal from '../../../modals/DateTimePickerModal'\nimport useLangContext from '../../../hooks/useLangContext';\nimport { Entypo } from '../../../lib/@expo/vector-icons';\nimport TimerTags, { timerFormat } from './TimerTags';\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\nimport UploadTags from './UploadTags';\nimport Messages from './Messages';\nimport Editor from '../../../components/Editor';\n\n\nfunction uploadFile(){\n  return new Promise<Blob|undefined>((resolve, reject)=>{\n    if (Platform.OS == 'web'){\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.onchange = e => { \n        resolve((e.target as any).files[0])\n      }\n      input.onabort = reject\n      input.onerror = reject\n      input.click();\n    }\n    else\n      resolve(undefined)\n  })\n}\n\nexport default function ChatScreen({navigation, route}: StackScreenProps<any, 'Chat'>) {\n  const { lang, locale } = useLangContext()\n  const isMobile = useIsMobile()\n  const channel_id = route?.params?.id\n  const inputRef = useRef<TextInput>(null)\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const channel = useMessengerChannelList(auth)?.find(v=>v.id==parseInt(channel_id))\n  const channelAvatar = channel?avatarFromChannel(channel, auth.user):undefined\n  const memberList = useMessengerMemberList(channel_id)\n  const member_id = useMemo(()=>memberList?.find(v=>v.user == auth.user?.id)?.id, [auth, memberList])\n  const windowType = useResizeContext()\n  const [value, setValue] = useState('')\n  const [timer, setTimer] = useState<string>()\n  const [autoFocus, setAutoFocus] = useState<boolean|null>(null)\n  const [videoMode, setVideoMode] = useState<boolean>(false)\n  const [bottomTab, setBottomTab] = useState<boolean>(false)\n  const [isEditor, setIsEditor] = useState<boolean>(false)\n  const valueLines = useMemo(()=>bottomTab?1:value.split(\"\\n\").length, [value, bottomTab])\n\n  const theme = useColorScheme()\n  const postValue = ()=>{\n    if (value.length>0){\n      contentMutation.create({channel:channel_id, user:auth.user?.id, content:value, timer, use_editor:isEditor})\n      setValue('')\n      setTimer(undefined)\n      setBottomTab(false)\n      if(isEditor){\n        setIsEditor(false)\n      }\n      else{\n        setAutoFocus(true)\n      }\n    }\n  }\n  const contentMutation = useMessengerContentMutation()\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: ()=> <HeaderRight extra={[\n        {title:lang('invite'), onPress:()=>setModal(InviteModal, {id:channel_id})},\n        {title:lang('setting'), onPress:()=>setModal(ChannelEditModal, {id:channel_id, type:'messenger', member_id})}\n      ]}/>,\n      title: channelAvatar?.name\n    });\n  }, [navigation, route, member_id, locale]);\n\n  const back = ()=>{\n    if(navigation.canGoBack())\n        navigation.goBack()\n      else{\n        navigation.navigate('HomeScreen', {tab:2})\n      }\n  }\n  const onKeyPress = (e:any) => {\n    if (!isMobile){\n      const event = e as KeyboardEvent;\n        if (!event.shiftKey && event.key === \"Enter\"){\n          postValue()\n          event.preventDefault()\n      }\n    }\n  }\n  useEffect(()=>{\n    setModal(null, null)\n    if (!channel_id)\n      back()\n  }, [route])\n  useEffect(()=>{\n    if (memberList===null || (memberList!=undefined && memberList.find(v=>v.user==auth.user?.id)==undefined))\n      back()\n  }, [memberList])\n  useEffect(()=>{\n    if(autoFocus){\n      (inputRef.current as any).focus?.()\n      setAutoFocus(false)\n    }\n  }, [autoFocus])\n  useEffect(()=>{\n    if (autoFocus==null && !isMobile){\n      const timeout = setTimeout(()=>setAutoFocus(true), 500)\n      return ()=>clearTimeout(timeout)\n    }\n  })\n  return <View style={[\n    {flex:1, alignItems:'center'},\n    windowType=='landscape'?{flexDirection:'row-reverse', minWidth:480}:{flexDirection:'column'}\n  ]}>\n    <VideoCallSection channel_id={channel_id} setDisable={(d)=>setVideoMode(!d)} disable={!videoMode}/>\n    <View style={[videoMode?{flexShrink:1}:{flex:1}, windowType=='landscape'?{minWidth:320, height:'100%'}:{width:'100%'}]}>\n      <Messages channel_id={channel_id} auth={auth} reverse/>\n      <View style={{position:'absolute', flexDirection:'row'}}>\n        <UploadTags channel_id={channel_id}/>\n        <TimerTags channel_id={channel_id}/>\n      </View>\n      <ThemedView style={{bottom:0, width:'100%', paddingTop:15, paddingBottom:10, paddingHorizontal:19}}>\n        <View style={{alignItems:'center', width:'100%',flexDirection:'row'}}>\n          <CommonButton title={''} style={{height:'100%', paddingTop:8, borderTopRightRadius:0, borderBottomRightRadius:0, justifyContent:'center'}} onPress={()=>{setBottomTab(!bottomTab)}}>\n            <View style={{top:-2}}>\n              <Entypo name={bottomTab?\"cross\":\"plus\"} size={24} color={Colors[theme].text}/>\n            </View>\n          </CommonButton>\n          {timer && <CommonButton style={{height:'100%', paddingTop:8, borderRadius:0}} title={`⌚${timerFormat(timer)}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>}\n          <Editor active={isEditor} value={value} setValue={setValue} onReady={()=>setBottomTab(false)}>\n            <TextInput \n              ref={inputRef} \n              value={value} \n              onChangeText={setValue}\n              onKeyPress={onKeyPress}\n              style={{flex:1, borderWidth:1, minHeight:40, borderColor:Colors.borderColor, backgroundColor:Colors[theme].background, color:Colors[theme].text}}\n              onFocus={()=>setBottomTab(false)}\n              multiline \n              numberOfLines={valueLines}/>\n          </Editor>\n          <CommonButton style={{height:'100%', paddingTop:8, borderTopLeftRadius:0, borderBottomLeftRadius:0, justifyContent:'center'}} title={'💬'} onPress={postValue}/>\n        </View>\n\n        {bottomTab && <View style={{alignItems:'center', width:'100%', flexDirection:'row', paddingTop:15, paddingBottom:5}}>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`📤\\n ${lang('File')}`} onPress={()=>uploadFile().then(f=>{contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', file:f});setBottomTab(false)})}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`✏️\\n ${lang('Editor')}`} onPress={()=>{setIsEditor(!isEditor); isEditor && setBottomTab(false)}}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`⌚\\n ${lang('Timer')}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center'}} title={`📹\\n ${lang('Video Call')}`} onPress={()=>{setVideoMode(!videoMode);setBottomTab(false)}} disabled={videoMode}/>\n        </View>}\n      </ThemedView>\n    </View>\n  </View>\n}","import React, { useLayoutEffect } from 'react';\n\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useAuthContext from '../../hooks/useAuthContext';\n\nexport default function DemoScreen({navigation}: StackScreenProps<any, 'Demo'>) {\n    const {dispatch} = useAuthContext()\n    useLayoutEffect(() => {\n        navigation.setOptions({headerRight: undefined});\n        dispatch({type:\"LOGIN_GUEST\"})\n    }, []);\n  return <></>\n};","/**\n * Learn more about deep linking with React Navigation\n * https://reactnavigation.org/docs/deep-linking\n * https://reactnavigation.org/docs/configuring-links\n */\n\nimport { LinkingOptions } from '@react-navigation/native';\nimport * as Linking from 'expo-linking';\nimport {main, login, modal} from '../screens';\n\nconst ROOTPATH = 'tokki-tok'  // github repository name\n\nObject.values(modal).forEach(v=>v.path = ROOTPATH + '/' + v.path)\n\nexport default  {\n  prefixes: [Linking.makeUrl('/')],\n  config: {\n    screens: {\n      Main: {\n        screens:{\n          ...main,\n          ...login,\n          NotFound: '*',\n        },\n        path: ROOTPATH\n      },\n      ...modal\n    },\n  },\n} as LinkingOptions;\n","import { StackScreenProps } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useLangContext from '../hooks/useLangContext';\n\nexport default function NotFoundScreen({\n  navigation,\n}: StackScreenProps<any, 'NotFound'>) {\n  const { lang } = useLangContext()\n  const { auth } = useAuthContext()\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>{lang(\"This screen doesn't exist.\")}</Text>\n      <TouchableOpacity onPress={() => navigation.replace(auth.user?'HomeScreen':'LoginScreen')} style={styles.link}>\n        <Text style={styles.linkText}>{lang(\"Go to home screen!\")}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","import { useTheme } from '@react-navigation/native';\nimport React, { useEffect, useState } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Profile from '../components/Profile';\nimport TextButton from '../components/TextButton';\nimport Colors from '../constants/Colors';\nimport useResizeContext from '../hooks/useResizeContext';\nimport TabView from '../components/TabView';\nimport { TabViewRecord, UserMembership } from '../types';\nimport useModalsContext from '../hooks/useModalsContext';\nimport ChannelEditModal from '../modals/ChannelEditModal';\nimport CommonItem from '../components/CommonItem';\nimport { Text } from '../components/Themed';\nimport useAuthContext, { Auth } from '../hooks/useAuthContext';\nimport { useMessengerChannelSorted } from '../hooks/lists/useMessengerChannelList';\nimport { navigate } from '.'\nimport { avatarFromChannel } from '../components/Avatar';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { Ionicons, MaterialCommunityIcons } from '../lib/@expo/vector-icons';\nimport RegistrationModal from '../modals/RegistrationModal';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport ProfileModal from '../modals/ProfileModal';\n\n\nconst MemberTabView = ()=>{\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  return <View style={{flex:1}}>\n    {userList?.map((item, index)=>{\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>setModal(ProfileModal, {id:item.id})}>\n        <Text style={{marginLeft:20}}>{item.name}</Text>\n      </CommonItem>\n    })}\n  </View>\n}\n\nconst MessengerTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted(auth);\n  return <View style={{flex:1}}>\n    {channelList?.map((item, index)=>{\n      const {name} = avatarFromChannel(item, auth.user)\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\n        <Text style={{marginLeft:20}}>{name}</Text>\n      </CommonItem>\n    })}\n  </View>\n}\nconst getDrawerTabs = (theme:'light'|'dark')=>{\n  const color = Colors[theme].iconColor\n  return {\n    MemberTab:{\n      title:'member',\n      component:MemberTabView,\n      icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\n    },\n    ChatTab:{\n        title:'chat',\n        component:MessengerTabView,\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\n    },\n  } as TabViewRecord\n}\n\nexport default ({auth}:{auth:Auth})=> {\n  const { colors } = useTheme();\n  const theme = useColorScheme();\n  const windowType = useResizeContext();\n  const channelList = useMessengerChannelSorted(auth);\n  const [index, setIndex] = useState<number>();\n  const { setModal } = useModalsContext()\n  \n  const onAddList = [\n    ()=>setModal(RegistrationModal, auth.user?.is_guest?{id:auth.user.id}:{}),\n    ()=>setModal(ChannelEditModal, {type:'messenger'}),\n  ]\n  const drawerTabs = getDrawerTabs(theme)\n\n  useEffect(()=>{\n    if(index===undefined && channelList){\n      setIndex(channelList.length>0?1:0)\n    }\n  }, [channelList])\n  return <View style={windowType=='landscape'?[\n      styles.tabBar,\n      {\n        backgroundColor: Colors[theme].background,\n        borderTopColor: colors.border,\n      },\n      // tabBarStyle,\n    ]:{width:0}}\n    pointerEvents={false ? 'none' : 'auto'}\n  >\n    {windowType=='landscape' && auth.user && index!==undefined && <>\n      <Profile userId={auth.user.id} username={auth.user.username} name={auth.user.name}/>\n      <View style={{flexDirection:'row-reverse'}}>\n          <TextButton title='+' textStyle={{fontSize:20}} style={{borderRadius:20}} onPress={onAddList[index]}/>\n      </View>\n      <View accessibilityRole=\"tablist\" style={styles.content}>\n        {Object.keys(drawerTabs).length>1 ? \n          <TabView tabs={drawerTabs} tabBarPosition={\"top\"} onTab={setIndex} index={index}/>: \n          <View style={{borderTopWidth:1, flex:1, borderColor:colors.border}}>            \n            {Object.values(drawerTabs).map(drawerTab=>{const Tab = drawerTab.component; return <Tab key={drawerTab.title}/>})}\n          </View>\n        }\n      </View>\n    </>}\n  </View>\n}\n\n{/*<Text style={[styles.label, { color: d.isFocused ? colors.primary : '#222' }]}></Text> */}\n\nconst styles = StyleSheet.create({\n    tabBar: {\n      width:240,\n      elevation: 8,\n      borderRightWidth:1,\n      borderColor:Colors.borderColor\n    },\n    content: {\n      flex: 1,\n      flexDirection: 'row',\n    },\n    tab: {\n        flex: 1,\n        alignItems: 'center',\n    },\n    label: {\n        textAlign: 'center',\n        backgroundColor: 'transparent',\n      },\n  });","import InviteModal from \"./InviteModal\";\nimport ProfileModal from \"./ProfileModal\";\nimport ChannelEditModal from \"./ChannelEditModal\"\nimport AlertModal from \"./AlertModal\";\nimport DateTimePickerModal from \"./DateTimePickerModal\"\nimport MessageModal from \"./MessageModal\";\nimport RegistrationModal from \"./RegistrationModal\";\n\nexport default [\n    InviteModal,\n    ProfileModal,\n    ChannelEditModal,\n    AlertModal,\n    DateTimePickerModal,\n    MessageModal,\n    RegistrationModal\n]","import { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\nimport React, {useMemo} from 'react';\nimport { View } from 'react-native';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport useResizeContext from '../hooks/useResizeContext';\nimport NotFoundScreen from '../screens/NotFoundScreen';\nimport {main, login} from '../screens';\nimport Drawer from './Drawer';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { WebSocketProvider } from '../hooks/useWebsocketContext';\nimport HeaderRight from '../components/HeaderRight'\nimport Colors from '../constants/Colors';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { FirebaseProvider } from '../hooks/useFirebaseContext';\nimport useIsMobile from '../hooks/useIsMobile';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { ModalsProvider } from '../hooks/useModalsContext';\nimport modals from '../modals';\nimport useLangContext from '../hooks/useLangContext';\nimport CommonButton from '../components/CommonButton';\nimport { UploadContextProvider } from '../hooks/useUploadContext';\n\nconst Main = createStackNavigator();\n\nfunction headerLeft(navigation:any, route:any, windowType:string, theme:'light'|'dark', isMobile:boolean){\n    const canGOBackScreen = ['HomeScreen', 'LoginScreen'].findIndex(v=>v == route.name) == -1\n    const goBack = ()=>{\n        if (navigation.canGoBack())\n            navigation.goBack()\n        else if (canGOBackScreen)\n            navigation.replace('HomeScreen')\n    }\n    if (windowType=='portrait' && canGOBackScreen)\n        return <TouchableOpacity onPress={goBack} disabled={!isMobile}>\n            <CommonButton title={''} color={isMobile?Colors[theme].buttonBackgroundColor:Colors[theme].hoverColor} onPress={goBack} disabled={isMobile} style={{width:32, height:32, margin:16, paddingVertical:1, paddingHorizontal:4}}>\n                <Ionicons size={24} color={Colors[theme].iconColor} name=\"arrow-back\"/>\n            </CommonButton>\n        </TouchableOpacity>\n    return null\n}\n\nexport default ()=>{\n    const windowType = useResizeContext();\n    const isMobile = useIsMobile()\n    const {auth} = useAuthContext()\n    const theme = useColorScheme()\n    const {lang, locale} = useLangContext()\n    const entries = useMemo(()=>{\n        if (auth.user === undefined)\n            return []\n        console.log('current user: ', auth.user)\n        return Object.entries(auth.user === null?login:main)\n    }, [auth, locale])\n    const modalValues = useMemo(()=>{\n        if (auth.user === undefined)\n            return []\n        return auth.user === null?[]:modals\n    }, [auth])\n    const backgroundStyle = theme=='light'?{}:{backgroundColor:'#010409'}\n    return (auth.user!==undefined?<View style={{flexDirection:'row', flex:1}}>\n        <UploadContextProvider>\n            <ModalsProvider modals={modalValues}>\n                {auth.user?<Drawer auth={auth}/>:undefined}\n                <View style={[{flex:1}, backgroundStyle]}>\n                    <WebSocketProvider disable={auth.user === null || auth.user === undefined}>\n                        <FirebaseProvider user={auth.user}>\n                            <Main.Navigator\n                                screenOptions={({navigation, route})=>({\n                                    headerStyle:{backgroundColor:Colors[theme].header, height:isMobile?50:undefined},\n                                    headerTitleStyle:{color:Colors[theme].text},\n                                    headerLeft:()=>headerLeft(navigation, route, windowType, theme, isMobile),\n                                    headerRight:()=><HeaderRight/>,\n                                    headerLeftContainerStyle:{backgroundColor:Colors[theme].header, borderBottomWidth:1, borderColor:Colors[theme].headerBottomColor},\n                                    cardStyle:[{flexShrink:1}, backgroundStyle],\n                                    animationEnabled:windowType=='portrait',\n                                    cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS\n                                })}\n                            >\n                                {entries.map(([key, screen])=><Main.Screen key={key} name={key} component={screen.component} options={{ title: lang(screen.title) }} />)}\n                                <Main.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\n                            </Main.Navigator>\n                        </FirebaseProvider>\n                    </WebSocketProvider>\n                </View>\n            </ModalsProvider>\n        </UploadContextProvider>\n    </View>:<></>);\n}","/**\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\n * https://reactnavigation.org/docs/getting-started\n *\n */\nimport * as React from 'react';\nimport { useColorScheme as useDefaultColorScheme } from 'react-native';\nimport { useColorScheme as useColorScheme } from 'react-native-appearance';\nimport { enableScreens } from 'react-native-screens';\nimport { NavigationContainer, DefaultTheme, DarkTheme, NavigationContainerRef } from '@react-navigation/native';\nimport { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\n\nimport useResizeContext, { ResizeContextProvider } from '../hooks/useResizeContext';\nimport useInvitee, { replaceInviteeState } from '../hooks/useInvitee';\nimport { modal } from '../screens';\nimport LinkingConfiguration from './LinkingConfiguration';\nimport MainNavigator from './MainNavigator';\n\n\nenableScreens();\n\nconst navigationRef = React.createRef<NavigationContainerRef>();\n\nexport function navigate(name:string, params?:any) {\n  if (params)\n    navigationRef.current?.navigate(name, params);\n  navigationRef.current?.navigate(name);\n}\n\nlet electronVersion:string|undefined;\ntry{\n  electronVersion = process?.versions?.['electron']\n}\ncatch(e){\n  electronVersion = undefined\n}\n\nexport default function Navigation() {\n  const defaultColorScheme = useDefaultColorScheme()\n  const userColorScheme = useColorScheme()\n  const colorScheme = userColorScheme =='no-preference'?defaultColorScheme:userColorScheme\n  return <NavigationContainer\n    ref={navigationRef}\n    documentTitle={{formatter: (options, route) => {return `TOKKI TOK`}}}\n    linking={electronVersion?undefined:LinkingConfiguration}\n    theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n        <ResizeContextProvider>\n          <RootNavigator />\n        </ResizeContextProvider>\n  </NavigationContainer>\n}\n\n\n// A root stack navigator is often used for displaying modals on top of all other content\n// Read more here: https://reactnavigation.org/docs/modal\nconst Root = createStackNavigator();\n\nfunction RootNavigator() {\n    const windowType = useResizeContext();\n    useInvitee()\n    return <Root.Navigator\n        mode= 'modal'\n        headerMode= 'screen'\n        screenOptions={{\n            cardStyle:{backgroundColor:\"white\"},\n            animationEnabled: true,\n            cardStyleInterpolator: CardStyleInterpolators.forVerticalIOS,\n        }}\n    >\n        <Root.Screen name=\"Main\" component={MainNavigator} options={{headerShown:false}}/>\n        {Object.entries(modal).map(([key, screen])=><Root.Screen key={key} name={key} component={screen.component} options={{\n            title: screen.title,\n            gestureDirection: windowType == 'landscape'?'vertical-inverted':'vertical'\n        }} />)}\n    </Root.Navigator>\n}\n\nreplaceInviteeState(window.location)\n\nconst IGNORE_WERNINGS:string[] = ['setNativeProps', 'useNativeDriver'];\n\nconst warnLogger = console.warn\n\nconsole.warn = (message: string|Object) => {\n    var warn = true;\n    if (message instanceof Object){\n      warn = false;\n    }\n    else if (IGNORE_WERNINGS.some(log=>message.includes(log))){\n      warn = false\n    };\n    if (warn){\n      warnLogger(message);\n    }\n    else{\n        // console.log(message)\n    }\n};\n","editorConfig = {\n    plugins: 'image link charmap advlist lists', //autoresize textcolor imagetools paste,\n    toolbar: 'fontsize bold italic underline strikethrough alignleft aligncenter alignright bullist numlist link' // charmap removeformat\n}\nif (typeof module !== 'undefined') {\n    module.exports = editorConfig\n}\n","firebaseConfig = {\n    \"authDomain\": \"virtual-metrics-355712.firebaseapp.com\",\n    \"projectId\": \"virtual-metrics-355712\",\n    \"storageBucket\": \"virtual-metrics-355712.appspot.com\",\n    \"messagingSenderId\": \"76003576924\",\n    \"appId\": \"1:76003576924:web:c8c8a006d07918bbc02a99\",\n    \"measurementId\": \"G-SEL35L4N5R\"\n}\nif (typeof module !== 'undefined') {\n    module.exports = firebaseConfig\n}\n"],"names":["useMessengerChannelList","auth","queryClient","useQueryClient","lastJsonMessage","useWebsocketContext","data","useQuery","_asyncToGenerator","_auth$user","getMessengerChannelList","user","id","useEffect","setQueryData","_data","find","v","concat","_toConsumableArray","sort","a","b","map","_data2$message_set$","channel","_objectSpread","last_message","content","message_set","created","useMessengerChannelSorted","channelList","_a$last_message","_b$last_message","useMessengerChannelMutation","create","useMutation","postChannel","onSuccess","invalidateQueries","update","putChannel","direct","postDirectChannel","mutateAsync","useMessengerMemberList","channel_id","getMessengerMemberList","useMessengerMemberMutation","invite","postBulkMessengerMember","leave","deleteMessengerMember","invitee_id","invitee_state","useAuthContext","messengerMemberMutation","redirect","navigate","screen","params","undefined","console","log","user_ids","then","openURL","Platform","OS","url","location","href","Linking","props","_jsxs","View","style","Styles","footer_buttons","children","_jsx","TouchableOpacity","footer_button","onPress","AntDesign","name","size","color","Colors","theme","iconColor","StyleSheet","width","flexDirection","justifyContent","paddingBottom","paddingRight","alignItems","height","marginHorizontal","borderWidth","borderColor","borderRadius","login_container","flex","backgroundColor","login_header","paddingTop","login_header_logo","resizeMode","login_header_text","marginTop","fontSize","login_header_text_bold","fontWeight","login_wrapper","borderTopRightRadius","borderTopLeftRadius","form","maxWidth","form_error","form_error_text","textAlignVertical","form_input","paddingHorizontal","marginBottom","button","button_label","login_social","login_social_separator","login_social_separator_line","login_social_separator_text","login_social_buttons","login_social_button","login_social_icon","login_social_facebook","login_footer_text","guest_footer_text","alignSelf","margin","login_footer_link","CommonButton","styles","AlertModal","_ref","type","lang","useLangContext","setModal","useModalsContext","dispatch","back","messages","message","title","useModalEffect","BottomSheet","Text","useColorScheme","_useAuthContext","windowType","useResizeContext","defaultButtonProps","is_guest","buttonProps","extra","filter","k","TextButton","textStyle","text","WebSocketContext","createContext","sendJsonMessage","WebSocketProvider","disable","_Fragment","WebSocketInternalProvider","path","Context","useBackground","useContext","TURN_SERVER","peerConstraints","iceServers","JSON","parse","urls","sessionConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","VoiceActivityDetection","mediaConstraints","audio","video","framerate","onICEcandidate","pc","_message","rtcMessage","candidate","RTCIceCandidate","addIceCandidate","sendICEcandidate","event","sendMessage","receiver","target","BAND_WIDTH","createOffer","pcRefCurrent","stream","addStream","offerDescription","arr","sdp","split","forEach","str","i","test","RTCSessionDescription","join","optimizeSdp","setLocalDescription","_x","_x2","_x3","_x4","_x5","apply","arguments","camStyle","container","cam","bottonContainer","position","bottom","buttonBar","label","_props$user","_useWebsocketContext","_useLocalCam","pcRef","useRef","_useState","useState","_useState2","_slicedToArray","sender","setSender","_useState3","_useState4","_stream","setStream","isPlay","useMemo","CustomRTCView","useCallback","React","_ref2","RTCView","videoProps","start","_ref3","mode","newStream","mediaDevices","getUserMedia","getDisplayMedia","catch","e","Object","entries","current","_ref4","_ref5","error","_x6","_x7","_x8","stop","getTracks","track","websocketOnMessage","_websocketOnMessage","response","channel_name","peerConnection","RTCPeerConnection","addEventListener","answerDescription","setRemoteDescription","_x9","_x10","useLocalCam","Button","setReceiver","_useRemoteCam","_useState5","_useState6","setUser","_useState7","_useState8","close","clearInterval","statsInterval","_websocketOnMessage2","_pcRef$current","_pcRef$current2","_pcRef$current3","_pcRef$current4","iceConnectionState","activeStream","setInterval","stats","getStats","statsOutput","framePerSecond","report","kind","keys","statName","framesPerSecond","Date","toTimeString","addTransceiver","direction","streams","getRemoteStreams","length","createAnswer","localDescription","_x11","useRemoteCam","TextInput","value","onChangeText","VideoView","scale","maxHeight","flexGrow","focusGuest","containerStyle","setFocusGuest","VideoCallContainer","setDisable","isMobile","useIsMobile","videoMode","setVideoMode","guests","setGuests","_useRtcContext","useRtcContext","Math","max","ceil","sqrt","toggleVideoMode","ThemedView","aspectRatio","flexShrink","borderLeftWidth","borderBottomWidth","flexWrap","RemoteCam","LocalCam","Ionicons","RtcProvider","useUserMembershipList","groupId","getUserMembershipList","useExternalMembershipList","keyword","getExternalMembershipList","contentHeight","setContentHeight","minHeight","paddingVertical","background","multiline","placeholder","editable","disabled","keyboardType","secureTextEntry","setValue","onContentSizeChange","nativeEvent","contentSize","onBlur","onEndEditing","RowField","rowStyle","TextField","CommonTextInput","localSearchReducer","initialState","action","active","Error","_React$useState","index","_React$useState2","setIndex","tabs","onTab","icons","assign","_defineProperty","icon","TabView","renderTabBar","TabBar","indicatorStyle","activeColor","inactiveColor","renderIcon","scene","route","key","onTabPress","findIndex","navigationState","routes","_ref6","_ref7","onIndexChange","renderScene","SceneMap","_ref8","_ref9","component","tabBarPosition","CommonItem","press","setPress","Pressable","outerContainer","outerContainerStyle","onPressIn","onPressOut","bodyView","bodyStyle","padding","item","member","marginRight","Avatar","userId","CopyField","copied","setCopied","Clipboard","setString","InviteItem","selectedRef","has","selected","setSelected","MemberItem","delete","add","GroupTabView","userList","memberList","_useLocalSearch","compare","_useReducer","useReducer","_useReducer2","searchState","useLocalSearch","memberSet","Set","username","includes","dispatchKeyword","InviteModal","FlatList","contentContainerStyle","renderItem","ExternalMembershipTabView","_auth$user2","setKeyword","timeoutRef","externalMemberList","setTimeout","clearTimeout","inviteLink","replace","marginVertical","lightColor","darkColor","drawerTabs","group","external","ModalSection","dayTypes","hours","Array","toString","padStart","minutes","getDisableDays","date","startDate","clone","startOf","endDate","endOf","today","dayjs","result","push","format","defaultDayjs","m","restMinute","parseInt","Calendar","CommonPicker","DateTimePickerModal","datetime","callback","_dayjs","_useLangContext","locale","setDate","dayType","setDayType","hour","setHour","minute","setMinute","_useState9","_useState10","disableDays","setDisableDays","textAlign","Suspense","fallback","disableAllTouchEventsForDisabledDays","onMonthChange","dateString","markedDates","reduce","p","c","values","toISOString","ChannelEditModal","member_id","channelMutation","setName","description","setDescription","_name","avatarFromChannel","separator","newChannel","owner","field","UploadTag","overflow","progress","filename","_upload$props$channel","upload","useUploadContext","expand","setExpand","f","isExpand","INIT","require","Editor","tinymceScriptSrc","process","onInit","editor","onReady","onEditorChange","init","plugins","toolbar","min_height","menubar","branding","statusbar","block_formats","fontsize_formats","ready","setReady","ProfileModal","isSelf","Profile","_auth$user3","subowner","firebaseConfig","messagingSenderId","apiKeyEncrypted","FCM_API_KEY","charCodeAt","app","firebase","initializeApp","apiKey","messaging","onMessage","payload","window","Notification","permission","body","alert","requestToken","requestPermission","serviceWorkerRegistration","navigator","serviceWorker","register","scope","currentToken","getToken","vapidKey","FCM_PUBLIC_VAPID_KEY","preventDefault","unregister","FirebaseContext","setEnable","FirebaseProvider","tokenRef","notification","setNotification","enable","token","isMount","t","putNotification","noti","getNotification","postNotification","Provider","ErrorView","RegistrationModal","setUsername","password","setPassword","checkPassword","setCheckPassword","isStaff","_useState11","_useState12","setError","userMembershipMutation","_create","postUser","_update","patchUser","_delete","deleteUser","useUserMembershipMutation","usernameDisable","newError","is_staff","inviteGroupId","ConfigSection","CommonSection","setLocale","configTheme","useConfigColorScheme","_useFirebaseContext","_useContext","useFirebaseContext","setNoti","n","textDecorationLine","l","colorScheme","setColorScheme","paddingLeft","MemberTabView","memberItem","ScrollView","MessengerTabView","slice","_item$last_message","_item$last_message2","_item$last_message3","_item$last_message4","_avatarFromChannel","avatar","preview_content","FontAwesome","opacity","member_count","replaceAll","unread_count","ConfigTabView","ConfigSections","getBottomTabs","OneTab","MaterialCommunityIcons","TwoTab","FourTab","SimpleLineIcons","main","HomeScreen","_route$params2","navigation","home","setHome","options","headerRight","HeaderRight","useLayoutEffect","_route$params","tab","setOptions","StyledText","ContractFooter","setParams","ChatScreen","_useMessengerChannelL","inputRef","channelAvatar","_memberList$find","timer","setTimer","autoFocus","setAutoFocus","bottomTab","setBottomTab","isEditor","setIsEditor","valueLines","postValue","contentMutation","use_editor","useMessengerContentMutation","canGoBack","goBack","focus","timeout","minWidth","VideoCallSection","d","Messages","reverse","UploadTags","TimerTags","borderBottomRightRadius","top","Entypo","timerFormat","ref","onKeyPress","shiftKey","onFocus","numberOfLines","borderBottomLeftRadius","Promise","resolve","reject","input","document","createElement","onchange","files","onabort","onerror","click","_auth$user4","file","login","LoginScreen","_login","autoCapitalize","onSubmitEditing","DemoScreen","modal","ROOTPATH","prefixes","config","screens","Main","NotFound","NotFoundScreen","link","linkText","marginLeft","colors","useTheme","onAddList","MemberTab","ChatTab","getDrawerTabs","tabBar","borderTopColor","border","pointerEvents","accessibilityRole","borderTopWidth","drawerTab","Tab","elevation","borderRightWidth","MessageModal","createStackNavigator","modalValues","modals","backgroundStyle","UploadContextProvider","ModalsProvider","Drawer","Navigator","screenOptions","headerStyle","header","headerTitleStyle","headerLeft","canGOBackScreen","buttonBackgroundColor","hoverColor","headerLeftContainerStyle","headerBottomColor","cardStyle","animationEnabled","cardStyleInterpolator","CardStyleInterpolators","forHorizontalIOS","Screen","enableScreens","electronVersion","navigationRef","_navigationRef$curren","_navigationRef$curren2","_process","_process$versions","versions","Navigation","defaultColorScheme","useDefaultColorScheme","userColorScheme","NavigationContainer","documentTitle","formatter","linking","LinkingConfiguration","DarkTheme","DefaultTheme","ResizeContextProvider","RootNavigator","Root","useInvitee","headerMode","forVerticalIOS","MainNavigator","headerShown","gestureDirection","pathname","endsWith","search","startsWith","history","replaceState","replaceInviteeState","IGNORE_WERNINGS","warnLogger","warn","some","editorConfig","module","exports"],"sourceRoot":""}