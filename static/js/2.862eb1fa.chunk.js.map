{"version":3,"sources":["src/screens/NotFoundScreen.tsx","src/navigation/Drawer.tsx","src/modals/index.ts","src/navigation/MainNavigator.tsx","src/components/Themed.tsx","src/constants/Colors.ts","src/hooks/useModalsContext.tsx","src/hooks/useResizeContext.tsx","src/components/CommonButton.tsx","src/hooks/lists/useMessengerChannelList.ts","src/components/ModalSection.tsx","src/lib/react-native-paper/Avatar.tsx","src/components/Avatar.tsx","src/components/CommonSection.tsx","src/hooks/useModalEffect.ts","src/navigation/index.tsx","src/hooks/useWebsocketContext.tsx","src/hooks/lists/useUserMembershipList.ts","src/modals/RegistrationModal.tsx","src/hooks/lists/useMessengerMemberList.ts","src/components/CommonItem.tsx","src/components/TextButton.tsx","src/modals/ChannelEditModal.tsx","src/hooks/lists/useMessengerContentList.ts","src/hooks/useUploadContext.tsx","src/components/EditorHtml.tsx","src/components/RowField.tsx","src/components/TabView.tsx","src/components/HeaderRight.tsx","src/modals/ProfileModal.tsx","src/components/ContractFooter.tsx","src/screens/login/LoginScreen.tsx","src/lib/react-native-webrtc/useWebsocketContext.tsx","src/lib/react-native-webrtc/webrtc/p2p.tsx","src/lib/react-native-webrtc/webrtc/index.ts","src/lib/react-native-webrtc/LocalCam.tsx","src/lib/react-native-webrtc/RemoteCam.tsx","src/screens/main/ChatScreen/VideoCallSection.tsx","src/components/Messages/UploadTags.tsx","src/screens/main/CommonChatSection.tsx","src/hooks/useChatSection.tsx","src/screens/main/HomeScreen/ConfigSections.tsx","src/screens/main/HomeScreen/index.tsx","src/lib/tinymce/Editor.tsx","src/components/Editor.tsx","src/screens/main/NoteScreen/EditorSection.tsx","src/screens/index.ts","src/screens/main/ChatScreen/index.tsx","src/screens/main/NoteScreen/index.tsx","src/screens/login/DemoScreen.tsx","src/modals/DateTimePickerModal.tsx","src/components/Messages/MessageContentView.tsx","src/modals/MessageModal.tsx","src/modals/NotePickerModal.tsx","src/hooks/lists/useExternalMembershipList.ts","src/components/TextField.tsx","src/components/CommonTextInput.tsx","src/components/MemberItem.tsx","src/modals/AlertModal.tsx","src/components/Profile.tsx","src/hooks/useFirebaseContext.tsx","src/components/Messages/LinkPreview.tsx","src/components/Messages/FilePreview.tsx","src/components/Messages/EditorPreview.tsx","src/components/Messages/index.tsx","src/hooks/lists/useMessengerViewerList.ts","src/hooks/useLocalSearch.ts","src/components/CopyField.tsx","src/modals/InviteModal.tsx","src/components/Messages/TimerTags.tsx","src/hooks/lists/useTimerMessageContent.ts","src/hooks/useInvitee.ts","web/firebase-config.js","web/editor-config.js","src/navigation/LinkingConfiguration.ts"],"names":["NotFoundScreen","_ref","navigation","lang","useLangContext","auth","useAuthContext","_jsxs","View","style","styles","container","children","_jsx","Text","title","TouchableOpacity","onPress","replace","user","link","linkText","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","padding","fontSize","fontWeight","marginTop","paddingVertical","color","MemberTabView","setModal","useModalsContext","userList","useUserMembershipList","map","item","index","CommonItem","containerStyle","marginHorizontal","bodyStyle","ProfileModal","id","marginLeft","name","MessengerTabView","channelList","useMessengerChannelSorted","avatarFromChannel","navigate","NoteTabView","colors","useTheme","theme","useColorScheme","windowType","useResizeContext","_useState","useState","_useState2","_slicedToArray","setIndex","onAddList","_auth$user","RegistrationModal","is_guest","ChannelEditModal","type","drawerTabs","Colors","iconColor","MemberTab","component","icon","MaterialCommunityIcons","size","marginBottom","ChatTab","Ionicons","NoteTab","getDrawerTabs","useEffect","undefined","tabBar","background","borderTopColor","border","width","pointerEvents","_Fragment","Profile","userId","username","flexDirection","TextButton","textStyle","borderRadius","accessibilityRole","content","Object","keys","length","TabView","tabs","tabBarPosition","onTab","borderTopWidth","borderColor","values","drawerTab","Tab","elevation","borderRightWidth","tab","label","textAlign","InviteModal","AlertModal","DateTimePickerModal","NotePickerModal","MessageModal","Main","createStackNavigator","isMobile","useIsMobile","_useLangContext","locale","entries","useMemo","console","log","login","main","modalValues","modals","backgroundStyle","UploadContextProvider","ModalsProvider","Drawer","WebSocketProvider","disable","FirebaseProvider","Navigator","screenOptions","route","headerStyle","header","height","headerTitleStyle","text","headerLeft","canGOBackScreen","findIndex","v","goBack","canGoBack","disabled","CommonButton","buttonBackgroundColor","hoverColor","margin","paddingHorizontal","headerRight","HeaderRight","headerLeftContainerStyle","borderBottomWidth","headerBottomColor","cardStyle","flexShrink","animationEnabled","cardStyleInterpolator","CardStyleInterpolators","forHorizontalIOS","_ref2","_ref3","key","screen","Screen","options","useThemeColor","props","colorName","colorFromProps","lightColor","darkColor","otherProps","_objectWithoutProperties","_excluded","light","dark","DefaultText","_objectSpread","_excluded2","DefaultView","tint","tabIconDefault","tabIconSelected","buttonBorderColor","focus","ModalsContext","createContext","allModals","setModals","_useState3","_useState4","animationType","setAnimationType","filter","visible","Component","Provider","value","newModals","m","modal","Modal","transparent","useContext","getWindowType","window","ResizeContextContext","Dimensions","get","ResizeContextProvider","detectMobile","useMobileDetect","_useWindowDimensions","useWindowDimensions","setWindowType","DefaultButton","hover","setHover","Pressable","onHoverIn","onHoverOut","selectable","_props","borderWidth","useMessengerChannelList","queryClient","useQueryClient","lastJsonMessage","useWebsocketContext","data","useQuery","_asyncToGenerator","getChannelList","setQueryData","_data","find","concat","_toConsumableArray","sort","a","b","_data2$message_set$","channel","last_message","message_set","created","_a$last_message","_b$last_message","useMessengerChannelMutation","useMutation","postChannel","onSuccess","invalidateQueries","update","patchChannel","direct","postDirectChannel","mutateAsync","CommonSection","autoScale","outerContainerStyle","alignSelf","maxWidth","BottomSheet","normalizeHash","hash","min","max","Math","floor","str","initHash","i","charCodeAt","abs","stringToHSL","Avatar","split","join","toUpperCase","avatar","member_count","subowner","owner","outerContainer","outerContainerFill","withSeparator","separator","titleView","titleStyle","subtitle","bodyView","marginVertical","callback","deps","useNavigation","event","e","preventDefault","addListener","removeListener","enableScreens","electronVersion","navigationRef","React","params","_navigationRef$curren","_navigationRef$curren2","current","_process","_process$versions","process","versions","Navigation","defaultColorScheme","useDefaultColorScheme","userColorScheme","colorScheme","NavigationContainer","ref","documentTitle","formatter","linking","LinkingConfiguration","DarkTheme","DefaultTheme","RootNavigator","Root","useInvitee","mode","headerMode","forVerticalIOS","MainNavigator","headerShown","gestureDirection","replaceInviteeState","location","IGNORE_WERNINGS","warnLogger","warn","message","some","includes","defaultContext","sendJsonMessage","WebSocketContext","WebSocketInternalProvider","path","Context","useBackground","token","setToken","AppState","currentState","isActive","setIsActive","_useWebSocket","useWebSocket","websockerURL","shouldReconnect","closeEvent","protocols","onOpen","onClose","AsyncStorage","getItem","then","listener","addEventListener","nextState","remove","groupId","getUserMembershipList","useUserMembershipMutation","_useAuthContext","dispatch","_create","postUser","_update","patchUser","password","_delete","deleteUser","_auth$user2","delete","ErrorView","form_error","form_error_text","setUsername","setName","_useState5","_useState6","setPassword","_useState7","_useState8","checkPassword","setCheckPassword","_useState9","_useState10","isStaff","_useState11","_useState12","error","setError","externalMemberList","useExternalMembershipList","userMembershipMutation","usernameDisable","back","ModalSection","RowField","CommonTextInput","setValue","keyboardType","secureTextEntry","newError","test","is_staff","inviteGroupId","textAlignVertical","useMessengerMemberList","channel_id","getMessengerMemberList","useMessengerMemberMutation","invite","postBulkMessengerMember","leave","deleteMessengerMember","_React$useState","_React$useState2","press","setPress","onPressIn","onPressOut","minHeight","member_id","channelMutation","messengerMemberMutation","description","setDescription","_name","useModalEffect","TextField","multiline","newChannel","group","field","updateContnetPage","pages","updateMessages","update_i","forEach","page","timer","is_archive","useMessengerContentList","_useInfiniteQuery","useInfiniteQuery","pageParam","getMessengerContentList","_x","apply","arguments","select","next","getNextPageParam","lastPage","refetchOnReconnect","refetchOnWindowFocus","query","updated_gte","Date","state","dataUpdatedAt","toISOString","newData","getNewMessengerContentList","contents","lastMessageId","nextMessages","timerMessageRefetch","fetchNextPage","pageParams","useMessengerContentMutation","channelId","uploadDispatch","useUploadContext","postMessage","_patch","patchMessengerContent","mutate","patch","UploadContext","upload","uploadReducer","initialState","action","files","f","filename","progress","push","_defineProperty","_useReducer","useReducer","_useReducer2","RenderHTML","lazy","regexForStripHTML","memo","ScrollView","contentContainerStyle","Suspense","fallback","replaceAll","defaultTextProps","contentWidth","source","baseStyle","rowStyle","icons","assign","k","renderTabBar","TabBar","indicatorStyle","labelStyle","whiteSpace","activeColor","inactiveColor","renderIcon","scene","onTabPress","_ref4","_ref5","navigationState","routes","_ref6","_ref7","onIndexChange","onSwipeStart","Platform","OS","getSelection","sel","removeAllRanges","renderScene","SceneMap","_ref8","_ref9","defaultButtonProps","buttonProps","extra","isSelf","_auth$user3","_auth$user4","_auth$user5","openURL","url","href","Linking","Styles","footer_buttons","footer_button","AntDesign","paddingBottom","paddingRight","login_container","login_header","paddingTop","login_header_logo","resizeMode","login_header_text","login_header_text_bold","login_wrapper","borderTopRightRadius","borderTopLeftRadius","form","form_input","button","button_label","login_social","login_social_separator","login_social_separator_line","login_social_separator_text","login_social_buttons","login_social_button","login_social_icon","login_social_facebook","login_footer_text","guest_footer_text","login_footer_link","TURN_SERVER","peerConstraints","iceServers","JSON","parse","urls","sessionConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","VoiceActivityDetection","mediaConstraints","audio","video","framerate","onICEcandidate","pc","_message","rtcMessage","candidate","RTCIceCandidate","addIceCandidate","sendICEcandidate","sendMessage","receiver","target","createOffer","pcRefCurrent","stream","addStream","offerDescription","arr","sdp","RTCSessionDescription","optimizeSdp","setLocalDescription","_x2","_x3","_x4","_x5","camStyle","cam","bottonContainer","position","bottom","buttonBar","_props$user","_useWebsocketContext","_useLocalCam","pcRef","useRef","sender","setSender","_stream","setStream","isPlay","CustomRTCView","useCallback","RTCView","videoProps","start","newStream","mediaDevices","getUserMedia","getDisplayMedia","catch","_x6","_x7","_x8","stop","getTracks","track","websocketOnMessage","_websocketOnMessage","response","channel_name","peerConnection","RTCPeerConnection","answerDescription","setRemoteDescription","_x9","_x10","useLocalCam","Button","setReceiver","_useRemoteCam","setUser","close","clearInterval","statsInterval","_websocketOnMessage2","_pcRef$current","_pcRef$current2","_pcRef$current3","_pcRef$current4","iceConnectionState","activeStream","setInterval","stats","getStats","statsOutput","framePerSecond","report","kind","statName","framesPerSecond","toTimeString","addTransceiver","direction","streams","getRemoteStreams","createAnswer","localDescription","_x11","useRemoteCam","TextInput","onChangeText","VideoView","scale","maxHeight","flexGrow","focusGuest","setFocusGuest","VideoCallContainer","setDisable","videoMode","setVideoMode","guests","setGuests","_useRtcContext","useRtcContext","ceil","sqrt","toggleVideoMode","ThemedView","aspectRatio","borderLeftWidth","flexWrap","RemoteCam","LocalCam","RtcProvider","UploadTag","overflow","expand","setExpand","uploadData","isExpand","extraButtons","inputRef","editorValue","setEditorValue","setTimer","messageEvent","sendToScreen","bottomTab","setBottomTab","autoFocus","setAutoFocus","valueLines","contentMutation","postValue","Messages","reverse","UploadTags","TimerTags","borderBottomRightRadius","top","Entypo","timerFormat","datetime","onKeyPress","shiftKey","onFocus","numberOfLines","borderBottomLeftRadius","marginRight","Promise","resolve","reject","input","document","createElement","onchange","onabort","onerror","click","file","editor","parseInt","channelAvatar","memberList","_memberList$find","useLayoutEffect","setOptions","ConfigSection","setLocale","configTheme","useConfigColorScheme","_useFirebaseContext","useFirebaseContext","noti","enable","setNoti","setEnable","n","textDecorationLine","l","setColorScheme","memberItem","MemberItem","member","today","slice","_item$last_message","_item$last_message2","_item$last_message3","_item$last_message4","_avatarFromChannel","date","preview_content","FontAwesome","opacity","paddingLeft","unread_count","_item$last_message5","_item$last_message6","flexBasis","wordBreak","ConfigTabView","ConfigSections","getBottomTabs","headerSetter","headerIndexRef","OneTab","TwoTab","ThreeTab","FourTab","SimpleLineIcons","INIT","require","Editor","tinymceScriptSrc","onInit","onReady","onEditorChange","init","setup","plugins","toolbar","skin","content_css","menubar","branding","statusbar","block_formats","fontsize_formats","forced_root_block_attrs","ready","setReady","active","editable","setEditable","onEdit","EditorHtml","left","onLongPress","HomeScreen","_route$params2","home","setHome","tempref","indexRef","measure","fx","fy","_","px","py","round","useHeaderSetter","_route$params","StyledText","ContractFooter","setParams","ChatScreen","useChatSection","minWidth","VideoCallSection","d","CommonChatSection","NoteScreen","editMode","setEditMode","EditorSection","LoginScreen","_login","placeholder","autoCapitalize","onSubmitEditing","DemoScreen","dayTypes","hours","Array","toString","padStart","minutes","getDisableDays","startDate","clone","startOf","add","endDate","endOf","dayjs","result","format","Calendar","CommonPicker","_dayjs","restMinute","defaultDayjs","setDate","dayType","setDayType","hour","setHour","minute","setMinute","disableDays","setDisableDays","disableAllTouchEventsForDisabledDays","onMonthChange","dateString","markedDates","reduce","p","c","selected","MessageContentView","Hyperlink","linkDefault","linkStyle","onPressLink","isOwner","Clipboard","setString","keyword","getExternalMembershipList","contentHeight","setContentHeight","onContentSizeChange","newHeight","nativeEvent","contentSize","onBlur","onEndEditing","messages","buttons","firebaseConfig","messagingSenderId","apiKeyEncrypted","FCM_API_KEY","app","firebase","initializeApp","apiKey","messaging","onMessage","payload","Notification","permission","body","alert","requestToken","requestPermission","serviceWorkerRegistration","navigator","serviceWorker","register","scope","currentToken","getToken","vapidKey","FCM_PUBLIC_VAPID_KEY","unregister","FirebaseContext","tokenRef","notification","setNotification","isMount","t","putNotification","getNotification","postNotification","_useContext","touchableRef","image_url","Image","uri","humanFileSize","pow","toFixed","showBorder","thumbnail","filesize","MessengerContentPageItem","_nextPage2","lastTouchRef","now","nextPage","_nextPage","nextContent","onTouchMove","index2","isSystem","isFirst","ownerId","dayChanged","getOnPress","timerToString","attatchment_set","attatchment","aIndex","EditorPreview","FilePreview","LinkPreview","useViewerContentList","_props$auth","_props$auth$user","renderItem","FlatList","onScroll","contentOffset","y","onLayout","layout","localSearchReducer","Error","CopyField","copied","setCopied","InviteItem","selectedRef","has","setSelected","GroupTabView","_useLocalSearch","compare","searchState","useLocalSearch","memberSet","Set","dispatchKeyword","user_ids","ExternalMembershipTabView","setKeyword","timeoutRef","setTimeout","clearTimeout","inviteLink","external","_timerFormat","year","month","TimerTag","end","ratio","diff","timerMessages","getTimerMessageContentList","sorted","_sorted$","ms","Number","MAX_VALUE","timeout","useTimerMessageContentList","setNow","invitee_id","invitee_state","pathname","endsWith","search","startsWith","history","replaceState","redirect","module","exports","editorConfig","ROOTPATH","prefixes","config","screens","NotFound"],"mappings":"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","file":"static/js/2.862eb1fa.chunk.js","sourcesContent":["import { StackScreenProps } from '@react-navigation/stack';\nimport * as React from 'react';\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useLangContext from '../hooks/useLangContext';\n\nexport default function NotFoundScreen({\n  navigation,\n}: StackScreenProps<any, 'NotFound'>) {\n  const { lang } = useLangContext()\n  const { auth } = useAuthContext()\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>{lang(\"This screen doesn't exist.\")}</Text>\n      <TouchableOpacity onPress={() => navigation.replace(auth.user?'HomeScreen':'LoginScreen')} style={styles.link}>\n        <Text style={styles.linkText}>{lang(\"Go to home screen!\")}</Text>\n      </TouchableOpacity>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n  },\n  link: {\n    marginTop: 15,\n    paddingVertical: 15,\n  },\n  linkText: {\n    fontSize: 14,\n    color: '#2e78b7',\n  },\n});\n","import { useTheme } from '@react-navigation/native';\nimport React, { useEffect, useState } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Profile from '../components/Profile';\nimport TextButton from '../components/TextButton';\nimport Colors from '../constants/Colors';\nimport useResizeContext from '../hooks/useResizeContext';\nimport TabView from '../components/TabView';\nimport { TabViewRecord, UserMembership } from '../types';\nimport useModalsContext from '../hooks/useModalsContext';\nimport ChannelEditModal from '../modals/ChannelEditModal';\nimport CommonItem from '../components/CommonItem';\nimport { Text } from '../components/Themed';\nimport useAuthContext, { Auth } from '../hooks/useAuthContext';\nimport { useMessengerChannelSorted } from '../hooks/lists/useMessengerChannelList';\nimport { navigate } from '.'\nimport { avatarFromChannel } from '../components/Avatar';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { Ionicons, MaterialCommunityIcons } from '../lib/@expo/vector-icons';\nimport RegistrationModal from '../modals/RegistrationModal';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport ProfileModal from '../modals/ProfileModal';\n\n\nconst MemberTabView = ()=>{\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  return <View style={{flex:1}}>\n    {userList?.map((item, index)=>{\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>setModal(ProfileModal, {id:item.id})}>\n        <Text style={{marginLeft:20}}>{item.name}</Text>\n      </CommonItem>\n    })}\n  </View>\n}\n\nconst MessengerTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted('messenger', auth);\n  return <View style={{flex:1}}>\n    {channelList?.map((item, index)=>{\n      const {name} = avatarFromChannel(item, auth.user)\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\n        <Text style={{marginLeft:20}}>{name}</Text>\n      </CommonItem>\n    })}\n  </View>\n}\n\nconst NoteTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted('mycontent', auth);\n  return <View style={{flex:1}}>\n    {channelList?.map((item, index)=>{\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>navigate(\"NoteScreen\", {id:item.id})}>\n        <Text style={{marginLeft:20}}>{item.name}</Text>\n      </CommonItem>\n    })}\n  </View>\n}\nconst getDrawerTabs = (theme:'light'|'dark')=>{\n  const color = Colors[theme].iconColor\n  return {\n    MemberTab:{\n      title:'member',\n      component:MemberTabView,\n      icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\n    },\n    ChatTab:{\n        title:'chat',\n        component:MessengerTabView,\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\n    },\n    NoteTab:{\n        title:'note',\n        component:NoteTabView,\n        icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='pencil-box'/>\n    }\n  } as TabViewRecord\n}\n\nexport default ({auth}:{auth:Auth})=> {\n  const { colors } = useTheme();\n  const theme = useColorScheme();\n  const windowType = useResizeContext();\n  const [index, setIndex] = useState<number>();\n  const { setModal } = useModalsContext()\n  \n  const onAddList = [\n    ()=>setModal(RegistrationModal, auth.user?.is_guest?{id:auth.user.id}:{}),\n    ()=>setModal(ChannelEditModal, {type:'messenger'}),\n    ()=>setModal(ChannelEditModal, {type:'mycontent'}),\n  ]\n  const drawerTabs = getDrawerTabs(theme)\n\n  useEffect(()=>{\n    if(index===undefined){\n      setIndex(0)\n    }\n  }, [])\n  return <View style={windowType=='landscape'?[\n      styles.tabBar,\n      {\n        backgroundColor: Colors[theme].background,\n        borderTopColor: colors.border,\n      },\n      // tabBarStyle,\n    ]:{width:0}}\n    pointerEvents={false ? 'none' : 'auto'}\n  >\n    {windowType=='landscape' && auth.user && index!==undefined && <>\n      <Profile userId={auth.user.id} username={auth.user.username} name={auth.user.name}/>\n      <View style={{flexDirection:'row-reverse'}}>\n          <TextButton title='+' textStyle={{fontSize:20}} style={{borderRadius:20}} onPress={onAddList[index]}/>\n      </View>\n      <View accessibilityRole=\"tablist\" style={styles.content}>\n        {Object.keys(drawerTabs).length>1 ? \n          <TabView tabs={drawerTabs} tabBarPosition={\"top\"} onTab={setIndex} index={index}/>: \n          <View style={{borderTopWidth:1, flex:1, borderColor:colors.border}}>            \n            {Object.values(drawerTabs).map(drawerTab=>{const Tab = drawerTab.component; return <Tab key={drawerTab.title}/>})}\n          </View>\n        }\n      </View>\n    </>}\n  </View>\n}\n\n{/*<Text style={[styles.label, { color: d.isFocused ? colors.primary : '#222' }]}></Text> */}\n\nconst styles = StyleSheet.create({\n    tabBar: {\n      width:240,\n      elevation: 8,\n      borderRightWidth:1,\n      borderColor:Colors.borderColor\n    },\n    content: {\n      flex: 1,\n      flexDirection: 'row',\n    },\n    tab: {\n        flex: 1,\n        alignItems: 'center',\n    },\n    label: {\n        textAlign: 'center',\n        backgroundColor: 'transparent',\n      },\n  });","import InviteModal from \"./InviteModal\";\nimport ProfileModal from \"./ProfileModal\";\nimport ChannelEditModal from \"./ChannelEditModal\"\nimport AlertModal from \"./AlertModal\";\nimport DateTimePickerModal from \"./DateTimePickerModal\"\nimport MessageModal from \"./MessageModal\";\nimport RegistrationModal from \"./RegistrationModal\";\nimport NotePickerModal from \"./NotePickerModal\";\n\nexport default [\n    InviteModal,\n    ProfileModal,\n    ChannelEditModal,\n    AlertModal,\n    DateTimePickerModal,\n    NotePickerModal,\n    MessageModal,\n    RegistrationModal\n]","import { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\nimport React, {useMemo} from 'react';\nimport { View } from 'react-native';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport useResizeContext from '../hooks/useResizeContext';\nimport NotFoundScreen from '../screens/NotFoundScreen';\nimport {main, login} from '../screens';\nimport Drawer from './Drawer';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { WebSocketProvider } from '../hooks/useWebsocketContext';\nimport HeaderRight from '../components/HeaderRight'\nimport Colors from '../constants/Colors';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport { FirebaseProvider } from '../hooks/useFirebaseContext';\nimport useIsMobile from '../hooks/useIsMobile';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { ModalsProvider } from '../hooks/useModalsContext';\nimport modals from '../modals';\nimport useLangContext from '../hooks/useLangContext';\nimport CommonButton from '../components/CommonButton';\nimport { UploadContextProvider } from '../hooks/useUploadContext';\n\nconst Main = createStackNavigator();\n\nfunction headerLeft(navigation:any, route:any, windowType:string, theme:'light'|'dark', isMobile:boolean){\n    const canGOBackScreen = ['HomeScreen', 'LoginScreen'].findIndex(v=>v == route.name) == -1\n    const goBack = ()=>{\n        if (navigation.canGoBack())\n            navigation.goBack()\n        else if (canGOBackScreen)\n            navigation.replace('HomeScreen')\n    }\n    if (windowType=='portrait' && canGOBackScreen)\n        return <TouchableOpacity onPress={goBack} disabled={!isMobile}>\n            <CommonButton title={''} color={isMobile?Colors[theme].buttonBackgroundColor:Colors[theme].hoverColor} onPress={goBack} disabled={isMobile} style={{width:32, height:32, margin:16, paddingVertical:1, paddingHorizontal:4}}>\n                <Ionicons size={24} color={Colors[theme].iconColor} name=\"arrow-back\"/>\n            </CommonButton>\n        </TouchableOpacity>\n    return null\n}\n\nexport default ()=>{\n    const windowType = useResizeContext();\n    const isMobile = useIsMobile()\n    const {auth} = useAuthContext()\n    const theme = useColorScheme()\n    const {lang, locale} = useLangContext()\n    const entries = useMemo(()=>{\n        if (auth.user === undefined)\n            return []\n        console.log('current user: ', auth.user)\n        return Object.entries(auth.user === null?login:main)\n    }, [auth, locale])\n    const modalValues = useMemo(()=>{\n        if (auth.user === undefined)\n            return []\n        return auth.user === null?[]:modals\n    }, [auth])\n    const backgroundStyle = theme=='light'?{}:{backgroundColor:'#010409'}\n    return (auth.user!==undefined?<View style={{flexDirection:'row', flex:1}}>\n        <UploadContextProvider>\n            <ModalsProvider modals={modalValues}>\n                {auth.user?<Drawer auth={auth}/>:undefined}\n                <View style={[{flex:1}, backgroundStyle]}>\n                    <WebSocketProvider disable={auth.user === null || auth.user === undefined}>\n                        <FirebaseProvider user={auth.user}>\n                            <Main.Navigator\n                                screenOptions={({navigation, route})=>({\n                                    headerStyle:{backgroundColor:Colors[theme].header, height:isMobile?50:undefined},\n                                    headerTitleStyle:{color:Colors[theme].text},\n                                    headerLeft:()=>headerLeft(navigation, route, windowType, theme, isMobile),\n                                    headerRight:()=><HeaderRight/>,\n                                    headerLeftContainerStyle:{backgroundColor:Colors[theme].header, borderBottomWidth:1, borderColor:Colors[theme].headerBottomColor},\n                                    cardStyle:[{flexShrink:1}, backgroundStyle],\n                                    animationEnabled:windowType=='portrait',\n                                    cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS\n                                })}\n                            >\n                                {entries.map(([key, screen])=><Main.Screen key={key} name={key} component={screen.component} options={{ title: lang(screen.title) }} />)}\n                                <Main.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\n                            </Main.Navigator>\n                        </FirebaseProvider>\n                    </WebSocketProvider>\n                </View>\n            </ModalsProvider>\n        </UploadContextProvider>\n    </View>:<></>);\n}","/**\n * Learn more about Light and Dark modes:\n * https://docs.expo.io/guides/color-schemes/\n */\n\nimport * as React from 'react';\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\n\nimport Colors from '../constants/Colors'\nimport useColorScheme from '../hooks/useColorScheme';\n\nexport function useThemeColor(\n  props: { light?: string; dark?: string },\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\n) {\n  const theme = useColorScheme();\n  const colorFromProps = props[theme];\n\n  if (colorFromProps) {\n    return colorFromProps;\n  } else {\n    return Colors[theme][colorName];\n  }\n}\n\ntype ThemeProps = {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport type TextProps = ThemeProps & DefaultText['props'];\nexport type ViewProps = ThemeProps & DefaultView['props'];\n\nexport function Text(props: TextProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\n\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\n}\n\nexport function View(props: ViewProps) {\n  const { style, lightColor, darkColor, ...otherProps } = props;\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\n\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","const tintColorLight = '#2f95dc';\nconst tintColorDark = '#fff';\n\nexport default {\n  light: {\n    text: '#000',\n    background: '#fff',\n    tint: tintColorLight,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorLight,\n    hoverColor:'rgb(242,242,242)',\n    buttonBackgroundColor: '#f6f8fa', //'rgba(9,30,66,0.08)',//rgb(242,242,242)\\\n    header:'#f6f8fa',\n    headerBottomColor:'rgb(216, 216, 216)',\n    buttonBorderColor:'rgba(27,31,36,0.15)',\n    iconColor: 'black'\n  },\n  dark: {\n    text: '#fff',\n    background: '#000',\n    tint: tintColorDark,\n    tabIconDefault: '#ccc',\n    tabIconSelected: tintColorDark,\n    hoverColor: '#010409',//'rgb(1,4,9)',\n    buttonBackgroundColor: '#010409',//'#282624',\n    header:'#010409',\n    headerBottomColor:'rgb(40, 40, 40)',\n    buttonBorderColor:'rgba(229,225,220,0.15)',\n    iconColor: 'white'\n  },\n  borderColor:'#d0d7de',\n  \n  focus:'#0065A4',\n};\n","import React, { useState, createContext, useContext, useEffect } from \"react\";\nimport { Modal } from \"react-native\";\nimport useResizeContext from \"./useResizeContext\";\n\ntype ModalProps = any\n\ntype ModalState = {\n  Component:React.ComponentType<ModalProps>,\n  props:any\n  visible:boolean\n}\ntype SetModal = (Component:ModalState[\"Component\"]|null, props:ModalProps|null)=>void\n\nconst ModalsContext = createContext<{setModal: SetModal}>({\n    setModal: () => {}\n});\n\nexport const ModalsProvider = ({children, modals:allModals}:{children:React.ReactNode, modals:React.ComponentType<ModalProps>[]}) => {\n    const [modals, setModals] = useState<ModalState[]>([]);\n    const windowType = useResizeContext();\n    const [animationType, setAnimationType] = useState('none')\n    const setModal:SetModal = (Component, props) => {\n        const newModals = modals.map(m=>{\n            if(Component==null || m.Component != Component){\n                return {\n                    ...m,\n                    visible:false\n                }\n            }\n            else if(m.Component == Component){\n                return {\n                    Component, \n                    props:props!==null?props:m.props,\n                    visible:props!==null\n                }\n            }\n            return m        \n        })\n        setModals(newModals);\n    }\n    useEffect(()=>{\n        if (modals.filter(v=>v.visible).length == 0)\n            setAnimationType(windowType == 'landscape'?'fade':'slide')\n    }, [windowType])\n    useEffect(()=>{\n        setModals(allModals.map((Component)=>({Component, props:null, visible:false})))\n    }, [allModals])\n    return <ModalsContext.Provider value={{setModal}}>\n        {children}\n        {modals.map((modal, index)=>{\n            const { Component, props, visible } = modal;\n            return <Modal key={index} animationType={animationType as any} visible={visible} transparent>\n                <Component {...props}/>\n            </Modal>\n        })}\n    </ModalsContext.Provider>\n}\n\nexport default ()=>{\n    const modalsContext = useContext(ModalsContext)\n    return modalsContext\n}\n\n","import React, { useState, useEffect, createContext, useContext, useMemo } from 'react';\nimport { Dimensions, ScaledSize, useWindowDimensions } from 'react-native';\n//@ts-ignore\nimport useMobileDetect from 'use-mobile-detect-hook';\n\ntype WindowType = 'portrait' | 'landscape'\n\nconst getWindowType = (window:{width:number, height:number})=> window.height >= window.width?'portrait':'landscape' as WindowType;\n\nconst ResizeContextContext = createContext<WindowType>(getWindowType(Dimensions.get('window')));\n\nexport const ResizeContextProvider = ({children}:{children:React.ReactNode})=>{\n  const detectMobile = useMobileDetect();\n  const {width, height} = useWindowDimensions()\n  const [windowType, setWindowType] = useState(getWindowType({width, height}))\n  useEffect(()=>{\n    setWindowType(getWindowType({width, height}))\n  }, [width, height])\n  return <ResizeContextContext.Provider value={detectMobile.isMobile()?'portrait':windowType}>\n    {children}\n  </ResizeContextContext.Provider>\n}\n\nexport default function useResizeContext() {\n  const windowType = useContext(ResizeContextContext)\n  return windowType\n}","import React, { useState } from 'react';\nimport { Text, StyleSheet, Pressable, StyleProp, ViewStyle} from 'react-native';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { CustomButtonProps } from '../types';\n\nconst DefaultButton = (props:CustomButtonProps & {borderColor:string})=>{\n    const [hover, setHover] = useState(false)\n    return <Pressable\n        onPress={()=>props.onPress()}\n        //@ts-ignore\n        onHoverIn={()=>setHover(true)}\n        onHoverOut={()=>setHover(false)}\n        disabled={props.disabled}\n        style={[\n            {\n                paddingVertical:5, \n                paddingHorizontal:16\n            },\n            props.style,\n            (hover || props.disabled)?{backgroundColor:props.color, borderColor:props.borderColor}:{}\n        ]}>\n            {props.children?props.children:\n            <Text selectable={false} style={[{fontSize:14}, props.textStyle]}>{props.title}</Text>}\n        </Pressable>\n}\n\nexport default (props:CustomButtonProps)=>{\n    const theme = useColorScheme()\n    const _props = {\n        color:Colors[theme].hoverColor,\n        borderColor:theme=='light'?Colors[theme].buttonBorderColor:'#7d8590',\n        ...props,\n        style:[\n            styles.style,\n            {\n                backgroundColor:Colors[theme].buttonBackgroundColor,\n                borderColor:Colors[theme].buttonBorderColor\n            },\n            props.style,\n        ] as StyleProp<ViewStyle>,\n        textStyle:[\n            styles.text, \n            {color:Colors[theme].text},\n            props.textStyle\n        ]\n    }\n    return <DefaultButton {..._props}/>\n}\n\nconst styles = StyleSheet.create({\n    style:{\n        borderRadius:6, \n        borderWidth:1, \n    },\n    text:{\n        textAlign:'center', \n        fontWeight:'600'\n    }\n});\n","import { useEffect } from \"react\";\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { getChannelList, postChannel, postDirectChannel, patchChannel } from \"../../services\";\nimport { MessengerChannel, MessengerContent } from \"../../types\";\nimport { Auth } from \"../useAuthContext\";\nimport useWebsocketContext from \"../useWebsocketContext\";\n\nexport default function useMessengerChannelList(type:string, auth?:Auth){\n  const queryClient = useQueryClient()\n  const {lastJsonMessage} = useWebsocketContext()\n  const { data } = useQuery([\"ChannelList\", type] , async()=>await getChannelList(type, auth?.user?.id))\n\n  useEffect(()=>{\n    if(lastJsonMessage !=null){\n      if(lastJsonMessage['type']=='enter'){\n        queryClient.setQueryData<MessengerChannel[]>([\"ChannelList\", type], (_data)=>{\n          return (_data?.find(v=>v.id==lastJsonMessage['data']['id'])?_data:[lastJsonMessage['data'] , ...(_data|| [])]).sort((a, b)=>a.id - b.id)\n        })\n      }\n      if (lastJsonMessage['type']=='next_message'){\n        const data:MessengerContent = lastJsonMessage['data']\n        queryClient.setQueryData<MessengerChannel[]>([\"ChannelList\", type], (_data)=>(_data || []).map(v=>{\n          if (v.id == data.channel){\n            return {...v, last_message:{content:data.message_set[0]?.content, created:data.created}}\n          }\n          return v\n        }))\n      }\n      // if(lastJsonMessage['type']=='leave'){\n      //   queryClient.setQueryData<Channel[]>([\"MessengerChannelList\", type], (_data)=>_data?.filter(v=>v.id!=lastJsonMessage['data']['channel_id']) || [])\n      // }\n    }\n  }, [lastJsonMessage])\n  return data\n}\n\nexport function useMessengerChannelSorted(type:string, auth?:Auth){\n  const channelList = useMessengerChannelList(type, auth);\n  return channelList?.sort((a, b)=>(a.last_message?.created || '') < (b.last_message?.created || '')?1:-1)\n}\nexport function useMessengerChannelMutation(type:string){\n  const queryClient = useQueryClient()\n\n  const create = useMutation(postChannel, {\n    onSuccess: ()=>queryClient.invalidateQueries([\"ChannelList\", type])\n  });\n\n  const update = useMutation(patchChannel, {\n    onSuccess: () => queryClient.invalidateQueries([\"ChannelList\", type])\n  })\n\n  const direct = useMutation(postDirectChannel, {\n    onSuccess: () => queryClient.invalidateQueries([\"ChannelList\", type])\n  })\n\n  return { create:create.mutateAsync, update:update.mutateAsync, direct:direct.mutateAsync}\n}","import React from 'react'\nimport CommonSection from \"./CommonSection\";\nimport useResizeContext from '../hooks/useResizeContext';\n\nexport default (props:{children?: React.ReactNode})=>{\n    const windowType = useResizeContext();\n    return <CommonSection\n        autoScale\n        outerContainerStyle={{flex:1, alignSelf:'center', backgroundColor:'#8888', flexShrink:1, width:'100%'}}\n        containerStyle={{flex:1, margin:0, justifyContent:'center', alignItems:'center'}}\n        bodyStyle={windowType=='landscape'?{width:'90%', height:'90%', padding:'5%'}:{width:'100%', height:'100%', maxWidth:1080}}\n    >\n        {props.children}\n    </CommonSection>\n}\n\nexport const BottomSheet = (props:{children?: React.ReactNode})=><CommonSection\n    autoScale\n    outerContainerStyle={{flex:1, alignSelf:'center', backgroundColor:'#8888', width:'100%'}}\n    containerStyle={{flex:1, margin:0, justifyContent:'flex-end'}}\n>\n    {props.children}\n</CommonSection>","import * as React from 'react';\nimport { Avatar } from 'react-native-paper';\nimport { AvatarProps } from '../../types';\n\nconst normalizeHash = (hash: number, min: number, max: number) => {\n    return Math.floor((hash % (max - min)) + min);\n};\n\nconst stringToHSL = (str: string, initHash?:number) => {\n    let hash = initHash || 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    hash = Math.abs(hash);\n    return `hsl(${normalizeHash(hash, 0, 360)}, ${normalizeHash(hash, 0, 100)}%, ${normalizeHash(hash, 25, 75)}%)`;\n};\n\nexport default (props:AvatarProps) => {\n    const backgroundColor = stringToHSL(props.name, props.userId)\n    return <Avatar.Text style={{backgroundColor}} size={props.size} label={props.name.split(' ').map(v=>v[0]).join().toUpperCase()} />\n};","import React from 'react';\nimport Avatar from '../lib/react-native-paper/Avatar';\nimport { AvatarProps, MessengerChannel, User } from '../types';\n\nexport function avatarFromChannel(item:MessengerChannel, user?:User|null){\n    let avatar;\n    let name = item.name\n    if (item.member_count<3){\n        avatar = (item.member_count==1 || user?.id == item.subowner.id)?item.owner:item.subowner\n        name = name.length>0?name:avatar.name \n    }\n    return {avatar, name}\n}\n\nexport default (props:AvatarProps)=>{\n    return <Avatar {...props}/>\n}\n\n","import * as React from 'react';\nimport { View, Text } from './Themed';\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle } from 'react-native';\nimport Colors from '../constants/Colors';\n\nexport type SectionParamList = {\n    title?: string,\n    titleStyle?:StyleProp<TextStyle>\n    outerContainerStyle?:StyleProp<TextStyle>\n    containerStyle?:StyleProp<ViewStyle>\n    bodyStyle?:StyleProp<ViewStyle>\n    subtitle?: string\n    withSeparator?: boolean\n    autoScale?:boolean\n    children?: React.ReactNode\n}\n\nexport default function CommonSection(props:SectionParamList){\n  return (\n    <View style={[styles.outerContainer, props.autoScale?{}:styles.outerContainerFill, props.outerContainerStyle]}>\n        <View style={[styles.container, props.containerStyle]}>\n            {props.withSeparator?<View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />:undefined}\n            {props.title?<View style={styles.titleView}>\n              <Text style={[styles.title, props.titleStyle]}>{props.title}</Text>\n              <Text style={styles.subtitle}>{props.subtitle}</Text>\n            </View>:undefined}\n            <View style={[styles.bodyView, props.bodyStyle]}>\n            {props.children}\n            </View>\n          </View>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n  outerContainer:{\n    alignItems:'stretch',\n    backgroundColor:'transparent'\n  },\n  outerContainerFill:{\n    width:'100%',\n    maxWidth:1080,\n  },\n  container: {\n      marginHorizontal:20,\n      marginVertical: 10,\n      backgroundColor:'transparent',\n    },\n    titleView:{\n      width: '100%',\n      flexDirection:'row',\n      backgroundColor:'transparent',\n      marginBottom:5,\n    },\n    title: {\n      flex:1,\n      fontSize: 16,\n    },\n    subtitle: {\n      flex:1,\n      fontSize: 12,\n      textAlign: 'right',\n      marginTop:4\n    },\n    separator: {\n      marginBottom: 0,\n      height: 1,\n      width: '100%',\n    },\n    bodyView:{\n      width: '100%',\n      padding: 20,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderWidth:1,\n      borderColor:Colors.borderColor,\n      borderRadius:6\n    }\n  });\n  ","import { DependencyList, useEffect } from \"react\";\nimport { EventArg, useNavigation } from \"@react-navigation/core\";\n\n\nexport default (callback:()=>void, deps?:DependencyList)=>{\n    const navigation = useNavigation()\n    useEffect(()=>{\n        const event = (e:EventArg<any, true, any>)=> {\n            e.preventDefault();\n            callback()\n        }\n        navigation.addListener('beforeRemove', event)\n        return () => {\n            navigation.removeListener('beforeRemove', event)\n        }\n  }, deps)\n}","/**\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\n * https://reactnavigation.org/docs/getting-started\n *\n */\nimport * as React from 'react';\nimport { useColorScheme as useDefaultColorScheme } from 'react-native';\nimport { useColorScheme as useColorScheme } from 'react-native-appearance';\nimport { enableScreens } from 'react-native-screens';\nimport { NavigationContainer, DefaultTheme, DarkTheme, NavigationContainerRef } from '@react-navigation/native';\nimport { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\n\nimport useResizeContext, { ResizeContextProvider } from '../hooks/useResizeContext';\nimport useInvitee, { replaceInviteeState } from '../hooks/useInvitee';\nimport { modal } from '../screens';\nimport LinkingConfiguration from './LinkingConfiguration';\nimport MainNavigator from './MainNavigator';\n\n\nenableScreens();\n\nconst navigationRef = React.createRef<NavigationContainerRef>();\n\nexport function navigate(name:string, params?:any) {\n  if (params)\n    navigationRef.current?.navigate(name, params);\n  navigationRef.current?.navigate(name);\n}\n\nlet electronVersion:string|undefined;\ntry{\n  electronVersion = process?.versions?.['electron']\n}\ncatch(e){\n  electronVersion = undefined\n}\n\nexport default function Navigation() {\n  const defaultColorScheme = useDefaultColorScheme()\n  const userColorScheme = useColorScheme()\n  const colorScheme = userColorScheme =='no-preference'?defaultColorScheme:userColorScheme\n  return <NavigationContainer\n    ref={navigationRef}\n    documentTitle={{formatter: (options, route) => {return `TOKKI TOK`}}}\n    linking={electronVersion?undefined:LinkingConfiguration}\n    theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\n        <ResizeContextProvider>\n          <RootNavigator />\n        </ResizeContextProvider>\n  </NavigationContainer>\n}\n\n\n// A root stack navigator is often used for displaying modals on top of all other content\n// Read more here: https://reactnavigation.org/docs/modal\nconst Root = createStackNavigator();\n\nfunction RootNavigator() {\n    const windowType = useResizeContext();\n    useInvitee()\n    return <Root.Navigator\n        mode= 'modal'\n        headerMode= 'screen'\n        screenOptions={{\n            cardStyle:{backgroundColor:\"white\"},\n            animationEnabled: true,\n            cardStyleInterpolator: CardStyleInterpolators.forVerticalIOS,\n        }}\n    >\n        <Root.Screen name=\"Main\" component={MainNavigator} options={{headerShown:false}}/>\n        {Object.entries(modal).map(([key, screen])=><Root.Screen key={key} name={key} component={screen.component} options={{\n            title: screen.title,\n            gestureDirection: windowType == 'landscape'?'vertical-inverted':'vertical'\n        }} />)}\n    </Root.Navigator>\n}\n\nreplaceInviteeState(window.location)\n\nconst IGNORE_WERNINGS:string[] = ['setNativeProps', 'useNativeDriver'];\n\nconst warnLogger = console.warn\n\nconsole.warn = (message: string|Object) => {\n    var warn = true;\n    if (message instanceof Object){\n      warn = false;\n    }\n    else if (IGNORE_WERNINGS.some(log=>message.includes(log))){\n      warn = false\n    };\n    if (warn){\n      warnLogger(message);\n    }\n    else{\n        // console.log(message)\n    }\n};\n","import React, { Context, createContext,  useContext, useEffect, useState } from \"react\"\nimport useWebSocket from \"react-use-websocket\"\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\"\nimport {websockerURL } from \"../constants/Envs\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { AppState, AppStateStatus } from \"react-native\";\n\ntype WebsocketContextType = {lastJsonMessage:any, sendJsonMessage:SendJsonMessage }\nconst defaultContext = {lastJsonMessage:undefined, sendJsonMessage:()=>{}}\nconst WebSocketContext = createContext<WebsocketContextType>(defaultContext);\n\nexport const WebSocketInternalProvider = ({children, path, Context, useBackground}:{children:React.ReactNode, path:string, Context:Context<WebsocketContextType>, useBackground?:boolean})=>{\n  const [token, setToken] = useState<string|null>(null)\n  const [isActive, setIsActive] = useState<boolean>(useBackground || AppState.currentState == 'active')\n  const { lastJsonMessage, sendJsonMessage } = useWebSocket(`${websockerURL}/${path}`,{\n    shouldReconnect: (closeEvent) => true,\n    protocols: token?['Authorization',  token]:undefined,\n    onOpen: (e)=>{console.log(`success websocket connection(${path})`)},\n    onClose: (e)=> {console.log(`closed websocket connection(${path})`)},\n  }, isActive && token!=null)\n  useEffect(()=>{\n    AsyncStorage.getItem('Authorization').then(setToken)\n    const onChange = (nextState:AppStateStatus)=>setIsActive(useBackground || nextState == 'active')\n    const listener = AppState.addEventListener(\"change\", onChange)\n    return ()=> listener.remove()\n  }, [])\n  return <Context.Provider value={token!=null?{lastJsonMessage, sendJsonMessage}:defaultContext}>\n      {children}\n    </Context.Provider>\n}\n\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\n  return disable?<>{children}</>:<WebSocketInternalProvider path={'messenger/ws/'} Context={WebSocketContext}>\n    {children}\n  </WebSocketInternalProvider>\n}\n\nexport default ()=>{\n  const webSocketContext = useContext(WebSocketContext)\n  return webSocketContext\n}\n\n","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { deleteUser, getUserMembershipList, patchUser, postUser } from \"../../services\";\nimport useAuthContext, { Auth } from \"../useAuthContext\";\n\nexport default function useUserMembershipList(auth?:Auth){\n  const { data } = useQuery([\"UserMembershipList\", auth?.groupId] , async()=>auth?.groupId?(await getUserMembershipList(auth?.groupId)):[])\n  return data\n}\n\nexport function useUserMembershipMutation(){\n  const queryClient = useQueryClient()\n  const { auth, dispatch } = useAuthContext()\n  const _create = useMutation(postUser, {\n    onSuccess: ()=>{\n      queryClient.invalidateQueries(\"UserMembershipList\")\n    }\n  })\n  const _update = useMutation(patchUser, {\n    onSuccess: (data, user)=>{\n      if (user.id == auth.user?.id)\n        if(user.username && user.password){\n          dispatch({type:'LOGIN_REQUEST', username:user.username, password:user.password})\n        }\n        else{\n          dispatch({type:\"REFRESH\"})\n        }\n      else{\n        queryClient.invalidateQueries(\"UserMembershipList\")\n      }\n    }\n  })\n  const _delete = useMutation(deleteUser, {\n    onSuccess: (data, id)=>{\n      queryClient.invalidateQueries(\"UserMembershipList\")\n      if (id == auth.user?.id)\n        dispatch({type:\"LOGOUT_REQUEST\"})\n    }\n  })\n  return {create:_create.mutateAsync, update:_update.mutateAsync, delete:_delete.mutateAsync}\n}","import React, { useState, useEffect } from \"react\";\nimport { StyleSheet, TextInput } from \"react-native\";\nimport useLangContext from \"../hooks/useLangContext\";\nimport useUserMembershipList, { useUserMembershipMutation } from \"../hooks/lists/useUserMembershipList\";\nimport useAuthContext from \"../hooks/useAuthContext\";\nimport ModalSection from \"../components/ModalSection\";\nimport useModalsContext from \"../hooks/useModalsContext\";\nimport { View, Text } from \"../components/Themed\";\nimport RowField from \"../components/RowField\";\nimport CommonButton from \"../components/CommonButton\";\nimport CommonTextInput from \"../components/CommonTextInput\";\nimport useExternalMembershipList from \"../hooks/lists/useExternalMembershipList\";\n// import TextButton from \"../components/TextButton\";\n// import Colors from \"../constants/Colors\";\n// import useColorScheme from \"../hooks/useColorScheme\";\n\ntype ErrorMessages = {\n    username?:string,\n    name?:string,\n    password?:string,\n    checkPassword?:string\n}\n\nconst ErrorView = (props:{message?:string})=>{\n  const { lang } = useLangContext()\n  return props.message?<View style={styles.form_error}>\n  <Text style={styles.form_error_text}>{lang(props.message)}</Text>\n</View>:<></>\n}\n\nexport default function RegistrationModal({id}:{id?:number}) {\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  // const theme = useColorScheme()\n  // const color = Colors[theme].text\n  const { setModal } = useModalsContext()\n  const [username, setUsername] = useState(\"\");\n  const [name, setName] = useState(\"\")\n  const [password, setPassword] = useState(\"\");\n  const [checkPassword, setCheckPassword] = useState(\"\")\n  const [isStaff, setIsStaff] = useState(false)\n  const [error, setError] = useState<ErrorMessages>({})\n  const userList = useUserMembershipList(auth)\n  const externalMemberList = useExternalMembershipList(username)\n  const userMembershipMutation = useUserMembershipMutation()\n  const user = userList?.find(v=>v.id==id)\n  const usernameDisable = user && user.is_guest===false\n  useEffect(()=>{\n    if (user){\n      setUsername(user.username)\n      setName(user.name)\n    }\n  }, [user?.id])\n  const _register = ()=>{\n    let newError:ErrorMessages = {};\n    if ((externalMemberList?.length || 0) >0 && !usernameDisable) newError.username = \"The username is already in use.\"\n    if (username.length < 10 || username.length > 64) newError.username = \"Set 10-64 characters.\"\n    if (name.length < 1 || name.length > 64) newError.name = \"Set 1-64 characters.\"\n    if (!/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{10,64}$/.test(password) && !(usernameDisable && password.length==0)) newError.password = \"Set 10-64 characters with a combination of letters/numbers/valid special characters.\"\n    if (password != checkPassword) newError.checkPassword = \"Incorrect between password and check password.\"\n    if (Object.keys(newError).length > 0){\n        setError(newError)\n        return\n    }\n    if (id){\n      userMembershipMutation.update({\n        id,\n        name,\n        username:usernameDisable?undefined:username,\n        is_guest:false,\n        password:password.length>0?password:undefined,\n      }).then(()=>{(id!=auth.user?.id || user?.is_guest) && back()})\n    }\n    else{\n      auth?.groupId && userMembershipMutation.create({\n          username,\n          name,\n          password,\n          is_guest:false,\n          is_staff:isStaff,\n          inviteGroupId:auth.groupId,\n\n      }).then(back)\n    }\n  }\n  const back = ()=>{\n    setModal(RegistrationModal, null)\n  }\n  return <ModalSection>\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\n      <View style={{flex:1, width:'100%'}}>\n        <Text style={{fontSize:20}}>{usernameDisable?lang('Edit User'):lang('Create User')}</Text>\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n        <RowField name={lang('Username')} width={'60%'}>\n          {usernameDisable?<Text style={{fontSize:16}}>{username}</Text>:<CommonTextInput\n              value={username}\n              setValue={(text) => setUsername(text)}\n              keyboardType={'email-address'}\n          />}\n          <ErrorView message={error.username}/>\n        </RowField>\n        <RowField name={lang('Name')} width={'60%'}>\n          <CommonTextInput\n              value={name}\n              setValue={(text) => setName(text)}\n          />\n          <ErrorView message={error.name}/>\n        </RowField>\n        <RowField name={lang('Password')} width={'60%'}>\n          <CommonTextInput\n              value={password}\n              secureTextEntry\n              setValue={(text) => setPassword(text)}\n          />\n          <ErrorView message={error.password}/>\n        </RowField>\n        <RowField name={lang('Check Password')} width={'60%'}>\n          <CommonTextInput\n              value={checkPassword}\n              secureTextEntry\n              setValue={(text) => setCheckPassword(text)}\n          />\n          <ErrorView message={error.checkPassword}/>\n        </RowField>\n        {/* <RowField name={lang('Manager Permission')} width={'60%'}>\n          <View style={{flexDirection:'row'}}>\n            {[[lang('Yes'), true], [lang('No'), false]].map(([title, value])=><TextButton \n              key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:isStaff==value?'underline':'none'}} style={{borderRadius:20}} onPress={(\n              )=>setIsStaff(value)}/>)}\n          </View>\n        </RowField> */}\n      </View>\n      <View style={{width:'100%', flexDirection:'row'}}>\n        {id && <View style={{flexDirection:'row', justifyContent:'flex-start'}}>\n          <CommonButton title={lang('delete account')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>userMembershipMutation.delete(id).then(back)}/>\n        </View>}\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\n          <CommonButton title={lang('save')} onPress={_register}/>\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\n        </View>\n      </View>\n    </View>\n  </ModalSection>\n};\n\nconst styles = StyleSheet.create({\n  form_error: {\n    height: 22,\n    width:'100%',\n  },\n  form_error_text:{\n    textAlignVertical:'center',\n    color:'red',\n    fontSize:13,\n  },\n  separator: {\n    marginBottom: 20,\n    height: 1,\n    width: '100%',\n  },\n});","import { useMutation, useQuery, useQueryClient } from \"react-query\";\nimport { postBulkMessengerMember, deleteMessengerMember, getMessengerMemberList } from \"../../services\";\n\nexport default function useMessengerMemberList(channel_id:number){\n  const { data } = useQuery([\"MessengerMemberList\", channel_id] , async()=>await getMessengerMemberList(channel_id))\n  return data\n}\n\n\nexport function useMessengerMemberMutation(){\n  const queryClient = useQueryClient()\n  const invite = useMutation(postBulkMessengerMember, {\n    onSuccess: ()=>{\n      queryClient.invalidateQueries(\"MessengerMemberList\")\n    }\n  })\n\n  const leave = useMutation(deleteMessengerMember, {\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"ChannelList\")\n      queryClient.invalidateQueries(\"MessengerMemberList\")\n    }\n  })\n  return {invite:invite.mutateAsync, leave:leave.mutateAsync}\n}","import * as React from 'react';\nimport { View } from './Themed';\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle, Pressable } from 'react-native';\nimport Colors from '../constants/Colors';\n\nexport type ItemParamList = {\n    outerContainerStyle?:StyleProp<TextStyle>\n    containerStyle?:StyleProp<ViewStyle>\n    bodyStyle?:StyleProp<ViewStyle>\n    children?: React.ReactNode\n    onPress?: ()=>void\n}\n\nexport default function CommonItem(props:ItemParamList){\n  // const [hover, setHover] = React.useState(false)\n  const [press, setPress] = React.useState(false)\n  return (\n    <Pressable\n      style={[styles.outerContainer ,props.outerContainerStyle, (press)?{backgroundColor:'rgb(242,242,242)'}:{}]}\n      onPressIn={()=>setPress(true)}\n      onPress={()=>props.onPress?.()}\n      onPressOut={()=>setPress(false)}\n      //  //@ts-ignore\n      //  onHoverIn={()=>setHover(true)}\n      //  onHoverOut={()=>setHover(false)}\n    >\n        <View style={[styles.container ,props.containerStyle]}>\n            <View style={[styles.bodyView, props.bodyStyle]}>\n                <>{props.children}</>\n            </View>\n      </View>\n    </Pressable>\n    )\n}\n\nconst styles = StyleSheet.create({\n  outerContainer:{\n    width:'100%',\n    maxWidth:1080,\n    alignItems:'stretch',\n  },  \n  container: {\n      marginHorizontal:20,\n      backgroundColor:'transparent'\n    },\n    bodyView:{\n      width: '100%',\n      padding: 10,\n      minHeight: 40,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderBottomWidth:1,\n      borderColor:Colors.borderColor,\n      backgroundColor:'transparent'\n    }\n  });\n  ","import React, { useState } from 'react';\nimport { StyleSheet} from 'react-native';\nimport { CustomButtonProps } from '../types';\nimport CommonButton from './CommonButton';\n\nexport default (props:CustomButtonProps)=>{\n    return <CommonButton {...props} style={[styles.style, props.style]}/>\n}\n\nconst styles = StyleSheet.create({\n    style:{\n        borderRadius:6, \n        backgroundColor: 'transparent',\n        borderWidth:0\n    },\n});\n","import React, {useState, useEffect } from 'react';\nimport { StyleSheet } from 'react-native';\nimport { View, Text } from '../components/Themed';\nimport CommonButton from '../components/CommonButton';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { navigate } from '../navigation';\nimport { Channel } from '../types';\nimport useMessengerChannelList, { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\nimport TextField from '../components/TextField';\nimport useModalsContext from '../hooks/useModalsContext';\nimport useLangContext from '../hooks/useLangContext';\nimport ModalSection from '../components/ModalSection';\nimport { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\nimport { avatarFromChannel } from '../components/Avatar';\nimport useModalEffect from '../hooks/useModalEffect';\n\nexport default function ChannelEditModal({id, member_id, type}: {id?:number, member_id?:number, type:string}) {\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const channelList = useMessengerChannelList(type, auth)\n  const channelMutation = useMessengerChannelMutation(type)\n  const messengerMemberMutation = useMessengerMemberMutation()\n  const channel = channelList?.find(v=>v.id==id)\n  const title = type=='messenger'?\n    (id?lang('Chat Setting'):lang('New chat')):\n    (id?lang('Channel Setting'):lang('New Channel'))\n  const [name, setName] = useState('')\n  const [description, setDescription] = useState<string|undefined>('')\n  const back = ()=>{\n    setModal(ChannelEditModal, null)\n  }\n\n  useEffect(()=>{\n    if (channel){\n      const {name:_name} = avatarFromChannel(channel, auth.user)\n      setName(_name)\n      setDescription(type=='messenger'?(channel?.description || ''):undefined)\n    }\n  }, [channel?.id])\n  useModalEffect(back, [])\n\n  return <ModalSection>\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\n      <View style={{width:'100%'}}>\n        <Text style={{fontSize:20}}>{title}</Text>\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n        <TextField name={lang('Channel Name')} value={name} setValue={setName} width={'60%'}/>\n        {type=='messenger' && <TextField name={lang('Description')} value={description} setValue={setDescription} multiline width={'60%'}/>}\n      </View>\n      <View style={{width:'100%', flexDirection:'row'}}>\n        {member_id &&<View style={{flexDirection:'row', justifyContent:'flex-start'}}>\n          <CommonButton title={lang('leave')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>messengerMemberMutation.leave(member_id).then(back)}/>\n        </View>}\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\n          <CommonButton title={lang('save')} onPress={()=>{\n            if(auth?.user?.id && auth.groupId){\n              const newChannel:Channel = {id, name, description, type, owner:auth?.user?.id, group:auth.groupId};\n              (id?channelMutation.update(newChannel):channelMutation.create(newChannel)).then(v=>navigate(\"Main\", {\n                screen:v.type == 'messenger'?'ChatScreen':'NoteScreen',\n                params:{id:v.id}\n              }))\n            }\n          }}/>\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\n        </View>\n      </View>\n    </View>\n  </ModalSection>\n}\n\nconst styles = StyleSheet.create({\n  field:{\n    width:'50%',\n    flexDirection:'row',\n    padding:10,\n  },\n  separator: {\n    marginBottom: 20,\n    height: 1,\n    width: '100%',\n  },\n})","import { useEffect } from \"react\"\nimport { InfiniteData, Query, QueryKey, useInfiniteQuery, useMutation, useQueryClient } from \"react-query\"\nimport { getMessengerContentList, postMessage, patchMessengerContent, getNewMessengerContentList } from \"../../services\"\nimport { EditMessage, MessengerContent } from \"../../types\"\nimport useWebsocketContext from \"../useWebsocketContext\"\nimport useUploadContext from \"../useUploadContext\"\n\nexport type MessengerContentPage = {\n  next?:MessengerContentPage\n  current:MessengerContent[]\n}\n\nconst updateContnetPage = (pages:MessengerContentPage[], updateMessages:MessengerContent[])=>{\n  let update_i = 0\n  pages.forEach(page=>{\n    if (update_i == updateMessages.length)\n      return\n    page.current.forEach(v=>{\n      if (update_i == updateMessages.length)\n        return\n      if (v.id==updateMessages[update_i].id){\n        v.timer = updateMessages[update_i].timer\n        v.is_archive = updateMessages[update_i].is_archive\n        update_i += 1\n      }\n    })\n    page.current = page.current.filter(v=>!v.is_archive)\n  })\n}\n\nexport default function useMessengerContentList(channel_id:number){  \n  const queryClient = useQueryClient()\n  const refetch = (query:Query<MessengerContentPage, unknown, InfiniteData<MessengerContentPage>, QueryKey>)=>{\n    const updated_gte = new Date(query.state.dataUpdatedAt).toISOString()\n    const newData = {...query.state.data}\n    getNewMessengerContentList(channel_id, updated_gte).then(contents=>{\n      if(newData.pages){\n        const lastMessageId = newData.pages[0].current[0].id || 0\n        const nextMessages = contents.filter(v=>v.id>lastMessageId && v.is_archive==false)\n        const updateMessages = contents.filter(v=>v.id<=lastMessageId)\n        const timerMessageRefetch = nextMessages.findIndex(v=>v.timer) >= 0 || updateMessages.length > 0\n        newData.pages[0].current = [...nextMessages, ...newData.pages[0].current]\n        updateContnetPage(newData.pages, updateMessages)\n        timerMessageRefetch && queryClient.invalidateQueries([\"TimerMessageContentList\", channel_id])\n      }\n    })\n    return false\n  }\n  const { data, fetchNextPage } = useInfiniteQuery<MessengerContentPage>(\n    [\"MessengerContentList\", channel_id], \n    async({pageParam})=>getMessengerContentList(channel_id, pageParam).then(current=>({current})), \n    {\n      select:data=>{\n        if(data.pages.length > 1)\n          data.pages[data.pages.length - 2].next = data.pages[data.pages.length - 1]\n        return data;\n      },\n      getNextPageParam:(lastPage)=>lastPage?.current.length?lastPage.current[lastPage.current.length - 1].id:undefined,\n      refetchOnReconnect:false,\n      refetchOnWindowFocus:refetch\n    }\n  )\n  const { lastJsonMessage } = useWebsocketContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null && lastJsonMessage['data']['channel'] == channel_id){\n      if(lastJsonMessage['type']=='next_message'){\n        queryClient.setQueryData<InfiniteData<MessengerContentPage>>([\"MessengerContentList\", channel_id], (_data)=>{\n          if(_data?.pages[0].current && _data?.pages[0].current[0].id != lastJsonMessage['data'].id)\n            _data.pages[0].current = [lastJsonMessage['data'], ..._data?.pages[0].current]\n          return {...(_data || {pages:[], pageParams:[]})}\n        })\n      }\n      if(lastJsonMessage['type']=='update_message'){\n        queryClient.setQueryData<InfiniteData<MessengerContentPage>>([\"MessengerContentList\", channel_id], (_data)=>{\n          _data?.pages && updateContnetPage(_data.pages, [lastJsonMessage['data']])\n          return {...(_data || {pages:[], pageParams:[]})}\n        })\n      }\n    }\n  }, [lastJsonMessage])\n  return { data, fetchNextPage }\n}\n\nexport function useMessengerContentMutation(channelId?:number){\n  // const queryClient = useQueryClient()\n  const {dispatch:uploadDispatch} = useUploadContext()\n  const create = useMutation((message:EditMessage)=>postMessage(message, uploadDispatch), {\n    onSuccess: () => {\n      // queryClient.setQueryData(['MessengerContentList'], (data:any) => ({\n      //   pages: data.pages.slice(0, 1),\n      //   pageParams: data.pageParams.slice(0, 1),\n      // }))\n      // queryClient.invalidateQueries(\"MessengerContentList\")\n    }\n  });\n  const _patch = useMutation(patchMessengerContent);\n  return { create:create.mutate, patch:_patch.mutate }\n}","import React, { createContext, useContext, Dispatch, useReducer } from 'react';\n\ntype UploadState = Record<number, {\n  filename: string,\n  progress?: number,\n}[]>\n\ntype UploadAction = {\n  channel:number,\n  filename:string,\n  progress?:number\n}\n\ntype UploadContextType = {\n  upload:UploadState,\n  dispatch:Dispatch<UploadAction>\n}\n\nconst UploadContext = createContext<UploadContextType>({upload:{} as UploadState, dispatch:()=>{}});\n\nconst uploadReducer =(initialState:UploadState, action:UploadAction)=>{\n  const files = [...(initialState[action.channel] || [])]\n  const index = files.findIndex(f=>f.filename==action.filename)\n  if (index >= 0){\n    files[index] = {filename:action.filename, progress:action.progress} \n  }\n  else{\n    files.push({filename:action.filename, progress:action.progress})\n  }\n  return {\n    ...initialState,\n    [action.channel] : files.filter(f=>(f.progress || 0)<1)\n  }\n}\n\nexport const UploadContextProvider = ({children}:{children:React.ReactNode})=>{\n  const [upload, dispatch] = useReducer(uploadReducer, {})\n  return <UploadContext.Provider value={{upload, dispatch}}>\n    {children}\n  </UploadContext.Provider>\n}\n\nexport default function useUploadContext() {\n  const upload = useContext(UploadContext)\n  return upload\n}","import React, { Suspense } from 'react'\nimport { View, Text } from \"./Themed\"\nimport useColorScheme from \"../hooks/useColorScheme\";\nimport Colors from \"../constants/Colors\";\nimport { ScrollView } from 'react-native';\n\nconst RenderHTML = React.lazy(()=> import('react-native-render-html'))\n\nexport const regexForStripHTML = /<\\/?[^>]*>/gi;\n\nexport default React.memo(({content}:{content:string})=>{\n    const theme = useColorScheme()\n    return <ScrollView contentContainerStyle={{paddingHorizontal:15, backgroundColor:Colors[theme].background}}>\n        <Suspense fallback={<Text>{content.replaceAll(regexForStripHTML, '')}</Text>}>\n            <RenderHTML defaultTextProps={{selectable:true}} contentWidth={320} source={{'html':content}} baseStyle={{color:Colors[theme].text}}/>\n        </Suspense>\n    </ScrollView>\n})","import React, { useMemo } from 'react';\n\nimport { TextProps, StyleProp } from 'react-native';\nimport {View, Text } from './Themed'\nimport useResizeContext from '../hooks/useResizeContext';\n\ntype Props = {\n  name: string,\n  width?:any,\n  children: React.ReactNode\n  textStyle?: StyleProp<TextProps>\n}\n\nexport default function RowField(props:Props) {\n  const windowType = useResizeContext()\n  const rowStyle = useMemo(()=>windowType=='landscape'?\n    {flexDirection:'row', alignItems: 'center', justifyContent:'space-between'}:\n    {flexDirection:'column', alignItems:'flex-start'} as any\n  , [windowType])\n  return (\n    <View style={[{paddingVertical:windowType=='landscape'?15:5, width:'100%'}, rowStyle]}>\n        <Text style={[windowType=='landscape'?{flex:1}:{width:'100%'},{paddingHorizontal: 15, fontSize:16}, props.textStyle]}>{props.name}</Text>\n        <View style={[windowType=='landscape'?{flex:6}:{width:'100%'},{paddingHorizontal: 15}]}>\n          <View style={{width:props.width}}>\n            {props.children}\n          </View>\n        </View>\n    </View>\n  )\n}","import React from 'react';\nimport { Platform } from 'react-native';\nimport { TabView, SceneMap,NavigationState, SceneRendererProps, TabBar } from 'react-native-tab-view';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport useLangContext from '../hooks/useLangContext';\nimport { TabViewRecord } from '../types';\n\n\nexport default (props:{tabs:TabViewRecord, tabBarPosition:\"top\"|\"bottom\", index?:number, onTab?:(index:number)=>void})=>{\n  const { lang } = useLangContext()\n  const index = props.index || 0\n  const theme = useColorScheme()\n  const entries = Object.entries(props.tabs)\n  const onTab = props.onTab\n  const icons = Object.assign({}, ...entries.map(([k, v])=>({[k]:v.icon})))\n  return <TabView\n    renderTabBar={(props:SceneRendererProps & {navigationState: NavigationState<any>})=>{\n      return <TabBar\n        {...props}\n        indicatorStyle={{ backgroundColor: \"#2196F3\" }}\n        style={{ backgroundColor:Colors[theme].background}}\n        /* @ts-ignore */\n        labelStyle={{whiteSpace:\"nowrap\"}}\n        activeColor={Colors[theme].text}\n        inactiveColor={Colors[theme].text}\n        renderIcon={(scene)=>icons[scene.route.key]}\n        onTabPress={(scene)=>onTab?.(entries.findIndex(([k, v])=>k == scene.route.key))}\n      />\n    }}\n    navigationState={{ index, routes: entries.map(([k, v])=>({key:k, title:lang(v.title)}))}}\n    onIndexChange={(v)=>{onTab?.(v)}}\n    onSwipeStart={()=>{\n      if (Platform.OS === 'web') {\n        if (window.getSelection) {\n            var sel = window.getSelection();\n            sel?.removeAllRanges();\n        }\n    }\n    }}\n    renderScene={SceneMap(Object.assign({}, ...entries.map(([k, v])=>({[k]:v.component}))))}\n    tabBarPosition={props.tabBarPosition}\n  />\n}\n\n","import React from 'react'\nimport TextButton from \"./TextButton\"\nimport useAuthContext from \"../hooks/useAuthContext\"\nimport useResizeContext from '../hooks/useResizeContext'\nimport { View } from 'react-native'\nimport useModalsContext from '../hooks/useModalsContext'\nimport AlertModal from '../modals/AlertModal'\nimport useLangContext from '../hooks/useLangContext'\nimport useColorScheme from '../hooks/useColorScheme'\nimport Colors from '../constants/Colors'\n\ntype ButtonProps = {title:string, onPress:()=>void, windowType?:'landscape'|'portrait'}\n\nexport default (props:{extra?:ButtonProps[]})=>{\n    const { lang } = useLangContext()\n    const theme = useColorScheme()\n    const {auth, dispatch} = useAuthContext()\n    const { setModal } = useModalsContext()\n    const windowType = useResizeContext()\n    const defaultButtonProps:ButtonProps[] = [{title:lang('sign out'), onPress:()=>{\n        if (auth?.user?.is_guest){\n            setModal(AlertModal, {type:\"GUEST_LOGOUT\"})\n        }\n        else{\n            dispatch({type:\"LOGOUT_REQUEST\"})\n        }\n    }}]\n    const buttonProps = (props.extra?[...props.extra, ...defaultButtonProps]:defaultButtonProps).filter(v=>v.windowType==windowType || v.windowType == undefined)\n    return<View style={{flexDirection:'row'}}>\n        {buttonProps.map((v,k)=><TextButton key={k} {...v} textStyle={{color:Colors[theme].text}} color='#gray'/>)}\n    </View>\n}\n  ","import React, { useEffect } from 'react';\nimport Profile from '../components/Profile';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\nimport CommonButton from '../components/CommonButton';\nimport { Channel } from '../types';\nimport { navigate } from '../navigation';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\nimport RegistrationModal from './RegistrationModal';\n\nexport default function ProfileModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const theme = useColorScheme()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const user = userList?.find(v=>v.id==id)\n  const isSelf = auth.user && user && (auth.user?.id==user?.id)\n  const channelMutation = useMessengerChannelMutation('messenger')\n  const back = ()=>{\n    setModal(ProfileModal, null)\n  }\n  useEffect(()=>{\n    if (!(id && user) && userList)\n      back()\n  }, [userList])\n  useModalEffect(back, [])\n  return user?<BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('profile')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    \n    <Profile username={user.username} name={user.name} userId={user.id} />\n    {isSelf?\n    (!auth.user?.is_guest && <CommonButton title={lang('Account Settings')} onPress={()=>{setModal(RegistrationModal, {id:auth.user?.id})}}/>):\n    <CommonButton title={lang('1:1 Chat')} onPress={()=>{\n      if(auth?.user?.id && auth.groupId){\n        const newChannel:Channel = {name:\"\", type:'messenger', owner:auth?.user?.id, group:auth.groupId, subowner:user.id};\n        channelMutation.direct(newChannel).then(v=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id:v.id}}))\n      }\n    }}/>}\n  </BottomSheet>:<></>\n}\n","import React from 'react'\nimport { View, StyleSheet, Linking, Platform, TouchableOpacity  } from 'react-native'\nimport { } from 'react-native-gesture-handler'\nimport { AntDesign } from '../lib/@expo/vector-icons'; \nimport Colors from '../constants/Colors';\n\nconst openURL = Platform.OS=='web'?(url:string)=>{location.href=url}:Linking.openURL\n\nexport default (props:{theme:'light'|'dark'})=>{\n    return<View style={Styles.footer_buttons}>\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>openURL(\"https://github.com/blacktokki/tokki-tok\")}>\n            <AntDesign name=\"github\" size={24} color={Colors[props.theme].iconColor} />\n        </TouchableOpacity>\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>Linking.openURL(\"mailto:ydh051541@naver.com\")}>\n            <AntDesign name=\"mail\" size={24} color={Colors[props.theme].iconColor} />\n        </TouchableOpacity>\n    </View>\n}\n\nconst Styles = StyleSheet.create({\n      footer_buttons: {\n        width: '100%',\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        paddingBottom: 20,\n        paddingRight: 20,\n      },\n      footer_button: {\n        alignItems: 'center',\n        justifyContent: 'center',\n        width: 38,\n        height: 38,\n        marginHorizontal: 12,\n        borderWidth: 1,\n        borderColor: '#E7E7E7',\n        borderRadius: 60,\n      },\n})","import React, {useEffect, useState} from 'react';\nimport {\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n  StyleSheet,\n} from 'react-native';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useAuthContext from '../../hooks/useAuthContext';\nimport useLangContext from '../../hooks/useLangContext';\nimport ContractFooter from '../../components/ContractFooter';\n\nexport default function LoginScreen({\n  navigation, route\n}: StackScreenProps<any, 'Login'>) {\n  const { lang } = useLangContext()\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const {error, dispatch} = useAuthContext()\n  const _login = ()=>dispatch({type:'LOGIN_REQUEST', username, password})\n  useEffect(() => {\n    navigation.setOptions({\n      headerRight: undefined\n    });\n  }, [navigation]);\n\n  return (<View style={Styles.login_container}>\n    <View style={Styles.login_wrapper}>\n      <View style={Styles.form}>\n        {error && <View style={Styles.form_error}>\n          <Text style={Styles.form_error_text}>{lang(error)}</Text>\n        </View>}\n        <TextInput\n          style={Styles.form_input}\n          value={username}\n          placeholder={lang('Username')}\n          onChangeText={(text) => setUsername(text)}\n          autoCapitalize={'none'}\n          keyboardType={'email-address'}\n          onSubmitEditing={_login}\n        />\n        <TextInput\n          style={Styles.form_input}\n          value={password}\n          placeholder={lang('Password')}\n          secureTextEntry\n          onChangeText={(text) => setPassword(text)}\n          onSubmitEditing={_login}\n        />\n        <TouchableOpacity onPress={_login}>\n          <View style={Styles.button}>\n            <Text style={Styles.button_label}>{lang('Sign in')}</Text>\n          </View>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => dispatch({type:\"LOGIN_GUEST\"})}>\n          <Text style={Styles.guest_footer_text}>\n            {lang(\"Sign in as guest\")}\n          </Text>\n        </TouchableOpacity>\n      </View>\n      <View style={Styles.login_social}>\n        <View style={Styles.login_social_separator}>\n          <View style={Styles.login_social_separator_line} />\n          <Text style={Styles.login_social_separator_text}>{'*'}</Text>\n          <View style={Styles.login_social_separator_line} />\n        </View>\n        <View style={Styles.login_social_buttons}>\n        </View>\n      </View>\n      {/* <>\n        <TouchableOpacity onPress={() => navigate(\"RegistrationScreen\")}>\n          <Text style={Styles.login_footer_text}>\n            {\"Don't have an account? \"}\n            <Text style={Styles.login_footer_link}>{'Sign up'}</Text>\n          </Text>\n        </TouchableOpacity>\n      </> */}\n    </View>\n    <ContractFooter theme='light'/>\n  </View>);\n};\n\nconst Styles = StyleSheet.create({\n    login_container: {\n      flex: 1,\n      backgroundColor: '#FFF',\n    },\n    login_header: {\n      alignItems: 'center',\n      paddingTop: 30,\n      paddingBottom: 50,\n      backgroundColor: '#208AEC',\n    },\n    login_header_logo: {\n      width: 220,\n      resizeMode: 'contain',\n    },\n    login_header_text: {\n      marginTop: 15,\n      color: '#f0f0f0',\n      fontSize: 16,\n    },\n    login_header_text_bold: {\n      color: '#fff',\n      fontWeight: 'bold',\n    },\n    login_wrapper: {\n      flex: 1,\n      justifyContent: 'space-between',\n      paddingTop: 40,\n      borderTopRightRadius: 12,\n      borderTopLeftRadius: 12,\n      backgroundColor: '#fff',\n      alignItems: 'center',\n    },\n    form: {\n      width: '100%',\n      maxWidth: 320,\n    },\n    form_error: {\n      height: 22,\n      width:'100%',\n    },\n    form_error_text:{\n      textAlignVertical:'center',\n      color:'red',\n      fontSize:13,\n    },\n    form_input: {\n      height: 44,\n      paddingHorizontal: 20,\n      marginBottom: 20,\n      backgroundColor: '#EDF0F7',\n      borderRadius: 50,\n    },\n    button: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: 44,\n      backgroundColor: '#0065A4',\n      borderRadius: 50,\n    },\n    button_label: {\n      color: '#fff',\n      fontSize: 16,\n    },\n    login_social: {\n      width: '100%',\n      maxWidth: 280,\n      marginTop: 20,\n    },\n    login_social_separator: {\n      flexDirection: 'row',\n      alignItems: 'center',\n    },\n    login_social_separator_line: {\n      flex: 1,\n      width: '100%',\n      height: 1,\n      backgroundColor: '#E0E0E0',\n    },\n    login_social_separator_text: {\n      marginHorizontal: 10,\n      color: '#808080',\n      fontSize: 16,\n    },\n    login_social_buttons: {\n      flexDirection: 'row',\n      justifyContent: 'center',\n      marginTop: 20,\n    },\n    login_social_button: {\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: 60,\n      height: 60,\n      marginHorizontal: 12,\n      borderWidth: 1,\n      borderColor: '#E7E7E7',\n      borderRadius: 60,\n    },\n    login_social_icon: {\n      width: 38,\n      height: 38,\n      resizeMode: 'contain',\n    },\n    login_social_facebook: {\n      backgroundColor: '#4267B2',\n      borderColor: '#4267B2',\n    },\n    login_footer_text: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      color: '#808080',\n      fontSize: 14,\n    },\n    guest_footer_text: {\n      flexDirection: 'row',\n      alignSelf: 'center',\n      color: '#808080',\n      fontSize: 15,\n      margin: 15\n    },\n    login_footer_link: {\n      color: '#208AEC',\n      fontSize: 15,\n      fontWeight: 'bold',\n    },\n  });\n  ","import React, { createContext, useContext } from \"react\"\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\";\nimport { WebSocketInternalProvider } from \"../../hooks/useWebsocketContext\";\n\nconst WebSocketContext = createContext<{lastJsonMessage:any, sendJsonMessage:SendJsonMessage }>({lastJsonMessage:undefined, sendJsonMessage:()=>{}});\n\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\n  return disable?<></>:<WebSocketInternalProvider path={'messenger/ws/rtc/'} Context={WebSocketContext} useBackground>\n    {children}\n  </WebSocketInternalProvider>\n}\n\nexport default ()=>{\n  const webSocketContext = useContext(WebSocketContext)\n  return webSocketContext\n}\n\n","import React, { useCallback, useRef, useState, useMemo } from \"react\";\n//@ts-ignore\nimport { RTCView, mediaDevices, RTCPeerConnection, MediaStream, RTCSessionDescription, RTCIceCandidate } from \"react-native-webrtc-web-shim\";\nimport {TURN_SERVER} from \"../../../constants/Envs\"\n\n\nconsole.log(TURN_SERVER?\"use turn server\": \"use stun server\")\n\nexport const peerConstraints = {\n\ticeServers: [TURN_SERVER?JSON.parse(TURN_SERVER):{urls: 'stun:stun.l.google.com:19302'}]\n};\n\nexport const sessionConstraints = {\n\tmandatory: {\n\t\tOfferToReceiveAudio: true,\n\t\tOfferToReceiveVideo: true,\n\t\tVoiceActivityDetection: true\n\t}\n};\n\nconst mediaConstraints = {audio:true, video:{framerate:30}}\n\n//@ts-ignore\nexport {MediaStream, RTCPeerConnection, RTCSessionDescription} from \"react-native-webrtc-web-shim\";\n\nconst onICEcandidate = (pc:typeof RTCPeerConnection, message:any)=>{\n\tconst _message = message.data.rtcMessage\n\t\tconst candidate = new RTCIceCandidate(_message);\n\t\tif (pc) {\n\t\t\tconsole.log(\"ICE candidate Added\");\n\t\t\tpc.addIceCandidate(candidate);\n\t\t}\n}\n\nconst sendICEcandidate = (event:any, sendMessage:(data:any)=>void, receiver:string, target:string) => {\n\t// When you find a null candidate then there are no more candidates.\n\t// Gathering of candidates has finished.\n\tif ( !event.candidate ) { return; };\n\t// Send the event.candidate onto the person you're calling.\n\t// Keeping to Trickle ICE Standards, you should send the candidates immediately.\n\tsendMessage({type:'ICEcandidate', receiver, data:{target, rtcMessage:event.candidate}})\n  }\n\nconst BAND_WIDTH = 8000\n\nconst optimizeSdp = (offerDescription:RTCSessionDescription)=>{\n\tvar arr = offerDescription.sdp.split('\\r\\n');\n\tarr.forEach((str:string, i:number) => {\n\t\tif (/^a=fmtp:\\d*/.test(str)) {\n\t\t\tarr[i] = str + `;x-google-max-bitrate=${BAND_WIDTH};x-google-min-bitrate=${BAND_WIDTH};x-google-start-bitrate=${BAND_WIDTH}`;\n\t\t} else if (/^a=mid:(0|video)/.test(str)) { // if with audio then 0=>1\n\t\t\tarr[i] += `\\r\\nb=AS:${BAND_WIDTH}`;\n\t\t}\n\t});\n  \treturn new RTCSessionDescription({\n    \ttype: offerDescription.type,\n    \tsdp: arr.join('\\r\\n'),\n  \t})\n}\n\nconst createOffer = async(pcRefCurrent:{pc?:typeof RTCPeerConnection, receiver:string}, sendMessage:(data:any)=>void, stream:typeof MediaStream, target:string, user?:{name:string})=>{\n\tstream && pcRefCurrent.pc.addStream( stream );\n\tconst offerDescription = optimizeSdp((await pcRefCurrent.pc.createOffer( sessionConstraints )));\n\tawait pcRefCurrent.pc.setLocalDescription( offerDescription );\n\tsendMessage({type:'call', receiver:pcRefCurrent.receiver, data:{target, name:user?.name, rtcMessage:offerDescription}})\n}\n\nexport const useLocalCam = (sendMessage:(data:any)=>void)=>{\n\tconst pcRef = useRef<Record<number,{pc:typeof RTCPeerConnection, receiver:string}>>({})\n\tconst [sender, setSender] = useState<string>()\n\tconst [_stream, setStream] = useState<MediaStream>()\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\n\tconst CustomRTCView = useCallback(React.memo(({style}:{style:any})=>(_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>)) , [_stream])\n\tconst start = useCallback(async(user:{name:string}, stream?:typeof MediaStream, mode?:'camera'|'display')=>{\n\t\tconsole.log(\"start\");\n\t\tif (!_stream || mode!==undefined) {\n\t\t\ttry {\n\t\t\t\tlet newStream:typeof MediaStream;\n\t\t\t\tif(mode == 'camera'){\n\t\t\t\t\tnewStream = await mediaDevices.getUserMedia(mediaConstraints)\n\t\t\t\t}\n\t\t\t\telse if (mode == 'display'){\n\t\t\t\t\tnewStream = await mediaDevices.getDisplayMedia(mediaConstraints)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewStream = stream || await mediaDevices.getUserMedia(mediaConstraints).catch((e:any)=>mediaDevices.getDisplayMedia(mediaConstraints));\n\t\t\t\t}\n\t\t\t\tsetStream(newStream)\n\t\t\t\tObject.entries(pcRef.current).map(([k, v])=>{\n\t\t\t\t\tcreateOffer(v, sendMessage, newStream, 'guest', user)\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}\n\t}, [_stream])\n\tconst stop = useCallback(()=>{\n\t\tconsole.log(\"stop\");\n\t\tif(_stream){\n\t\t\t_stream.getTracks().map((track:any) => track.stop());\n\t\t\tsetStream(undefined)\n\t\t}\n\t}, [_stream])\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\twebsocketOnMessage: async(response:any, user:{name:string})=>{\n\t\t\tlet type = response.type;\n\t\t\tif (type == 'connection'){\n\t\t\t\tsetSender(response.data.channel_name)\n\t\t\t}\n\t\t\tif (type == 'start' && response.data.target=='host'){\n\t\t\t  console.log('1 start')\n\t\t\t  const peerConnection = new RTCPeerConnection( peerConstraints );\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'guest'));\n\t\t\t  pcRef.current[response.sender] = {pc:peerConnection, receiver: response.sender}\n\t\t\t  createOffer(pcRef.current[response.sender], sendMessage, _stream, 'guest', user)\n\t\t\t}\n\t\t\t\n\t\t\tif (type == \"answer\" && response.data.target == 'host'){\n\t\t\t  console.log('3 answer')\n\t\t\t  const peerConnection = pcRef.current[response.sender].pc\n\t\t\t  const answerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t  await peerConnection.setRemoteDescription( answerDescription );\n\t\t\t  // const streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t  // setMirrorStream(streams[streams.length - 1])\n\t\t\t}\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='host'){\n\t\t\t\tconst peerConnection = pcRef.current[response.sender].pc\n\t\t\t\tonICEcandidate(peerConnection, response)\n\t\t\t}\n\t\t},\n\t\tCustomRTCView,\n\t\tisPlay,\n\t\tsender,\n\t\t// renderMirrorView,\n\t}\n}\n\nexport const useRemoteCam = (sendMessage:(data:any)=>void)=>{\n\tconst pcRef = useRef<{pc?:RTCPeerConnection, receiver?:string, statsInterval?:any}>({})\n\tconst [user, setUser] = useState<{name:string}>()\n\tconst [_stream, setStream] = useState<MediaStream>()\n\tconst CustomRTCView = useCallback(React.memo((style:any)=>_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>), [_stream])\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\n\tconst start = useCallback((receiver:string)=>{\n\t\tconsole.log(\"start\");\n\t\tif (!pcRef.current.pc) {\n\t\t  pcRef.current.pc = new RTCPeerConnection( peerConstraints );\n\t\t  pcRef.current.receiver = receiver\n\t\t}\n\t\tif (!_stream){\n\t\t\tsendMessage({type:'start', receiver, data:{'target': 'host'}})\n\t\t}\n\t}, [_stream])\n\tconst stop = () => {\n\t\tconsole.log(\"stop\");\n\t\tif (pcRef.current.pc) {\n\t\t  // peerConnection._unregisterEvents();\n\t\t  setStream(undefined)\n\t\t  pcRef.current.pc.close();\n\t\t  pcRef.current.pc = undefined\n\t\t  pcRef.current.receiver = undefined\n\t\t  clearInterval(pcRef.current.statsInterval)\n\t\t}\n\t}\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\twebsocketOnMessage: async(response:any)=>{\n\t\t\tlet type = response.type;\n\t\t\tif (type == 'start' && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\n\t\t\t\tconsole.log('(remote)1 start')\n\t\t\t\tconst peerConnection = pcRef.current.pc\n\t\t\t\tsetUser({name: response.data.name})\n\t\t\t\tpeerConnection.addEventListener('icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\n\t\t\t\tpeerConnection.addEventListener('iceconnectionstatechange', (e:any)=>{\n\t\t\t\t\tif (pcRef.current.pc.iceConnectionState == 'connected'){\n\t\t\t\t\t\tlet activeStream = false\n\t\t\t\t\t\tpcRef.current.statsInterval = setInterval(async()=>{\n\t\t\t\t\t\t\tconst stats = await pcRef.current.pc.getStats(null)\n\t\t\t\t\t\t\tlet statsOutput = \"\";\n\t\t\t\t\t\t\tlet framePerSecond = undefined\n\t\t\t\t\t\t\tstats.forEach((report:any) => {\n\t\t\t\t\t\t\t\tif (report.type === \"inbound-rtp\" && report.kind === \"video\") {\n\t\t\t\t\t\t\t\t\tObject.keys(report).forEach((statName) => {\n\t\t\t\t\t\t\t\t\t\tstatsOutput += `${statName}: ${report[statName]}\\n`;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tframePerSecond = report.framesPerSecond\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconsole.log(activeStream, framePerSecond)\n\t\t\t\t\t\t\tif (framePerSecond != undefined){\n\t\t\t\t\t\t\t\tactiveStream = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (activeStream){\n\t\t\t\t\t\t\t\tstop()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconsole.log(new Date().toTimeString().split(' ')[0], statsOutput)\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t\telse if (pcRef.current.pc.iceConnectionState == 'failed'){\n\t\t\t\t\t\tstop()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// peerConnection.addTransceiver('audio', {\n\t\t\t\t// \tdirection: 'recvonly'\n\t\t\t\t// });\n\t\t\t\tpeerConnection.addTransceiver('video', {\n\t\t\t\t\tdirection: 'recvonly'\n\t\t\t\t});\n\t\t\t\tawait createOffer({pc:pcRef.current.pc, receiver:response.sender}, sendMessage, _stream, 'host', user)\n\t\t\t}  \n\t\t\tif (type == \"answer\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\n\t\t\t\tconsole.log('(remote)3 answer')\n\t\t\t\tconst answerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t\tawait pcRef.current.pc.setRemoteDescription( answerDescription );\n\t\t\t\tconst streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t\tsetStream(streams[streams.length - 1])\n\t\t\t\tsendMessage({type:'end', receiver:pcRef.current.receiver, data:{}})\n\t\t\t}\n\t\t\tif (type == \"call\" && response.sender == pcRef.current?.receiver){\n\t\t\t  console.log('2 call')\n\t\t\t  const peerConnection = pcRef.current.pc\n\t\t\t  setUser({name:response.data.name})\n\t\t\t  if (!peerConnection)\n\t\t\t\treturn\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\n\t\t\t  const offerDescription = new RTCSessionDescription(response.data.rtcMessage);\n\t\t\t  await peerConnection.setRemoteDescription( offerDescription );\n\t\t\t  const answerDescription = await peerConnection.createAnswer( sessionConstraints );\n\t\t\t  await peerConnection.setLocalDescription( answerDescription );\n\t\t\t  sendMessage({type:'answer', receiver:pcRef.current.receiver, data:{target:'host', rtcMessage:peerConnection.localDescription}})\n\t\t\t  // Here is a good place to process candidates.\n\t\t\t  const streams = pcRef.current.pc.getRemoteStreams()\n\t\t\t  setStream(streams[streams.length - 1])\n\t\t\t}\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver)\n\t\t\t  onICEcandidate(pcRef.current.pc, response)\n\t\t},\n\t\tCustomRTCView,\n\t\tuser,\n\t\tisPlay\n\t}\n}","import {StyleSheet} from \"react-native\";\nexport {useLocalCam, useRemoteCam} from \"./p2p\"\n\nexport const camStyle = StyleSheet.create({\n\tcontainer:{ flex: 1},\n\tcam:{ flex: 1, height:'100%'},\n\tbottonContainer: {position:\"absolute\", bottom:0, justifyContent:'flex-end'},\n\tbuttonBar: { flexDirection: \"row\", justifyContent: \"space-around\" },\n\tlabel: {backgroundColor:'#0008', color:'white', paddingHorizontal:5},\n})","import React, { useEffect } from \"react\";\nimport {Button, View, Text} from \"react-native\";\nimport useWebsocketContext from \"./useWebsocketContext\";\nimport { useLocalCam, camStyle} from \"./webrtc\";\n\n\nexport default (props:{user?:{name:string}|null, mode?:'camera'|'display'|null})=>{\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay} = useLocalCam(sendJsonMessage)\n  useEffect(()=>{\n    props.user && lastJsonMessage && websocketOnMessage(lastJsonMessage, props.user)\n  }, [lastJsonMessage, props.user])\n  useEffect(()=>{\n    if(props.mode && !isPlay){\n      props.user && start(props.user, undefined, props.mode)\n    }\n    else if(props.mode===null && isPlay){\n      stop()\n    }\n    return ()=>{isPlay && stop()}\n  }, [isPlay, props.user, props.mode])\n  return (\n    <View style={camStyle.container}>\n      <CustomRTCView style={camStyle.cam}/>\n      <View style={camStyle.bottonContainer}>\n        <View style={camStyle.buttonBar}>  \n        </View>\n        <View style={{flexDirection:'row'}}><Text style={camStyle.label}>{props.user?.name}</Text></View>\n        <View style={camStyle.buttonBar}>\n          {props.mode === undefined && !isPlay && <Button title=\"Start\" onPress={()=>props.user && start(props.user)} />}\n          {props.mode === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\n        </View>\n      </View>\n    </View>\n  );\n}\n","import React, { useState, useEffect, } from \"react\";\nimport {Button,Text, TextInput, View} from \"react-native\";\nimport useWebsocketContext from \"./useWebsocketContext\";\nimport { useRemoteCam, camStyle} from \"./webrtc\";\n\nexport default (props:{receiver?:string})=>{\n  const [receiver, setReceiver] = useState('')\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay, user} = useRemoteCam(sendJsonMessage)\n  useEffect(()=>{\n    lastJsonMessage && websocketOnMessage(lastJsonMessage)\n  }, [lastJsonMessage])\n  useEffect(()=>{\n    if(props.receiver){\n      start(props.receiver)\n    }\n    return ()=>stop()\n  }, [props.receiver])\n  return (\n    <View style={camStyle.container}>\n      <CustomRTCView style={camStyle.cam}/>\n      <View style={camStyle.bottonContainer}>\n        <View style={camStyle.buttonBar}>\n        </View>\n        <View style={{flexDirection:'row'}}>{\n          (props.receiver || isPlay)?\n          <Text style={camStyle.label}>{user?.name || 'loading...'}</Text>:\n          <>\n            <Text style={{borderWidth:1}}>Receiver:&nbsp;</Text>\n            <TextInput style={{borderWidth:1, flex:1}} value={receiver} onChangeText={setReceiver}/>\n          </> \n        }</View>\n        <View style={camStyle.buttonBar}>\n          {props.receiver === undefined && !isPlay && <Button title=\"Start\" onPress={()=>start(receiver)} />}\n          {props.receiver === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\n        </View>\n      </View>\n    </View>\n  );\n}\n\n","import React, {useEffect, useState} from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport { View as ThemedView } from '../../../components/Themed' \nimport Colors from '../../../constants/Colors';\nimport {default as useRtcContext, WebSocketProvider as RtcProvider} from \"../../../lib/react-native-webrtc/useWebsocketContext\";\nimport LocalCam from '../../../lib/react-native-webrtc/LocalCam';\nimport RemoteCam from '../../../lib/react-native-webrtc/RemoteCam';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport CommonButton from '../../../components/CommonButton';\nimport { Ionicons } from '../../../lib/@expo/vector-icons';\nimport useIsMobile from '../../../hooks/useIsMobile';\n\ntype VideoType = 'camera'|'display'|null\ntype VideoCallProps = {channel_id:number, setDisable:(disable:boolean)=>void, disable?:boolean}\n\n\nconst VideoView = (props:{\n  scale:string,\n  focusGuest?:string,\n  setFocusGuest:(focusGuest?:string)=>void\n  receiver?:string\n  children:React.ReactNode\n})=>{\n  return <View style={[{maxWidth:props.scale, maxHeight:props.scale, borderWidth:1, borderColor:Colors.borderColor, backgroundColor:'gray', flexDirection:'row', flexGrow:1}, (props.focusGuest == undefined || props.focusGuest == props.receiver)?{height:'100%'}:{maxWidth:0, height:0}]}>\n    <TouchableOpacity style={{flex:1}} containerStyle={{flex:1, justifyContent:'center'}} onPress={()=>props.setFocusGuest(props.focusGuest?undefined:props.receiver)}>\n    {props.children}\n    </TouchableOpacity>\n  </View>\n    \n  \n}\n\nconst VideoCallContainer = ({channel_id, disable, setDisable}:VideoCallProps)=>{\n  const {auth} = useAuthContext()\n  const isMobile = useIsMobile()\n  const [videoMode, setVideoMode] = useState<VideoType>(null)\n  const [guests, setGuests] = useState<string[]>([])\n  const [focusGuest, setFocusGuest] = useState<string>()\n  const windowType = useResizeContext()\n  const { lastJsonMessage, sendJsonMessage } = useRtcContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null){\n      if(lastJsonMessage['type']=='connection'){\n        sendJsonMessage({'type':'broadcast', 'data':{'channel_id':channel_id}})\n      }\n      if(lastJsonMessage['type']=='broadcast_guest' || lastJsonMessage['type']=='broadcast_host'){\n        setGuests([...guests, lastJsonMessage['sender']])\n      }\n      if(lastJsonMessage['type']=='broadcast_disconnect'){\n        const channel_name = lastJsonMessage['sender']\n        const exist = guests.find(v=>v == channel_name)\n        exist && setGuests(guests.filter(v=>v != channel_name))\n      }\n    }\n  }, [lastJsonMessage])\n  const scale = focusGuest?'100%':`${100 / Math.max(2, Math.ceil(Math.sqrt(guests.length + 1)))}%`\n  const toggleVideoMode = (mode:VideoType)=>{\n    setVideoMode(videoMode!=mode?mode:null)\n  }\n  return lastJsonMessage !==undefined ?\n    <ThemedView style={[\n      {aspectRatio:!disable?16/9:0, borderColor:Colors.borderColor, borderRadius:10},\n      windowType=='landscape'?{flexShrink:1, flexGrow:0, height:'100%', borderLeftWidth:1, paddingBottom:65}:{maxHeight:'36%', width:'100%', borderBottomWidth:1}\n    ]}>\n      <View style={{aspectRatio:focusGuest?undefined:16/9, backgroundColor:'white', flexWrap:'wrap', flexDirection:'row', width:'100%', height:'100%'}}>\n        {guests.map((receiver, i)=><VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={receiver}>\n          <RemoteCam receiver={receiver}/>\n        </VideoView>\n        )}\n        <VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={auth.user?.name}>\n          <LocalCam user={auth.user} mode={videoMode}/>\n        </VideoView>\n      </View>\n      <ThemedView style={[\n          {position:'absolute', alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\n          windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\n        ]}>\n        <CommonButton title={'⏺️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('camera')}/>\n        {!isMobile && <CommonButton title={'🖥️'} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('display')}/>}\n        <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>setDisable(true)}>\n          <Ionicons size={20} name=\"arrow-back\" color={'deepskyblue'}/>\n        </CommonButton>\n      </ThemedView>\n    </ThemedView>:\n  <></>\n  }\n  \nexport default React.memo(({channel_id, disable, setDisable}:VideoCallProps)=>{\n  return <RtcProvider disable={disable}>\n    <VideoCallContainer channel_id={channel_id} disable={disable} setDisable={setDisable}/>\n  </RtcProvider>\n})\n","import React, {useState} from \"react\"\nimport {View, TouchableOpacity} from 'react-native'\nimport { Text } from \"../Themed\";\nimport useUploadContext from \"../../hooks/useUploadContext\";\n\nconst UploadTag = (props:{data:{filename:string, progress?:number}, index:number, isExpand:boolean, setExpand:(index?:number)=>void})=>{\n    return <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\n        <View style={{backgroundColor:'darkgray', position:'absolute', width:`${(props.data.progress || 0)*100}%`, height:'100%'}}/>\n        <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\n            <Text>📤</Text>\n            <View style={{paddingHorizontal:5}}><Text>{props.data.filename}</Text></View>\n        </View>\n    </View>\n}\n\n\nexport default (props:{channel_id:number})=>{\n    const { upload } = useUploadContext()\n    const [expand, setExpand] = useState<number>()\n    const uploadData = upload[props.channel_id]\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:(uploadData?.length || 0)>0?20:0}}>\n        {uploadData?.map((f,i)=><UploadTag key={i} data={f} index={i} isExpand={i==expand} setExpand={setExpand}/>)}\n    </View>\n}","import React, { useEffect, useMemo, useRef, useState} from 'react';\nimport { Platform, StyleProp, View, ViewStyle } from 'react-native';\nimport { TextInput } from 'react-native-gesture-handler';\nimport CommonButton from '../../components/CommonButton';\nimport { useMessengerContentMutation } from '../../hooks/lists/useMessengerContentList';\nimport useAuthContext from '../../hooks/useAuthContext';\nimport Colors from '../../constants/Colors';\nimport useColorScheme from '../../hooks/useColorScheme';\nimport { View as ThemedView } from '../../components/Themed' \nimport useIsMobile from '../../hooks/useIsMobile';\nimport DateTimePickerModal from '../../modals/DateTimePickerModal'\nimport useLangContext from '../../hooks/useLangContext';\nimport { Entypo } from '../../lib/@expo/vector-icons';\nimport TimerTags, { timerFormat } from '../../components/Messages/TimerTags';\nimport UploadTags from '../../components/Messages/UploadTags';\nimport Messages from '../../components/Messages';\nimport useModalsContext from '../../hooks/useModalsContext';\nimport NotePickerModal from '../../modals/NotePickerModal';\n\nfunction uploadFile(){\n    return new Promise<Blob|undefined>((resolve, reject)=>{\n      if (Platform.OS == 'web'){\n        var input = document.createElement('input');\n        input.type = 'file';\n        input.onchange = e => { \n          resolve((e.target as any).files[0])\n        }\n        input.onabort = reject\n        input.onerror = reject\n        input.click();\n      }\n      else\n        resolve(undefined)\n    })\n  }\n\nexport default ({channel_id, style, extraButtons}:{channel_id:number, style?:StyleProp<ViewStyle>, extraButtons?:{title:string, onPress:()=>void, disabled?:boolean}[]})=>{\n    const theme = useColorScheme()\n    const { lang } = useLangContext()\n    const isMobile = useIsMobile()\n    const {auth} = useAuthContext()\n    const { setModal } = useModalsContext()\n    const inputRef = useRef<TextInput>(null)\n    const [value, setValue] = useState('')\n    const [editorValue, setEditorValue] = useState('')\n    const [timer, setTimer] = useState<string>()\n    const [messageEvent, sendToScreen] = useState<{value:string, editorValue:string}>()\n    const [bottomTab, setBottomTab] = useState<boolean>(false)\n    const [autoFocus, setAutoFocus] = useState<boolean|null>(null)\n    const valueLines = useMemo(()=>bottomTab?1:value.split(\"\\n\").length, [value, bottomTab])\n    const contentMutation = useMessengerContentMutation()\n    const postValue = ()=>{\n        if (value.length>0){\n          contentMutation.create({channel:channel_id, user:auth.user?.id, content:value, timer})\n          setTimer(undefined)\n          setBottomTab(false)\n          setValue('')\n          setAutoFocus(true)\n        }\n      }\n      const onKeyPress = (e:any) => {\n        if (!isMobile){\n          const event = e as KeyboardEvent;\n            if (!event.shiftKey && event.key === \"Enter\"){\n              postValue()\n              event.preventDefault()\n          }\n        }\n      }\n      \n      useEffect(()=>{\n        if(messageEvent){\n          setValue(value.concat(value.length>0?\"\\n\":\"\", messageEvent.value))\n          setEditorValue(editorValue.concat(\"\\r\\n\", messageEvent.editorValue))\n          sendToScreen(undefined)\n        }\n      }, [messageEvent, value, editorValue])\n      useEffect(()=>{\n        if(autoFocus){\n          (inputRef.current as any).focus?.()\n          setAutoFocus(false)\n        }\n      }, [autoFocus])\n      // useEffect(()=>{\n      //   if (autoFocus==null && !isMobile){\n      //     const timeout = setTimeout(()=>setAutoFocus(true), 500)\n      //     return ()=>clearTimeout(timeout)\n      //   }\n      // })\n\n\n    return <View style={style}>\n      <Messages channel_id={channel_id} auth={auth} reverse sendToScreen={sendToScreen}/>\n      <View style={{position:'absolute', flexDirection:'row'}}>\n        <UploadTags channel_id={channel_id}/>\n        <TimerTags channel_id={channel_id}/>\n      </View>\n      <ThemedView style={{bottom:0, width:'100%', paddingTop:15, paddingBottom:10, paddingHorizontal:19}}>\n        <View style={{alignItems:'center', width:'100%',flexDirection:'row'}}>\n          <CommonButton title={''} style={{height:'100%', paddingTop:8, borderTopRightRadius:0, borderBottomRightRadius:0, justifyContent:'center'}} onPress={()=>{setBottomTab(!bottomTab)}}>\n            <View style={{top:-2}}>\n              <Entypo name={bottomTab?\"cross\":\"plus\"} size={24} color={Colors[theme].text}/>\n            </View>\n          </CommonButton>\n          {timer && <CommonButton style={{height:'100%', paddingTop:8, borderRadius:0}} title={`⌚${timerFormat(timer)}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>}\n          <TextInput\n              ref={inputRef}\n              value={value} \n              onChangeText={setValue}\n              onKeyPress={onKeyPress}\n              style={{flex:1, borderWidth:1, minHeight:41, borderColor:Colors.borderColor, backgroundColor:Colors[theme].background, color:Colors[theme].text, paddingVertical:1, paddingHorizontal:3}}\n              onFocus={()=>setBottomTab(false)}\n              multiline \n              numberOfLines={valueLines}/>\n          <CommonButton style={{height:'100%', paddingTop:8, borderTopLeftRadius:0, borderBottomLeftRadius:0, justifyContent:'center'}} title={'💬'} onPress={postValue}/>\n        </View>\n        {bottomTab && <View style={{alignItems:'center', width:'100%', flexDirection:'row', paddingTop:15, paddingBottom:5}}>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`📤\\n ${lang('File')}`} onPress={()=>uploadFile().then(f=>{contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', file:f});setBottomTab(false)})}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`✏️\\n ${lang('Note')}`} onPress={()=>{setModal(NotePickerModal, {callback:(editor:number)=>{contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', editor});setBottomTab(false)}})}}/>\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`⌚\\n ${lang('Timer')}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>\n          {extraButtons?.map((v, k)=><CommonButton key={k} style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={v.title} onPress={()=>{v.onPress();setBottomTab(false)}} disabled={v.disabled}/>)}\n        </View>}\n      </ThemedView>\n    </View>\n}","import React, { useState,  useEffect,  useMemo,useLayoutEffect } from \"react\"\nimport useMessengerMemberList from './lists/useMessengerMemberList';\nimport useMessengerChannelList from './lists/useMessengerChannelList';\nimport { avatarFromChannel } from '../components/Avatar';\nimport useResizeContext from './useResizeContext';\nimport useModalsContext from './useModalsContext';\nimport InviteModal from '../modals/InviteModal';\nimport useLangContext from './useLangContext';\nimport useAuthContext from \"./useAuthContext\";\nimport { StackNavigationProp } from \"@react-navigation/stack\";\nimport { RouteProp } from \"@react-navigation/native\";\nimport HeaderRight from \"../components/HeaderRight\";\nimport ChannelEditModal from \"../modals/ChannelEditModal\";\n\nexport default (navigation:StackNavigationProp<any, any>, route:RouteProp<any, any>,channel_id:any, type:string, headerShown:boolean)=>{\n    const { lang, locale } = useLangContext()\n    const {auth} = useAuthContext()\n    const { setModal } = useModalsContext()\n    const windowType = useResizeContext()\n    const channelList = useMessengerChannelList(type, auth)\n    const channel = channelList?.find(v=>v.id==parseInt(channel_id))\n    const channelAvatar = channel?avatarFromChannel(channel, auth.user):undefined\n    const memberList = useMessengerMemberList(channel_id)\n    const member_id = useMemo(()=>memberList?.find(v=>v.user == auth.user?.id)?.id, [auth, memberList])\n\n\n    useLayoutEffect(() => {\n        navigation.setOptions({\n          headerRight: ()=> <HeaderRight extra={channel?.type=='messenger'?[\n            {title:lang('invite'), onPress:()=>setModal(InviteModal, {id:channel_id})},\n            {title:lang('setting'), onPress:()=>setModal(ChannelEditModal, {id:channel_id, type:channel?.type, member_id})}\n          ] : [\n            {title:lang('setting'), onPress:()=>setModal(ChannelEditModal, {id:channel_id, type:channel?.type, member_id})}\n          ]}/>,\n          title: channelAvatar?.name,\n          headerShown\n        });\n      }, [navigation, route, member_id, locale, windowType, headerShown, channel]);\n    \n      const back = ()=>{\n        if(navigation.canGoBack())\n            navigation.goBack()\n          else{\n            navigation.navigate('HomeScreen', {tab:2})\n          }\n      }\n      \n      useEffect(()=>{\n        setModal(null, null)\n        if (!channel_id)\n          back()\n      }, [route])\n      useEffect(()=>{\n        if (memberList===null || (memberList!=undefined && memberList.find(v=>v.user==auth.user?.id)==undefined))\n          back()\n      }, [memberList])\n      useEffect(()=>{\n        if(channelList===null || (channelList!=undefined && channel==undefined))\n            back()\n      }, [channelList])\n}","import React from \"react\"\nimport CommonSection from \"../../../components/CommonSection\"\nimport Colors from \"../../../constants/Colors\"\nimport useColorScheme, { setColorScheme } from \"../../../hooks/useColorScheme\"\nimport { StyleSheet, Text, View} from 'react-native';\nimport useLangContext from \"../../../hooks/useLangContext\";\nimport { useColorScheme as useConfigColorScheme} from 'react-native-appearance';\nimport useFirebaseContext from \"../../../hooks/useFirebaseContext\";\nimport TextButton from \"../../../components/TextButton\";\nimport useModalsContext from \"../../../hooks/useModalsContext\";\nimport RegistrationModal from \"../../../modals/RegistrationModal\";\nimport useAuthContext from \"../../../hooks/useAuthContext\";\n\n\nconst ConfigSection = ({title, children}:{title:string, children?: React.ReactNode})=>{\n  const theme = useColorScheme()\n  const color = Colors[theme].text\n  return <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\n    <Text style={{fontSize:20, color, fontWeight:'600'}}>{title}</Text>\n    {children}\n  </CommonSection>\n}\n\nexport default ()=>{\n  const { lang, locale, setLocale } = useLangContext()\n  const { setModal } = useModalsContext()\n  const {auth} = useAuthContext()\n  const theme = useColorScheme()\n  const configTheme = useConfigColorScheme()\n  const {enable:noti, setEnable:setNoti} = useFirebaseContext()\n  const color = Colors[theme].text\n  return <>\n    <ConfigSection title={lang('* Notification Settings')}>\n      <View style={{flexDirection:'row'}}>\n        {[[lang('On'), true], [lang('Off'), false]].map(([title, n])=><TextButton\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:noti==n?'underline':'none'}} style={{borderRadius:20}} onPress={()=>{setNoti(n)}}/>)}\n      </View>\n    </ConfigSection>\n    <ConfigSection title={lang('* Language Settings')}>\n    <View style={{flexDirection:'row'}}>\n        {[[lang('Auto'), 'auto'], ['한국어', 'ko'], ['English', 'en']].map(([title, l])=><TextButton \n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:locale==l?'underline':'none'}} style={{borderRadius:20}} onPress={()=>setLocale(l)}/>)}\n      </View>\n    </ConfigSection>\n    <ConfigSection title={lang('* Skin Settings')}>\n      <View style={{flexDirection:'row'}}>\n        {[[lang('Auto'), 'no-preference'], [lang('Light'), 'light'], [lang('Dark'), 'dark']].map(([title, colorScheme])=><TextButton \n          key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:configTheme==colorScheme?'underline':'none'}} style={{borderRadius:20}} onPress={(\n            )=>setColorScheme(colorScheme)}/>)}\n      </View>\n    </ConfigSection>\n  </>\n}","import React, {useState, useEffect, useLayoutEffect, useRef} from 'react';\nimport { StackNavigationProp, StackScreenProps } from '@react-navigation/stack';\nimport { View, ScrollView, useWindowDimensions} from 'react-native';\nimport { Text as StyledText } from 'react-native-paper';\nimport { Text } from '../../../components/Themed'\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport TabView from '../../../components/TabView';\nimport HeaderRight from '../../../components/HeaderRight';\nimport TextButton from '../../../components/TextButton';\nimport Colors from '../../../constants/Colors';\nimport useColorScheme  from '../../../hooks/useColorScheme';\nimport useModalsContext from '../../../hooks/useModalsContext';\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\nimport useLangContext from '../../../hooks/useLangContext';\nimport ContractFooter from '../../../components/ContractFooter';\nimport { MessengerChannel, TabViewRecord, UserMembership } from '../../../types';\nimport useAuthContext from '../../../hooks/useAuthContext';\nimport useUserMembershipList from '../../../hooks/lists/useUserMembershipList';\nimport { FontAwesome, Ionicons, MaterialCommunityIcons, SimpleLineIcons } from '../../../lib/@expo/vector-icons';\nimport { useMessengerChannelSorted } from '../../../hooks/lists/useMessengerChannelList';\nimport CommonItem from '../../../components/CommonItem';\nimport MemberItem from '../../../components/MemberItem';\nimport ProfileModal from '../../../modals/ProfileModal';\nimport { navigate } from '../../../navigation';\nimport CommonSection from '../../../components/CommonSection';\nimport ConfigSections from './ConfigSections';\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\nimport RegistrationModal from '../../../modals/RegistrationModal';\nimport { useNavigation } from '@react-navigation/native';\nimport { regexForStripHTML } from \"../../../components/EditorHtml\"\n\nconst useHeaderSetter = (options:any[]) =>{\n  const tempref = useRef<NodeJS.Timer>()\n  const indexRef = useRef<number>()\n  const {width } = useWindowDimensions()\n  const navigation = useNavigation()\n  useEffect(()=>{\n    return ()=>{\n      clearInterval(tempref.current)\n    }\n  }, [])\n  return (ref:any)=>{\n      clearInterval(tempref.current)\n      /*@ts-ignore */\n      tempref.current=setInterval(()=>{ref?.measure((fx, fy, _, height, px, py)=>{\n        const i = Math.round(-px/width)\n        if (indexRef.current != i){\n          indexRef.current = i\n          navigation.setOptions(options[i])\n        }\n      })\n    }, 300)\n  }\n}\n\nconst renderIndexDetector= (Component:React.ComponentType<any>, headerIndexRef:(ref:any)=>void)=>{\n  return (props:any)=><View style={{flex:1}} ref={headerIndexRef}>\n    <Component {...props}/>\n  </View>\n}\n\nconst MemberTabView = ()=>{\n  const {auth} = useAuthContext()\n  const theme = useColorScheme()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const memberItem = React.useMemo(\n      ()=>userList && userList.map((item, index)=><MemberItem key={index} member={item} onPress={()=>setModal(ProfileModal, {id:item.id})}/>), [userList])\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n      {memberItem}\n  </ScrollView>\n}\n\nconst MessengerTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted('messenger', auth)\n  const theme = useColorScheme()\n\n  const today = (new Date()).toISOString().slice(0, 10)\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n      {channelList?.map((item, index)=>{\n          const {avatar, name} = avatarFromChannel(item, auth.user)\n          const date = item.last_message?.created.slice(0,10)\n          const content = item.last_message?.preview_content || item.last_message?.content || ''\n          return <CommonItem key={index} bodyStyle={{flexDirection:'row', justifyContent:'space-between'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\n              <View style={{flexDirection:'row', flexShrink:1}}>\n                  {avatar?\n                    <View style={{ marginRight:20}}>\n                      <Avatar name={avatar.name} size={44} userId={avatar.id}/>\n                    </View>:\n                    <FontAwesome size={40} color={Colors[theme].iconColor} style={{ marginBottom: -3, marginRight:20 }} name='users'/>}\n                  <View>\n                      <View style={{flexDirection:'row'}}>\n                          <Text style={{fontSize:18}}>{name}</Text>\n                          {item.type=='messenger' && <Text style={{fontSize:18, opacity: 0.4, paddingLeft:5}}>{item.member_count}</Text>}\n                      </View>\n                      <Text style={{fontSize:16, opacity: 0.4}}>{content.replaceAll('\\n', ' ')}</Text>\n                  </View>\n              </View>\n              <View>\n                  <Text style={{fontSize:14, opacity: 0.4, textAlign:'right'}}>{date==today?item.last_message?.created.slice(11,16):date}</Text>\n                  <Text style={{fontSize:14, textAlign:'right'}}>{item.unread_count?item.unread_count:' '}</Text>\n              </View>\n          </CommonItem>\n      })}\n  </ScrollView>\n}\n\nconst NoteTabView = ()=>{\n  const {auth} = useAuthContext()\n  const channelList = useMessengerChannelSorted('mycontent', auth)\n  const theme = useColorScheme()\n\n  const today = (new Date()).toISOString().slice(0, 10)\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}} contentContainerStyle={{flexWrap:'wrap', flexDirection:'row'}}>\n      {channelList?.map((item, index)=>{\n          const date = item.last_message?.created.slice(0,10)\n          const content = (item.description || '').replaceAll(/<hr \\/>\\n/gi, '').replaceAll(/&nbsp;/gi, ' ').replaceAll(/<br\\/>/gi, '\\r\\n').replaceAll(regexForStripHTML, '')\n          const onPress = ()=>navigate(\"NoteScreen\", {id:item.id})\n          return <CommonItem key={index} outerContainerStyle={{flexBasis:'50%'}} onPress={onPress}>\n              {/* @ts-ignore */}\n              <CommonItem containerStyle={{marginHorizontal:0}} bodyStyle={{aspectRatio:1/Math.sqrt(2), borderRadius:6, borderWidth:1, wordBreak:'break-word', justifyContent:'flex-start', alignItems:'flex-start', overflow:'hidden'}} onPress={onPress}>\n                <Text style={{fontSize:16, opacity: 0.4}}>{content}</Text>\n              </CommonItem>\n              <View style={{flexDirection:'row', marginTop:10, justifyContent:'space-between', alignItems:'center', width:'100%'}}>\n                <Text style={{fontSize:18}}>{item.name}</Text>\n                <Text style={{fontSize:14, opacity: 0.4, textAlign:'right'}}>{date==today?item.last_message?.created.slice(11,16):date}</Text>\n                  \n              </View>\n          </CommonItem>\n      })}\n  </ScrollView>\n}\n\n\nconst ConfigTabView = ()=>{\n  const theme = useColorScheme()\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\n    <ConfigSections/>\n  </ScrollView>\n}\n\nconst getBottomTabs = (theme:'light'|'dark', headerSetter:(ref:any)=>void)=>{\n  const color = Colors[theme].iconColor\n  return {\n    OneTab:{\n        title:'member',\n        component:renderIndexDetector(MemberTabView, headerSetter),\n        icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\n    },\n    TwoTab:{\n        title:'chat',\n        component:MessengerTabView,\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\n    },\n    ThreeTab:{\n      title:'note',\n      component:NoteTabView,\n      icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='pencil-box'/>\n  },\n    FourTab:{\n        title:'config',\n        component:ConfigTabView,\n        icon:<SimpleLineIcons size={30} color={color} style={{ marginBottom: -3 }} name='options'/>\n    }\n  } as TabViewRecord\n}\n\n\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\n  const { lang, locale } = useLangContext()\n  const windowType = useResizeContext();\n  const theme = useColorScheme()\n  const { setModal } = useModalsContext()\n  const {auth} = useAuthContext()\n  const [ home, setHome ] = useState(windowType == 'landscape')\n  const color = Colors[theme].text\n  const options = [\n    {title:lang('member'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(RegistrationModal, auth.user?.is_guest?{id:auth.user.id}:{})}]}/>},\n    {title:lang('chat'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(ChannelEditModal, {type:'messenger'})}]}/>},\n    {title:lang('note'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(ChannelEditModal, {type:'mycontent'})}]}/>},\n    {title:lang('config'), headerRight:()=><HeaderRight/>}\n  ]\n  const headerSetter = useHeaderSetter(options)\n  \n  useLayoutEffect(() => {\n    const index = route?.params?.tab | 0\n    navigation.setOptions(windowType == 'portrait'?options[index]:{\n      title: lang('home'),\n      headerRight: ()=><HeaderRight/>\n    });\n  }, [navigation, route, windowType, locale]);\n  useEffect(()=>{\n    setHome(windowType == 'landscape')\n  }, [windowType])\n  return home?\n    <ScrollView contentContainerStyle={{flex:1, alignItems:'center'}}>\n      <View style={{flexGrow:1, width:'80%', marginTop:72}}>\n        <StyledText style={{fontSize:32, color}}>Tokki Tok</StyledText>\n        <View style={{backgroundColor:Colors.borderColor, height:1, width:'100%'}}/>\n        {/* <Text style={{fontSize:20, color:'gray'}}>Welcome! This is a messenger for teams.</Text>*/}\n        <View style={{height:24}}/>\n        <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\n          <TextButton title={lang('+ New chat')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(ChannelEditModal, {type:'messenger'})}/>\n        </CommonSection>\n        <ConfigSections/>\n      </View>\n      <ContractFooter theme={theme}/>\n    </ScrollView>:\n    <TabView tabs={getBottomTabs(theme, headerSetter)} tabBarPosition=\"bottom\" index={parseInt(route.params?.['tab'] || 0)} onTab={(index)=>{navigation.setParams({tab:index})}}/>\n}\n\n","import React from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\nimport { EditorProps } from '../../types';\nconst INIT = require('../../../web/editor-config')\nconst PATH = process.env.PUBLIC_URL + '/tinymce/tinymce.min.js'\n\nexport default (props:EditorProps) => {\n\treturn <Editor\n        tinymceScriptSrc={PATH}\n        onInit={(e, editor) => {props.onReady?.()}}\n        onEditorChange={props.setValue}\n        init={{\n          setup:INIT.setup,\n          plugins: INIT.plugins,\n          toolbar: INIT.toolbar,\n          height: '100%',\n          skin: props.theme=='light'?'oxide':'oxide-dark',\n          content_css: props.theme=='light'?'default':'dark',\n          menubar: false,\n          branding: false,\n          statusbar: false,\n          block_formats: '제목1=h2;제목2=h3;제목3=h4;본문=p;',\n          fontsize_formats: '8pt 10pt 12pt 14pt 16pt 18pt 24pt',\n          forced_root_block_attrs: {'style': 'font-size: 14pt'}\n        }}\n        value={props.value}\n    />\n};\n","import React, { useState, useEffect } from 'react';\nimport { View } from 'react-native';\nimport Editor from '../lib/tinymce/Editor';\n// import Editor from '../lib/tinymce/EditorView';\nimport { EditorProps } from '../types';\n\nexport default (props:EditorProps & {active:boolean, children?:React.ReactNode}) => {\n\tconst [ready, setReady] = useState<boolean>(false)\n  useEffect(()=>{\n    if(!props.active)\n      setReady(false)\n  }, [props.active])\n  return props.active?(\n        <View style={{flex:1, height:'100%'}}>\n        {!ready && props.children}\n    \t  <Editor\n          theme={props.theme}\n          value={props.value}\n          setValue={props.setValue}\n          onReady={()=>{\n            if(!ready){\n              setReady(true); props.onReady?.()\n            }\n          }}/>\n      </View>\n    ):<>{props.children}</>;\n};\n","import React, { useState, useEffect } from \"react\"\nimport { TouchableOpacity } from \"react-native\"\nimport { Ionicons, MaterialCommunityIcons } from '../../../lib/@expo/vector-icons';\nimport useAuthContext from \"../../../hooks/useAuthContext\"\nimport useMessengerChannelList, { useMessengerChannelMutation } from \"../../../hooks/lists/useMessengerChannelList\"\nimport { View as ThemedView } from '../../../components/Themed' \nimport Colors from \"../../../constants/Colors\"\nimport useResizeContext from \"../../../hooks/useResizeContext\"\nimport Editor from \"../../../components/Editor\"\nimport useColorScheme from \"../../../hooks/useColorScheme\"\nimport CommonButton from \"../../../components/CommonButton\"\nimport useLangContext from \"../../../hooks/useLangContext\"\nimport EditorHtml from \"../../../components/EditorHtml\"\n\n\nexport default React.memo(({channel_id, disable, setDisable}:{channel_id:number, setDisable:(disable:boolean)=>void, disable?:boolean})=>{\n    const theme = useColorScheme()\n    const {auth} = useAuthContext()\n    const { lang } = useLangContext()\n    const windowType = useResizeContext()\n    const channelList = useMessengerChannelList('mycontent', auth)\n    const channelMutation = useMessengerChannelMutation('mycontent')\n    const channel = channelList?.find(v=>v.id==channel_id)\n    const [editable, setEditable] = useState(false)\n    const [description, setDescription] = useState('')\n    useEffect(()=>{\n        if (channel){\n          setDescription(channel?.description || '')\n        }\n    }, [channel?.id])\n    const onEdit = (auth.user?.id== channel?.owner.id)?()=>setEditable(true):undefined\n    return disable?\n    <ThemedView style={[\n        { aspectRatio:1/1.414, borderColor:Colors.borderColor, borderRadius:10},\n        windowType=='landscape'?{flexShrink:1, flexGrow:0, height:'100%', borderLeftWidth:1, paddingBottom:65}:{maxHeight:'36%', width:'100%', borderBottomWidth:1}\n    ]}>\n        <ThemedView style={{flex:1, borderColor:Colors[theme].headerBottomColor, borderBottomWidth:1}}>\n            <EditorHtml content={description} />\n        </ThemedView>\n        <ThemedView style={[\n                {position:'absolute', alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\n                windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\n            ]}>\n            <CommonButton title={''} style={{height:40, paddingTop:8, left:-15, top:15}} onPress={()=>setDisable(false)}>\n                <MaterialCommunityIcons size={20} style={{ marginBottom: -3, color:Colors[theme].iconColor }} name='card-text'/>\n            </CommonButton>\n        </ThemedView>\n    </ThemedView>:\n    <ThemedView style={{width:\"100%\", height:\"100%\"}}>\n        {editable?<>\n            <Editor theme={theme} active={!disable} value={description} setValue={setDescription}/>\n            <CommonButton title={lang('save')} onPress={()=>{\n                if(auth?.user?.id && auth.groupId){\n                    channelMutation.update({id:channel_id, description}).then(()=>{\n                        setEditable(false)\n                    })\n                }\n                }}\n                style={{height:65, paddingVertical:20}}\n            /></>:\n            <>\n            <TouchableOpacity style={{flex:1, borderColor:Colors[theme].headerBottomColor, borderBottomWidth:1}} onPress={onEdit} onLongPress={onEdit}>\n                <EditorHtml content={description}/>\n            </TouchableOpacity>\n            <ThemedView style={[\n                {alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\n                windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\n            ]}>\n            {onEdit && <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={onEdit}>\n                <MaterialCommunityIcons size={20} style={{ marginBottom: -3, color:Colors[theme].iconColor }} name='pencil-box'/>\n            </CommonButton>}\n            <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>setDisable(true)}>\n                <Ionicons size={20} style={{ marginBottom: -3, color:Colors[theme].iconColor }} name='chatbox'/>\n            </CommonButton>\n        </ThemedView>\n            </>}\n    </ThemedView>\n  })","import LoginScreen from \"./login/LoginScreen\";\nimport DemoScreen from \"./login/DemoScreen\";\nimport ChatScreen from \"./main/ChatScreen\";\nimport HomeScreen from \"./main/HomeScreen\";\nimport NoteScreen from \"./main/NoteScreen\";\n// import BoardEditScreen from \"../lib/blacktokki-board/BoardEditScreen\";\nimport { Screens } from \"../types\";\n\nexport const main = {\n    HomeScreen:{\n        title:'home',\n        component:HomeScreen,\n        path:'home',\n    },\n    ChatScreen:{\n        title:'chat',\n        component:ChatScreen,\n        path:'chat'\n    },\n    NoteScreen:{\n        title:'note',\n        component:NoteScreen,\n        path:'mynote'\n    },\n} as Screens\n\nexport const login = {\n    LoginScreen:{\n        path: 'login',\n        title: 'Sign in',\n        component:LoginScreen\n    },\n    DemoScreen:{\n        title:'',\n        component:DemoScreen,\n        path:'demo'\n    }\n} as Screens\n\nexport const modal = {\n    // BoardEditScreen:{\n    //     title:'board',\n    //     component:BoardEditScreen,\n    //     path:'modal/board'\n    // },\n} as Screens","import React, { useState} from 'react';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport { View } from 'react-native';\nimport VideoCallSection from './VideoCallSection';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport useLangContext from '../../../hooks/useLangContext';\nimport CommonChatSection from '../CommonChatSection';\nimport useChatSection from '../../../hooks/useChatSection';\n\n\nexport default function ChatScreen({navigation, route}: StackScreenProps<any, 'Chat'>) {\n  const channel_id = route?.params?.id\n  const windowType = useResizeContext()\n  const { lang } = useLangContext()\n  const [videoMode, setVideoMode] = useState<boolean>(false)\n  useChatSection(navigation, route, channel_id, 'messenger', true)\n  \n  return <View style={[\n    {flex:1, alignItems:'center'},\n    windowType=='landscape'?{flexDirection:'row-reverse', minWidth:480}:{flexDirection:'column'}\n  ]}>\n    <VideoCallSection channel_id={channel_id} setDisable={(d)=>setVideoMode(!d)} disable={!videoMode}/>\n    <CommonChatSection \n      channel_id={channel_id} \n      style={[videoMode?{flexShrink:1}:{flex:1}, windowType=='landscape'?{minWidth:320, height:'100%'}:{width:'100%'}]}\n      extraButtons={[{title:`📹\\n ${lang('Video Call')}`, onPress:()=>setVideoMode(!videoMode), disabled:videoMode}]}\n    />\n  </View>\n}","import React, { useState } from 'react';\nimport { View } from 'react-native';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useResizeContext from '../../../hooks/useResizeContext';\nimport CommonChatSection from '../CommonChatSection';\nimport useChatSection from '../../../hooks/useChatSection';\nimport EditorSection from './EditorSection';\n\n\nexport default function NoteScreen({navigation, route}: StackScreenProps<any, 'Chat'>) {\n  const channel_id = route?.params?.id\n  const windowType = useResizeContext()\n  const [editMode, setEditMode] = useState<boolean>(true)\n  useChatSection(navigation, route, channel_id, 'mycontent', true)\n  return <View style={[\n        {flex:1, alignItems:'center'},\n        windowType=='landscape'?{flexDirection:'row-reverse', minWidth:480}:{flexDirection:'column'}\n      ]}>\n    <EditorSection channel_id={channel_id}  setDisable={(d)=>setEditMode(!d)} disable={!editMode}/>\n    {editMode==false && <CommonChatSection\n        channel_id={channel_id}\n        style={[{flex:1}, windowType=='landscape'?{minWidth:320, height:'100%'}:{width:'100%'}]}\n    />}\n  </View>\n}","import React, { useLayoutEffect } from 'react';\n\nimport { StackScreenProps } from '@react-navigation/stack';\nimport useAuthContext from '../../hooks/useAuthContext';\n\nexport default function DemoScreen({navigation}: StackScreenProps<any, 'Demo'>) {\n    const {dispatch} = useAuthContext()\n    useLayoutEffect(() => {\n        navigation.setOptions({headerRight: undefined});\n        dispatch({type:\"LOGIN_GUEST\"})\n    }, []);\n  return <></>\n};","import React, { Suspense, useState } from 'react';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\nimport dayjs from 'dayjs';\nimport useModalEffect from '../hooks/useModalEffect';\n\nconst dayTypes = ['AM', 'PM'].map(value=>({label:value, value}))\nconst hours = [...Array(12).keys()].map((value, index)=>(index + 1).toString().padStart(2, '0')).map(value=>({label:value, value}))\nconst minutes = [...Array(12).keys()].map((value, index)=>(index * 5).toString().padStart(2, '0')).map(value=>({label:value, value}))\n\n\nconst getDisableDays=(date:dayjs.Dayjs)=>{\n  let startDate = date.clone().startOf('month').add(-1, 'month')\n  const endDate = date.clone().endOf('month').add(1, 'month')\n  const today = dayjs().startOf('day')\n  const result = []\n  while(startDate<=endDate && startDate<today){\n    result.push(startDate.format('YYYY-MM-DD'))\n    startDate = startDate.add(1, 'day')\n  }\n  return result\n}\n\nconst defaultDayjs = ()=>{\n  const m = dayjs()\n  const restMinute = parseInt(m.format('mm')) % 5\n  return m.add(5-restMinute, 'minute')\n}\n\nconst Calendar = React.lazy(()=> import('../components/Calendar'))\nconst CommonPicker = React.lazy(()=>import('../components/CommonPicker'))\n\nexport default function DateTimePickerModal({datetime, callback}:{datetime?:string, callback:(datetime?:string)=>void}) {\n  const _dayjs = datetime?dayjs(datetime):defaultDayjs()\n  const { lang, locale } = useLangContext()\n  const theme = useColorScheme()\n  const [date, setDate] = useState(_dayjs.format('YYYY-MM-DD'));\n  const [dayType, setDayType] = useState(_dayjs.locale('en').format('A'))\n  const [hour, setHour] = useState(_dayjs.format('hh'))\n  const [minute, setMinute] = useState(_dayjs.format('mm'))\n  const [disableDays, setDisableDays] = useState<string[]>(getDisableDays(_dayjs))\n  const { setModal } = useModalsContext()\n  const back = ()=>{\n    setModal(DateTimePickerModal, null)\n  }\n  useModalEffect(back, [])\n  return <BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Date & Time')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    <Suspense fallback={<></>}>\n      <Calendar\n        locale={locale}\n        style={undefined} \n        setDate={setDate}\n        disableAllTouchEventsForDisabledDays={true}\n        onMonthChange={(v)=>setDisableDays(getDisableDays(dayjs(v.dateString)))}\n        markedDates={{\n          ...disableDays.reduce((p, c)=>{p[c]={disabled:true};return p}, {} as Record<string, any>),\n          ...(date?[date]:[]).reduce((p, c)=>{p[c]={selected:true};return p}, {} as Record<string, any>)\n        }}\n      />\n      <View style={{flexDirection:'row', paddingVertical:10, width:400, height:50}}>\n        <CommonPicker value={dayType} setValue={setDayType} values={dayTypes}/>\n        <Text style={{fontSize:20}}> </Text>\n        <CommonPicker value={hour} setValue={setHour} values={hours}/>\n        <Text style={{fontSize:20}}> : </Text>\n        <CommonPicker value={minute} setValue={setMinute} values={minutes}/>\n      </View>\n    </Suspense>\n    <View style={{flexDirection:'row'}}>\n      <CommonButton title={lang('save')} onPress={()=>{\n        callback?.(dayjs(`${date} ${hour}:${minute} ${dayType}`).toISOString())\n        back()\n      }}/>\n      <CommonButton title={lang('cancel')} onPress={()=>{\n        callback?.(undefined)\n        back()\n      }}/>\n      \n    </View>\n  </BottomSheet>\n}\n","import React from \"react\"\nimport { StyleProp, TextStyle } from \"react-native\";\nimport Hyperlink from \"react-native-hyperlink\";\nimport { Text } from \"../Themed\";\n\ntype MessageContentProps = {textStyle?:StyleProp<TextStyle>, selectable?:boolean, onPressLink?:any}\n\nconst MessageContentView = (props:MessageContentProps  & {content?:string})=>{\n    /* @ts-ignore */\n    return <Hyperlink linkDefault={ true } style={{wordBreak:\"break-word\"}} linkStyle={{color: '#12b886'}} onPress={props.onPressLink}>\n        <Text selectable={props.selectable} style={props.textStyle}>{props.content}</Text>\n    </Hyperlink>\n}\n\nexport default MessageContentView","import React from 'react';\nimport Clipboard from '@react-native-clipboard/clipboard/dist';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { BottomSheet } from '../components/ModalSection';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { useMessengerContentMutation } from '../hooks/lists/useMessengerContentList';\nimport useModalEffect from '../hooks/useModalEffect';\nimport { MessengerContent } from '../types';\n\n\n\nexport default function MessageModal({content, isOwner, sendToScreen}:{content:MessengerContent, isOwner:boolean, sendToScreen?:(e:{value:string, editorValue:string})=>void}) {\n  const message = content.message_set[0]\n  const { lang } = useLangContext()\n  const { setModal } = useModalsContext()\n  const theme = useColorScheme()\n  const contentMutation = useMessengerContentMutation()\n  const back = ()=>{\n    setModal(MessageModal, null)\n  }\n  useModalEffect(back, [])\n  return <BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Message')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n      <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} title={lang('copy')} onPress={()=>{Clipboard.setString(message.content);back()}}/>\n      {isOwner && content.timer && <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} textStyle={{color:'red'}} title={lang('delete timer')} onPress={()=>{contentMutation.patch({id:content.id, timer:null});back()}}/>}\n      {isOwner && <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} textStyle={{color:'red'}} title={lang('delete')} onPress={()=>{contentMutation.patch({id:content.id, is_archive:true});back()}}/>}\n  </BottomSheet>\n}\n","import React from 'react';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { Ionicons } from '../lib/@expo/vector-icons';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { BottomSheet } from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\nimport useAuthContext from '../hooks/useAuthContext';\nimport { useMessengerChannelSorted } from '../hooks/lists/useMessengerChannelList';\nimport CommonItem from '../components/CommonItem';\n\nexport default function NotePickerModal({callback}:{callback:(editor:number)=>void}) {\n  const { lang } = useLangContext()\n  const theme = useColorScheme()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const channelList = useMessengerChannelSorted('mycontent', auth);\n  const back = ()=>{\n    setModal(NotePickerModal, null)\n  }\n  useModalEffect(back, [])\n  return <BottomSheet>\n    <View style={{flexDirection:'row', width:'100%'}}>\n      <View style={{flex:1, flexDirection:'row'}}>\n        <TouchableOpacity onPress={back}>\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\n        </TouchableOpacity>\n      </View>\n      <View style={{flex:1}}>\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Note')}</Text>\n      </View>\n      <View style={{flex:1}}/>\n    </View>\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    <View style={{flex:1}}>\n        {channelList?.map((item, index)=>{\n          return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>{\n            item.id && callback?.(item.id)\n            back()\n          }}>\n            <Text style={{marginLeft:20}}>{item.name}</Text>\n          </CommonItem>\n        })}\n      </View>\n    <View style={{flexDirection:'row'}}>\n      <CommonButton title={lang('cancel')} onPress={()=>{\n        back()\n      }}/>\n      \n    </View>\n  </BottomSheet>\n}\n","import { useQuery } from \"react-query\";\nimport { getExternalMembershipList } from \"../../services\";\n\nexport default function useExternalMembershipList(keyword?:string){\n  const { data } = useQuery([\"UserMembershipList\", keyword] , async()=>keyword?(await getExternalMembershipList(keyword)):[])\n  return data\n}","import React from 'react';\nimport { StyleProp, TextStyle } from 'react-native';\nimport { CustomTextInputProps } from '../types';\nimport CommonTextInput from './CommonTextInput';\nimport RowField from './RowField';\n\nexport default function TextField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\n  return (\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\n      <CommonTextInput {...props} />\n   </RowField>\n  )\n}","import React, { useState } from 'react';\nimport { TextInput } from 'react-native';\nimport Colors from '../constants/Colors';\nimport useColorScheme from '../hooks/useColorScheme';\nimport { CustomTextInputProps } from '../types';\n\nexport default (props:CustomTextInputProps)=>{\n    const [contentHeight, setContentHeight] = useState<number>()\n    const minHeight = props.minHeight || 30\n    const theme = useColorScheme()\n    return <TextInput style={[{\n            borderColor:'#d0d7de', \n            fontSize:16, \n            borderWidth:1, \n            borderRadius:6, \n            paddingHorizontal:10, \n            paddingVertical:3, \n            backgroundColor:Colors[theme].background,\n            color:Colors[theme].text,\n            height:props.multiline?contentHeight:minHeight,\n        }, props.style]}\n        placeholder={props.placeholder}\n        editable={!props.disabled} \n        keyboardType={props.keyboardType}\n        secureTextEntry={props.secureTextEntry}\n        value={props.value}\n        onChangeText={props.setValue}\n        onContentSizeChange={props.multiline?(e) => {\n            const newHeight = Math.max(e.nativeEvent.contentSize.height, minHeight) + 2\n            if(contentHeight==null || contentHeight +1 < newHeight){\n                setContentHeight(newHeight)\n            }\n        }:undefined}\n        \n        onBlur={()=>props.onBlur?.(props.value)}\n        onEndEditing={()=>props.onEndEditing?.(props.value)}\n        multiline={props.multiline}\n    />\n}","import React from \"react\"\nimport CommonItem from \"./CommonItem\"\nimport { UserMembership } from \"../types\"\nimport Avatar from \"./Avatar\"\nimport { Text, View } from \"./Themed\"\n\nexport default ({member:item, onPress}:{member:UserMembership, onPress?:()=>void})=> {\n    return <CommonItem key={item.id} bodyStyle={{flexDirection:'row', justifyContent:'flex-start'}} onPress={onPress}>\n        <View style={{marginTop:4, marginRight:12}}><Avatar name={item.name} userId={item.id} size={44}/></View>\n        <Text style={{fontSize:20, fontWeight:'400'}}>{item.name}</Text>\n    </CommonItem>\n}","import React from 'react';\nimport useAuthContext from '../hooks/useAuthContext';\nimport CommonButton from '../components/CommonButton';\nimport useModalsContext from '../hooks/useModalsContext';\nimport { Text, View } from '../components/Themed';\nimport useLangContext from '../hooks/useLangContext';\nimport { BottomSheet } from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\nimport RegistrationModal from './RegistrationModal';\n\n\nexport default function AlertModal({type}:{type:string}) {\n  const { lang } = useLangContext()\n  const { setModal } = useModalsContext()\n  const {auth, dispatch} = useAuthContext()\n  const back = ()=>{\n    setModal(AlertModal, null)\n  }\n  const messages = {\n    \"GUEST_LOGOUT\":{\n      message: 'Guest users cannot reconnect after logging out. Please create an account or log in.',\n      buttons:[\n        {\n          title: 'Create User',\n          onPress: ()=>{\n            setModal(RegistrationModal, {id:auth.user?.id})\n          }\n        },\n        {\n          title: 'sign out',\n          onPress: ()=>dispatch({type:\"LOGOUT_REQUEST\"})\n        }\n      ]\n    }\n  } as Record<string, {message:string, buttons:{title:string, onPress:()=>void}[]}>\n\n  useModalEffect(back, [])\n  return <BottomSheet>\n    <Text>{lang(messages[type].message)}</Text>\n    <View style={{width:'100%', flexDirection:'row', justifyContent:'flex-end'}}>\n    {messages[type].buttons.map((button, i)=><CommonButton key={i} style={{marginRight:10}} title={lang(button.title)} onPress={button.onPress}/>)}\n    <CommonButton title={lang('cancel')} onPress={()=>back()}/>\n    </View>\n  </BottomSheet>\n}\n","import React from 'react';\nimport {View} from 'react-native'\nimport {Text} from './Themed';\nimport { ProfileProps } from '../types';\nimport Avatar from './Avatar';\n\nexport default (props:ProfileProps)=>{\n    return <View style={{width:'100%', height:135, justifyContent:'space-evenly', alignItems:'center'}}>\n        <Avatar {...props} size={75}/>\n        <Text style={{fontWeight:'bold', fontSize:15}}>{props.name}</Text>\n        <Text style={{fontWeight:'normal', fontSize:14}}>{props.username}</Text>\n    </View>\n}","import React, { useState,  useEffect, createContext, useMemo, useRef, useContext } from \"react\"\nimport firebase from \"firebase/app\";\nimport \"firebase/messaging\";\nimport {FCM_PUBLIC_VAPID_KEY, FCM_API_KEY} from \"../constants/Envs\"\nimport { Notification as NotificationType, UserMembership } from \"../types\";\nimport { getNotification, postNotification, putNotification } from \"../services/notification\";\n\nconst firebaseConfig = require(\"../../web/firebase-config.js\")\n// Initialize Firebase\nconst key = firebaseConfig.messagingSenderId\nconst apiKeyEncrypted = (FCM_API_KEY as string).split('').map((v, i)=> (v.charCodeAt(0) ^ key.charCodeAt(i)).toString(16).padStart(2, '0')).join('')\nconst app = firebase.initializeApp({...firebaseConfig, apiKey:FCM_API_KEY});\n// const analytics = getAnalytics(app);\nconst messaging = firebase.messaging(app);\n\nmessaging.onMessage((payload) => {\n  if (!(\"Notification\" in window)) {\n    alert(\"This browser does not support desktop notification\");\n  }\n  else if (Notification.permission === \"granted\") {\n    const message_set = JSON.parse(payload.data['message_set'])[0]\n    new Notification(payload.data.channel_name, { body: `${payload.data.name}: ${message_set.content}` });\n  }\n});\n\nconst requestToken = async()=>{\n  const permission = await Notification.requestPermission();\n  if (permission === 'granted') {\n    const serviceWorkerRegistration = await navigator.serviceWorker.register(`${process.env.PUBLIC_URL}/firebase-messaging-sw.js?${apiKeyEncrypted}`)\n    console.log('[SW]: SCOPE: ', serviceWorkerRegistration.scope);\n    const currentToken = await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY }).catch(\n      async()=>await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY })\n    )\n    window.addEventListener('beforeunload', (event:any) => {\n      event.preventDefault();\n      serviceWorkerRegistration.unregister()\n    });\n    if (currentToken)\n      return currentToken\n  }\n  return null\n}\n\nconst FirebaseContext = createContext<{enable?:boolean, setEnable:(enable:boolean)=>void}>({setEnable:()=>{}});\n\nexport const FirebaseProvider = ({user, children}:{user?:UserMembership|null, children:React.ReactNode})=>{\n  const tokenRef = useRef<string|null>()\n  const [notification, setNotification] = useState<NotificationType|null>()\n  const enable = useMemo(()=>notification===undefined?undefined:(notification?.token?true:false), [notification])\n  const setEnable = (enable:boolean)=>{\n    if(user && notification){\n      putNotification({...notification, token:enable?(tokenRef.current==undefined?null:tokenRef.current):null}).then((noti)=>{\n        setNotification(noti)\n      })\n    }\n  }\n  useEffect(()=>{\n    let isMount = true;\n    if(user){\n      if (tokenRef.current ===undefined){\n        tokenRef.current = null\n        requestToken().then((t)=>{\n          tokenRef.current = t\n          if (notification){\n            putNotification({...notification, token:tokenRef.current}).then((noti)=>{\n              if(isMount)setNotification(noti)\n            })\n          }\n        });\n      }\n      if (notification===undefined){\n        getNotification(user.id).then((noti)=>{\n          if(isMount)setNotification(noti || null)\n        })\n      }\n      else if(notification===null){\n        postNotification({user:user.id, type:'WEB', token:null}).then((noti)=>{\n          if(isMount)setNotification(noti)\n        })\n      }\n      else if (notification.token && tokenRef.current && tokenRef.current != notification.token){\n        putNotification({...notification, token:tokenRef.current}).then((noti)=>{\n          if(isMount)setNotification(noti)\n        })\n      }\n    }\n    return ()=>{isMount=false}\n  }, [user, notification])\n  return <FirebaseContext.Provider value={{enable, setEnable}}>\n    {(enable!=undefined || user===null) && children}\n  </FirebaseContext.Provider>\n}\n\nexport default ()=>{\n  const {enable, setEnable} = useContext(FirebaseContext)\n  return {enable, setEnable}\n}\n","import React, { MutableRefObject } from 'react'\nimport { Image, Linking } from \"react-native\"\nimport { TouchableOpacity } from \"react-native-gesture-handler\"\nimport CommonSection from \"../CommonSection\"\nimport { View, Text } from \"../Themed\"\nimport { Link } from \"../../types\"\n\n\n\nexport default ({link, isMobile, touchableRef}:{link:Link, isMobile:boolean, touchableRef:MutableRefObject<()=>boolean>})=>{\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={{padding:0}}>\n    <TouchableOpacity \n        onPress={()=>touchableRef.current() && Linking.openURL(link.url)}\n        onLongPress={()=>{}}\n        style={{width:'100%', flexDirection:'row'}}\n    >\n        {link.image_url?<Image source={{uri:link.image_url}} resizeMode=\"cover\" style={{ width:'100%', maxWidth:isMobile?120:150, maxHeight:isMobile?120:150, borderWidth:1}}/>:undefined}\n        <View style={{flex:1, marginHorizontal:20}}>\n            <Text style={{fontSize:18}}>{link.title}</Text>\n            <Text style={{fontSize:14}}>{link.description}</Text>\n            <Text style={{fontSize:12}}>{link.url}</Text>\n        </View>\n    </TouchableOpacity>\n    </CommonSection>\n}","import React, { MutableRefObject } from 'react'\nimport { Image, Linking } from \"react-native\"\nimport {TouchableOpacity} from \"react-native-gesture-handler\"\nimport CommonSection from \"../CommonSection\"\nimport { FontAwesome } from '../../lib/@expo/vector-icons'; \nimport { View, Text } from \"../Themed\"\nimport { File } from \"../../types\"\nimport useColorScheme from '../../hooks/useColorScheme';\nimport Colors from '../../constants/Colors';\n\nfunction humanFileSize(size:number) {\n    var i = size == 0 ? 0 : Math.floor(Math.log(size) / Math.log(1024));\n    return (size / Math.pow(1024, i)).toFixed(2) + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\n  }\n  \n\nexport default ({file, isMobile, showBorder, touchableRef}:{file:File, isMobile:boolean, showBorder:ConstrainBoolean, touchableRef:MutableRefObject<()=>boolean>})=>{\n    const theme = useColorScheme()\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={showBorder?{padding:10}:{borderWidth:0, padding:0}}>\n    <TouchableOpacity \n        onPress={()=>touchableRef.current() && Linking.openURL(file.file)} \n        onLongPress={()=>{}}\n        style={{flexDirection:'row', alignItems:'flex-start', width:'100%'}} \n    >\n        {   file.thumbnail?\n            <Image source={{uri:file.thumbnail}} resizeMode=\"cover\" style={{width:isMobile?120:150, height:isMobile?120:150, borderWidth:1}}/>:\n            <FontAwesome name=\"file-o\" size={20} color={Colors[theme].iconColor} />}\n        <View style={{flex:1, marginHorizontal:10}}>\n            <Text style={{fontSize:18}}>{file.filename}</Text>\n            <Text style={{fontSize:14}}>{humanFileSize(file.filesize)}</Text>\n        </View>\n    </TouchableOpacity>\n    </CommonSection>\n}","import React, { MutableRefObject } from 'react'\nimport { TouchableOpacity } from \"react-native-gesture-handler\"\nimport CommonSection from \"../CommonSection\"\nimport { MaterialCommunityIcons } from '../../lib/@expo/vector-icons'; \nimport { View, Text } from \"../Themed\"\nimport { EditorContent } from \"../../types\"\nimport { navigate } from '../../navigation';\nimport { regexForStripHTML } from '../EditorHtml'\n\n\nexport default ({editor, touchableRef}:{editor:EditorContent, touchableRef:MutableRefObject<()=>boolean>})=>{\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={{padding:0}}>\n    <TouchableOpacity \n        onPress={()=>touchableRef.current() && navigate(\"NoteScreen\", {id:editor.url})}\n        onLongPress={()=>{}}\n        style={{width:'100%', flexDirection:'row'}}\n    >\n        <MaterialCommunityIcons size={20} name='card-text'/>\n        <View style={{flex:1, marginHorizontal:20}}>\n            <Text style={{fontSize:18}}>{editor.title}</Text>\n            <Text style={{fontSize:14}}>{editor.description.replaceAll(regexForStripHTML, '')}</Text>\n        </View>\n    </TouchableOpacity>\n    </CommonSection>\n}","import React, {useCallback, useMemo, useRef} from \"react\"\nimport { View, TouchableOpacity } from 'react-native';\nimport { FlatList } from \"react-native-gesture-handler\";\nimport { Auth } from \"../../hooks/useAuthContext\";\nimport useMessengerContentList, { MessengerContentPage } from \"../../hooks/lists/useMessengerContentList\"\nimport useIsMobile from \"../../hooks/useIsMobile\"\nimport useModalsContext from \"../../hooks/useModalsContext\"\nimport { Text } from '../Themed' \nimport Avatar from '../Avatar';\nimport LinkPreview from './LinkPreview';\nimport FilePreview from './FilePreview';\nimport MessageModal from '../../modals/MessageModal';\nimport CommonSection from \"../CommonSection\";\nimport { timerToString } from \"./TimerTags\";\nimport useViewerContentList from \"../../hooks/lists/useMessengerViewerList\";\nimport EditorPreview from \"./EditorPreview\";\nimport { MessengerContent } from \"../../types\";\nimport MessageContentView from \"./MessageContentView\";\n\nconst MessengerContentPageItem = React.memo((props:MessengerContentPage & {ownerId?:number, reverse?:boolean, getOnPress?:(content:MessengerContent)=>()=>void})=>{\n    const lastTouchRef = useRef(Date.now()) \n    const touchableRef = useRef(()=>{\n      return Date.now() - lastTouchRef.current > 350\n    })\n    const isMobile = useIsMobile()\n    let nextPage = props.next;\n      while(nextPage?.next && nextPage.current.length==0){\n        nextPage = nextPage.next\n      }\n      const nextContent = nextPage?.current[0]\n      return <View \n        style={{flexDirection: props.reverse?'column-reverse':'column'}}\n        onTouchMove={()=>{lastTouchRef.current=Date.now()}}\n      >  \n        {props.current.map((content, index2)=>{\n          const next = index2 + 1 < props.current.length?props.current[index2+1]:nextContent\n          const created:string = content.created.slice(0, 16)\n          const date = created.slice(0, 10)\n          const isSystem = content.user == null\n          const isFirst = next==undefined || (content.user != next.user || created != next.created.slice(0, 16))\n          const isSelf = props.ownerId == content.user\n          const dayChanged = next==undefined || date != next.created.slice(0, 10)\n          const message = content.message_set[0]\n          if (isSystem)\n            return <View key={content.id} style={{flexDirection:'row', justifyContent:'center', width:'100%', marginVertical:5}}>\n              <Text>{message.content}</Text>\n            </View>\n          return <View key={content.id}>\n            {dayChanged?<View style={{flexDirection:'row', justifyContent:'center', width:'100%'}}><Text>{date}</Text></View>:undefined}\n            <View key={content.id} style={{flexDirection:'row', justifyContent:isSelf?'space-between':'flex-start', width:'100%'}}>\n              {isFirst && !isSelf? <View style={{marginTop:3, marginLeft:12}}><Avatar name={content.name} userId={content.user} size={36}/></View>:<View style={{width:48}}/>}\n              <CommonSection autoScale outerContainerStyle={{maxWidth:'90%'}} title={isFirst?content.name:undefined} titleStyle={{flex:undefined}} bodyStyle={{padding:10}} subtitle={`${created.slice(11)}`}>\n                <TouchableOpacity onLongPress={props.getOnPress?.(content)}>\n                  {content.timer && <View style={{flexDirection:'row', alignItems:'stretch'}}>\n                    <Text style={{fontSize:12}}>⌚</Text>\n                    <Text style={{fontSize:12}} selectable={!isMobile}>{timerToString(content.timer)}</Text>\n                  </View>}\n                  <MessageContentView selectable={!isMobile} textStyle={{textAlign:isSelf?'right':'left'}} onPressLink={touchableRef.current()?undefined:()=>{}} content={message.content}/>\n                  {\n                    content.attatchment_set.map((attatchment, aIndex)=>{\n                      if (attatchment.type=='editor')\n                        return <EditorPreview key={aIndex} editor={attatchment} touchableRef={touchableRef}/>\n                      if (attatchment.type=='file')\n                        return <FilePreview key={aIndex} file={attatchment} isMobile={isMobile} showBorder={false} touchableRef={touchableRef}/>\n                      if (attatchment.type=='link')\n                        return <LinkPreview key={aIndex} link={attatchment} isMobile={isMobile} touchableRef={touchableRef}/>\n                    })\n                  }\n                </TouchableOpacity>\n              </CommonSection>\n            </View>\n          </View>\n        })}\n      </View>\n  \n  })\n\nexport default (props:{channel_id:number, auth?:Auth, reverse?:boolean, sendToScreen?:(e:any)=>void})=>{\n    const height = useRef(0)\n    const {data, fetchNextPage } = props.auth?useMessengerContentList(props.channel_id):useViewerContentList(props.channel_id)\n    const ownerId = useMemo(()=>props.auth?.user?.id, [props.auth])\n    const { setModal } = useModalsContext()\n    const getOnPress = (content: MessengerContent)=>()=>setModal(MessageModal, {content, isOwner:ownerId == content.user, sendToScreen:props.sendToScreen})\n    const renderItem = useCallback(({item, index}:{item:MessengerContentPage, index:number})=><MessengerContentPageItem \n      {...item} \n      ownerId={ownerId} \n      reverse={props.reverse}\n      getOnPress={getOnPress}  \n    />, [ownerId])\n    return <FlatList\n        style={{flexDirection: props.reverse?'column-reverse':'column'}}\n        contentContainerStyle={{padding:10, flexGrow:1, flexDirection: props.reverse?'column-reverse':'column'}}\n        data={data?.pages}\n        renderItem={renderItem}\n        onScroll={(e)=>{\n          if (e.nativeEvent.contentSize.height - height.current + (props.reverse?1:-1)*e.nativeEvent.contentOffset.y < 1)\n            fetchNextPage()\n        }}\n        onLayout={(p)=>{height.current = p.nativeEvent.layout.height}}\n      />\n}","import { useInfiniteQuery } from \"react-query\"\nimport { getMessengerContentList } from \"../../services\"\nimport { MessengerContentPage } from \"./useMessengerContentList\"\n\n\nexport default function useViewerContentList(channel_id:number){  \n  const { data, fetchNextPage } = useInfiniteQuery<MessengerContentPage>(\n    [\"ViewerContentList\", channel_id], \n    async({pageParam})=>getMessengerContentList(channel_id, pageParam, true).then(current=>({current})), \n    {\n      select:data=>{\n        if(data.pages.length > 1)\n          data.pages[data.pages.length - 2].next = data.pages[data.pages.length - 1]\n        return data;\n      },\n      getNextPageParam:(lastPage)=>lastPage?.current.length?lastPage.current[lastPage.current.length - 1].id:undefined,\n      refetchOnReconnect:false,\n      refetchOnWindowFocus:false,\n    }\n  )\n  return { data, fetchNextPage }\n}\n","import { useMemo, useReducer } from \"react\"\n\ntype LocalSearchAction = {type:string, keyword?:string}\n\ntype LocalSearchState ={active:boolean, keyword:string}\n\n\n\nconst localSearchReducer =(initialState:LocalSearchState, action:LocalSearchAction)=>{\n    switch (action.type){\n        case 'SEARCH':\n          return {\n            ...initialState,\n            keyword: action.keyword\n          } as LocalSearchState\n        case 'ENABLE_SEARCH':\n          return {\n            ...initialState,\n            active:true,\n          }\n        case 'DISABLE_SEARCH':\n            return{\n                ...initialState,\n                active:false,\n                keyword: ''\n            }\n        default:\n            throw new Error( `Unhandled action type: ${action.type}`)\n    }\n  }\n\n\nexport default function useLocalSearch<T>(target:T[], compare:(value:T, keyword:string)=>boolean) {\n  const [searchState, dispatch] = useReducer(localSearchReducer, {active:false, keyword:''})\n  const data = useMemo(()=>searchState.active?target.filter(v=>compare(v, searchState.keyword)):target, [searchState, target])\n  return {searchState, dispatch, data}\n}","\nimport React, {useState} from 'react';\nimport { StyleProp, TextStyle, View } from 'react-native';\nimport Clipboard from '@react-native-clipboard/clipboard';\nimport useLangContext from '../hooks/useLangContext';\nimport { CustomTextInputProps } from '../types';\nimport CommonButton from './CommonButton';\nimport RowField from './RowField';\nimport { Text } from './Themed';\nimport useResizeContext from '../hooks/useResizeContext';\n\nexport default function CopyField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\n  const { lang } = useLangContext()\n  const windowType = useResizeContext()\n  const [copied, setCopied] = useState(false)\n  return (\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\n      <View style={{flexDirection:windowType=='landscape'?'row':'column', justifyContent:'space-between'}}>\n        <View style={{justifyContent:'center'}}>\n          <Text style={{fontSize:16}}>{props.value}</Text>\n        </View>\n        <View>\n          <CommonButton title={lang('copy')} onPress={()=>{Clipboard.setString(props.value);setCopied(true)}}/>\n          {copied && <Text style={{fontSize:12, alignSelf:'center', color:'red'}}>{lang(\"copied\")}</Text>}\n        </View>\n      </View>\n   </RowField>\n  )\n}","import React, {useRef,MutableRefObject, useMemo, useState, useEffect } from 'react';\nimport { View, Text } from '../components/Themed';\nimport useAuthContext from '../hooks/useAuthContext';\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\nimport { TabViewRecord, UserMembership } from '../types';\nimport CommonButton from '../components/CommonButton';\nimport useMessengerMemberList, { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\nimport useModalsContext from '../hooks/useModalsContext';\nimport useExternalMembershipList from '../hooks/lists/useExternalMembershipList';\nimport TextField from '../components/TextField';\nimport useLocalSearch from '../hooks/useLocalSearch';\nimport TabView from '../components/TabView';\nimport { FlatList } from 'react-native-gesture-handler';\nimport useLangContext from '../hooks/useLangContext';\nimport MemberItem from '../components/MemberItem';\nimport ModalSection from '../components/ModalSection';\nimport useModalEffect from '../hooks/useModalEffect';\nimport CopyField from '../components/CopyField';\n\nconst InviteItem = (props:{item:UserMembership, selectedRef:MutableRefObject<Set<number>>})=>{\n  const [selected, setSelected] = useState(props.selectedRef.current.has(props.item.id))\n  return <View style={selected?{borderWidth:1, borderColor:'blue'}:{}}>\n    <MemberItem member={props.item} onPress={()=>{\n      if (selected){\n        setSelected(false)\n        props.selectedRef.current.delete(props.item.id)\n      }\n      else{\n        setSelected(true)\n        props.selectedRef.current.add(props.item.id)\n      }\n    }}/>\n  </View>\n\n}\ntype InviteTabViewProps = {\n  id:number,\n  selectedRef:MutableRefObject<Set<number>>\n}\n\nconst GroupTabView = ({id, selectedRef}:InviteTabViewProps)=>{\n  const { lang } = useLangContext()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const userList = useUserMembershipList(auth)\n  const memberList = useMessengerMemberList(id)\n  const messengerMemberMutation = useMessengerMemberMutation()\n  const rawData = useMemo(()=>{\n    const memberSet = new Set(memberList?.map(v=>v.user))\n    return userList?.filter(v=>!memberSet.has(v.id)) || []\n  }, [userList, memberList])\n  const {data, dispatch:dispatchKeyword, searchState} = useLocalSearch(rawData, (v, keyword)=>(v.username.includes(keyword) || v.name.includes(keyword)))\n  const search = (k:string)=>{\n    if (k?.length>0){\n      dispatchKeyword({type:'ENABLE_SEARCH'})\n      dispatchKeyword({type:'SEARCH', keyword:k})\n    }\n    else{\n      dispatchKeyword({type:'DISABLE_SEARCH'})\n    }\n  }\n  const back = ()=>{\n    setModal(InviteModal, null)\n  }\n  useModalEffect(back, [])\n  return <View style={{alignItems:'center', flex:1}}>\n    <View style={{'width': '100%', flex:1}}>\n      <TextField name={`${lang('Username')} & ${lang('Name')}`} placeholder={auth.user?.name} value={searchState.keyword} setValue={search} width={'80%'}/>\n      {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\n    </View>\n    <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\n      <CommonButton title={lang('invite')} onPress={()=>{\n        messengerMemberMutation.invite({\n          channel_id:id,\n          user_ids:[...selectedRef.current]\n        }).then(back)\n      }}/>\n      <CommonButton title={lang('cancel')} onPress={back}/>\n    </View>\n  </View>\n}\n\nconst DELAY = 500\n\nconst ExternalMembershipTabView = ({id, selectedRef}:InviteTabViewProps)=>{\n  const { lang } = useLangContext()\n  const [value, setValue] = useState('')\n  const [keyword, setKeyword] = useState('')\n  const timeoutRef = useRef<NodeJS.Timeout>()\n  const {auth} = useAuthContext()\n  const { setModal } = useModalsContext()\n  const memberList = useMessengerMemberList(id)\n  const externalMemberList = useExternalMembershipList(keyword)\n  const data = useMemo(()=>{\n    const memberSet = new Set(memberList?.map(v=>v.user))\n    return externalMemberList?.filter(v=>!memberSet.has(v.id)) || []\n  }, [externalMemberList, memberList])\n  const messengerMemberMutation = useMessengerMemberMutation()\n  useEffect(()=>{\n    timeoutRef.current = setTimeout(()=>{\n      setKeyword(value)\n    }, DELAY)\n    return ()=>{timeoutRef.current && clearTimeout(timeoutRef.current)}\n  }, [value])\n  const back = ()=>{\n    setModal(InviteModal, null)\n  }\n  const inviteLink = location.href.replace('chat', 'invitee')\n  return <View style={{alignItems:'center', flex:1}}>\n  <View style={{'width': '100%', flex:1, paddingVertical:10}}>\n    <CopyField name={lang('invite link')} width={'80%'} value={inviteLink}/>\n    <View style={{marginVertical: 10, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n    <TextField name={lang('Username')} placeholder={auth.user?.username} value={value} setValue={setValue} width={'80%'}/>\n    {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\n  </View>\n  <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\n    <CommonButton title={lang('invite')} onPress={()=>{\n      messengerMemberMutation.invite({\n        channel_id:id,\n        user_ids:[...selectedRef.current]\n      }).then(back)\n    }}/>\n    <CommonButton title={lang('cancel')} onPress={back}/>\n  </View>\n</View>\n}\n\nexport default function InviteModal({id}:{id:number}) {\n  const { lang } = useLangContext()\n  const selectedRef = useRef<Set<number>>(new Set())\n  const drawerTabs:TabViewRecord = {\n    group:{\n      title: 'Group',\n      component: ()=><GroupTabView id={id} selectedRef={selectedRef}/>,\n      icon: <></>\n    },\n    external:{\n      title: 'External members',\n      component: ()=><ExternalMembershipTabView id={id} selectedRef={selectedRef}/>,\n      icon: <></>\n    }\n  }\n  return <ModalSection>\n    <View style={{flex:1, width:'100%'}}>\n      <View style={{width:'100%'}}>\n        <Text style={{fontSize:20}}>{lang('invite')}</Text>\n        <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\n      </View>\n      <TabView tabs={drawerTabs} tabBarPosition={\"top\"}/>\n    </View>\n  </ModalSection>\n}\n\n","import React, {useState, useEffect} from \"react\"\nimport dayjs from \"dayjs\";\nimport {View, TouchableOpacity} from 'react-native'\nimport { Text } from \"../Themed\";\nimport useTimerMessageContentList from \"../../hooks/lists/useTimerMessageContent\";\nimport { MessengerContent } from \"../../types\";\nimport Avatar from \"../Avatar\";\nimport MessageContentView from \"./MessageContentView\";\n\nexport function timerFormat(datetime:string){\n    return _timerFormat(dayjs(datetime), dayjs())\n}\n\nfunction _timerFormat(m:dayjs.Dayjs, now:dayjs.Dayjs){\n    if (m.year() != now.year()){\n        return m.format('YYYY.MM')\n    }\n    if(m.month()!= now.month() || m.date() != now.date()){\n        return m.format('MM.DD')\n    }\n    return m.format('HH:mm')\n  }\n\nexport function timerToString(timer:string){\n    return dayjs(timer).format('YYYY.MM.DD HH:mm')\n}\n\nconst TimerTag = (props:{data:MessengerContent, now:dayjs.Dayjs, isExpand:boolean, setExpand:(id?:number)=>void})=>{\n    const start = dayjs(props.data.created)\n    const end = dayjs(props.data.timer)\n    const ratio = (start.diff(props.now)/start.diff(end))\n    const message = props.data.message_set[0]\n    return <TouchableOpacity onPress={()=>props.setExpand(props.isExpand?undefined:props.data.id)}>\n        <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\n            <View style={{backgroundColor:'darkgray', position:'absolute', width:`${ratio*100}%`, height:'100%'}}/>\n            {props.isExpand?\n            <View style={{paddingVertical:5, paddingHorizontal:5, maxWidth:270}}>\n                <View style={{flexDirection:'row'}}>\n                    <Avatar name={props.data.name} userId={props.data.user} size={20}/>\n                    <View style={{paddingHorizontal:5}}><Text>{props.data.name}</Text></View>\n                </View>\n                {props.data.timer &&\n                <View style={{flexDirection:'row', alignItems:'stretch'}}>\n                    <Text>⌚</Text>\n                    <Text selectable>{timerToString(props.data.timer)}</Text>\n                </View>}\n                {/* @ts-ignore */}\n                <MessageContentView selectable content={message.preview_content || message.content}/>\n            </View>:    \n            <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\n                <Avatar name={props.data.name} userId={props.data.user} size={20}/>\n                <View style={{paddingHorizontal:5}}><Text>{_timerFormat(end, props.now)}</Text></View>\n            </View>}\n        </View>\n    </TouchableOpacity>\n}\n\n\nexport default (props:{channel_id:number})=>{\n    const timerMessages = useTimerMessageContentList(props.channel_id)\n    const [now, setNow] = useState(dayjs())\n    const [expand, setExpand] = useState<number>()\n    useEffect(()=>{\n        const timeout = setTimeout(()=>{\n            setNow(dayjs())\n        }, 2000)\n        return ()=>clearTimeout(timeout)\n    }, [now])\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:20}}>\n        {timerMessages?.map((v,i)=><TimerTag key={i} data={v} now={now} isExpand={v.id==expand} setExpand={setExpand}/>)}\n    </View>\n}","import { useEffect, useMemo } from \"react\"\nimport { useQuery, useQueryClient } from \"react-query\"\nimport { getTimerMessageContentList } from \"../../services\"\nimport { MessengerContent } from \"../../types\"\nimport useWebsocketContext from \"../useWebsocketContext\"\nimport dayjs from \"dayjs\"\n\nexport default function useTimerMessageContentList(channel_id:number){  \n  const queryClient = useQueryClient()\n  const { data } = useQuery<MessengerContent[]>(\n    [\"TimerMessageContentList\", channel_id], \n    async()=>await getTimerMessageContentList(channel_id, dayjs().toISOString()), \n    {\n      refetchOnReconnect:false,\n      refetchOnWindowFocus:false\n    }\n  )\n  const { lastJsonMessage } = useWebsocketContext()\n  useEffect(()=>{\n    if(lastJsonMessage !=null && lastJsonMessage['data']['channel'] == channel_id){\n      if(lastJsonMessage['type']=='next_message'){\n        if(lastJsonMessage['data']['timer'] && dayjs() < dayjs(lastJsonMessage['data']['timer']))\n          queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\n            return [...(_data || []), lastJsonMessage['data']]\n          })\n      }\n      if(lastJsonMessage['type']=='update_message'){\n        queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\n          return [...(_data?.filter(v=>v.id!=lastJsonMessage['data'].id || (lastJsonMessage['data']['timer']!=null && !lastJsonMessage['data']['is_archive'])) || [])]\n        })\n      }\n    }\n  }, [lastJsonMessage])\n  const sorted = useMemo(()=>data?.sort((a, b)=>(a.timer || '') > (b.timer || '')?1:-1), [data])\n  useEffect(()=>{\n    if (sorted?.[0]?.timer){\n      const id = sorted[0].id\n      const ms = Math.min(dayjs(sorted[0].timer).diff(dayjs()), Number.MAX_VALUE)\n      let timeout = setTimeout(()=>{\n        queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\n          return (_data || []).filter(v=>v.id!=id || dayjs(v.timer).diff(dayjs()) > 0)\n        })\n      }, ms)\n      return ()=>clearTimeout(timeout)\n    }\n  },[sorted])\n  return sorted\n}\n","import { useEffect } from \"react\"\nimport { navigate } from \"../navigation\"\nimport useMessengerChannelList from \"./lists/useMessengerChannelList\"\nimport { useMessengerMemberMutation } from \"./lists/useMessengerMemberList\"\nimport useAuthContext from \"./useAuthContext\"\n\nlet invitee_id:number|undefined\nlet invitee_state:0|1|2=0\n\nexport const replaceInviteeState = (l:Location)=>{\n    if(l !==undefined && l.pathname.endsWith('/invitee')){\n        var params = l.search.slice(1).split('&').filter(v=>v.startsWith('id='))\n        if (params.length>0)\n            invitee_id = parseInt(params[0].split('=')[1])\n        window.history.replaceState(null, '', l.href.split('invitee')[0]\n        );\n    }\n}\n\nexport default ()=>{\n    const {auth} = useAuthContext()\n    const channelList = useMessengerChannelList(\"messenger\", auth)\n    const messengerMemberMutation = useMessengerMemberMutation()\n    useEffect(()=>{\n        if (auth.user){\n            if (invitee_id && channelList){\n                var id = invitee_id;\n                var redirect = ()=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id}})\n                invitee_id = undefined;\n                invitee_state = 1;\n                if(channelList.find(v=>v.id==id) === undefined){\n                    console.log(`invite processing (channel:${id})`)\n                    messengerMemberMutation.invite({\n                        channel_id:id,\n                        user_ids:[auth.user.id]\n                    }).then(redirect)\n                }\n                else{\n                    console.log('already invite')\n                    redirect()\n                }\n            }\n        }\n        else{\n            if (invitee_state == 1){\n                invitee_state=2\n            }\n        }\n    }, [auth, channelList])\n    useEffect(()=>{\n        if(auth.user && invitee_state==2){\n            navigate(\"Main\", {screen:\"HomeScreen\"})\n        }\n    }, [auth.user])\n}","firebaseConfig = {\n    \"authDomain\": \"virtual-metrics-355712.firebaseapp.com\",\n    \"projectId\": \"virtual-metrics-355712\",\n    \"storageBucket\": \"virtual-metrics-355712.appspot.com\",\n    \"messagingSenderId\": \"76003576924\",\n    \"appId\": \"1:76003576924:web:c8c8a006d07918bbc02a99\",\n    \"measurementId\": \"G-SEL35L4N5R\"\n}\nif (typeof module !== 'undefined') {\n    module.exports = firebaseConfig\n}\n","editorConfig = {\n    plugins: 'image link charmap advlist lists paste hr', //autoresize textcolor imagetools,\n    toolbar: 'fontsizeselect | bold italic underline strikethrough | undo redo | alignleft aligncenter alignright | bullist numlist | hr link', // charmap removeformat\n    setup: (editor)=>{\n    }\n}\nif (typeof module !== 'undefined') {\n    module.exports = editorConfig\n}\n","/**\n * Learn more about deep linking with React Navigation\n * https://reactnavigation.org/docs/deep-linking\n * https://reactnavigation.org/docs/configuring-links\n */\n\nimport { LinkingOptions } from '@react-navigation/native';\nimport * as Linking from 'expo-linking';\nimport {main, login, modal} from '../screens';\n\nconst ROOTPATH = 'tokki-tok'  // github repository name\n\nObject.values(modal).forEach(v=>v.path = ROOTPATH + '/' + v.path)\n\nexport default  {\n  prefixes: [Linking.makeUrl('/')],\n  config: {\n    screens: {\n      Main: {\n        screens:{\n          ...main,\n          ...login,\n          NotFound: '*',\n        },\n        path: ROOTPATH\n      },\n      ...modal\n    },\n  },\n} as LinkingOptions;\n"],"sourceRoot":""}