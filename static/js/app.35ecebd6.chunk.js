(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var r=n(55),a=n.n(r),o=n(21),u=n.n(o),c=n(0),i=n.n(c),l=n(142),s=n(43),d=n(85),f=n(1);t.default=function(e){var t=Object(s.default)().dispatch,n=Object(d.default)(),r=[{title:"logout",onPress:function(){return t({type:"LOGOUT_REQUEST"})}}],o=(e.extra?[].concat(u()(e.extra),r):r).filter((function(e){return e.windowType==n||void 0==e.windowType}));return i.a.createElement(f.default,{style:{flexDirection:"row"}},o.map((function(e,t){return i.a.createElement(l.default,a()({key:t},e,{textStyle:{color:"white"},color:"#gray"}))})))}},105:function(e,t,n){"use strict";n.r(t),n.d(t,"main",(function(){return he})),n.d(t,"login",(function(){return ve})),n.d(t,"modal",(function(){return ye}));var r=n(9),a=n.n(r),o=n(0),u=n.n(o),c=n(23),i=n(44),l=n(100),s=n(1),d=n(2),f=n(43);var m=d.default.create({login_container:{flex:1,backgroundColor:"#FFF"},login_header:{alignItems:"center",paddingTop:30,paddingBottom:50,backgroundColor:"#208AEC"},login_header_logo:{width:220,resizeMode:"contain"},login_header_text:{marginTop:15,color:"#f0f0f0",fontSize:16},login_header_text_bold:{color:"#fff",fontWeight:"bold"},login_wrapper:{flex:1,justifyContent:"space-between",paddingVertical:40,borderTopRightRadius:12,borderTopLeftRadius:12,marginTop:-10,backgroundColor:"#fff",alignItems:"center"},form:{width:"100%",maxWidth:280},form_input:{height:44,paddingHorizontal:20,marginBottom:20,backgroundColor:"#EDF0F7",borderRadius:50},button:{alignItems:"center",justifyContent:"center",height:44,backgroundColor:"#0065A4",borderRadius:50},button_label:{color:"#fff",fontSize:16},login_social:{width:"100%",maxWidth:280,marginTop:20},login_social_separator:{flexDirection:"row",alignItems:"center"},login_social_separator_line:{flex:1,width:"100%",height:1,backgroundColor:"#E0E0E0"},login_social_separator_text:{marginHorizontal:10,color:"#808080",fontSize:16},login_social_buttons:{flexDirection:"row",justifyContent:"center",marginTop:20},login_social_button:{alignItems:"center",justifyContent:"center",width:60,height:60,marginHorizontal:12,borderWidth:1,borderColor:"#E7E7E7",borderRadius:60},login_social_icon:{width:38,height:38,resizeMode:"contain"},login_social_facebook:{backgroundColor:"#4267B2",borderColor:"#4267B2"},login_footer_text:{flexDirection:"row",alignItems:"center",color:"#808080",fontSize:14},guest_footer_text:{flexDirection:"row",alignSelf:"center",color:"#808080",fontSize:15,margin:15},login_footer_link:{color:"#208AEC",fontSize:15,fontWeight:"bold"}}),p=n(21),b=n.n(p),g=n(42),h=n(47);function v(e){return o.createElement(g.View,{style:[y.outerContainer,e.outerContainerStyle]},o.createElement(g.View,{style:[y.container,e.containerStyle]},e.withSeparator?o.createElement(g.View,{style:y.separator,lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}):void 0,e.title?o.createElement(g.View,{style:y.titleView},o.createElement(g.Text,{style:[y.title,e.titleStyle]},e.title),o.createElement(g.Text,{style:y.subtitle},e.subtitle)):void 0,o.createElement(g.View,{style:[y.bodyView,e.bodyStyle]},e.children)))}var y=d.default.create({outerContainer:{width:"100%",maxWidth:1080,alignItems:"stretch",backgroundColor:"transparent"},container:{marginHorizontal:20,marginVertical:10,backgroundColor:"transparent"},titleView:{width:"100%",flexDirection:"row",backgroundColor:"transparent",marginBottom:5},title:{flex:1,fontSize:16},subtitle:{flex:1,fontSize:12,textAlign:"right",marginTop:4},separator:{marginBottom:20,height:1,width:"100%"},bodyView:{width:"100%",padding:20,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:h.default.borderColor,borderRadius:6}}),w=n(478),O=n(102),E=n(75),x=n(4),j=n.n(x),S=n(7),C=n.n(S),k=n(50),P=n(58),M=n(114);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){var t=Object(k.useQueryClient)(),n=Object(k.useInfiniteQuery)(["MessengerContentList",e],(function(t){var n;return C.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.pageParam,r.abrupt("return",Object(P.getMessengerContentList)(e,n).then((function(e){return{current:e}})));case 2:case"end":return r.stop()}}),null,null,null,Promise)}),{select:function(e){return e.pages.length>1&&(e.pages[e.pages.length-2].next=e.pages[e.pages.length-1]),e},getNextPageParam:function(e){return null!=e&&e.current.length?e.current[e.current.length-1].id:void 0},refetchOnReconnect:!1,refetchOnWindowFocus:!1}),r=n.data,a=n.fetchNextPage,u=Object(M.default)().lastJsonMessage;return Object(o.useEffect)((function(){null!=u&&"next_message"==u.type&&u.data.channel==e&&t.setQueryData(["MessengerContentList",e],(function(e){return null!=e&&e.pages[0].current&&(null==e?void 0:e.pages[0].current[0].id)!=u.data.id&&(e.pages[0].current=[u.data].concat(b()(null==e?void 0:e.pages[0].current))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e||{pages:[],pageParams:[]})}))}),[u]),{data:r,fetchNextPage:a}}var I=n(103);function D(e){return Object(k.useQuery)(["MessengerMemberList",e],(function(){return C.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.awrap(Object(P.getMessengerMemberList)(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,null,null,Promise)})).data}function z(){var e=Object(k.useQueryClient)(),t=Object(k.useMutation)(P.postBulkMessengerMember,{onSuccess:function(){e.invalidateQueries("MessengerMemberList")}}),n=Object(k.useMutation)(P.deleteMessengerMember,{onSuccess:function(){e.invalidateQueries("MessengerChannelList"),e.invalidateQueries("MessengerMemberList")}});return{invite:t.mutate,leave:n.mutate}}var R=n(46),L=n(390),B=n(86),W=n(157),V=Object(o.createContext)({lastJsonMessage:void 0,sendJsonMessage:function(){}}),A=function(e){var t=e.disable,n=e.children;return t?u.a.createElement(u.a.Fragment,null):u.a.createElement(M.WebSocketInternalProvider,{path:"messenger/ws/rtc/",Context:V,useBackground:!0},n)},H=function(){return Object(o.useContext)(V)},U=n(59),N={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},G={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0,VoiceActivityDetection:!0}},F={audio:!0,video:{framerate:30}},J=function(e,t){var n=t.data.rtcMessage,r=new U.RTCIceCandidate(n);e&&(console.log("ICE candidate Added"),e.addIceCandidate(r))},Q=function(e,t,n,r){e.candidate&&t({type:"ICEcandidate",user:n,data:{target:r,rtcMessage:e.candidate}})},q=function(e){var t=e.sdp.split("\r\n");return t.forEach((function(e,n){/^a=fmtp:\d*/.test(e)?t[n]=e+";x-google-max-bitrate=8000;x-google-min-bitrate=8000;x-google-start-bitrate=8000":/^a=mid:(0|video)/.test(e)&&(t[n]+="\r\nb=AS:8000")})),new U.RTCSessionDescription({type:e.type,sdp:t.join("\r\n")})},K=function(e,t,n,r,a){var o,u;return C.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n&&e.pc.addStream(n),c.t0=q,c.next=4,C.a.awrap(e.pc.createOffer(G));case 4:return c.t1=c.sent,u=(0,c.t0)(c.t1),c.next=8,C.a.awrap(e.pc.setLocalDescription(u));case 8:t({type:"call",user:null==(o=e.user)?void 0:o.id,data:{target:r,username:null==a?void 0:a.username,rtcMessage:u}});case 9:case"end":return c.stop()}}),null,null,null,Promise)},Y=d.default.create({container:{flex:1},cam:{flex:1,height:"100%"},bottonContainer:{position:"absolute",width:"100%",height:"100%",justifyContent:"flex-end"},buttonBar:{flexDirection:"row",justifyContent:"space-around"},label:{backgroundColor:"#0008",color:"white",paddingHorizontal:5}}),X=function(e){var t,n=Object(f.default)().auth,r=H(),i=r.lastJsonMessage,l=function(e){var t=Object(o.useRef)({}),n=Object(o.useState)(),r=a()(n,2),c=r[0],i=r[1],l=Object(o.useMemo)((function(){return!!c}),[c]),s=Object(o.useCallback)(u.a.memo((function(e){var t=e.style;return c?u.a.createElement(U.RTCView,{stream:c,style:t,videoProps:{height:"100%"}}):u.a.createElement(u.a.Fragment,null)})),[c]);return{start:Object(o.useCallback)((function(n,r,o){var u;return C.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(console.log("start"),c&&void 0===o){l.next=28;break}if(l.prev=2,"camera"!=o){l.next=9;break}return l.next=6,C.a.awrap(U.mediaDevices.getUserMedia(F));case 6:u=l.sent,l.next=21;break;case 9:if("display"!=o){l.next=15;break}return l.next=12,C.a.awrap(U.mediaDevices.getDisplayMedia(F));case 12:u=l.sent,l.next=21;break;case 15:if(l.t0=r,l.t0){l.next=20;break}return l.next=19,C.a.awrap(U.mediaDevices.getUserMedia(F).catch((function(e){return U.mediaDevices.getDisplayMedia(F)})));case 19:l.t0=l.sent;case 20:u=l.t0;case 21:i(u),Object.entries(t.current).map((function(t){var r=a()(t,2),o=(r[0],r[1]);K(o,e,u,"guest",n)})),l.next=28;break;case 25:l.prev=25,l.t1=l.catch(2),console.error(l.t1);case 28:case"end":return l.stop()}}),null,null,[[2,25]],Promise)}),[c]),stop:Object(o.useCallback)((function(){console.log("stop"),c&&(c.getTracks().map((function(e){return e.stop()})),i(void 0))}),[c]),websocketOnMessage:function(n,r){var a,o,u,i,l;return C.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if("start"==(a=n.type)&&void 0==n.data.username&&(console.log("1 start"),(o=new U.RTCPeerConnection(N)).addEventListener("icecandidate",(function(t){return Q(t,e,n.sender,"guest")})),t.current[n.sender]={pc:o,user:{id:n.sender}},K(t.current[n.sender],e,c,"guest",r)),"answer"!=a||"host"!=n.data.target){s.next=8;break}return console.log("3 answer"),u=t.current[n.sender].pc,i=new U.RTCSessionDescription(n.data.rtcMessage),s.next=8,C.a.awrap(u.setRemoteDescription(i));case 8:"ICEcandidate"==a&&"host"==n.data.target&&(l=t.current[n.sender].pc,J(l,n));case 9:case"end":return s.stop()}}),null,null,null,Promise)},CustomRTCView:s,isPlay:l}}(r.sendJsonMessage),d=l.start,m=l.stop,p=l.websocketOnMessage,b=l.CustomRTCView,g=l.isPlay;return Object(o.useEffect)((function(){n.user&&i&&p(i,n.user)}),[i,n]),Object(o.useEffect)((function(){e.mode?n.user&&d(n.user,void 0,e.mode):null===e.mode&&g&&m()}),[n,e.mode]),u.a.createElement(s.default,{style:Y.container},u.a.createElement(b,{style:Y.cam}),u.a.createElement(s.default,{style:Y.bottonContainer},u.a.createElement(s.default,{style:Y.buttonBar}),(void 0===e.mode||g)&&u.a.createElement(s.default,{style:{flexDirection:"row"}},u.a.createElement(c.default,{style:Y.label},null==(t=n.user)?void 0:t.name)),u.a.createElement(s.default,{style:Y.buttonBar},void 0===e.mode&&!g&&u.a.createElement(W.default,{title:"Start",onPress:function(){return n.user&&d(n.user)}}),void 0===e.mode&&g&&u.a.createElement(W.default,{title:"Stop",onPress:m}))))},Z=n(143),$=n(61),ee=n(168),te=function(e){var t=e.link,n=e.isMobile;return u.a.createElement(v,{containerStyle:{marginHorizontal:0},bodyStyle:{padding:0}},u.a.createElement(O.TouchableOpacity,{onPress:function(){return ee.default.openURL(t.url)},style:{flexDirection:"row"},containerStyle:{width:"100%"}},u.a.createElement($.default,{source:{uri:t.image},resizeMode:"cover",style:{width:"100%",maxWidth:n?120:150,maxHeight:n?120:150,borderWidth:1}}),u.a.createElement(g.View,{style:{flex:1,marginHorizontal:20}},u.a.createElement(g.Text,{style:{fontSize:20}},t.title),u.a.createElement(g.Text,{style:{fontSize:14}},t.description),u.a.createElement(g.Text,{style:{fontSize:12}},t.url))))},ne=function(e){var t,n=Object(o.useState)(""),r=a()(n,2),l=r[0],d=r[1],f=H(),m=f.lastJsonMessage,p=function(e){var t=Object(o.useRef)({}),n=Object(o.useState)(),r=a()(n,2),c=r[0],i=r[1],l=Object(o.useCallback)(u.a.memo((function(e){return c?u.a.createElement(U.RTCView,{stream:c,style:e,videoProps:{height:"100%"}}):u.a.createElement(u.a.Fragment,null)})),[c]),s=Object(o.useMemo)((function(){return!!c}),[c]),d=Object(o.useCallback)((function(n){console.log("start"),t.current.pc||(t.current.pc=new U.RTCPeerConnection(N),t.current.user={username:n}),c||e({type:"start",username:n,data:{}})}),[c]),f=function(){console.log("stop"),t.current.pc&&(i(void 0),t.current.pc.close(),t.current.pc=void 0,t.current.user=void 0,clearInterval(t.current.statsInterval))};return{start:d,stop:f,websocketOnMessage:function(n){var r,a,o,u,l,s,d,m,p,b,g,h,v,y,w,O,E,x,j,S,k;return C.a.async((function(P){for(;;)switch(P.prev=P.next){case 0:if("start"!=(p=n.type)||!n.data.username||n.data.username!=(null==(r=t.current)||null==(a=r.user)?void 0:a.username)){P.next=10;break}return console.log("(remote)1 start"),g=t.current.pc,null!=(b=t.current)&&b.user&&(t.current.user.id=n.sender),g.addEventListener("icecandidate",(function(t){return Q(t,e,n.sender,"host")})),g.addEventListener("iceconnectionstatechange",(function(e){if("connected"==t.current.pc.iceConnectionState){var n=!1;t.current.statsInterval=setInterval((function(){var e,r,a;return C.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,C.a.awrap(t.current.pc.getStats(null));case 2:e=o.sent,r="",a=void 0,e.forEach((function(e){"inbound-rtp"===e.type&&"video"===e.kind&&(Object.keys(e).forEach((function(t){r+=t+": "+e[t]+"\n"})),a=e.framesPerSecond)})),console.log(n,a),void 0!=a?n=!0:n&&f(),console.log((new Date).toTimeString().split(" ")[0],r);case 9:case"end":return o.stop()}}),null,null,null,Promise)}),1e3)}else"failed"==t.current.pc.iceConnectionState&&f()})),g.addTransceiver("video",{direction:"recvonly"}),P.next=10,C.a.awrap(K({pc:t.current.pc,user:{id:n.sender}},e,c,"host",t.current.user));case 10:if("answer"!=p||"guest"!=n.data.target||n.sender!=(null==(o=t.current)||null==(u=o.user)?void 0:u.id)){P.next=18;break}return console.log("(remote)3 answer"),y=new U.RTCSessionDescription(n.data.rtcMessage),P.next=15,C.a.awrap(t.current.pc.setRemoteDescription(y));case 15:w=t.current.pc.getRemoteStreams(),i(w[w.length-1]),e({type:"end",username:null==(h=t.current)||null==(v=h.user)?void 0:v.username,data:{}});case 18:if("call"!=p||(null==(l=t.current)||null==(s=l.user)?void 0:s.username)!=n.data.username){P.next=36;break}if(console.log("2 call"),x=t.current.pc,null!=(O=t.current)&&O.user&&(t.current.user.id=n.sender),x){P.next=24;break}return P.abrupt("return");case 24:return x.addEventListener("icecandidate",(function(t){return Q(t,e,n.sender,"host")})),j=new U.RTCSessionDescription(n.data.rtcMessage),P.next=28,C.a.awrap(x.setRemoteDescription(j));case 28:return P.next=30,C.a.awrap(x.createAnswer(G));case 30:return S=P.sent,P.next=33,C.a.awrap(x.setLocalDescription(S));case 33:e({type:"answer",user:null==(E=t.current.user)?void 0:E.id,data:{target:"host",rtcMessage:x.localDescription}}),k=t.current.pc.getRemoteStreams(),i(k[k.length-1]);case 36:"ICEcandidate"==p&&"guest"==n.data.target&&(null==(d=t.current)||null==(m=d.user)?void 0:m.id)==n.sender&&J(t.current.pc,n);case 37:case"end":return P.stop()}}),null,null,null,Promise)},CustomRTCView:l,isPlay:s}}(f.sendJsonMessage),b=p.start,g=p.stop,h=p.websocketOnMessage,v=p.CustomRTCView,y=p.isPlay;return Object(o.useEffect)((function(){m&&h(m)}),[m]),Object(o.useEffect)((function(){return e.user&&b(e.user.username),function(){return g()}}),[e.user]),u.a.createElement(s.default,{style:Y.container},u.a.createElement(v,{style:Y.cam}),u.a.createElement(s.default,{style:Y.bottonContainer},u.a.createElement(s.default,{style:Y.buttonBar}),(void 0===e.user||y)&&u.a.createElement(s.default,{style:{flexDirection:"row"}},e.user||y?u.a.createElement(c.default,{style:Y.label},(null==(t=e.user)?void 0:t.name)||l):u.a.createElement(u.a.Fragment,null,u.a.createElement(c.default,{style:{borderWidth:1}},"Username:\xa0"),u.a.createElement(i.default,{style:{borderWidth:1,flex:1},value:l,onChangeText:d}))),u.a.createElement(s.default,{style:Y.buttonBar},void 0===e.user&&!y&&u.a.createElement(W.default,{title:"Start",onPress:function(){return b(l)}}),void 0===e.user&&y&&u.a.createElement(W.default,{title:"Stop",onPress:g}))))},re=function(e){var t=e.channel_id,n=e.videoMode,r=Object(o.useState)([]),c=a()(r,2),i=c[0],l=c[1],d=H(),f=d.lastJsonMessage,m=d.sendJsonMessage;return Object(o.useEffect)((function(){if(null!=f&&("connection"==f.type&&m({type:"broadcast",data:{channel_id:t}}),"broadcast"==f.type)){var e=f.data.target,n=f.data.channel_name;if("host"!=e&&"guest"!=e||l([].concat(b()(i),[{username:f.username,name:f.data.name,channel_name:n}])),"disconnect"==e)i.find((function(e){return e.channel_name==n}))&&l(i.filter((function(e){return e.channel_name!=n})))}}),[f]),void 0!==f?u.a.createElement(s.default,{style:[{flexDirection:"row",justifyContent:"center",borderColor:h.default.borderColor,borderRadius:10,paddingTop:10,backgroundColor:"white"},null!==n?{borderTopWidth:1}:{}]},i.map((function(e,t){return u.a.createElement(s.default,{key:t,style:{maxWidth:"33%",flexDirection:"row",marginHorizontal:10,flex:1}},u.a.createElement(ne,{user:e}))})),u.a.createElement(s.default,{style:{maxWidth:"33%",flexDirection:"row",marginHorizontal:10,flex:1}},u.a.createElement(X,{mode:n}))):u.a.createElement(u.a.Fragment,null)},ae=u.a.memo((function(e){var t=e.channel_id,n=e.videoMode;return u.a.createElement(A,{disable:null==n},u.a.createElement(re,{channel_id:t,videoMode:n}))}));var oe=n(26),ue=n(219),ce=n(85),ie=n(160),le=n(142);d.default.create({Panel_Button_Text:{textAlign:"center",color:"#fff",fontSize:21},Panel_Holder:{borderWidth:1,borderColor:"#888",marginVertical:5}});function se(e){var t=Object(ce.default)(),n=Object(o.useMemo)((function(){return"landscape"==t?{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}:{flexDirection:"column",alignItems:"flex-start"}}),[t]);return u.a.createElement(s.default,{style:[{paddingVertical:5,width:"100%"},n]},u.a.createElement(c.default,{style:["landscape"==t?{flex:1}:{width:"100%"},{paddingHorizontal:15,fontSize:16},e.textStyle]},e.name),u.a.createElement(s.default,{style:["landscape"==t?{flex:6}:{width:"100%"},{paddingHorizontal:15}]},u.a.createElement(s.default,{style:{width:e.width}},e.children)))}function de(e){var t=Object(o.useState)(),n=a()(t,2),r=n[0],c=n[1],i=e.minHeight||30;return u.a.createElement(se,{name:e.name,width:e.width,textStyle:e.textStyle},u.a.createElement(O.TextInput,{style:[{borderColor:"#d0d7de",fontSize:16,borderWidth:1,borderRadius:6,paddingHorizontal:10,paddingVertical:3,backgroundColor:e.disabled?"#EEE":void 0,height:e.multiline?r:i},e.style],editable:!e.disabled,value:e.value,onChangeText:e.setValue,onContentSizeChange:e.multiline?function(e){return c(Math.max(e.nativeEvent.contentSize.height,i)+2)}:void 0,multiline:e.multiline}))}var fe=d.default.create({field:{width:"50%",flexDirection:"row",padding:10},separator:{marginBottom:20,height:1,width:"100%"}}),me=n(146),pe=n(169),be=function(e){var t=Object(o.useState)(e.selectedRef.current.has(e.item.id)),n=a()(t,2),r=n[0],c=n[1];return u.a.createElement(g.View,{style:r?{borderWidth:1,borderColor:"blue"}:{}},Object(pe.renderMemberItem)(e.item,(function(t){r?(c(!1),e.selectedRef.current.delete(t.id)):(c(!0),e.selectedRef.current.add(t.id))})))};var ge=n(236);var he={HomeScreen:{title:"home",component:function(e){var t,n=e.navigation,r=e.route,a=Object(ce.default)(),i=[{title:"member",headerRight:function(){return u.a.createElement(I.default,null)}},{title:"messenger",headerRight:function(){return u.a.createElement(I.default,{extra:[{title:"create",onPress:function(){return Object(R.navigate)("ChannelEditScreen",{type:"messenger"})}}]})}},{title:"config",headerRight:function(){return u.a.createElement(I.default,null)}}];return Object(o.useLayoutEffect)((function(){var e,t=0|(null==r||null==(e=r.params)?void 0:e.tab);n.setOptions("portrait"==a?i[t]:{title:"home",headerRight:function(){return u.a.createElement(I.default,null)}})}),[n,r,a]),"landscape"==a?u.a.createElement(s.default,{style:{flex:1,justifyContent:"center",alignItems:"center"}},u.a.createElement(s.default,{style:{width:"80%",height:"80%"}},u.a.createElement(oe.default,{style:{fontSize:32}},"Tokki Tok"),u.a.createElement(s.default,{style:{backgroundColor:h.default.borderColor,height:1,width:"100%"}}),u.a.createElement(s.default,{style:{flex:1,alignItems:"flex-start"}},u.a.createElement(c.default,{style:{fontSize:20,color:"gray"}},"Welcome! This is a messenger for teams."),u.a.createElement(c.default,{style:{fontSize:24}}," "),u.a.createElement(c.default,{style:{fontSize:24,fontWeight:"500"}},"Quick Start"),u.a.createElement(le.default,{title:"+ New Messenger",textStyle:{fontSize:20},style:{paddingLeft:0,borderRadius:20},onPress:function(){return Object(R.navigate)("ChannelEditScreen",{type:"messenger"})}})))):u.a.createElement(ue.TabViewNavigator,{tabs:ie.bottomTabs,tabBarPosition:"bottom",index:parseInt((null==(t=r.params)?void 0:t.tab)||0),onTab:function(e){n.setParams({tab:e})}})},path:"home"},ChatScreen:{title:"chat",component:function(e){var t,n,r=e.navigation,i=e.route,l=null==i||null==(t=i.params)?void 0:t.id,d=Object(o.useRef)(0),m=Object(Z.default)(),p=Object(o.useRef)(null),b=Object(f.default)().auth,g=null==(n=Object(B.default)(b))?void 0:n.find((function(e){return e.id==parseInt(l)})),y=_(l),x=y.data,j=y.fetchNextPage,S=D(l),C=Object(o.useMemo)((function(){var e;return null==S||null==(e=S.find((function(e){var t;return e.user==(null==(t=b.user)?void 0:t.id)})))?void 0:e.id}),[b,S]),M=z(),T=Object(o.useState)(""),W=a()(T,2),V=W[0],A=W[1],H=Object(o.useState)(!0),U=a()(H,2),N=U[0],G=U[1],F=Object(o.useState)(null),J=a()(F,2),Q=J[0],q=J[1],K=function(){var e;V.length>0&&(X.create({channel:l,user:null==(e=b.user)?void 0:e.id,content:V}),A(""),G(!0))},Y=function(e){q(Q!=e?e:null)},X=function(){var e=Object(k.useMutation)(P.postMessage,{onSuccess:function(){}}),t=Object(k.useMutation)(P.deleteMessengerContent,{onSuccess:function(e,t){}});return{create:e.mutate,delete:t.mutate}}();Object(o.useLayoutEffect)((function(){r.setOptions({headerRight:function(){return u.a.createElement(I.default,{extra:[{title:"invite",onPress:function(){Object(R.navigate)("InviteScreen",{id:l})}},{title:"leave",onPress:function(){C&&M.leave(C),ee()}}]})},title:null==g?void 0:g.name})}),[r,i,C]);var $=Object(o.useCallback)((function(e){for(var t,n=e.item,r=(e.index,n.next);null!=(a=r)&&a.next&&0==r.current.length;){var a;r=r.next}var o=null==(t=r)?void 0:t.current[0];return u.a.createElement(s.default,{style:{flexDirection:"column-reverse"}},n.current.map((function(e,t){var r,a=t+1<n.current.length?n.current[t+1]:o,i=e.created.slice(0,16),l=i.slice(0,10),d=null==e.user,f=void 0==a||e.user!=a.user||i!=a.created.slice(0,16),p=(null==(r=b.user)?void 0:r.id)==e.user,g=void 0==a||l!=a.created.slice(0,10);return d?u.a.createElement(s.default,{key:e.id,style:{flexDirection:"row",justifyContent:"center",width:"100%",marginVertical:5}},u.a.createElement(c.default,null,e.message_set[0].content)):u.a.createElement(s.default,{key:e.id},g?u.a.createElement(s.default,{style:{flexDirection:"row",justifyContent:"center",width:"100%"}},u.a.createElement(c.default,null,l)):void 0,u.a.createElement(s.default,{key:e.id,style:{flexDirection:"row",justifyContent:p?"space-between":"flex-start",width:"100%"}},f&&!p?u.a.createElement(w.default,{size:38,style:{marginBottom:-3,marginRight:10},name:"account-circle"}):u.a.createElement(s.default,{style:{width:48}}),u.a.createElement(v,{outerContainerStyle:{width:void 0,maxWidth:"90%"},title:f?e.name:void 0,titleStyle:{flex:void 0},bodyStyle:{padding:10},subtitle:""+i.slice(11)},u.a.createElement(L.default,{linkDefault:!0,style:{wordBreak:"break-word"},linkStyle:{color:"#12b886"}},u.a.createElement(c.default,null,e.message_set[0].content)),e.link_set.map((function(e,t){return u.a.createElement(te,{key:t,link:e,isMobile:m})})))))})))}),[r,X]),ee=function(){r.canGoBack()?r.goBack():r.navigate("HomeScreen",{tab:2})};return Object(o.useEffect)((function(){l||ee()}),[]),Object(o.useEffect)((function(){N&&(p.current.focus(),G(!1))}),[N]),u.a.createElement(s.default,{style:{flex:1,alignItems:"center"}},u.a.createElement(O.FlatList,{style:{width:"100%",flexDirection:"column-reverse"},contentContainerStyle:{padding:10,flexGrow:1,flexDirection:"column-reverse"},data:null==x?void 0:x.pages,renderItem:$,onScroll:function(e){e.nativeEvent.contentOffset.y+e.nativeEvent.contentSize.height-d.current<1&&j()},onLayout:function(e){d.current=e.nativeEvent.layout.height}}),u.a.createElement(s.default,{style:{width:"100%"}},u.a.createElement(ae,{channel_id:l,videoMode:Q}),u.a.createElement(s.default,{style:{bottom:0,width:"100%",backgroundColor:"white",alignItems:"center"}},u.a.createElement(s.default,{style:{width:"100%",flexDirection:"row",paddingTop:15,paddingBottom:10,paddingHorizontal:19}},u.a.createElement(O.TextInput,{ref:p,value:V,onChangeText:A,style:{flex:1,borderWidth:1,height:40,borderRadius:6,borderColor:h.default.borderColor},onSubmitEditing:K,blurOnSubmit:!0}),u.a.createElement(E.default,{title:"\ud83d\udcac",onPress:K}),u.a.createElement(E.default,{title:"\ud83d\udcf9",onPress:function(){return Y("camera")}}),u.a.createElement(E.default,{title:"\ud83d\udda5\ufe0f",onPress:function(){return Y("display")}})))))},path:"chat"},TabOneScreen:{title:"tab one",component:function(e){return e.navigation,u.a.createElement(s.default,{style:{padding:10}})},path:"one"}},ve={LoginScreen:{path:"login",title:"\ub85c\uadf8\uc778",component:function(e){e.navigation;var t=Object(o.useState)(""),n=a()(t,2),r=n[0],d=n[1],p=Object(o.useState)(""),b=a()(p,2),g=b[0],h=b[1],v=Object(f.default)().dispatch,y=function(){return v({type:"LOGIN_REQUEST",username:r,password:g})};return u.a.createElement(s.default,{style:m.login_wrapper},u.a.createElement(s.default,{style:m.form},u.a.createElement(i.default,{style:m.form_input,value:r,placeholder:"Username",onChangeText:function(e){return d(e)},autoCapitalize:"none",keyboardType:"email-address",onSubmitEditing:y}),u.a.createElement(i.default,{style:m.form_input,value:g,placeholder:"Password",secureTextEntry:!0,onChangeText:function(e){return h(e)},onSubmitEditing:y}),u.a.createElement(l.default,{onPress:y},u.a.createElement(s.default,{style:m.button},u.a.createElement(c.default,{style:m.button_label},"Sign in"))),u.a.createElement(l.default,{onPress:function(){return v({type:"LOGIN_GUEST"})}},u.a.createElement(c.default,{style:m.guest_footer_text},"Sign in as guest"))),u.a.createElement(s.default,{style:m.login_social},u.a.createElement(s.default,{style:m.login_social_separator},u.a.createElement(s.default,{style:m.login_social_separator_line}),u.a.createElement(c.default,{style:m.login_social_separator_text},"text"),u.a.createElement(s.default,{style:m.login_social_separator_line})),u.a.createElement(s.default,{style:m.login_social_buttons})))}}},ye={ChannelEditScreen:{title:"channel",component:function(e){var t,n,r=e.navigation,c=e.route,i=null==c||null==(t=c.params)?void 0:t.id,l=null==c||null==(n=c.params)?void 0:n.type,s=Object(f.default)().auth,d=Object(B.default)(s),m=Object(B.useMessengerChannelMutation)(),p=null==d?void 0:d.find((function(e){return e.id==i})),b=Object(o.useState)(""),h=a()(b,2),y=h[0],w=h[1],O=Object(o.useState)(""),x=a()(O,2),j=x[0],S=x[1];return Object(o.useEffect)((function(){p&&(w(p.name),S((null==p?void 0:p.description)||""))}),[p]),u.a.createElement(v,{outerContainerStyle:{alignSelf:"center"}},u.a.createElement(g.View,{style:{justifyContent:"space-around"}},u.a.createElement(g.Text,{style:{fontSize:20}},"Edit Channel - ",l)),u.a.createElement(g.View,{style:fe.separator,lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}),u.a.createElement(g.View,{style:{width:"100%"}},u.a.createElement(de,{name:"Channel Name",value:y,setValue:w,width:"60%"}),u.a.createElement(de,{name:"Description",value:j,setValue:S,multiline:!0,width:"60%"})),u.a.createElement(g.View,{style:{width:"100%",flexDirection:"row",justifyContent:"flex-end"}},u.a.createElement(E.default,{title:"save",onPress:function(){var e;if(null!=s&&null!=(e=s.user)&&e.id&&s.groupId){var t,n={id:i,name:y,description:j,type:l,owner:null==s||null==(t=s.user)?void 0:t.id,group:s.groupId};(i?m.update(n):m.create(n)).then((function(e){return Object(R.navigate)("Main",{screen:"messenger"==e.type?"MessengerScreen":"BoardScreen",params:{id:e.id}})}))}}}),u.a.createElement(E.default,{title:"cancel",style:{marginHorizontal:5},onPress:function(){r.canGoBack()?r.goBack():r.replace("Main")}})))},path:"modal/channel"},InviteScreen:{title:"invite",component:function(e){var t,n=e.navigation,r=e.route,a=null==r||null==(t=r.params)?void 0:t.id,c=Object(f.default)().auth,i=Object(me.default)(c),l=D(a),s=z(),d=Object(o.useRef)(new Set),m=Object(o.useMemo)((function(){var e=new Set(null==l?void 0:l.map((function(e){return e.user})));return null==i?void 0:i.filter((function(t){return!e.has(t.id)}))}),[i,l]),p=function(){n.canGoBack()?n.goBack():a?Object(R.navigate)("ChatScreen",{id:a}):n.replace("Main")};return u.a.createElement(v,{outerContainerStyle:{alignSelf:"center"}},null==m?void 0:m.map((function(e,t){return u.a.createElement(be,{key:t,item:e,selectedRef:d})})),u.a.createElement(g.View,{style:[{width:"50%",flexDirection:"row",padding:10},{justifyContent:"flex-end"}]},u.a.createElement(E.default,{title:"save",onPress:function(){s.invite({channel_id:a,user_ids:b()(d.current)}),p()}}),u.a.createElement(E.default,{title:"cancel",onPress:p})))},path:"modal/invite"},ProfileScreen:{title:"profile",component:function(e){var t,n=e.navigation,r=e.route,a=null==r||null==(t=r.params)?void 0:t.id,c=Object(f.default)().auth,i=Object(me.default)(c),l=null==i?void 0:i.find((function(e){return e.id==a})),d=Object(B.useMessengerChannelMutation)();return Object(o.useEffect)((function(){a&&l||!i||(n.canGoBack()?n.goBack():n.replace("Main"))}),[i]),l?u.a.createElement(s.default,{style:{padding:10}},u.a.createElement(ge.default,{username:null==l?void 0:l.username,name:null==l?void 0:l.name}),u.a.createElement(E.default,{title:"create messenger",onPress:function(){var e;if(null!=c&&null!=(e=c.user)&&e.id&&c.groupId){var t,n={name:c.user.name+", "+l.name,type:"messenger",owner:null==c||null==(t=c.user)?void 0:t.id,group:c.groupId};d.create(n).then((function(e){return Object(R.navigate)("Main",{screen:"MessengerScreen",params:{id:e.id}})}))}}})):u.a.createElement(u.a.Fragment,null)},path:"modal/profile"}}},114:function(e,t,n){"use strict";n.r(t),n.d(t,"WebSocketInternalProvider",(function(){return g})),n.d(t,"WebSocketProvider",(function(){return h}));var r=n(9),a=n.n(r),o=n(0),u=n.n(o),c=n(360),i=n.n(c),l=n(159),s=n(239),d=Object(o.createContext)({lastJsonMessage:void 0,sendJsonMessage:function(){}}),f="https://blacktokki.com".split("://"),m=a()(f,2),p=m[0],b=m[1],g=function(e){var t=e.children,n=e.path,r=e.Context,c=e.useBackground,d=Object(o.useState)(null),f=a()(d,2),m=f[0],g=f[1],h=Object(o.useState)(c||"active"==s.default.currentState),v=a()(h,2),y=v[0],w=v[1],O=i()(("https"==p?"wss":"ws")+"://"+b+"/"+n,{shouldReconnect:function(e){return!0},protocols:m?["Authorization",m]:void 0,onOpen:function(e){console.log("success websocket connection("+n+")")},onClose:function(e){console.log("closed websocket connection("+n+")")}},y&&null!=m),E=O.lastJsonMessage,x=O.sendJsonMessage;return Object(o.useEffect)((function(){l.default.getItem("Authorization").then(g);var e=function(e){return w(c||"active"==e)};return s.default.addEventListener("change",e),function(){return s.default.removeEventListener("change",e)}}),[]),null==m?u.a.createElement(u.a.Fragment,null,t):u.a.createElement(r.Provider,{value:{lastJsonMessage:E,sendJsonMessage:x}},t)},h=u.a.memo((function(e){var t=e.disable,n=e.children;return t?u.a.createElement(u.a.Fragment,null,n):u.a.createElement(g,{path:"messenger/ws/",Context:d},n)}));t.default=function(){return Object(o.useContext)(d)}},142:function(e,t,n){"use strict";n.r(t);var r=n(55),a=n.n(r),o=n(0),u=n.n(o),c=n(2),i=n(75);t.default=function(e){return u.a.createElement(i.default,a()({},e,{style:[l.style,e.style]}))};var l=c.default.create({style:{borderRadius:6,backgroundColor:"transparent",borderWidth:0}})},143:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(217),o=n.n(a);t.default=function(){return o()().isMobile()||"android"==r.default.OS||"ios"==r.default.OS}},145:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n(9),a=n.n(r),o=n(0),u=n(42),c=n(2),i=n(152),l=n(47);function s(e){var t=o.useState(!1),n=a()(t,2),r=(n[0],n[1]),c=o.useState(!1),l=a()(c,2),s=l[0],f=l[1];return o.createElement(i.default,{style:[d.outerContainer,e.outerContainerStyle,s?{backgroundColor:"rgb(242,242,242)"}:{}],onPressIn:function(){f(!0)},onPressOut:function(){f(!1),null==e.onPress||e.onPress()},onHoverIn:function(){return r(!0)},onHoverOut:function(){return r(!1)}},o.createElement(u.View,{style:[d.container,e.containerStyle]},o.createElement(u.View,{style:[d.bodyView,e.bodyStyle]},o.createElement(o.Fragment,null,e.children))))}var d=c.default.create({outerContainer:{width:"100%",maxWidth:1080,alignItems:"stretch"},container:{marginHorizontal:20,backgroundColor:"transparent"},bodyView:{width:"100%",padding:10,minHeight:40,alignItems:"center",justifyContent:"center",borderBottomWidth:1,borderColor:l.default.borderColor,backgroundColor:"transparent"}})},146:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(7),a=n.n(r),o=n(50),u=n(58);function c(e){return Object(o.useQuery)(["UserMembershipList",null==e?void 0:e.groupId],(function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||!e.groupId){t.next=6;break}return t.next=3,a.a.awrap(Object(u.getUserMembershipList)(null==e?void 0:e.groupId));case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=[];case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),null,null,null,Promise)})).data}},160:function(e,t,n){"use strict";n.r(t),n.d(t,"bottomTabs",(function(){return O})),n.d(t,"drawerTabs",(function(){return E}));var r=n(169),a=n(4),o=n.n(a),u=n(0),c=n.n(u),i=n(1),l=n(23),s=n(145),d=n(86),f=n(43),m=n(46);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){return c.a.createElement(i.default,{style:{flex:1,backgroundColor:"white"}},e.data.map((function(e,t){return c.a.createElement(s.default,{key:t,containerStyle:{marginHorizontal:0},bodyStyle:{alignItems:"flex-start"},onPress:e.onPress},c.a.createElement(l.default,{style:{marginLeft:20}},e.name))})))},h={Messenger:function(){var e=Object(f.default)().auth,t=Object(d.default)(e);return c.a.createElement(g,{data:(t||[]).map((function(e){return b(b({},e),{},{onPress:function(){return Object(m.navigate)("ChatScreen",{id:e.id})}})}))})}},v=n(485),y=n(486),w=c.a.createElement(y.default,{size:30,style:{marginBottom:-3},name:"chatbox"}),O={OneTab:{title:"member",component:r.default,icon:r.MemberIcon},TwoTab:{title:"messenger",component:function(){var e=Object(f.default)().auth,t=Object(d.default)(e),n=(new Date).toISOString().slice(0,10);return c.a.createElement(i.default,{style:{flex:1,backgroundColor:"white"}},null==t?void 0:t.map((function(e,t){var r,a,o,u=null==(r=e.last_message)?void 0:r.created.slice(0,10);return c.a.createElement(s.default,{key:t,bodyStyle:{flexDirection:"row",justifyContent:"space-between"},onPress:function(){return Object(m.navigate)("ChatScreen",{id:e.id})}},c.a.createElement(i.default,{style:{flexDirection:"row"}},c.a.createElement(v.default,{size:36,style:{marginBottom:-3,marginRight:20},name:"users"}),c.a.createElement(i.default,null,c.a.createElement(i.default,{style:{flexDirection:"row"}},c.a.createElement(l.default,{style:{fontSize:18}},e.name),c.a.createElement(l.default,{style:{fontSize:18,opacity:.4,paddingLeft:5}},e.member_count)),c.a.createElement(l.default,{style:{fontSize:16,opacity:.4}},null==(a=e.last_message)?void 0:a.content))),c.a.createElement(i.default,null,c.a.createElement(l.default,{style:{fontSize:14,opacity:.4,textAlign:"right"}},u==n?null==(o=e.last_message)?void 0:o.created.slice(11,16):u),c.a.createElement(l.default,{style:{fontSize:14,textAlign:"right"}},e.unread_count?e.unread_count:" ")))})))},icon:w}},E={TwoTab:{title:"messenger",component:h.Messenger,icon:w}}},169:function(e,t,n){"use strict";n.r(t),n.d(t,"renderMemberItem",(function(){return m})),n.d(t,"MemberIcon",(function(){return p}));var r=n(478),a=n(270),o=n(0),u=n.n(o),c=n(23),i=n(1),l=n(145),s=n(43),d=n(146),f=n(46),m=function(e,t){return u.a.createElement(l.default,{key:e.id,bodyStyle:{flexDirection:"row",justifyContent:"flex-start"},onPress:t?function(){return t(e)}:void 0},u.a.createElement(r.default,{size:38,style:{marginBottom:-3,marginRight:10},name:"account-circle"}),u.a.createElement(c.default,{style:{fontSize:20,fontWeight:"400"}},e.name))};t.default=function(){var e=Object(s.default)().auth,t=Object(d.default)(e);return u.a.createElement(i.default,{style:{flex:1,backgroundColor:"white"}},t&&t.map((function(e){return m(e,(function(e){return Object(f.navigate)("ProfileScreen",{id:e.id})}))})))};var p=u.a.createElement(a.default,{size:32,style:{marginBottom:-3},name:"account"})},208:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n(351);function a(){return Object(r.default)()}},219:function(e,t,n){"use strict";n.r(t),n.d(t,"TabViewNavigator",(function(){return x}));var r=n(55),a=n.n(r),o=n(4),u=n.n(o),c=n(21),i=n.n(c),l=n(9),s=n.n(l),d=n(170),f=n(0),m=n.n(f),p=n(1),b=n(2),g=n(241),h=n(46),v=n(236),y=n(142),w=n(47),O=n(85),E=n(160),x=function(e){var t=m.a.useState(e.index||0),n=s()(t,2),r=n[0],o=n[1],c=Object.entries(e.tabs),l=e.onTab,d=Object.assign.apply(Object,[{}].concat(i()(c.map((function(e){var t=s()(e,2),n=t[0],r=t[1];return u()({},n,r.icon)})))));return m.a.createElement(g.TabView,{renderTabBar:function(e){return m.a.createElement(g.TabBar,a()({},e,{indicatorStyle:{backgroundColor:"#2196F3"},style:{backgroundColor:"white"},activeColor:"black",inactiveColor:"black",renderIcon:function(e){return d[e.route.key]},onTabPress:function(e){return null==l?void 0:l(c.findIndex((function(t){var n=s()(t,2),r=n[0];n[1];return r==e.route.key})))}}))},navigationState:{index:r,routes:c.map((function(e){var t=s()(e,2);return{key:t[0],title:t[1].title}}))},onIndexChange:o,renderScene:Object(g.SceneMap)(Object.assign.apply(Object,[{}].concat(i()(c.map((function(e){var t=s()(e,2),n=t[0],r=t[1];return u()({},n,r.component)})))))),tabBarPosition:e.tabBarPosition})},j=[function(){return Object(h.navigate)("ChannelEditScreen",{type:"messenger"})},function(){return Object(h.navigate)("ChannelEditScreen",{type:"board"})}];t.default=function(e){var t=e.user,n=Object(d.default)().colors,r=Object(O.default)(),a=Object(f.useState)(0),o=s()(a,2),u=o[0],c=o[1];return"landscape"==r?m.a.createElement(p.default,{style:[S.tabBar,{backgroundColor:n.card,borderTopColor:n.border}],pointerEvents:"auto"},m.a.createElement(v.default,{username:t.username,name:t.name}),m.a.createElement(p.default,{style:{flexDirection:"row-reverse"}},m.a.createElement(y.default,{title:"+",textStyle:{fontSize:20},style:{borderRadius:20},onPress:j[u]})),m.a.createElement(p.default,{accessibilityRole:"tablist",style:S.content},Object.keys(E.drawerTabs).length>1?m.a.createElement(x,{tabs:E.drawerTabs,tabBarPosition:"top",onTab:c}):m.a.createElement(p.default,{style:{borderTopWidth:1,flex:1,borderColor:n.border}},Object.values(E.drawerTabs).map((function(e){var t=e.component;return m.a.createElement(t,{key:e.title})}))))):m.a.createElement(p.default,{style:{width:0}})};var S=b.default.create({tabBar:{width:240,elevation:8,borderRightWidth:1,borderColor:w.default.borderColor},content:{flex:1,flexDirection:"row"},tab:{flex:1,alignItems:"center"},label:{textAlign:"center",backgroundColor:"transparent"}})},236:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1),u=n(23),c=n(262),i=n(47),l=function(e){return r.createElement(o.default,{style:{width:"100%",height:135,justifyContent:"space-evenly",alignItems:"center"}},r.createElement(c.Avatar.Text,{style:{backgroundColor:i.default.header},size:75,label:e.name.split(" ").map((function(e){return e[0]})).join().toUpperCase()}),r.createElement(u.default,{style:{fontWeight:"bold",fontSize:15}},e.name),r.createElement(u.default,{style:{fontWeight:"normal",fontSize:14}},e.username))};t.default=function(e){return a.a.createElement(o.default,{style:{width:"100%",height:135}},a.a.createElement(l,e))}},328:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(384),u=n(105);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.values(u.modal).forEach((function(e){return e.path="tokki-tok/"+e.path})),t.default={prefixes:[o.makeUrl("/")],config:{screens:i({Main:{screens:i(i(i({},u.main),u.login),{},{NotFound:"*"}),path:"tokki-tok"}},u.modal)}}},385:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Q}));var r=n(9),a=n.n(r),o=n(305),u=n(274),c=n(0),i=n.n(c),l=n(1),s=n(50),d=n(486),f=n(85),m=n(2),p=n(23),b=n(100);function g(e){var t=e.navigation;return c.createElement(l.default,{style:h.container},c.createElement(p.default,{style:h.title},"This screen doesn't exist."),c.createElement(b.default,{onPress:function(){return t.replace("HomeScreen")},style:h.link},c.createElement(p.default,{style:h.linkText},"Go to home screen!")))}var h=m.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),v=n(105),y=n(219),w=n(43),O=n(114),E=n(103),x=n(47),j=n(102),S=n(4),C=n.n(S),k=n(7),P=n.n(k),M=n(271),T=(n(475),n(41)),_=function(e){return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.awrap(T.default.put("/api/v1/notifications/"+e.id+"/",e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=n(466),R=z.messagingSenderId,L="AIzaSyAN2ydKUtznjBlg8DUAPrUPGIVbqdPzv88".split("").map((function(e,t){return(e.charCodeAt(0)^R.charCodeAt(t)).toString(16).padStart(2,"0")})).join(""),B=M.default.initializeApp(D(D({},z),{},{apiKey:"AIzaSyAN2ydKUtznjBlg8DUAPrUPGIVbqdPzv88"})),W=M.default.messaging(B);W.onMessage((function(e){if("Notification"in window){if("granted"===Notification.permission){var t=JSON.parse(e.data.message_set)[0];new Notification(e.data.channel_name,{body:e.data.name+": "+t.content})}}else alert("This browser does not support desktop notification")}));var V=Object(c.createContext)({enable:!1,setEnable:function(){}}),A=function(e){var t=e.children,n=e.user,r=Object(c.useRef)(),o=Object(c.useState)(),u=a()(o,2),l=u[0],s=u[1],d=Object(c.useMemo)((function(){return!(null!=l&&l.token)}),[l]);return Object(c.useEffect)((function(){var e=!0;return n&&function(){var e,t;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(Notification.requestPermission());case 2:if("granted"!==n.sent){n.next=13;break}return n.next=6,P.a.awrap(navigator.serviceWorker.register("/tokki-tok/firebase-messaging-sw.js?"+L));case 6:return e=n.sent,console.log("[SW]: SCOPE: ",e.scope),n.next=10,P.a.awrap(W.getToken({serviceWorkerRegistration:e,vapidKey:"BCCi7wopGYI8EhmFxMwIuB5L0hJOBkWh3Wx7VmilJYMhzd5y75JeNEQY1kdw9_n_WIawgmirphxOr4kmBp9-FnQ"}));case 10:if(!(t=n.sent)){n.next=13;break}return n.abrupt("return",t);case 13:return n.abrupt("return",void 0);case 14:case"end":return n.stop()}}),null,null,null,Promise)}().then((function(t){r.current=t,function(e){var t;return P.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P.a.awrap(T.default.get("/api/v1/notifications/?type=WEB&user="+e));case 2:return t=n.sent.data,n.abrupt("return",t.length?t[0]:void 0);case 4:case"end":return n.stop()}}),null,null,null,Promise)}(n.id).then((function(r){var a=function(t){e&&s(t)},o=void 0==t?null:t;void 0==r?function(e){return P.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.a.awrap(T.default.post("/api/v1/notifications/",e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)}({user:n.id,type:"WEB",token:o}).then(a):_(D(D({},r),{},{token:o})).then(a)}))})),function(){e=!1}}),[]),n?i.a.createElement(V.Provider,{value:{enable:d,setEnable:function(e){n&&l&&_(D(D({},l),{},{token:e||void 0==r.current?null:r.current})).then((function(e){s(e)}))}}},t):i.a.createElement(i.a.Fragment,null,t)},H=n(143),U=n(36),N=n(8),G=function(e){var t=Object(H.default)(),n=Object(c.useState)(window.innerHeight+1),r=a()(n,2),o=r[0],u=r[1];return Object(c.useEffect)((function(){if(t&&"web"==N.default.OS){var e=function(e){u(window.innerHeight+1)};return U.default.addEventListener("change",e),function(){return U.default.removeEventListener("change",e)}}}),[t]),i.a.createElement(l.default,{style:{height:t&&"web"==N.default.OS?o:"100%"}},e.children)},F=Object(o.default)(),J=new s.QueryClient;function Q(){var e=Object(f.default)();return i.a.createElement(G,{windowType:e},i.a.createElement(w.AuthProvider,null,i.a.createElement(s.QueryClientProvider,{client:J},i.a.createElement(F.Navigator,{mode:"modal",headerMode:"screen",screenOptions:{cardStyle:{backgroundColor:"white"},animationEnabled:!0,cardStyleInterpolator:u.CardStyleInterpolators.forVerticalIOS}},i.a.createElement(F.Screen,{name:"Main",component:K,options:{headerShown:!1}}),Object.entries(v.modal).map((function(t){var n=a()(t,2),r=n[0],o=n[1];return i.a.createElement(F.Screen,{key:r,name:r,component:o.component,options:{title:o.title,gestureDirection:"landscape"==e?"vertical-inverted":"vertical"}})}))))))}var q=Object(o.default)();function K(){var e=Object(f.default)(),t=Object(H.default)(),n=Object(w.default)().auth,r=Object(c.useMemo)((function(){return void 0===n.user?[]:(console.log("current user: ",n.user),Object.entries(null===n.user?v.login:v.main))}),[n]);return void 0!==n.user?i.a.createElement(l.default,{style:{flexDirection:"row",flex:1}},n.user?i.a.createElement(y.default,{user:n.user}):void 0,i.a.createElement(l.default,{style:{flex:1}},i.a.createElement(A,{user:n.user},i.a.createElement(O.WebSocketProvider,{disable:null===n.user||void 0===n.user},i.a.createElement(q.Navigator,{screenOptions:function(n){var r=n.navigation,a=n.route;return{headerStyle:{backgroundColor:x.default.header,height:t?50:void 0},headerTitleStyle:{color:"white"},headerLeft:function(){return function(e,t,n,r){var a=-1==["HomeScreen","LoginScreen"].findIndex((function(e){return e==t.name}));return"portrait"==n&&a?i.a.createElement(j.TouchableOpacity,{onPress:function(){e.canGoBack()?e.goBack():a&&e.replace("HomeScreen")}},i.a.createElement(d.default,{size:r?20:24,style:{marginHorizontal:r?16:20},name:"arrow-back"})):null}(r,a,e,t)},headerRight:function(){return i.a.createElement(E.default,null)},headerLeftContainerStyle:{backgroundColor:"white",borderBottomWidth:1,borderColor:x.default.borderColor},cardStyle:{flexShrink:1},animationEnabled:"portrait"==e,cardStyleInterpolator:u.CardStyleInterpolators.forHorizontalIOS}}},r.map((function(e){var t=a()(e,2),n=t[0],r=t[1];return i.a.createElement(q.Screen,{key:n,name:n,component:r.component,options:{title:r.title}})})),i.a.createElement(q.Screen,{name:"NotFound",component:g,options:{title:"Oops!"}})))))):i.a.createElement(i.a.Fragment,null)}},389:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n(0),a=n.n(r),o=n(383),u=n(488),c=n(46),i=n(208),l=n(4),s=n.n(l),d=n(9),f=n.n(d),m=n(7),p=n.n(m),b=n(486),g=n(277),h=n(276);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(){var e=function(){var e=r.useState(!1),t=f()(e,2),a=t[0],o=t[1];return r.useEffect((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.preventAutoHideAsync(),e.next=4,p.a.awrap(g.loadAsync(y(y({},b.default.font),{},{"space-mono":n(473)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),h.hideAsync(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),a}(),t=Object(i.default)();return e?a.a.createElement(u.SafeAreaProvider,null,a.a.createElement(c.default,{colorScheme:t}),a.a.createElement(o.StatusBar,null)):null}},392:function(e,t,n){e.exports=n(474)},407:function(e,t){},41:function(e,t,n){"use strict";n.r(t),n.d(t,"setToken",(function(){return l})),n.d(t,"getToken",(function(){return s}));var r=n(7),a=n.n(r),o=n(382),u=n(159),c={baseURL:"https://blacktokki.com/messenger/",withCredentials:!0,headers:{}},i=o.default.create(c);i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&s().then((function(e){var t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(i.post("/api-token-refresh/",{token:e},{headers:{Authorization:""}}));case 2:200==(t=n.sent).status&&""!==t.data&&l(t.data);case 4:case"end":return n.stop()}}),null,null,null,Promise)})),Promise.reject(e)}));var l=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.defaults.headers.Authorization="JWT "+e,!e){t.next=6;break}return t.next=4,a.a.awrap(u.default.setItem("Authorization",e));case 4:t.next=7;break;case 6:u.default.removeItem("Authorization");case 7:case"end":return t.stop()}}),null,null,null,Promise)},s=function(){var e;return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(u.default.getItem("Authorization"));case 2:return e=t.sent,i.defaults.headers.Authorization="JWT "+e,t.abrupt("return",e);case 5:case"end":return t.stop()}}),null,null,null,Promise)};t.default=i},42:function(e,t,n){"use strict";n.r(t),n.d(t,"useThemeColor",(function(){return p})),n.d(t,"Text",(function(){return b})),n.d(t,"View",(function(){return g}));var r=n(55),a=n.n(r),o=n(5),u=n.n(o),c=n(0),i=n(23),l=n(1),s=n(47),d=n(208),f=["style","lightColor","darkColor"],m=["style","lightColor","darkColor"];function p(e,t){var n=Object(d.default)(),r=e[n];return r||s.default[n][t]}function b(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=u()(e,f),l=p({light:n,dark:r},"text");return c.createElement(i.default,a()({style:[{color:l},t]},o))}function g(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=u()(e,m),i=p({light:n,dark:r},"background");return c.createElement(l.default,a()({style:[{backgroundColor:i},t]},o))}},43:function(e,t,n){"use strict";n.r(t),n.d(t,"AuthProvider",(function(){return p}));var r=n(9),a=n.n(r),o=n(4),u=n.n(o),c=n(0),i=n.n(c),l=n(58);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(c.createContext)({auth:{},dispatch:function(){}}),m=function(e,t){switch(t.type){case"LOGIN_REQUEST":return d(d({},e),{},{request:{username:t.username,password:t.password}});case"LOGIN_GUEST":return d(d({},e),{},{request:{username:"guest",password:"guest"}});case"LOGIN_SUCCESS":return d(d({},e),{},{user:t.user,request:void 0});case"LOGIN_FAILED":return d(d({},e),{},{request:void 0});case"LOGOUT_REQUEST":return d(d({},e),{},{request:null});case"LOGOUT_SUCCESS":return d(d({},e),{},{user:null,request:void 0});default:throw new Error("Unhandled action type: "+t.type)}},p=function(e){var t=e.children,n=Object(c.useReducer)(m,{}),r=a()(n,2),o=r[0],u=r[1],s=Object(c.useMemo)((function(){var e,t;return{user:o.user,groupId:null==(e=o.user)||null==(t=e.membership_set.find((function(e){return null==e.root_group_id})))?void 0:t.group}}),[o]);return Object(c.useEffect)((function(){void 0===o.user?Object(l.checkLogin)().then((function(e){u({type:"LOGIN_SUCCESS",user:e})})).catch((function(e){console.log(e),u({type:"LOGOUT_SUCCESS"})})):null===o.user&&o.request?Object(l.login)(o.request.username,o.request.password).then((function(e){u({type:"LOGIN_SUCCESS",user:e})})).catch((function(){u({type:"LOGIN_FAILED"})})):o.user&&null===o.request&&Object(l.logout)().then((function(){return u({type:"LOGOUT_SUCCESS"})}))}),[o]),i.a.createElement(f.Provider,{value:{auth:s,dispatch:u}},t)};t.default=function(){return Object(c.useContext)(f)}},46:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"navigate",(function(){return f})),n.d(t,"default",(function(){return m}));var r=n(327),a=n.n(r),o=n(263),u=n(261),c=n(122),i=n(0),l=n(328),s=n(385),d=i.createRef();function f(e,t){var n,r;t&&(null==(n=d.current)||n.navigate(e,t)),null==(r=d.current)||r.navigate(e)}function m(t){var n=t.colorScheme;return i.createElement(o.default,{ref:d,documentTitle:{formatter:function(e,t){return"TOKKI TOK"}},linking:e.versions&&e.versions.electron?void 0:l.default,theme:"dark"===n?u.default:c.default},i.createElement(s.default,null))}!function(e){if(void 0!==e&&"/"===e.search[1]){var t=e.search.slice(1).split("&").map((function(e){return e.replace(/~and~/g,"&")})).join("?");window.history.replaceState(null,"",e.pathname.slice(0,-1)+t+e.hash)}}(window.location);var p=["ReactNativeFiberHostComponent"],b=a.a.clone(console);console.warn=function(e){var t=!0;e instanceof Object?t=!1:p.forEach((function(n){e.indexOf&&e.indexOf(n)<=-1&&(t=!1)})),t&&b.warn(e)}}.call(this,n(244))},466:function(e,t,n){firebaseConfig={authDomain:"virtual-metrics-355712.firebaseapp.com",projectId:"virtual-metrics-355712",storageBucket:"virtual-metrics-355712.appspot.com",messagingSenderId:"76003576924",appId:"1:76003576924:web:c8c8a006d07918bbc02a99",measurementId:"G-SEL35L4N5R"},e.exports=firebaseConfig},47:function(e,t,n){"use strict";n.r(t);t.default={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff"},button:{color:"rgb(242,242,242)",borderColor:"rgba(27,31,36,0.15)",backgroundColor:"#f6f8fa"},borderColor:"#d0d7de",header:"#24292f",focus:"#0065A4"}},473:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},58:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return u})),n.d(t,"logout",(function(){return c})),n.d(t,"guestLogin",(function(){return i})),n.d(t,"checkLogin",(function(){return s})),n.d(t,"getUserList",(function(){return d})),n.d(t,"getUserMembershipList",(function(){return f})),n.d(t,"getMessengerChannelList",(function(){return m})),n.d(t,"postChannel",(function(){return p})),n.d(t,"putChannel",(function(){return b})),n.d(t,"deleteChannel",(function(){return g})),n.d(t,"getMessengerMemberList",(function(){return h})),n.d(t,"postBulkMessengerMember",(function(){return v})),n.d(t,"deleteMessengerMember",(function(){return y})),n.d(t,"getMessengerContentList",(function(){return w})),n.d(t,"postMessage",(function(){return O})),n.d(t,"deleteMessengerContent",(function(){return E})),n.d(t,"setToken",(function(){return o.setToken})),n.d(t,"getToken",(function(){return o.getToken}));var r=n(7),a=n.n(r),o=n(41),u=function(e,t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.endsWith(".guest")&&0==t.length&&(t="guest"),r.next=3,a.a.awrap(o.default.post("/api-token-auth/",{username:e,password:t}));case 3:if(200!=(n=r.sent).status){r.next=10;break}return r.next=7,a.a.awrap(Object(o.setToken)(n.data));case 7:return r.next=9,a.a.awrap(s());case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),null,null,null,Promise)},c=function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(Object(o.setToken)(null));case 2:return e.next=4,a.a.awrap(o.default.get("/api-auth/logout/"));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),null,null,null,Promise)},i=function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(u("guest","guest"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,null,null,Promise)},l=function(){var e,t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(o.default.get("/api/v1/users/memberships/?_self=true"));case 2:if(n.t0=e=n.sent,null!=n.t0){n.next=7;break}n.t1=void 0,n.next=8;break;case 7:n.t1=e.data;case 8:if(!(t=n.t1)||!t.length){n.next=11;break}return n.abrupt("return",t[0]);case 11:return n.abrupt("return",null);case 12:case"end":return n.stop()}}),null,null,null,Promise)},s=function(){var e,t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(Object(o.getToken)());case 2:if(null!==n.sent){n.next=5;break}return n.abrupt("return",null);case 5:return n.prev=5,n.next=8,a.a.awrap(l());case 8:return n.abrupt("return",n.sent);case 11:if(n.prev=11,n.t0=n.catch(5),e=n.t0,void 0===n.t0.response||401!=n.t0.response.status){n.next=24;break}return n.prev=15,n.next=18,a.a.awrap(l());case 18:return n.abrupt("return",n.sent);case 21:n.prev=21,n.t1=n.catch(15),e=n.t1;case 24:throw t="ERR_NETWORK"==e.code||e.message&&e.message.startsWith("Cannot read"),{error:e,isOffline:t};case 26:case"end":return n.stop()}}),null,null,[[5,11],[15,21]],Promise)},d=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.get("/api/v1/users/?group_id="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},f=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.get("/api/v1/users/memberships/?group_id="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},m=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.get("/api/v1/channels/messenger/?type=messenger&messenger_user_id="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},p=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.post("/api/v1/channels/",e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},b=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.put("/api/v1/channels/"+e.id+"/",e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},g=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.delete("/api/v1/channels/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)},h=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.get("/api/v1/messengermembers/?channel="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},v=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.post("/api/v1/messengermembers/bulk/",{channel:e.channel_id,user_ids:e.user_ids}));case 2:case"end":return t.stop()}}),null,null,null,Promise)},y=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.delete("/api/v1/messengermembers/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)},w=function(e,t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t?"&id_lt="+t:"",r.next=3,a.a.awrap(o.default.get("/api/v1/messengercontents/?limit=30&channel="+e+n));case 3:return r.abrupt("return",r.sent.data.results);case 4:case"end":return r.stop()}}),null,null,null,Promise)},O=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.post("/api/v1/messengercontents/messages/",e));case 2:case"end":return t.stop()}}),null,null,null,Promise)},E=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(o.default.delete("/api/v1/messengercontents/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)}},75:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(9),u=n.n(o),c=n(0),i=n.n(c),l=n(23),s=n(2),d=n(152),f=n(47);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=Object(c.useState)(!1),n=u()(t,2),r=n[0],a=n[1];return i.a.createElement(d.default,{onPress:function(){return e.onPress()},onHoverIn:function(){return a(!0)},onHoverOut:function(){return a(!1)},style:[{paddingVertical:5,paddingHorizontal:16},e.style,r?{backgroundColor:e.color}:{}]},i.a.createElement(l.default,{selectable:!1,style:[{fontSize:14},e.textStyle]},e.title))};t.default=function(e){var t=p(p({color:f.default.button.color},e),{},{style:[g.style,e.style],textStyle:[g.text,e.textStyle]});return i.a.createElement(b,t)};var g=s.default.create({style:{borderRadius:6,borderColor:f.default.button.borderColor,borderWidth:1,backgroundColor:f.default.button.backgroundColor},text:{color:"black",textAlign:"center",fontWeight:"600"}})},85:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n(9),a=n.n(r),o=n(0),u=n(36),c=n(217),i=n.n(c);function l(){var e=i()(),t=Object(o.useState)(u.default.get("window")),n=a()(t,2),r=n[0],c=n[1],l=function(){return c(u.default.get("window"))};return Object(o.useEffect)((function(){return u.default.addEventListener("change",l),function(){u.default.removeEventListener("change",l)}})),e.isMobile()||r.height>=r.width?"portrait":"landscape"}},86:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d})),n.d(t,"useMessengerChannelMutation",(function(){return f}));var r=n(21),a=n.n(r),o=n(7),u=n.n(o),c=n(0),i=n(50),l=n(58),s=n(114);function d(e){var t=Object(i.useQueryClient)(),n=Object(s.default)().lastJsonMessage,r=Object(i.useQuery)("MessengerChannelList",(function(){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e||null==(t=e.user)||!t.id){n.next=6;break}return n.next=3,u.a.awrap(Object(l.getMessengerChannelList)(e.user.id));case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=[];case 7:return n.abrupt("return",n.t0);case 8:case"end":return n.stop()}}),null,null,null,Promise)})).data;return Object(c.useEffect)((function(){null!=n&&"enter"==n.type&&t.setQueryData("MessengerChannelList",(function(e){return(null!=e&&e.find((function(e){return e.id==n.data.id}))?e:[n.data].concat(a()(e||[]))).sort((function(e,t){return e.id-t.id}))}))}),[n]),r}function f(){var e=Object(i.useQueryClient)(),t=Object(i.useMutation)(l.postChannel,{onSuccess:function(){return e.invalidateQueries("MessengerChannelList")}}),n=Object(i.useMutation)(l.putChannel,{onSuccess:function(){return e.invalidateQueries("MessengerChannelList")}});return{create:t.mutateAsync,update:n.mutateAsync}}}},[[392,1,2]]]);
//# sourceMappingURL=app.35ecebd6.chunk.js.map