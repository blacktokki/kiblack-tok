(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n(11),a=n.n(r),o=n(0),u=n(44);function i(){var e=Object(o.useState)(u.default.get("window")),t=a()(e,2),n=t[0],r=t[1],i=function(){return r(u.default.get("window"))};return Object(o.useEffect)((function(){return u.default.addEventListener("change",i),function(){u.default.removeEventListener("change",i)}})),n.height>=n.width?"portrait":"landscape"}},108:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n(11),a=n.n(r),o=n(0),u=n(31),i=n(1),l=n(144),c=n(52);function s(e){var t=o.useState(!1),n=a()(t,2),r=(n[0],n[1]),i=o.useState(!1),c=a()(i,2),s=c[0],f=c[1];return o.createElement(l.default,{style:[d.outerContainer,e.outerContainerStyle,s?{backgroundColor:"rgb(242,242,242)"}:{}],onPressIn:function(){f(!0)},onPressOut:function(){f(!1),null==e.onPress||e.onPress()},onHoverIn:function(){return r(!0)},onHoverOut:function(){return r(!1)}},o.createElement(u.View,{style:[d.container,e.containerStyle]},o.createElement(u.View,{style:[d.bodyView,e.bodyStyle]},o.createElement(o.Fragment,null,e.children))))}var d=i.default.create({outerContainer:{width:"100%",maxWidth:1080,alignItems:"stretch"},container:{marginHorizontal:20,backgroundColor:"transparent"},bodyView:{width:"100%",padding:10,minHeight:40,alignItems:"center",justifyContent:"center",borderBottomWidth:1,borderColor:c.default.borderColor,backgroundColor:"transparent"}})},111:function(e,t,n){"use strict";n.r(t),n.d(t,"main",(function(){return ee})),n.d(t,"login",(function(){return te})),n.d(t,"modal",(function(){return ne}));var r=n(11),a=n.n(r),o=n(0),u=n.n(o),i=n(27),l=n(49),c=n(118),s=n(2),d=n(1),f=n(43);var m=d.default.create({login_container:{flex:1,backgroundColor:"#FFF"},login_header:{alignItems:"center",paddingTop:30,paddingBottom:50,backgroundColor:"#208AEC"},login_header_logo:{width:220,resizeMode:"contain"},login_header_text:{marginTop:15,color:"#f0f0f0",fontSize:16},login_header_text_bold:{color:"#fff",fontWeight:"bold"},login_wrapper:{flex:1,justifyContent:"space-between",paddingVertical:40,borderTopRightRadius:12,borderTopLeftRadius:12,marginTop:-10,backgroundColor:"#fff",alignItems:"center"},form:{width:"100%",maxWidth:280},form_input:{height:44,paddingHorizontal:20,marginBottom:20,backgroundColor:"#EDF0F7",borderRadius:50},button:{alignItems:"center",justifyContent:"center",height:44,backgroundColor:"#0065A4",borderRadius:50},button_label:{color:"#fff",fontSize:16},login_social:{width:"100%",maxWidth:280,marginTop:20},login_social_separator:{flexDirection:"row",alignItems:"center"},login_social_separator_line:{flex:1,width:"100%",height:1,backgroundColor:"#E0E0E0"},login_social_separator_text:{marginHorizontal:10,color:"#808080",fontSize:16},login_social_buttons:{flexDirection:"row",justifyContent:"center",marginTop:20},login_social_button:{alignItems:"center",justifyContent:"center",width:60,height:60,marginHorizontal:12,borderWidth:1,borderColor:"#E7E7E7",borderRadius:60},login_social_icon:{width:38,height:38,resizeMode:"contain"},login_social_facebook:{backgroundColor:"#4267B2",borderColor:"#4267B2"},login_footer_text:{flexDirection:"row",alignItems:"center",color:"#808080",fontSize:14},guest_footer_text:{flexDirection:"row",alignSelf:"center",color:"#808080",fontSize:15,margin:15},login_footer_link:{color:"#208AEC",fontSize:15,fontWeight:"bold"}}),p=n(31),b=n(52);function g(e){return o.createElement(p.View,{style:[h.outerContainer,e.outerContainerStyle]},o.createElement(p.View,{style:[h.container,e.containerStyle]},e.withSeparator?o.createElement(p.View,{style:h.separator,lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}):void 0,e.title?o.createElement(p.View,{style:h.titleView},o.createElement(p.Text,{style:[h.title,e.titleStyle]},e.title),o.createElement(p.Text,{style:h.subtitle},e.subtitle)):void 0,o.createElement(p.View,{style:[h.bodyView,e.bodyStyle]},e.children)))}var h=d.default.create({outerContainer:{width:"100%",maxWidth:1080,alignItems:"stretch",backgroundColor:"transparent"},container:{marginHorizontal:20,marginVertical:10,backgroundColor:"transparent"},titleView:{width:"100%",flexDirection:"row",backgroundColor:"transparent",marginBottom:5},title:{flex:1,fontSize:16},subtitle:{flex:1,fontSize:12,textAlign:"right",marginTop:4},separator:{marginBottom:20,height:1,width:"100%"},bodyView:{width:"100%",padding:20,alignItems:"center",justifyContent:"center",borderWidth:1,borderColor:b.default.borderColor,borderRadius:6}}),y=n(452),v=n(163),O=n(53),E=n(4),w=n.n(E),j=n(22),x=n.n(j),C=n(9),S=n.n(C),P=n(34),k=n(39),_=n(136);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){var t=Object(P.useQueryClient)(),n=Object(P.useInfiniteQuery)(["MessengerContentList",e],(function(t){var n;return S.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.pageParam,r.abrupt("return",Object(k.getMessengerContentList)(e,n).then((function(e){return{current:e}})));case 2:case"end":return r.stop()}}),null,null,null,Promise)}),{select:function(e){return e.pages.length>1&&(e.pages[e.pages.length-2].next=e.pages[e.pages.length-1]),e},getNextPageParam:function(e){return e.current.length?e.current[e.current.length-1].id:void 0},refetchOnReconnect:!1,refetchOnWindowFocus:!1}),r=n.data,a=n.fetchNextPage,u=Object(_.default)().lastJsonMessage;return Object(o.useEffect)((function(){null!=u&&"next_message"==u.type&&u.data.channel==e&&t.setQueryData(["MessengerContentList",e],(function(e){return null!=e&&e.pages[0].current&&(e.pages[0].current=[u.data].concat(x()(null==e?void 0:e.pages[0].current))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e||{pages:[],pageParams:[]})}))}),[u]),{data:r,fetchNextPage:a}}var T=n(79);function D(e){return Object(P.useQuery)(["MessengerMemberList",e],(function(){return S.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.awrap(Object(k.getMessengerMemberList)(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,null,null,Promise)})).data}function I(){var e=Object(P.useQueryClient)(),t=Object(P.useMutation)(k.postBulkMessengerMember,{onSuccess:function(){e.invalidateQueries("MessengerMemberList")}}),n=Object(P.useMutation)(k.deleteMessengerMember,{onSuccess:function(){e.invalidateQueries("MessengerChannelList"),e.invalidateQueries("MessengerMemberList")}});return{invite:t.mutate,leave:n.mutate}}var L=n(40);var z=n(208),R=n(107),V=n(223);d.default.create({Panel_Button_Text:{textAlign:"center",color:"#fff",fontSize:21},Panel_Holder:{borderWidth:1,borderColor:"#888",marginVertical:5}});var Q=n(146);function W(e){return Object(P.useQuery)(["BoardContentList",e],(function(){return S.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.awrap(Object(k.getBoardContentList)(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,null,null,Promise)})).data}function U(){var e=Object(P.useQueryClient)(),t=Object(P.useMutation)(k.postBoard,{onSuccess:function(){return e.invalidateQueries("BoardContentList")}}),n=Object(P.useMutation)(k.patchBoard,{onSuccess:function(){return e.invalidateQueries("BoardContentList")}}),r=Object(P.useMutation)(k.deleteBoardContent,{onSuccess:function(){return e.invalidateQueries("BoardContentList")}});return{create:t.mutate,update:n.mutate,delete:r.mutate}}var A=n(82);function G(e){return u.a.createElement(s.default,{style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:5}},u.a.createElement(i.default,{style:[{flex:1,paddingHorizontal:15,fontSize:16},e.textStyle]},e.name),u.a.createElement(s.default,{style:{flex:3,justifyContent:"center",paddingHorizontal:15}},u.a.createElement(s.default,{style:{width:e.width}},e.children)))}function H(e){var t=Object(o.useState)(),n=a()(t,2),r=n[0],i=n[1];return u.a.createElement(G,{name:e.name,width:e.width,textStyle:e.textStyle},u.a.createElement(v.TextInput,{style:[{borderColor:"#d0d7de",fontSize:16,borderWidth:1,borderRadius:6,paddingHorizontal:10,paddingVertical:3,backgroundColor:e.disabled?"#EEE":void 0,height:e.multiline?r:30},e.style],editable:!e.disabled,value:e.value,onChangeText:e.setValue,onContentSizeChange:e.multiline?function(e){return i(e.nativeEvent.contentSize.height+2)}:void 0,multiline:e.multiline}))}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=d.default.create({field:{width:"50%",flexDirection:"row",padding:10},separator:{marginBottom:20,height:1,width:"100%"}}),J=n(98);var K=d.default.create({field:{width:"50%",flexDirection:"row",padding:10},separator:{marginBottom:20,height:1,width:"100%"}}),X=n(138),Y=n(159),Z=function(e){var t=Object(o.useState)(e.selectedRef.current.has(e.item.id)),n=a()(t,2),r=n[0],i=n[1];return u.a.createElement(p.View,{style:r?{borderWidth:1,borderColor:"blue"}:{}},Object(Y.renderMemberItem)(e.item,(function(t){r?(i(!1),e.selectedRef.current.delete(t.id)):(i(!0),e.selectedRef.current.add(t.id))})))};var $=n(225);var ee={HomeScreen:{title:"home",component:function(e){var t,n=e.navigation,r=e.route,a=Object(R.default)(),i=[{title:"member",headerRight:function(){return u.a.createElement(T.default,null)}},{title:"messenger",headerRight:function(){return u.a.createElement(T.default,{extra:[{title:"create",onPress:function(){return Object(L.navigate)("ChannelEditScreen",{type:"messenger"})}}]})}},{title:"board",headerRight:function(){return u.a.createElement(T.default,{extra:[{title:"create",onPress:function(){return Object(L.navigate)("ChannelEditScreen",{type:"board"})}}]})}},{title:"config",headerRight:function(){return u.a.createElement(T.default,null)}}];return Object(o.useLayoutEffect)((function(){var e,t=0|(null==r||null==(e=r.params)?void 0:e.tab);n.setOptions("portrait"==a?i[t]:{title:"home",headerRight:function(){return u.a.createElement(T.default,null)}})}),[n,r,a]),"landscape"==a?u.a.createElement(s.default,{style:{padding:10}}):u.a.createElement(z.TabViewNavigator,{tabs:V.bottomTabs,tabBarPosition:"bottom",index:parseInt((null==(t=r.params)?void 0:t.tab)||0),onTab:function(e){n.setParams({tab:e})}})},path:"home"},ChatScreen:{title:"chat",component:function(e){var t,n=e.navigation,r=e.route,l=null==r||null==(t=r.params)?void 0:t.id,c=Object(o.useRef)(0),d=Object(f.default)().auth,m=B(l),p=m.data,h=m.fetchNextPage,E=D(l),w=Object(o.useMemo)((function(){var e;return null==E||null==(e=E.find((function(e){var t;return e.user==(null==(t=d.user)?void 0:t.id)})))?void 0:e.id}),[d,E]),j=I(),x=Object(o.useState)(""),C=a()(x,2),S=C[0],_=C[1],M=function(){var e;z.create({channel:l,user:null==(e=d.user)?void 0:e.id,content:S}),_("")},z=function(){var e=Object(P.useMutation)(k.postMessage,{onSuccess:function(){}}),t=Object(P.useMutation)(k.deleteMessengerContent,{onSuccess:function(e,t){}});return{create:e.mutate,delete:t.mutate}}();Object(o.useLayoutEffect)((function(){n.setOptions({headerRight:function(){return u.a.createElement(T.default,{extra:[{title:"invite",onPress:function(){Object(L.navigate)("InviteScreen",{id:l})}},{title:"leave",onPress:function(){w&&j.leave(w),V()}}]})}})}),[n,r,w]);var R=Object(o.useCallback)((function(e){for(var t,n=e.item,r=(e.index,n.next);null!=(a=r)&&a.next&&0==r.current.length;){var a;r=r.next}var o=null==(t=r)?void 0:t.current[0];return u.a.createElement(s.default,{style:{flexDirection:"column-reverse"}},n.current.map((function(e,t){var r,a=t+1<n.current.length?n.current[t+1]:o,l=e.created.slice(0,16),c=l.slice(0,10),f=null==e.user,m=void 0==a||e.user!=a.user||l!=a.created.slice(0,16),p=(null==(r=d.user)?void 0:r.id)==e.user,b=void 0==a||c!=a.created.slice(0,10);return f?u.a.createElement(s.default,{key:e.id,style:{flexDirection:"row",justifyContent:"center",width:"100%"}},u.a.createElement(i.default,null,e.message_set[0].content)):u.a.createElement(s.default,{key:e.id},b?u.a.createElement(s.default,{style:{flexDirection:"row",justifyContent:"center",width:"100%"}},u.a.createElement(i.default,null,c)):void 0,u.a.createElement(s.default,{key:e.id,style:{flexDirection:"row",justifyContent:p?"space-between":"flex-start",width:"100%"}},m&&!p?u.a.createElement(y.default,{size:38,style:{marginBottom:-3,marginRight:10},name:"account-circle"}):u.a.createElement(s.default,{style:{width:48}}),u.a.createElement(g,{outerContainerStyle:{width:void 0,maxWidth:"90%"},title:m?e.name:void 0,titleStyle:{flex:void 0},bodyStyle:{padding:10},subtitle:""+l.slice(11)},u.a.createElement(i.default,null,e.message_set[0].content))))})))}),[n,z]),V=function(){n.canGoBack()?n.goBack():n.navigate("HomeScreen",{tab:2})};return Object(o.useEffect)((function(){l||V()}),[]),u.a.createElement(s.default,{style:{flex:1,alignItems:"center"}},u.a.createElement(v.FlatList,{style:{width:"100%",flexDirection:"column-reverse",marginBottom:65},contentContainerStyle:{padding:10,flexGrow:1,flexDirection:"column-reverse"},data:null==p?void 0:p.pages,renderItem:R,onScroll:function(e){e.nativeEvent.contentOffset.y+e.nativeEvent.contentSize.height-c.current==0&&h()},onLayout:function(e){c.current=e.nativeEvent.layout.height}}),u.a.createElement(s.default,{style:{width:"100%"}},u.a.createElement(s.default,{style:{position:"absolute",top:-65,width:"100%",backgroundColor:"white",alignItems:"center"}},u.a.createElement(s.default,{style:{width:"100%",flexDirection:"row",paddingTop:15,paddingBottom:10,paddingHorizontal:19}},u.a.createElement(v.TextInput,{value:S,onChangeText:_,style:{flex:1,borderWidth:1,height:40,borderRadius:6,borderColor:b.default.borderColor},onSubmitEditing:M}),u.a.createElement(O.default,{title:"write",onPress:M})))))},path:"chat"},BoardScreen:{title:"board",component:function(e){var t,n=e.navigation,r=e.route,a=null==r||null==(t=r.params)?void 0:t.id,i=W(a),l=Object(A.useBoardChannelMutation)(),c=U();Object(o.useLayoutEffect)((function(){n.setOptions({headerRight:function(){return u.a.createElement(T.default,{extra:[{title:"delete",onPress:function(){l.delete(a),d()}}]})}})}),[n,r]);var s=Object(o.useCallback)((function(e){var t=e.item;return u.a.createElement(g,{bodyStyle:{alignItems:"flex-start",paddingHorizontal:35}},u.a.createElement(p.View,{style:{flexDirection:"row",width:"100%",justifyContent:"space-between"}},u.a.createElement(p.View,{style:{flexDirection:"row"}},u.a.createElement(y.default,{size:38,style:{marginBottom:-3,marginRight:10},name:"account-circle"}),u.a.createElement(p.View,null,u.a.createElement(p.Text,{style:{fontSize:16}},t.name),u.a.createElement(p.Text,{style:{fontSize:14,opacity:.4}},t.created.split(".")[0].replace("T"," ")))),u.a.createElement(p.View,{style:{flexDirection:"row"}},u.a.createElement(O.default,{title:"edit",onPress:function(){return n.navigate("BoardEditScreen",{channel_id:t.channel,id:t.id})}}),u.a.createElement(O.default,{title:"delete",onPress:function(){return c.delete(t.id)}}))),u.a.createElement(p.Text,{style:{fontSize:20}},t.board_set[0].title),u.a.createElement(p.Text,{style:{fontSize:14}},t.board_set[0].content))}),[n,c]),d=function(){n.canGoBack()?n.goBack():n.navigate("HomeScreen",{tab:2})};return Object(o.useEffect)((function(){a||d()}),[]),u.a.createElement(p.View,{style:{flex:1,backgroundColor:"white"}},u.a.createElement(Q.default,{data:i,renderItem:s,contentContainerStyle:{flexGrow:1},ListFooterComponent:function(){return u.a.createElement(g,{bodyStyle:{flexDirection:"row",justifyContent:"flex-end",paddingVertical:0,borderWidth:0}},u.a.createElement(O.default,{title:"write",onPress:function(){return n.navigate("BoardEditScreen",{channel_id:a})}}))}}))},path:"board"},TabOneScreen:{title:"tab one",component:function(e){return e.navigation,u.a.createElement(s.default,{style:{padding:10}})},path:"one"}},te={LoginScreen:{path:"login",title:"\ub85c\uadf8\uc778",component:function(e){e.navigation;var t=Object(o.useState)(""),n=a()(t,2),r=n[0],d=n[1],p=Object(o.useState)(""),b=a()(p,2),g=b[0],h=b[1],y=Object(f.default)().dispatch,v=function(){return y({type:"LOGIN_REQUEST",username:r,password:g})};return u.a.createElement(s.default,{style:m.login_wrapper},u.a.createElement(s.default,{style:m.form},u.a.createElement(l.default,{style:m.form_input,value:r,placeholder:"Username",onChangeText:function(e){return d(e)},autoCapitalize:"none",keyboardType:"email-address",onSubmitEditing:v}),u.a.createElement(l.default,{style:m.form_input,value:g,placeholder:"Password",secureTextEntry:!0,onChangeText:function(e){return h(e)},onSubmitEditing:v}),u.a.createElement(c.default,{onPress:v},u.a.createElement(s.default,{style:m.button},u.a.createElement(i.default,{style:m.button_label},"Sign in"))),u.a.createElement(c.default,{onPress:function(){return y({type:"LOGIN_GUEST"})}},u.a.createElement(i.default,{style:m.guest_footer_text},"Sign in as guest"))),u.a.createElement(s.default,{style:m.login_social},u.a.createElement(s.default,{style:m.login_social_separator},u.a.createElement(s.default,{style:m.login_social_separator_line}),u.a.createElement(i.default,{style:m.login_social_separator_text},"text"),u.a.createElement(s.default,{style:m.login_social_separator_line})),u.a.createElement(s.default,{style:m.login_social_buttons})))}}},ne={BoardEditScreen:{title:"board",component:function(e){var t,n,r=e.navigation,i=e.route,l=null==i||null==(t=i.params)?void 0:t.id,c=null==i||null==(n=i.params)?void 0:n.channel_id,s=Object(f.default)().auth,d=Object(A.default)(s),m=W(c),b=U(),h=null==d?void 0:d.find((function(e){return e.id==c})),y=Object(o.useMemo)((function(){var e;return null==m||null==(e=m.find((function(e){return e.id==l})))?void 0:e.board_set[0]}),[m]),v=Object(o.useState)(""),E=a()(v,2),w=E[0],j=E[1],x=Object(o.useState)(""),C=a()(x,2),S=C[0],P=C[1],k=function(){r.canGoBack()?r.goBack():r.replace("Main")};return Object(o.useEffect)((function(){c&&h||!d||k()}),[d]),Object(o.useEffect)((function(){y&&(j(y.title),P(y.content))}),[y]),u.a.createElement(g,{outerContainerStyle:{alignSelf:"center"}},u.a.createElement(p.View,{style:{justifyContent:"space-around"}},u.a.createElement(p.Text,{style:{fontSize:20}},"Edit Board")),u.a.createElement(p.View,{style:q.separator,lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}),u.a.createElement(p.View,{style:{width:"50%"}},u.a.createElement(H,{name:"Channel",disabled:!0,value:(null==h?void 0:h.name)||"",width:"100%"}),u.a.createElement(H,{name:"Title",value:w,setValue:j,width:"100%"}),u.a.createElement(H,{name:"Content",value:S,setValue:P,multiline:!0,width:"100%"})),u.a.createElement(p.View,{style:[q.field,{justifyContent:"flex-end"}]},u.a.createElement(O.default,{title:"save",onPress:function(){var e,t={id:null==y?void 0:y.id,title:w,content:S};l?b.update(t):b.create(F(F({},t),{},{user:null==(e=s.user)?void 0:e.id,channel:c})),Object(L.navigate)("Main",{screen:"BoardScreen",params:{id:c}})}}),u.a.createElement(O.default,{title:"cancel",onPress:k})))},path:"modal/board"},ChannelEditScreen:{title:"channel",component:function(e){var t,n,r=e.navigation,i=e.route,l=null==i||null==(t=i.params)?void 0:t.id,c=null==i||null==(n=i.params)?void 0:n.type,s=Object(f.default)().auth,d="messenger"==c?Object(J.default)(s):Object(A.default)(s),m="messenger"==c?Object(J.useMessengerChannelMutation)():Object(A.useBoardChannelMutation)(),b=null==d?void 0:d.find((function(e){return e.id==l})),h=Object(o.useState)(""),y=a()(h,2),v=y[0],E=y[1],w=Object(o.useState)(""),j=a()(w,2),x=j[0],C=j[1];return Object(o.useEffect)((function(){b&&(E(b.name),C((null==b?void 0:b.description)||""))}),[b]),u.a.createElement(g,{outerContainerStyle:{alignSelf:"center"}},u.a.createElement(p.View,{style:{justifyContent:"space-around"}},u.a.createElement(p.Text,{style:{fontSize:20}},"Edit Channel - ",c)),u.a.createElement(p.View,{style:K.separator,lightColor:"#ddd",darkColor:"rgba(255,255,255, 0.3)"}),u.a.createElement(p.View,{style:{width:"50%"}},u.a.createElement(H,{name:"Name",value:v,setValue:E,width:"100%"}),u.a.createElement(H,{name:"Description",value:x,setValue:C,multiline:!0,width:"100%"})),u.a.createElement(p.View,{style:[K.field,{justifyContent:"flex-end"}]},u.a.createElement(O.default,{title:"save",onPress:function(){var e;if(null!=s&&null!=(e=s.user)&&e.id&&s.groupId){var t,n={id:l,name:v,description:x,type:c,owner:null==s||null==(t=s.user)?void 0:t.id,group:s.groupId};(l?m.update(n):m.create(n)).then((function(e){return Object(L.navigate)("Main",{screen:"messenger"==e.type?"MessengerScreen":"BoardScreen",params:{id:e.id}})}))}}}),u.a.createElement(O.default,{title:"cancel",onPress:function(){r.canGoBack()?r.goBack():r.replace("Main")}})))},path:"modal/channel"},InviteScreen:{title:"invite",component:function(e){var t,n=e.navigation,r=e.route,a=null==r||null==(t=r.params)?void 0:t.id,i=Object(f.default)().auth,l=Object(X.default)(i),c=D(a),s=I(),d=Object(o.useRef)(new Set),m=Object(o.useMemo)((function(){var e=new Set(null==c?void 0:c.map((function(e){return e.user})));return null==l?void 0:l.filter((function(t){return!e.has(t.id)}))}),[l,c]),b=function(){n.canGoBack()?n.goBack():a?Object(L.navigate)("ChatScreen",{id:a}):n.replace("Main")};return u.a.createElement(g,{outerContainerStyle:{alignSelf:"center"}},null==m?void 0:m.map((function(e,t){return u.a.createElement(Z,{key:t,item:e,selectedRef:d})})),u.a.createElement(p.View,{style:[{width:"50%",flexDirection:"row",padding:10},{justifyContent:"flex-end"}]},u.a.createElement(O.default,{title:"save",onPress:function(){s.invite({channel_id:a,user_ids:x()(d.current)}),b()}}),u.a.createElement(O.default,{title:"cancel",onPress:b})))},path:"modal/invite"},ProfileScreen:{title:"profile",component:function(e){var t,n=e.navigation,r=e.route,a=null==r||null==(t=r.params)?void 0:t.id,i=Object(f.default)().auth,l=Object(X.default)(i),c=null==l?void 0:l.find((function(e){return e.id==a})),d=Object(J.useMessengerChannelMutation)();return Object(o.useEffect)((function(){a&&c||!l||(n.canGoBack()?n.goBack():n.replace("Main"))}),[l]),c?u.a.createElement(s.default,{style:{padding:10}},u.a.createElement($.default,{username:null==c?void 0:c.username,name:null==c?void 0:c.name}),u.a.createElement(O.default,{title:"create messenger",onPress:function(){var e;if(null!=i&&null!=(e=i.user)&&e.id&&i.groupId){var t,n={name:i.user.name+", "+c.name,type:"messenger",owner:null==i||null==(t=i.user)?void 0:t.id,group:i.groupId};d.create(n).then((function(e){return Object(L.navigate)("Main",{screen:"MessengerScreen",params:{id:e.id}})}))}}})):u.a.createElement(u.a.Fragment,null)},path:"modal/profile"}}},136:function(e,t,n){"use strict";n.r(t),n.d(t,"WebSocketProvider",(function(){return c}));var r=n(0),a=n.n(r),o=n(343),u=n.n(o),i=Object(r.createContext)({lastJsonMessage:null,sendJsonMessage:function(){}}),l=function(e){var t=e.children,n=u()("ws://localhost:9000/messenger/ws/",{shouldReconnect:function(e){return!0}}),r=n.lastJsonMessage,o=n.sendJsonMessage;return a.a.createElement(i.Provider,{value:{lastJsonMessage:r,sendJsonMessage:o}},t)},c=function(e){var t=e.disable,n=e.children;return t?a.a.createElement(a.a.Fragment,null,n):a.a.createElement(l,null,n)};t.default=function(){return Object(r.useContext)(i)}},138:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n(9),a=n.n(r),o=n(34),u=n(39);function i(e){return Object(o.useQuery)(["UserMembershipList",null==e?void 0:e.groupId],(function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||!e.groupId){t.next=6;break}return t.next=3,a.a.awrap(Object(u.getUserMembershipList)(null==e?void 0:e.groupId));case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=[];case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),null,null,null,Promise)})).data}},159:function(e,t,n){"use strict";n.r(t),n.d(t,"renderMemberItem",(function(){return m})),n.d(t,"MemberIcon",(function(){return p}));var r=n(452),a=n(256),o=n(0),u=n.n(o),i=n(27),l=n(2),c=n(108),s=n(43),d=n(138),f=n(40),m=function(e,t){return u.a.createElement(c.default,{key:e.id,bodyStyle:{flexDirection:"row",justifyContent:"flex-start"},onPress:t?function(){return t(e)}:void 0},u.a.createElement(r.default,{size:38,style:{marginBottom:-3,marginRight:10},name:"account-circle"}),u.a.createElement(i.default,{style:{fontSize:20,fontWeight:"400"}},e.name))};t.default=function(){var e=Object(s.default)().auth,t=Object(d.default)(e);return u.a.createElement(l.default,{style:{flex:1,backgroundColor:"white"}},t&&t.map((function(e){return m(e,(function(e){return Object(f.navigate)("ProfileScreen",{id:e.id})}))})))};var p=u.a.createElement(a.default,{size:32,style:{marginBottom:-3},name:"account"})},197:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n(334);function a(){return Object(r.default)()}},206:function(e,t,n){"use strict";n.r(t);var r=n(61),a=n.n(r),o=n(0),u=n.n(o),i=n(1),l=n(53);t.default=function(e){return u.a.createElement(l.default,a()({},e,{style:[c.style,e.style]}))};var c=i.default.create({style:{borderRadius:6,backgroundColor:"transparent",borderWidth:0}})},208:function(e,t,n){"use strict";n.r(t),n.d(t,"TabViewNavigator",(function(){return j}));var r=n(61),a=n.n(r),o=n(4),u=n.n(o),i=n(22),l=n.n(i),c=n(11),s=n.n(c),d=n(160),f=n(0),m=n.n(f),p=n(2),b=n(1),g=n(229),h=n(40),y=n(225),v=n(206),O=n(52),E=n(107),w=n(223),j=function(e){var t=m.a.useState(e.index||0),n=s()(t,2),r=n[0],o=n[1],i=Object.entries(e.tabs),c=e.onTab,d=Object.assign.apply(Object,[{}].concat(l()(i.map((function(e){var t=s()(e,2),n=t[0],r=t[1];return u()({},n,r.icon)})))));return m.a.createElement(g.TabView,{renderTabBar:function(e){return m.a.createElement(g.TabBar,a()({},e,{indicatorStyle:{backgroundColor:"#2196F3"},style:{backgroundColor:"white"},activeColor:"black",inactiveColor:"black",renderIcon:function(e){return d[e.route.key]},onTabPress:function(e){return null==c?void 0:c(i.findIndex((function(t){var n=s()(t,2),r=n[0];n[1];return r==e.route.key})))}}))},navigationState:{index:r,routes:i.map((function(e){var t=s()(e,2);return{key:t[0],title:t[1].title}}))},onIndexChange:o,renderScene:Object(g.SceneMap)(Object.assign.apply(Object,[{}].concat(l()(i.map((function(e){var t=s()(e,2),n=t[0],r=t[1];return u()({},n,r.component)})))))),tabBarPosition:e.tabBarPosition})},x=[function(){return Object(h.navigate)("ChannelEditScreen",{type:"messenger"})},function(){return Object(h.navigate)("ChannelEditScreen",{type:"board"})}];t.default=function(e){var t=e.user,n=Object(d.default)().colors,r=Object(E.default)(),a=Object(f.useState)(0),o=s()(a,2),u=o[0],i=o[1];return"landscape"==r?m.a.createElement(p.default,{style:[C.tabBar,{backgroundColor:n.card,borderTopColor:n.border}],pointerEvents:"auto"},m.a.createElement(y.default,{username:t.username,name:t.name}),m.a.createElement(p.default,{style:{flexDirection:"row-reverse"}},m.a.createElement(v.default,{title:"+",textStyle:{fontSize:20},style:{borderRadius:20},onPress:x[u]})),m.a.createElement(p.default,{accessibilityRole:"tablist",style:C.content},m.a.createElement(j,{tabs:w.drawerTabs,tabBarPosition:"top",onTab:i}))):m.a.createElement(p.default,{style:{width:0}})};var C=b.default.create({tabBar:{width:240,elevation:8,borderRightWidth:1,borderColor:O.default.borderColor},content:{flex:1,flexDirection:"row"},tab:{flex:1,alignItems:"center"},label:{textAlign:"center",backgroundColor:"transparent"}})},223:function(e,t,n){"use strict";n.r(t),n.d(t,"bottomTabs",(function(){return x})),n.d(t,"drawerTabs",(function(){return C}));var r=n(159),a=n(4),o=n.n(a),u=n(0),i=n.n(u),l=n(2),c=n(27),s=n(108),d=n(82),f=n(98),m=n(43),p=n(40);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){return i.a.createElement(l.default,{style:{flex:1,backgroundColor:"white"}},e.data.map((function(e,t){return i.a.createElement(s.default,{key:t,containerStyle:{marginHorizontal:0},bodyStyle:{alignItems:"flex-start"},onPress:e.onPress},i.a.createElement(c.default,{style:{marginLeft:20}},e.name))})))},y={Messenger:function(){var e=Object(m.default)().auth,t=Object(f.default)(e);return i.a.createElement(h,{data:(t||[]).map((function(e){return g(g({},e),{},{onPress:function(){return Object(p.navigate)("ChatScreen",{id:e.id})}})}))})},Board:function(){var e=Object(m.default)().auth,t=Object(d.default)(e);return i.a.createElement(h,{data:(t||[]).map((function(e){return g(g({},e),{},{onPress:function(){return Object(p.navigate)("BoardScreen",{id:e.id})}})}))})}},v=n(459),O=n(460),E=i.a.createElement(O.default,{size:30,style:{marginBottom:-3},name:"chatbox"}),w=n(463),j=i.a.createElement(w.default,{size:30,style:{marginBottom:3},name:"clipboard-list"}),x={OneTab:{title:"member",component:r.default,icon:r.MemberIcon},TwoTab:{title:"messenger",component:function(){var e=Object(m.default)().auth,t=Object(f.default)(e),n=(new Date).toISOString().slice(0,10);return i.a.createElement(l.default,{style:{flex:1,backgroundColor:"white"}},null==t?void 0:t.map((function(e,t){var r,a,o,u=null==(r=e.last_message)?void 0:r.created.slice(0,10);return i.a.createElement(s.default,{key:t,bodyStyle:{flexDirection:"row",justifyContent:"space-between"},onPress:function(){return Object(p.navigate)("ChatScreen",{id:e.id})}},i.a.createElement(l.default,{style:{flexDirection:"row"}},i.a.createElement(v.default,{size:36,style:{marginBottom:-3,marginRight:20},name:"users"}),i.a.createElement(l.default,null,i.a.createElement(l.default,{style:{flexDirection:"row"}},i.a.createElement(c.default,{style:{fontSize:18}},e.name),i.a.createElement(c.default,{style:{fontSize:18,opacity:.4,paddingLeft:5}},e.member_count)),i.a.createElement(c.default,{style:{fontSize:16,opacity:.4}},null==(a=e.last_message)?void 0:a.content))),i.a.createElement(l.default,null,i.a.createElement(c.default,{style:{fontSize:14,opacity:.4,textAlign:"right"}},u==n?null==(o=e.last_message)?void 0:o.created.slice(11,16):u),i.a.createElement(c.default,{style:{fontSize:14,textAlign:"right"}},e.unread_count?e.unread_count:" ")))})))},icon:E},ThreeTab:{title:"board",component:function(){var e=Object(m.default)().auth,t=Object(d.default)(e);return i.a.createElement(l.default,{style:{flex:1,backgroundColor:"white"}},null==t?void 0:t.map((function(e){return i.a.createElement(s.default,{key:e.id,bodyStyle:{flexDirection:"row",justifyContent:"flex-start"},onPress:function(){return Object(p.navigate)("BoardScreen",{id:e.id})}},i.a.createElement(v.default,{size:32,style:{marginBottom:-3,marginRight:10},name:"bars"}),i.a.createElement(c.default,{style:{fontSize:20,fontWeight:"400"}},e.name))})))},icon:j}},C={TwoTab:{title:"messenger",component:y.Messenger,icon:E},ThreeTab:{title:"board",component:y.Board,icon:j}}},225:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(2),u=n(27),i=n(366),l=n(52),c=function(e){return r.createElement(o.default,{style:{width:"100%",height:135,justifyContent:"space-evenly",alignItems:"center"}},r.createElement(i.Avatar.Text,{style:{backgroundColor:l.default.header},size:75,label:e.name.split(" ").map((function(e){return e[0]})).join().toUpperCase()}),r.createElement(u.default,{style:{fontWeight:"bold",fontSize:15}},e.name),r.createElement(u.default,{style:{fontWeight:"normal",fontSize:14}},e.username))};t.default=function(e){return a.a.createElement(o.default,{style:{width:"100%",height:135}},a.a.createElement(c,e))}},31:function(e,t,n){"use strict";n.r(t),n.d(t,"useThemeColor",(function(){return p})),n.d(t,"Text",(function(){return b})),n.d(t,"View",(function(){return g}));var r=n(61),a=n.n(r),o=n(5),u=n.n(o),i=n(0),l=n(27),c=n(2),s=n(52),d=n(197),f=["style","lightColor","darkColor"],m=["style","lightColor","darkColor"];function p(e,t){var n=Object(d.default)(),r=e[n];return r||s.default[n][t]}function b(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=u()(e,f),c=p({light:n,dark:r},"text");return i.createElement(l.default,a()({style:[{color:c},t]},o))}function g(e){var t=e.style,n=e.lightColor,r=e.darkColor,o=u()(e,m),l=p({light:n,dark:r},"background");return i.createElement(c.default,a()({style:[{backgroundColor:l},t]},o))}},312:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(369),u=n(111);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default={prefixes:[o.makeUrl("/")],config:{screens:l({Main:{screens:l(l(l({},u.main),u.login),{},{NotFound:"*"})}},u.modal)}}},374:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var r=n(0),a=n.n(r),o=n(368),u=n(462),i=n(40),l=n(197),c=n(4),s=n.n(c),d=n(11),f=n.n(d),m=n(9),p=n.n(m),b=n(460),g=n(261),h=n(260);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(){var e=function(){var e=r.useState(!1),t=f()(e,2),a=t[0],o=t[1];return r.useEffect((function(){p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h.preventAutoHideAsync(),e.next=4,p.a.awrap(g.loadAsync(v(v({},b.default.font),{},{"space-mono":n(448)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,o(!0),h.hideAsync(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),a}(),t=Object(l.default)();return e?a.a.createElement(u.SafeAreaProvider,null,a.a.createElement(i.default,{colorScheme:t}),a.a.createElement(o.StatusBar,null)):null}},375:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var r=n(11),a=n.n(r),o=n(289),u=n(370),i=n(0),l=n.n(i),c=n(2),s=n(34),d=n(107),f=n(1),m=n(27),p=n(118);function b(e){var t=e.navigation;return i.createElement(c.default,{style:g.container},i.createElement(m.default,{style:g.title},"This screen doesn't exist."),i.createElement(p.default,{onPress:function(){return t.replace("HomeScreen")},style:g.link},i.createElement(m.default,{style:g.linkText},"Go to home screen!")))}var g=f.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),h=n(111),y=n(208),v=n(43),O=n(136),E=n(79),w=n(52),j=Object(o.default)(),x=new s.QueryClient;function C(){var e=Object(d.default)();return l.a.createElement(v.AuthProvider,null,l.a.createElement(s.QueryClientProvider,{client:x},l.a.createElement(j.Navigator,{mode:"modal",headerMode:"screen",screenOptions:{cardStyle:{backgroundColor:"white"},animationEnabled:!0,cardStyleInterpolator:u.CardStyleInterpolators.forVerticalIOS}},l.a.createElement(j.Screen,{name:"Main",component:P,options:{headerShown:!1}}),Object.entries(h.modal).map((function(t){var n=a()(t,2),r=n[0],o=n[1];return l.a.createElement(j.Screen,{key:r,name:r,component:o.component,options:{title:o.title,gestureDirection:"landscape"==e?"vertical-inverted":"vertical"}})})))))}var S=Object(o.default)();function P(){var e=Object(v.default)().auth,t=Object(i.useMemo)((function(){return void 0===e.user?[]:(console.log("current user: ",e.user),Object.entries(null===e.user?h.login:h.main))}),[e]);return void 0!==e.user?l.a.createElement(c.default,{style:{flexDirection:"row",flex:1}},e.user?l.a.createElement(y.default,{user:e.user}):void 0,l.a.createElement(c.default,{style:{flex:1}},l.a.createElement(O.WebSocketProvider,{disable:null===e.user||void 0===e.user},l.a.createElement(S.Navigator,{screenOptions:{headerStyle:{backgroundColor:w.default.header},headerTitleStyle:{color:"white"},headerRight:function(){return l.a.createElement(E.default,null)},headerLeftContainerStyle:{backgroundColor:"white",borderBottomWidth:1,borderColor:w.default.borderColor}}},t.map((function(e){var t=a()(e,2),n=t[0],r=t[1];return l.a.createElement(S.Screen,{key:n,name:n,component:r.component,options:{title:r.title}})})),l.a.createElement(S.Screen,{name:"NotFound",component:b,options:{title:"Oops!"}}))))):l.a.createElement(l.a.Fragment,null)}},377:function(e,t,n){e.exports=n(449)},39:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return c})),n.d(t,"logout",(function(){return s})),n.d(t,"guestLogin",(function(){return d})),n.d(t,"checkLogin",(function(){return f})),n.d(t,"getUserList",(function(){return m})),n.d(t,"getUserMembershipList",(function(){return p})),n.d(t,"getBoardChannelList",(function(){return b})),n.d(t,"getMessengerChannelList",(function(){return g})),n.d(t,"postChannel",(function(){return h})),n.d(t,"putChannel",(function(){return y})),n.d(t,"deleteChannel",(function(){return v})),n.d(t,"getBoardContentList",(function(){return O})),n.d(t,"postBoard",(function(){return E})),n.d(t,"patchBoard",(function(){return w})),n.d(t,"deleteBoardContent",(function(){return j})),n.d(t,"getMessengerMemberList",(function(){return x})),n.d(t,"postBulkMessengerMember",(function(){return C})),n.d(t,"deleteMessengerMember",(function(){return S})),n.d(t,"getMessengerContentList",(function(){return P})),n.d(t,"postMessage",(function(){return k})),n.d(t,"deleteMessengerContent",(function(){return _})),n.d(t,"defaultOption",(function(){return u}));var r=n(9),a=n.n(r),o=n(367),u={baseURL:"https://blacktokki.com/messenger/",withCredentials:!0},i=o.default.create(u);i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return e.response.status,Promise.reject(e)}));var l=i,c=function(e,t){var n,r;return a.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.endsWith(".guest")&&0==t.length&&(t="guest"),o.next=3,a.a.awrap(l.get("/csrf/"));case 3:return n=o.sent,(r=new FormData).append("csrfmiddlewaretoken",n.data),r.append("username",e),r.append("password",t),r.append("submit","Log in"),o.next=11,a.a.awrap(l.post("/api-auth/login/",r,{headers:{"Content-Type":"multipart/form-data"}}));case 11:if(200!=o.sent.status){o.next=16;break}return o.next=15,a.a.awrap(f());case 15:return o.abrupt("return",o.sent);case 16:case"end":return o.stop()}}),null,null,null,Promise)},s=function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(l.get("/api-auth/logout/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,null,null,Promise)},d=function(){return a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.awrap(c("guest","guest"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),null,null,null,Promise)},f=function(){var e,t;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.a.awrap(l.get("/api/v1/users/memberships/?_self=true"));case 3:if(n.t0=e=n.sent,null!=n.t0){n.next=8;break}n.t1=void 0,n.next=9;break;case 8:n.t1=e.data;case 9:if(!(t=n.t1)||!t.length){n.next=12;break}return n.abrupt("return",t[0]);case 12:return n.abrupt("return",null);case 15:throw n.prev=15,n.t2=n.catch(0),{error:n.t2,isOffline:"ERR_NETWORK"==n.t2.code||n.t2.message&&n.t2.message.startsWith("Cannot read")};case 18:case"end":return n.stop()}}),null,null,[[0,15]],Promise)},m=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.get("/api/v1/users/?group_id="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},p=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.get("/api/v1/users/memberships/?group_id="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},b=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.get("/api/v1/channels/?type=board&group="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},g=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.get("/api/v1/channels/messenger/?type=messenger&messenger_user_id="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},h=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.post("/api/v1/channels/",e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},y=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.put("/api/v1/channels/"+e.id+"/",e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},v=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.delete("/api/v1/channels/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)},O=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.get("/api/v1/boardcontents/?channel="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},E=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.post("/api/v1/boardcontents/boards/",e));case 2:case"end":return t.stop()}}),null,null,null,Promise)},w=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.patch("/api/v1/boardcontents/"+e.id+"/board/",e));case 2:case"end":return t.stop()}}),null,null,null,Promise)},j=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.delete("/api/v1/boardcontents/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)},x=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.get("/api/v1/messengermembers/?channel="+e));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),null,null,null,Promise)},C=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.post("/api/v1/messengermembers/bulk/",{channel:e.channel_id,user_ids:e.user_ids}));case 2:case"end":return t.stop()}}),null,null,null,Promise)},S=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.delete("/api/v1/messengermembers/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)},P=function(e,t){var n;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t?"&id_lt="+t:"",r.next=3,a.a.awrap(l.get("/api/v1/messengercontents/?limit=30&channel="+e+n));case 3:return r.abrupt("return",r.sent.data.results);case 4:case"end":return r.stop()}}),null,null,null,Promise)},k=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.post("/api/v1/messengercontents/messages/",e));case 2:case"end":return t.stop()}}),null,null,null,Promise)},_=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.awrap(l.delete("/api/v1/messengercontents/"+e+"/"));case 2:case"end":return t.stop()}}),null,null,null,Promise)}},391:function(e,t){},40:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"navigate",(function(){return f})),n.d(t,"default",(function(){return m}));var r=n(311),a=n.n(r),o=n(250),u=n(249),i=n(115),l=n(0),c=n(312),s=n(375),d=l.createRef();function f(e,t){var n,r;t&&(null==(n=d.current)||n.navigate(e,t)),null==(r=d.current)||r.navigate(e)}function m(t){var n=t.colorScheme;return l.createElement(o.default,{ref:d,documentTitle:{formatter:function(e,t){return"KIBLACK TOK"}},linking:e.versions&&e.versions.electron?void 0:c.default,theme:"dark"===n?u.default:i.default},l.createElement(s.default,null))}!function(e){if(void 0!==e&&"/"===e.search[1]){var t=e.search.slice(1).split("&").map((function(e){return e.replace(/~and~/g,"&")})).join("?");window.history.replaceState(null,"",e.pathname.slice(0,-1)+t+e.hash)}}(window.location);var p=["ReactNativeFiberHostComponent"],b=a.a.clone(console);console.warn=function(e){var t=!0;e instanceof Object?t=!1:p.forEach((function(n){e.indexOf&&e.indexOf(n)<=-1&&(t=!1)})),t&&b.warn(e)}}.call(this,n(232))},43:function(e,t,n){"use strict";n.r(t),n.d(t,"AuthProvider",(function(){return p}));var r=n(11),a=n.n(r),o=n(4),u=n.n(o),i=n(0),l=n.n(i),c=n(39);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(i.createContext)({auth:{},dispatch:function(){}}),m=function(e,t){switch(t.type){case"LOGIN_REQUEST":return d(d({},e),{},{request:{username:t.username,password:t.password}});case"LOGIN_GUEST":return d(d({},e),{},{request:{username:"guest",password:"guest"}});case"LOGIN_SUCCESS":return d(d({},e),{},{user:t.user,request:void 0});case"LOGIN_FAILED":return d(d({},e),{},{request:void 0});case"LOGOUT_REQUEST":return d(d({},e),{},{request:null});case"LOGOUT_SUCCESS":return d(d({},e),{},{user:null,request:void 0});default:throw new Error("Unhandled action type: "+t.type)}},p=function(e){var t=e.children,n=Object(i.useReducer)(m,{}),r=a()(n,2),o=r[0],u=r[1],s=Object(i.useMemo)((function(){var e,t;return{user:o.user,groupId:null==(e=o.user)||null==(t=e.membership_set.find((function(e){return null==e.root_group_id})))?void 0:t.group}}),[o]);return Object(i.useEffect)((function(){void 0===o.user?Object(c.checkLogin)().then((function(e){u({type:"LOGIN_SUCCESS",user:e})})).catch((function(e){console.log(e),u({type:"LOGOUT_SUCCESS"})})):null===o.user&&o.request?Object(c.login)(o.request.username,o.request.password).then((function(e){u({type:"LOGIN_SUCCESS",user:e})})).catch((function(){u({type:"LOGIN_FAILED"})})):o.user&&null===o.request&&Object(c.logout)().then((function(){return u({type:"LOGOUT_SUCCESS"})}))}),[o]),l.a.createElement(f.Provider,{value:{auth:s,dispatch:u}},t)};t.default=function(){return Object(i.useContext)(f)}},448:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"},52:function(e,t,n){"use strict";n.r(t);t.default={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff"},button:{color:"rgb(242,242,242)",borderColor:"rgba(27,31,36,0.15)",backgroundColor:"#f6f8fa"},borderColor:"#d0d7de",header:"#24292f",focus:"#0065A4"}},53:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),o=n(11),u=n.n(o),i=n(0),l=n.n(i),c=n(27),s=n(1),d=n(144),f=n(52);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=Object(i.useState)(!1),n=u()(t,2),r=n[0],a=n[1];return l.a.createElement(d.default,{onPress:function(){return e.onPress()},onHoverIn:function(){return a(!0)},onHoverOut:function(){return a(!1)},style:[{paddingVertical:5,paddingHorizontal:16},e.style,r?{backgroundColor:e.color}:{}]},l.a.createElement(c.default,{selectable:!1,style:[{fontSize:14},e.textStyle]},e.title))};t.default=function(e){var t=p(p({color:f.default.button.color},e),{},{style:[g.style,e.style],textStyle:[g.text,e.textStyle]});return l.a.createElement(b,t)};var g=s.default.create({style:{borderRadius:6,borderColor:f.default.button.borderColor,borderWidth:1,backgroundColor:f.default.button.backgroundColor},text:{color:"black",textAlign:"center",fontWeight:"600"}})},79:function(e,t,n){"use strict";n.r(t);var r=n(61),a=n.n(r),o=n(22),u=n.n(o),i=n(0),l=n.n(i),c=n(206),s=n(43),d=n(107),f=n(2);t.default=function(e){var t=Object(s.default)().dispatch,n=Object(d.default)(),r=[{title:"logout",onPress:function(){return t({type:"LOGOUT_REQUEST"})}}],o=(e.extra?[].concat(u()(e.extra),r):r).filter((function(e){return e.windowType==n||void 0==e.windowType}));return l.a.createElement(f.default,{style:{flexDirection:"row"}},o.map((function(e,t){return l.a.createElement(c.default,a()({key:t},e,{textStyle:{color:"white"},color:"#gray"}))})))}},82:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i})),n.d(t,"useBoardChannelMutation",(function(){return l}));var r=n(9),a=n.n(r),o=n(34),u=n(39);function i(e){return Object(o.useQuery)(["BoardChannelList",null==e?void 0:e.groupId],(function(){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||!e.groupId){t.next=6;break}return t.next=3,a.a.awrap(Object(u.getBoardChannelList)(null==e?void 0:e.groupId));case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=[];case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),null,null,null,Promise)})).data}function l(){var e=Object(o.useQueryClient)(),t=Object(o.useMutation)(u.postChannel,{onSuccess:function(){return e.invalidateQueries("BoardChannelList")}}),n=Object(o.useMutation)(u.putChannel,{onSuccess:function(){return e.invalidateQueries("BoardChannelList")}}),r=Object(o.useMutation)(u.deleteChannel,{onSuccess:function(){return e.invalidateQueries("BoardChannelList")}});return{create:t.mutateAsync,update:n.mutateAsync,delete:r.mutate}}},98:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d})),n.d(t,"useMessengerChannelMutation",(function(){return f}));var r=n(22),a=n.n(r),o=n(9),u=n.n(o),i=n(0),l=n(34),c=n(39),s=n(136);function d(e){var t=Object(l.useQueryClient)(),n=Object(s.default)().lastJsonMessage,r=Object(l.useQuery)("MessengerChannelList",(function(){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e||null==(t=e.user)||!t.id){n.next=6;break}return n.next=3,u.a.awrap(Object(c.getMessengerChannelList)(e.user.id));case 3:n.t0=n.sent,n.next=7;break;case 6:n.t0=[];case 7:return n.abrupt("return",n.t0);case 8:case"end":return n.stop()}}),null,null,null,Promise)})).data;return Object(i.useEffect)((function(){null!=n&&"enter"==n.type&&t.setQueryData("MessengerChannelList",(function(e){return(null!=e&&e.find((function(e){return e.id==n.data.id}))?e:[n.data].concat(a()(e||[]))).sort((function(e,t){return e.id-t.id}))}))}),[n]),r}function f(){var e=Object(l.useQueryClient)(),t=Object(l.useMutation)(c.postChannel,{onSuccess:function(){return e.invalidateQueries("MessengerChannelList")}}),n=Object(l.useMutation)(c.putChannel,{onSuccess:function(){return e.invalidateQueries("MessengerChannelList")}});return{create:t.mutateAsync,update:n.mutateAsync}}}},[[377,1,2]]]);
//# sourceMappingURL=app.31abcd46.chunk.js.map